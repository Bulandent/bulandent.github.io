<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ã€Œå»ºè®®æ”¶è—ã€é€ä½ ä¸€ä»½ç²¾å¿ƒæ€»ç»“çš„3ä¸‡å­—ES6å®ç”¨æŒ‡å—ï¼ˆå…¨ï¼‰</title>
      <link href="/2020/11/17/es6/"/>
      <url>/2020/11/17/es6/</url>
      
        <content type="html"><![CDATA[<p>å†™æœ¬ç¯‡æ–‡ç« ç›®çš„æ˜¯ä¸ºäº†å¤¯å®åŸºç¡€ï¼ŒåŸºäºé˜®ä¸€å³°è€å¸ˆçš„è‘—ä½œ <a href="https://es6.ruanyifeng.com/">ECMAScript 6 å…¥é—¨</a> ä»¥åŠ <a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md">tc39-finished-proposals</a> è¿™ä¸¤ä¸ªçŸ¥è¯†çº¿è·¯æ€»ç»“æç‚¼å‡ºæ¥çš„é‡ç‚¹å’Œè¦ç‚¹ï¼Œæ¶‰åŠåˆ°ä» <code>ES2015</code> åˆ° <code>ES2021</code> çš„å‡ ä¹æ‰€æœ‰çŸ¥è¯†ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯æŒ‰ç…§ä¸€ä¸ªçŸ¥è¯†ç‚¹é…ä¸Šä¸€æ®µä»£ç çš„å½¢å¼æ¥å±•ç¤ºï¼Œæ‰€ä»¥ç¯‡å¹…è¾ƒé•¿ï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºç¯‡å¹…è¿‡é•¿ï¼Œæ‰€ä»¥å°±æ²¡æŠŠ <code>Stage 2</code> å’Œ <code>Stage 3</code> é˜¶æ®µçš„ææ¡ˆå†™åˆ°è¿™é‡Œï¼Œåç»­ <code>ES2021</code> æ›´æ–°äº†æˆ‘å†åŒæ­¥æ›´æ–°ã€‚</p><blockquote><p>æœ‰ 5 ä¸ªææ¡ˆå·²ç»åˆ—å…¥ Expected Publication Year in 2021 æ‰€ä»¥æœ¬ç¯‡ä¸­æš‚ä¸”æŠŠä»–ä»¬å½’ä¸º ES2021ã€‚</p></blockquote><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202011/es6.png"></p><a id="more"></a><h2 id="ES6å‰è¨€"><a href="#ES6å‰è¨€" class="headerlink" title="ES6å‰è¨€"></a>ES6å‰è¨€</h2><h3 id="å‘å±•å²"><a href="#å‘å±•å²" class="headerlink" title="å‘å±•å²"></a>å‘å±•å²</h3><p>èƒ½å†™å¥½ <code>JS</code> å›ºç„¶æ˜¯é‡è¦çš„ï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªå‰ç«¯ï¼Œæˆ‘ä»¬ä¹Ÿè¦äº†è§£è‡ªå·±æ‰€ä½¿ç”¨è¯­è¨€çš„å‘å±•å†ç¨‹ï¼Œè¿™é‡Œå¼ºçƒˆæ¨èçœ‹ <a href="https://cn.history.js.org/index.html">ã€ŠJavaScript 20å¹´ã€‹</a>ï¼Œæœ¬ä¹¦è¯¦ç»†è®°è½½å’Œè§£è¯»äº†è‡ª 1995 å¹´è¯­è¨€è¯ç”Ÿåˆ° 2015 å¹´ <code>ES6</code> è§„èŒƒåˆ¶å®šä¸ºæ­¢ï¼Œå…±è®¡ 20 å¹´çš„ <code>JavaScript</code> è¯­è¨€æ¼”åŒ–å†ç¨‹ã€‚</p><h3 id="ç‰ˆæœ¬è¯´æ˜"><a href="#ç‰ˆæœ¬è¯´æ˜" class="headerlink" title="ç‰ˆæœ¬è¯´æ˜"></a>ç‰ˆæœ¬è¯´æ˜</h3><p>2011 å¹´ï¼Œå‘å¸ƒäº† <code>ECMAScript 5.1</code> ç‰ˆï¼Œè€Œ 2015 å¹´ 6 æœˆå‘å¸ƒäº† <code>ES6</code> çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬åˆå« <code>ES2015</code>ã€‚<code>ES6</code> å…¶å®æ˜¯ä¸€ä¸ªæ³›æŒ‡ï¼ŒæŒ‡ä»£ 5.1 ç‰ˆæœ¬ä»¥åçš„ä¸‹ä¸€ä»£æ ‡å‡†ã€‚<code>TC39</code> è§„å®šå°†äºæ¯å¹´çš„ 6 æœˆå‘å¸ƒä¸€æ¬¡æ­£å¼ç‰ˆæœ¬ï¼Œç‰ˆæœ¬å·ä»¥å½“å¹´çš„å¹´ä»½ä¸ºå‡†ï¼Œæ¯”å¦‚å½“å‰å·²ç»å‘å¸ƒäº† <code>ES2015</code>ã€<code>ES2016</code>ã€<code>ES2017</code>ã€<code>ES2018</code>ã€<code>ES2019</code>ã€<code>ES2020</code> ç­‰ç‰ˆæœ¬ã€‚</p><h3 id="ææ¡ˆå‘å¸ƒæµç¨‹"><a href="#ææ¡ˆå‘å¸ƒæµç¨‹" class="headerlink" title="ææ¡ˆå‘å¸ƒæµç¨‹"></a>ææ¡ˆå‘å¸ƒæµç¨‹</h3><p>ä»»ä½•äººéƒ½å¯ä»¥å‘ <code>TC39</code> ææ¡ˆï¼Œè¦æ±‚ä¿®æ”¹è¯­è¨€æ ‡å‡†ã€‚ä¸€ç§æ–°çš„è¯­æ³•ä»ææ¡ˆåˆ°å˜æˆæ­£å¼æ ‡å‡†ï¼Œéœ€è¦ç»å†äº”ä¸ªé˜¶æ®µã€‚æ¯ä¸ªé˜¶æ®µçš„å˜åŠ¨éƒ½éœ€è¦ç”± <code>TC39</code> å§”å‘˜ä¼šæ‰¹å‡†ã€‚</p><ul><li><code>Stage 0</code> - <code>Strawperson</code>ï¼ˆå±•ç¤ºé˜¶æ®µï¼‰</li><li><code>Stage 1</code> - <code>Proposal</code>ï¼ˆå¾æ±‚æ„è§é˜¶æ®µï¼‰</li><li><code>Stage 2</code> - <code>Draft</code>ï¼ˆè‰æ¡ˆé˜¶æ®µï¼‰</li><li><code>Stage 3</code> - <code>Candidate</code>ï¼ˆå€™é€‰äººé˜¶æ®µï¼‰</li><li><code>Stage 4</code> - <code>Finished</code>ï¼ˆå®šæ¡ˆé˜¶æ®µï¼‰</li></ul><p>ä¸€ä¸ªææ¡ˆåªè¦èƒ½è¿›å…¥ <code>Stage 2</code>ï¼Œå°±å·®ä¸å¤šè‚¯å®šä¼šåŒ…æ‹¬åœ¨ä»¥åçš„æ­£å¼æ ‡å‡†é‡Œé¢ã€‚<code>ECMAScript</code> å½“å‰çš„æ‰€æœ‰ææ¡ˆï¼Œå¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ <a href="https://github.com/tc39/ecma262">ecma262</a>ã€‚å…³äºææ¡ˆæµç¨‹å¯ä»¥åœ¨è¿™é‡Œ <a href="https://tc39.es/process-document/">TC39_Process</a> çœ‹åˆ°æ›´åŠ è¯¦ç»†çš„ä¿¡æ¯ã€‚</p><h2 id="ES2015"><a href="#ES2015" class="headerlink" title="ES2015"></a>ES2015</h2><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202011/es2015.png"></p><h3 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h3><p><code>const</code>ï¼šå£°æ˜ä¸€ä¸ªå¸¸é‡ï¼Œ<code>let</code>ï¼šå£°æ˜ä¸€ä¸ªå˜é‡ï¼›<code>const/let</code> å£°æ˜çš„å¸¸é‡/å˜é‡éƒ½åªèƒ½ä½œç”¨äºä»£ç å—ï¼ˆå—çº§ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸï¼‰é‡Œï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">&#x27;å¸ƒå…°&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(name)  <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p><code>const/let</code> ä¸å­˜åœ¨å˜é‡æå‡ï¼Œæ‰€ä»¥åœ¨ä»£ç å—é‡Œå¿…é¡»å…ˆå£°æ˜ç„¶åæ‰å¯ä»¥ä½¿ç”¨ï¼Œè¿™å«æš‚æ—¶æ€§æ­»åŒºï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;bubuzou&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    name = <span class="string">&#x27;å¸ƒå…°&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> name</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(name)</span><br></pre></td></tr></table></figure><p><code>const/let</code> ä¸å…è®¸åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸå†…ï¼Œé‡å¤å£°æ˜ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">&#x27;&#x27;</span>  <span class="comment">// SyntaxError</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>const</code> å£°æ˜æ—¶å¿…é¡»åˆå§‹åŒ–ï¼Œä¸”åæœŸä¸èƒ½è¢«ä¿®æ”¹ï¼Œä½†å¦‚æœåˆå§‹åŒ–çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆä¸èƒ½ä¿®æ”¹çš„æ˜¯è¯¥å¯¹è±¡çš„å†…å­˜åœ°å€ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;å¸ƒå…°&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">person.name = <span class="string">&#x27;bubuzou&#x27;</span>  </span><br><span class="line"><span class="built_in">console</span>.log(person.name)  <span class="comment">// &#x27;bubuzou&#x27;</span></span><br><span class="line">person = <span class="string">&#x27;&#x27;</span>  <span class="comment">// TypeError</span></span><br></pre></td></tr></table></figure><p><code>const/let</code> åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜çš„å¸¸é‡/å˜é‡ä¸ä¼šæŒ‚åˆ°é¡¶å±‚å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸­æ˜¯ window ï¼‰çš„å±æ€§ä¸­ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;å¸ƒå…°&#x27;</span></span><br><span class="line"><span class="keyword">let</span> age = <span class="number">12</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.name)  <span class="comment">// &#x27;å¸ƒå…°&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.age)  <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><h3 id="è§£æ„èµ‹å€¼"><a href="#è§£æ„èµ‹å€¼" class="headerlink" title="è§£æ„èµ‹å€¼"></a>è§£æ„èµ‹å€¼</h3><p><strong>è§£æ„ç±»å‹</strong>ï¼š</p><ul><li><p>å­—ç¬¦ä¸²è§£æ„</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c = <span class="string">&#x27;c&#x27;</span>] = <span class="string">&#x27;12&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(a, b, c)  <span class="comment">// &#x27;1&#x27; &#x27;2&#x27; &#x27;c&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>æ•°å€¼è§£æ„</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="attr">toFixed</span>: tf&#125; = <span class="number">10</span></span><br><span class="line"><span class="built_in">console</span>.log( tf.call(<span class="built_in">Math</span>.PI, <span class="number">2</span>) )  <span class="comment">// 3.14</span></span><br></pre></td></tr></table></figure></li><li><p>å¸ƒå°”å€¼è§£æ„</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="attr">toString</span>: ts&#125; = <span class="literal">true</span></span><br><span class="line"><span class="built_in">console</span>.log( ts.call(<span class="literal">false</span>) )  <span class="comment">// &#x27;false&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>æ•°ç»„è§£æ„ï¼šç­‰å·å³ä¾§çš„æ•°æ®å…·æœ‰ <code>Iterator</code> æ¥å£å¯ä»¥è¿›è¡Œæ•°ç»„å½¢å¼çš„è§£æ„èµ‹å€¼ï¼›</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§£æ„ä¸æˆåŠŸçš„å˜é‡å€¼ä¸º undefined</span></span><br><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="built_in">console</span>.log(a, b, c)  <span class="comment">// 1, 2, undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥è®¾ç½®é»˜è®¤å€¼</span></span><br><span class="line"><span class="keyword">let</span> [x, y, z = <span class="number">3</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="literal">null</span>]</span><br><span class="line"><span class="built_in">console</span>.log(x, y, z)  <span class="comment">// 1, 2, null</span></span><br></pre></td></tr></table></figure><blockquote><p>ä»€ä¹ˆæ ·çš„æ•°æ®å…·æœ‰ <code>Iterator</code> æ¥å£å‘¢ï¼Ÿå¦‚æœä¸€ä¸ªå¯¹è±¡èƒ½å¤Ÿé€šè¿‡ [Symbol.iterator] è®¿é—®ï¼Œä¸”èƒ½å¤Ÿè¿”å›ä¸€ä¸ªç¬¦åˆè¿­ä»£å™¨åè®®çš„å¯¹è±¡ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±æ˜¯å¯è¿­ä»£çš„ã€‚ç›®å‰å†…ç½®çš„å¯è¿­ä»£å¯¹è±¡æœ‰ï¼šStringã€Arrayã€TypeArrayã€Mapã€Setã€arguments å’Œ NodeList ç­‰ã€‚</p></blockquote></li><li><p>å¯¹è±¡è§£æ„ï¼šä¸æ•°ç»„æŒ‰ç…§ç´¢å¼•ä½ç½®è¿›è¡Œè§£æ„ä¸åŒï¼Œå¯¹è±¡è§£æ„æ˜¯æŒ‰ç…§å±æ€§åè¿›è¡Œè§£æ„èµ‹å€¼ï¼Œå¦‚æœåœ¨å½“å‰å¯¹è±¡å±æ€§åŒ¹é…ä¸æˆåŠŸåˆ™ä¼šå»å¯¹è±¡çš„åŸå‹å±æ€§ä¸ŠæŸ¥æ‰¾ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é»˜è®¤å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">name</span>: name, <span class="attr">age</span>: age &#125; = &#123; <span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span>, <span class="attr">age</span>: <span class="number">12</span> &#125;</span><br></pre></td></tr></table></figure>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç®€å†™</span></span><br><span class="line"><span class="keyword">let</span> &#123; name, age &#125; = &#123; <span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span>, <span class="attr">age</span>: <span class="number">12</span> &#125;</span><br></pre></td></tr></table></figure>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ”¹åä¸”è®¾ç½®é»˜è®¤å€¼</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">name</span>: name1, <span class="attr">age</span>: age1 = <span class="number">12</span> &#125; = &#123; <span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span> &#125;</span><br><span class="line"><span class="built_in">console</span>.log(name1, age1)  <span class="comment">// &#x27;å¸ƒå…°&#x27; 12</span></span><br></pre></td></tr></table></figure></li><li><p>å‡½æ•°å‚æ•°è§£æ„ï¼šå…¶å®å°±æ˜¯è¿ç”¨ä¸Šé¢çš„å¯¹è±¡è§£æ„å’Œæ•°ç»„è§£æ„è§„åˆ™ï¼›</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params">&#123;x = <span class="number">0</span>, y = <span class="number">0</span>&#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log([x, y])</span><br><span class="line">    <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line">move(&#123;<span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span>&#125;)  <span class="comment">// [3, 8]</span></span><br><span class="line">move(&#123;<span class="attr">x</span>: <span class="number">3</span>&#125;)        <span class="comment">// [3, 0]</span></span><br><span class="line">move(&#123;&#125;)            <span class="comment">// [0, 0]</span></span><br><span class="line">move()              <span class="comment">// [0, 0]</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>è§£æ„è¦ç‚¹</strong>ï¼š</p><ul><li>åªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼ˆåŒæ˜¯å¯¹è±¡æˆ–åŒæ˜¯æ•°ç»„ï¼‰ï¼Œåˆ™å·¦è¾¹çš„å˜é‡ä¼šè¢«èµ‹äºˆå¯¹åº”çš„å€¼ï¼›</li><li>è§£æ„ä¸æˆåŠŸçš„å˜é‡å€¼ä¸º <code>undefined</code>ï¼›</li><li>é»˜è®¤å€¼ç”Ÿæ•ˆçš„å‰ææ˜¯å½“ç­‰å·å³è¾¹å¯¹åº”çš„å€¼å…¨ç­‰äº undefined çš„æ—¶å€™ï¼›</li><li>åªè¦ç­‰å·å³è¾¹çš„å€¼ä¸æ˜¯å¯¹è±¡æˆ–è€…æ•°ç»„ï¼Œåˆ™ä¼šè¿›è¡Œè‡ªåŠ¨è£…ç®±å°†å…¶è½¬æˆå¯¹è±¡ï¼›</li><li><code>null</code> å’Œ <code>undefined</code> éƒ½æ— æ³•è½¬æˆå¯¹è±¡ï¼Œæ‰€ä»¥æ— æ³•è§£æ„ã€‚</li></ul><p><strong>è§£æ„åº”ç”¨</strong>ï¼š</p><ul><li><p>äº¤æ¢å˜é‡çš„å€¼ï¼›</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>, y = <span class="number">2</span>;</span><br><span class="line">[x, y] = [y, x]</span><br><span class="line"><span class="built_in">console</span>.log(x, y)  <span class="comment">// 2 1</span></span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡å‡½æ•°è¿”å›å¯¹è±¡å±æ€§</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getParams</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        name: <span class="string">&#x27;å¸ƒå…°&#x27;</span>,</span><br><span class="line">        age: <span class="number">12</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;name, age&#125; = getParams()</span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡å®šä¹‰å‡½æ•°å‚æ•°æ¥å£°æ˜å˜é‡</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;å¸ƒå…°&#x27;</span>,</span><br><span class="line">    age: <span class="number">12</span></span><br><span class="line">&#125;</span><br><span class="line">init(person)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ™®é€šç”¨æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params">person</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;name, age&#125; = person</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´ç®€æ´ç”¨æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params">&#123;name, age&#125;</span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>æŒ‡å®šå‡½æ•°å‚æ•°é»˜è®¤å€¼</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initPerson</span>(<span class="params">&#123;name = <span class="string">&#x27;å¸ƒå…°&#x27;</span>, age = <span class="number">12</span>&#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name, age)</span><br><span class="line">&#125;</span><br><span class="line">initPerson()  <span class="comment">// &#x27;å¸ƒå…°&#x27; 12</span></span><br><span class="line">initPerson(&#123;<span class="attr">age</span>: <span class="number">20</span>&#125;)  <span class="comment">// &#x27;å¸ƒå…°&#x27; 20</span></span><br></pre></td></tr></table></figure></li><li><p>æå– <code>JSON</code> æ•°æ®</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> responseData = &#123;</span><br><span class="line">    code: <span class="number">1000</span>,</span><br><span class="line">    data: &#123;&#125;,</span><br><span class="line">    message: <span class="string">&#x27;success&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; code, data = &#123;&#125; &#125; = responseData</span><br></pre></td></tr></table></figure></li><li><p>éå† Map ç»“æ„</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">map.set(<span class="string">&#x27;beijing&#x27;</span>, <span class="string">&#x27;åŒ—äº¬&#x27;</span>)</span><br><span class="line">map.set(<span class="string">&#x27;xiamen&#x27;</span>, <span class="string">&#x27;å¦é—¨&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key, value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¾“å…¥æ¨¡å—çš„æŒ‡å®šæ–¹æ³•å’Œå±æ€§</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; readFile, writeFile &#125; = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul><h3 id="å­—ç¬¦ä¸²æ‰©å±•"><a href="#å­—ç¬¦ä¸²æ‰©å±•" class="headerlink" title="å­—ç¬¦ä¸²æ‰©å±•"></a>å­—ç¬¦ä¸²æ‰©å±•</h3><ul><li><p>å¯ä»¥ä½¿ç”¨ <code>Unicode</code> ç¼–ç æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥ä¸‹å†™æ³•éƒ½å¯ä»¥ç”¨æ¥è¡¨ç¤ºå­—ç¬¦ z</span></span><br><span class="line"><span class="string">&#x27;\z&#x27;</span>      <span class="comment">// è½¬ä¹‰</span></span><br><span class="line"><span class="string">&#x27;\172&#x27;</span>    <span class="comment">// åè¿›åˆ¶è¡¨ç¤ºæ³•</span></span><br><span class="line"><span class="string">&#x27;\x7A&#x27;</span>    <span class="comment">// åå…­è¿›åˆ¶è¡¨ç¤ºæ³•</span></span><br><span class="line"><span class="string">&#x27;\u007A&#x27;</span>  <span class="comment">// Unicode æ™®é€šè¡¨ç¤ºæ³•</span></span><br><span class="line"><span class="string">&#x27;\u&#123;7A&#125;&#x27;</span>  <span class="comment">// Unicode å¤§æ‹¬å·è¡¨ç¤ºæ³•</span></span><br></pre></td></tr></table></figure><blockquote><p><a href="https://www.52unicode.com/">www.52unicode.com</a> è¿™ä¸ªç½‘ç«™å¯ä»¥æŸ¥è¯¢åˆ°å¸¸è§ç¬¦å·çš„ Unicode ç¼–ç ã€‚</p></blockquote></li><li><p>å¯ä»¥ä½¿ç”¨ <code>for...of</code> <strong>æ­£ç¡®éå†</strong>å­—ç¬¦ä¸²ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;ğŸ˜€ğŸ¤£ğŸ˜œğŸ˜ğŸ¤—ğŸ¤”&#x27;</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> emoji <span class="keyword">of</span> str) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(emoji) <span class="comment">// ğŸ˜€ğŸ¤£ğŸ˜œğŸ˜ğŸ¤—ğŸ¤”</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>, l = str.length; i &lt; l; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(str[i])  <span class="comment">// ä¸èƒ½æ­£ç¡®è¾“å‡ºè¡¨æƒ…</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ¨¡æ¿å­—ç¬¦ä¸²ä½¿ç”¨ä¸¤ä¸ªåå¼•å·æ ‡è¯†ï¼ˆ``ï¼‰ï¼Œå¯ä»¥ç”¨æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæˆ–è€…ä½¿ç”¨å®ƒåœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥å˜é‡ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;hero&#x27;</span></span><br><span class="line"><span class="keyword">let</span> tips = <span class="string">`Hello <span class="subst">$&#123;name&#125;</span>, </span></span><br><span class="line"><span class="string">    welcome to my world.`</span></span><br><span class="line">alert( tips )</span><br></pre></td></tr></table></figure></li><li><p>æ ‡ç­¾æ¨¡æ¿ï¼šåœ¨å‡½æ•°ååé¢æ¥ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ç›¸å½“äºç»™å‡½æ•°ä¼ å…¥äº†å‚æ•°è¿›è¡Œè°ƒç”¨ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;å¸ƒå…°&#x27;</span>, age = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> tips = parse<span class="string">`Hello <span class="subst">$&#123;name&#125;</span>, are you <span class="subst">$&#123;age&#125;</span> years old this year?`</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parse</span>(<span class="params">stringArr, ...variable</span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›¸å½“äºä¼ é€’å¦‚ä¸‹å‚æ•°è¿›è¡Œè°ƒç”¨ parse å‡½æ•°</span></span><br><span class="line">parse([<span class="string">&quot;Hello &quot;</span>, <span class="string">&quot;, are you &quot;</span>, <span class="string">&quot; years old this year?&quot;</span>], name, age)</span><br></pre></td></tr></table></figure></li><li><p><code>String.fromCodePoint()</code> ç”¨äºä» <code>Unicode</code> ç ç‚¹è¿”å›å¯¹åº”å­—ç¬¦ï¼Œå¯ä»¥æ”¯æŒ <code>0xFFFF</code> çš„ç ç‚¹ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.fromCharCode(<span class="number">0x1f600</span>)   <span class="comment">// &quot;ï˜€&quot;</span></span><br><span class="line"><span class="built_in">String</span>.fromCodePoint(<span class="number">0x1f600</span>)  <span class="comment">// &quot;ğŸ˜€&quot;</span></span><br></pre></td></tr></table></figure></li><li><p><code>String.raw()</code> è¿”å›æŠŠå­—ç¬¦ä¸²æ‰€æœ‰å˜é‡æ›¿æ¢ä¸”å¯¹æ–œæ è¿›è¡Œè½¬ä¹‰çš„ç»“æœï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.raw<span class="string">`Hi\n<span class="subst">$&#123;<span class="number">2</span>+<span class="number">3</span>&#125;</span>!`</span>  <span class="comment">// &quot;Hi\n5!&quot;</span></span><br></pre></td></tr></table></figure></li><li><p><code>codePointAt()</code> è¿”å›å­—ç¬¦çš„åè¿›åˆ¶ç ç‚¹ï¼Œå¯¹äº <code>Unicode</code> å¤§äº <code>0xFFFF</code> çš„å­—ç¬¦ï¼Œä¼šè¢«è®¤ä¸ºæ˜¯2ä¸ªå­—ç¬¦ï¼Œåè¿›åˆ¶ç ç‚¹è½¬æˆåå…­è¿›åˆ¶å¯ä»¥ä½¿ç”¨ <code>toString(16)</code>ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> emoji = <span class="string">&#x27;ğŸ¤£&#x27;</span></span><br><span class="line">emoji.length  <span class="comment">// 2</span></span><br><span class="line">emoji.charCodeAt(<span class="number">0</span>).toString(<span class="number">16</span>)  <span class="comment">// &#x27;d83d&#x27;</span></span><br><span class="line">emoji.charCodeAt(<span class="number">1</span>).toString(<span class="number">16</span>)  <span class="comment">// &#x27;de00&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span>.fromCodePoint(<span class="number">0xd83d</span>, <span class="number">0xde00</span>) === <span class="string">&#x27;ğŸ¤£&#x27;</span>  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p><code>normalize()</code> æ–¹æ³•ä¼šæŒ‰ç…§æŒ‡å®šçš„ä¸€ç§ <code>Unicode</code> æ­£è§„å½¢å¼å°†å½“å‰å­—ç¬¦ä¸²æ­£è§„åŒ–ã€‚ï¼ˆå¦‚æœè¯¥å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™é¦–å…ˆå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str1 = <span class="string">&#x27;\u00F1&#x27;</span></span><br><span class="line"><span class="keyword">let</span> str2 = <span class="string">&#x27;\u006E\u0303&#x27;</span></span><br><span class="line"></span><br><span class="line">str1  <span class="comment">//  Ã±</span></span><br><span class="line">str2  <span class="comment">//  Ã±</span></span><br><span class="line">str1 === str2  <span class="comment">// false</span></span><br><span class="line">str1.length === str2.length  <span class="comment">// false</span></span><br><span class="line">str1.normalize() === str2.normalize()  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p>å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å­ä¸²ï¼š</p><ul><li><p>includes()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸²ã€‚</p></li><li><p>startsWith()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å¤´éƒ¨ã€‚</p></li><li><p>endsWith()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;Hello world!&#x27;</span></span><br><span class="line"></span><br><span class="line">s.includes(<span class="string">&#x27;o&#x27;</span>)        <span class="comment">// true</span></span><br><span class="line">s.startsWith(<span class="string">&#x27;Hello&#x27;</span>)  <span class="comment">// true</span></span><br><span class="line">s.endsWith(<span class="string">&#x27;!&#x27;</span>)        <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºå¼€å§‹æœç´¢çš„ä½ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;Hello world!&#x27;</span></span><br><span class="line"></span><br><span class="line">s.includes(<span class="string">&#x27;Hello&#x27;</span>, <span class="number">6</span>)   <span class="comment">// false</span></span><br><span class="line">s.startsWith(<span class="string">&#x27;world&#x27;</span>, <span class="number">6</span>) <span class="comment">// true</span></span><br><span class="line">s.endsWith(<span class="string">&#x27;Hello&#x27;</span>, <span class="number">5</span>)   <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•° <code>n</code> æ—¶ï¼Œ<code>endsWith</code> çš„è¡Œä¸ºä¸å…¶ä»–ä¸¤ä¸ªæ–¹æ³•æœ‰æ‰€ä¸åŒã€‚å®ƒé’ˆå¯¹å‰ <code>n</code> ä¸ªå­—ç¬¦ï¼Œè€Œå…¶ä»–ä¸¤ä¸ªæ–¹æ³•é’ˆå¯¹ä»ç¬¬ <code>n</code> ä¸ªä½ç½®ç›´åˆ°å­—ç¬¦ä¸²ç»“æŸã€‚</p></li></ul></li><li><p><code>repeat(n)</code> å°†å½“å‰å­—ç¬¦ä¸²é‡å¤ <code>n</code> æ¬¡åï¼Œè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;x&#x27;</span>.repeat(<span class="number">2</span>)         <span class="comment">// &#x27;xx&#x27;</span></span><br><span class="line"><span class="string">&#x27;x&#x27;</span>.repeat(<span class="number">1.9</span>)       <span class="comment">// &#x27;x&#x27;</span></span><br><span class="line"><span class="string">&#x27;x&#x27;</span>.repeat(<span class="literal">NaN</span>)       <span class="comment">// &#x27;&#x27;</span></span><br><span class="line"><span class="string">&#x27;x&#x27;</span>.repeat(<span class="literal">undefined</span>) <span class="comment">// &#x27;&#x27;</span></span><br><span class="line"><span class="string">&#x27;x&#x27;</span>.repeat(<span class="string">&#x27;2a&#x27;</span>)      <span class="comment">// &#x27;&#x27;</span></span><br><span class="line"><span class="string">&#x27;x&#x27;</span>.repeat(<span class="number">-0.6</span>)      <span class="comment">// &#x27;&#x27;ï¼Œè§£é‡Šï¼š0 ~ 1 ä¹‹é—´çš„å°æ•°ç›¸å½“äº 0</span></span><br><span class="line"><span class="string">&#x27;x&#x27;</span>.repeat(<span class="number">-2</span>)        <span class="comment">// RangeError</span></span><br><span class="line"><span class="string">&#x27;x&#x27;</span>.repeat(<span class="literal">Infinity</span>)  <span class="comment">// RangeError</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="æ•°å€¼æ‰©å±•"><a href="#æ•°å€¼æ‰©å±•" class="headerlink" title="æ•°å€¼æ‰©å±•"></a>æ•°å€¼æ‰©å±•</h3><ul><li><p>äºŒè¿›åˆ¶ï¼ˆ0bï¼‰å’Œå…«è¿›åˆ¶ï¼ˆ0oï¼‰è¡¨ç¤ºæ³•ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">100</span></span><br><span class="line"><span class="keyword">let</span> b = num.toString(<span class="number">2</span>)  <span class="comment">// äºŒè¿›åˆ¶çš„100ï¼š1100100</span></span><br><span class="line"><span class="keyword">let</span> o = num.toString(<span class="number">8</span>)  <span class="comment">// å…«è¿›åˆ¶çš„100ï¼š144</span></span><br><span class="line"><span class="number">0b1100100</span> === <span class="number">100</span>        <span class="comment">// true</span></span><br><span class="line"><span class="number">0o144</span> === <span class="number">100</span>            <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p><code>Number.isFinite()</code> åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦æ˜¯æœ‰é™çš„æ•°ï¼Œå…¥å‚å¦‚æœä¸æ˜¯æ•°å€¼ä¸€å¾‹è¿”å› <code>false</code>ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>.isFinite(<span class="number">-2.9</span>)      <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="literal">NaN</span>)       <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="string">&#x27;&#x27;</span>)        <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="literal">false</span>)     <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="literal">Infinity</span>)  <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p><code>Number.isNaN()</code> åˆ¤æ–­ä¸€ä¸ªæ•°å€¼æ˜¯å¦ä¸º <code>NaN</code>ï¼Œå¦‚æœå…¥å‚ä¸æ˜¯ <code>NaN</code> é‚£ç»“æœéƒ½æ˜¯ <code>false</code>ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>.isNaN(<span class="literal">NaN</span>)       <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="string">&#x27;a&#x27;</span>/<span class="number">0</span>)  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="string">&#x27;NaN&#x27;</span>)  <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p>æ•°å€¼è½¬åŒ–ï¼š<code>Number.parseInt()</code> å’Œ <code>Number.parseFloat()</code>ï¼Œéä¸¥æ ¼è½¬åŒ–ï¼Œä»å·¦åˆ°å³è§£æå­—ç¬¦ä¸²ï¼Œé‡åˆ°éæ•°å­—å°±åœæ­¢è§£æï¼Œå¹¶ä¸”æŠŠè§£æçš„æ•°å­—è¿”å›ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;12a&#x27;</span>)  <span class="comment">// 12</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;a12&#x27;</span>)  <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;&#x27;</span>)  <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;0xA&#x27;</span>)  <span class="comment">// 10ï¼Œ0xå¼€å¤´çš„å°†ä¼šè¢«å½“æˆåå…­è¿›åˆ¶æ•°</span></span><br></pre></td></tr></table></figure><p>  <code>parseInt()</code> é»˜è®¤æ˜¯ç”¨åè¿›åˆ¶å»è§£æå­—ç¬¦ä¸²çš„ï¼Œå…¶å®ä»–æ˜¯æ”¯æŒä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°çš„ï¼Œè¡¨ç¤ºè¦ä»¥å¤šå°‘è¿›åˆ¶çš„ åŸºæ•°å»è§£æç¬¬ä¸€ä¸ªå‚æ•°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;1010&#x27;</span>, <span class="number">2</span>)  <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;ff&#x27;</span>, <span class="number">16</span>)  <span class="comment">// 255</span></span><br></pre></td></tr></table></figure><p>  å‚è€ƒï¼š<a href="https://juejin.im/post/6855129005121765390#heading-13">parseInt</a></p></li><li><p><code>Number.isInteger()</code> åˆ¤æ–­ä¸€ä¸ªæ•°å€¼æ˜¯å¦ä¸ºæ•´æ•°ï¼Œå…¥å‚ä¸ºéæ•°å€¼åˆ™ä¸€å®šè¿”å› <code>false</code>ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>.isInteger(<span class="number">25</span>)   <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isInteger(<span class="number">25.0</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isInteger()     <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isInteger(<span class="literal">null</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isInteger(<span class="string">&#x27;15&#x27;</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isInteger(<span class="literal">true</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isInteger(<span class="number">3.0000000000000002</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœå¯¹æ•°æ®ç²¾åº¦çš„è¦æ±‚è¾ƒé«˜ï¼Œä¸å»ºè®®ä½¿ç”¨ Number.isInteger() åˆ¤æ–­ä¸€ä¸ªæ•°å€¼æ˜¯å¦ä¸ºæ•´æ•°ã€‚</p></blockquote></li><li><p><code>Number.EPSILON</code> è¡¨ç¤ºä¸€ä¸ªå¯æ¥å—çš„æœ€å°è¯¯å·®èŒƒå›´ï¼Œé€šå¸¸ç”¨äºæµ®ç‚¹æ•°è¿ç®—ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.1</span> + <span class="number">0.2</span> === <span class="number">0.3</span>  <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Math</span>.abs(<span class="number">0.1</span> + <span class="number">0.2</span> - <span class="number">0.3</span>) &lt; <span class="built_in">Number</span>.EPSILON  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p><code>Number.isSafeInteger()</code> ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦åœ¨æœ€å¤§å®‰å…¨æ•´æ•°ï¼ˆ<code>Number.MAX_SAFE_INTEGER</code>ï¼‰å’Œæœ€å°å®‰å…¨æ•´æ•°ï¼ˆ<code>Number.MIN_SAFE_INTEGER</code>ï¼‰ä¹‹é—´ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>.MAX_SAFE_INTEGER === <span class="number">2</span> ** <span class="number">53</span> <span class="number">-1</span>        <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.MAX_SAFE_INTEGER === <span class="number">9007199254740991</span>  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.MIN_SAFE_INTEGER === -<span class="built_in">Number</span>.MAX_SAFE_INTEGER  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isSafeInteger(<span class="number">2</span>)         <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isSafeInteger(<span class="string">&#x27;2&#x27;</span>)       <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isSafeInteger(<span class="literal">Infinity</span>)  <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p><code>Math.trunc()</code>ï¼šè¿”å›æ•°å€¼æ•´æ•°éƒ¨åˆ†</p></li><li><p><code>Math.sign()</code>ï¼šè¿”å›æ•°å€¼ç±»å‹(æ­£æ•° 1ã€è´Ÿæ•° -1ã€é›¶ 0)</p></li><li><p><code>Math.cbrt()</code>ï¼šè¿”å›æ•°å€¼ç«‹æ–¹æ ¹</p></li><li><p><code>Math.clz32()</code>ï¼šè¿”å›æ•°å€¼çš„ 32 ä½æ— ç¬¦å·æ•´æ•°å½¢å¼</p></li><li><p><code>Math.imul()</code>ï¼šè¿”å›ä¸¤ä¸ªæ•°å€¼ç›¸ä¹˜</p></li><li><p><code>Math.fround()</code>ï¼šè¿”å›æ•°å€¼çš„ 32 ä½å•ç²¾åº¦æµ®ç‚¹æ•°å½¢å¼</p></li><li><p><code>Math.hypot()</code>ï¼šè¿”å›æ‰€æœ‰æ•°å€¼å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹</p></li><li><p><code>Math.expm1()</code>ï¼šè¿”å› <code>e^n - 1</code></p></li><li><p><code>Math.log1p()</code>ï¼šè¿”å› 1 + n çš„è‡ªç„¶å¯¹æ•°(<code>Math.log(1 + n)</code>)</p></li><li><p><code>Math.log10()</code>ï¼šè¿”å›ä»¥ 10 ä¸ºåº•çš„ n çš„å¯¹æ•°</p></li><li><p><code>Math.log2()</code>ï¼šè¿”å›ä»¥ 2 ä¸ºåº•çš„nçš„å¯¹æ•°</p></li><li><p><code>Math.sinh()</code>ï¼šè¿”å› n çš„åŒæ›²æ­£å¼¦</p></li><li><p><code>Math.cosh()</code>ï¼šè¿”å› n çš„åŒæ›²ä½™å¼¦</p></li><li><p><code>Math.tanh()</code>ï¼šè¿”å› n çš„åŒæ›²æ­£åˆ‡</p></li><li><p><code>Math.asinh()</code>ï¼šè¿”å› n çš„ååŒæ›²æ­£å¼¦</p></li><li><p><code>Math.acosh()</code>ï¼šè¿”å› n çš„ååŒæ›²ä½™å¼¦</p></li><li><p><code>Math.atanh()</code>ï¼šè¿”å› n çš„ååŒæ›²æ­£åˆ‡</p></li></ul><h3 id="æ•°ç»„æ‰©å±•"><a href="#æ•°ç»„æ‰©å±•" class="headerlink" title="æ•°ç»„æ‰©å±•"></a>æ•°ç»„æ‰©å±•</h3><ul><li><p>æ•°ç»„æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰å°†æ•°ç»„å±•å¼€æˆç”¨é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—ï¼Œåªèƒ½å±•å¼€ä¸€å±‚æ•°ç»„ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åº”ç”¨ä¸€ï¼šå‡½æ•°ä¼ å‚</span></span><br><span class="line"><span class="built_in">Math</span>.max(...[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])  <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åº”ç”¨äºŒï¼šæ•°ç»„åˆå¹¶</span></span><br><span class="line"><span class="keyword">let</span> merge = [...[<span class="number">1</span>, <span class="number">2</span>], ...[<span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>, <span class="number">6</span>]  <span class="comment">// 1, 2, 3, 4, 5, 6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åº”ç”¨ä¸‰ï¼šæµ…å…‹éš†</span></span><br><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> clone = [...a]</span><br><span class="line">a === clone  <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åº”ç”¨å››ï¼šæ•°ç»„è§£æ„</span></span><br><span class="line"><span class="keyword">const</span> [x, ...y] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">x  <span class="comment">// 1</span></span><br><span class="line">y  <span class="comment">// [2, 3]</span></span><br></pre></td></tr></table></figure></li><li><p><code>Array.from()</code> å¯ä»¥å°†ç±»æ•°ç»„å¯¹è±¡ï¼ˆ <code>NodeList</code>ï¼Œ<code>arguments</code>ï¼‰å’Œå¯è¿­ä»£å¯¹è±¡è½¬æˆæ•°ç»„ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åº”ç”¨ä¸€ï¼šå­—ç¬¦ä¸²è½¬æ•°ç»„</span></span><br><span class="line"><span class="built_in">Array</span>.from(<span class="string">&#x27;foo&#x27;</span>)  <span class="comment">// [&#x27;f&#x27;, &#x27;o&#x27;, &#x27;o&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åº”ç”¨äºŒï¼šæ•°ç»„åˆå¹¶å»é‡</span></span><br><span class="line"><span class="keyword">let</span> merge = [...[<span class="number">1</span>, <span class="number">2</span>], ...[<span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line"><span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(merge))  <span class="comment">// [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åº”ç”¨ä¸‰ï¼šarguments è½¬æ•°ç»„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line">f(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)  <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>  å¦‚æœ <code>Array.from()</code> å¸¦ç¬¬äºŒä¸ªå‚æ•° <code>mapFn</code>ï¼Œå°†å¯¹ç”Ÿæˆçš„æ–°æ•°ç»„æ‰§è¡Œä¸€æ¬¡ <code>map</code> æ“ä½œï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="function">(<span class="params">x</span>) =&gt;</span> x * x )    <span class="comment">// [1, 4, 9]</span></span><br><span class="line"><span class="built_in">Array</span>.from(&#123;<span class="attr">length</span>: <span class="number">3</span>&#125;, <span class="function">(<span class="params">v, i</span>) =&gt;</span> ++i)  <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure></li><li><p><code>Array.of()</code> å°†ä¸€ç»„å‚æ•°è½¬æˆæ•°ç»„ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)  <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»ä¼¼äº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">arrayOf</span>(<span class="params">...params</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [].slice.call(params)</span><br><span class="line">&#125;</span><br><span class="line">arrayOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)  <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure></li><li><p><code>Array.copyWithin()</code> åœ¨å½“å‰æ•°ç»„å†…éƒ¨ï¼Œå°†åˆ¶å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®ï¼ˆä¼šè¦†ç›–åŸæ¥ä½ç½®çš„æˆå‘˜ï¼‰ï¼Œæœ€åè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚æ¥æ”¶ 3 ä¸ªå‚æ•°ï¼Œå‚æ•°ä¸ºè´Ÿæ•°è¡¨ç¤ºå³è¾¹å¼€å§‹è®¡ç®—ï¼š</p><ul><li><p><code>target</code>ï¼ˆå¿…é€‰ï¼‰ï¼šæ›¿æ¢ä½ç½®çš„ç´¢å¼•ï¼›</p></li><li><p><code>start</code>ï¼ˆå¯é€‰ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹è¯»å–æ•°æ®ï¼Œé»˜è®¤ä¸º 0ï¼›</p></li><li><p><code>end</code>ï¼ˆå¯é€‰ï¼‰ï¼šä»è¯¥ä½ç½®ç»“æŸè¯»å–æ•°æ®ï¼ˆä¸åŒ…æ‹¬è¯¥ä½ç½®çš„æ•°æ®ï¼‰ï¼Œé»˜è®¤ä¸ºåŸæ•°ç»„é•¿åº¦ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">-1</span>)         <span class="comment">// [1, 2, 3, 4, 1]</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">1</span>)          <span class="comment">// [1, 1, 2, 3, 4]</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>)    <span class="comment">// [4, 2, 3, 4, 5]</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">-3</span>, <span class="number">-1</span>)  <span class="comment">// [3, 4, 3, 4, 5]</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå‡ºç°çš„å­æˆå‘˜ï¼š<code>find()</code> å’Œ <code>findIndex()</code>ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰¾å‡ºç¬¬ä¸€ä¸ªå¶æ•°</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">6</span>, <span class="number">9</span>].find(<span class="function">(<span class="params">val, index, arr</span>) =&gt;</span> val % <span class="number">2</span> === <span class="number">0</span>)       <span class="comment">// 6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾å‡ºç¬¬ä¸€ä¸ªå¶æ•°çš„ç´¢å¼•ä½ç½®</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">6</span>, <span class="number">9</span>].findIndex(<span class="function">(<span class="params">val, index, arr</span>) =&gt;</span> val % <span class="number">2</span> === <span class="number">0</span>)  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></li><li><p><code>fill()</code> ä½¿ç”¨ç»™å®šçš„å€¼æ¥å¡«å……æ•°ç»„ï¼Œæœ‰ 3 ä¸ªå‚æ•°ï¼š</p><ul><li><p><code>value</code>ï¼šå¡«å……å€¼ï¼›</p></li><li><p><code>start</code>ï¼ˆå¯é€‰ï¼‰ï¼Œå¼€å§‹ç´¢å¼•ï¼Œé»˜è®¤ä¸º 0ï¼›</p></li><li><p><code>end</code>ï¼ˆå¯é€‰ï¼‰ï¼šç»“æŸç´¢å¼•ï¼Œé»˜è®¤ä¸ºæ•°ç»„é•¿åº¦ï¼Œä¸åŒ…æ‹¬è¯¥ç´¢å¼•ä½ç½®çš„å€¼ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–ç©ºæ•°ç»„</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>).fill(<span class="number">1</span>)  <span class="comment">// [1, 1, 1]</span></span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>].fill(<span class="string">&#x27;a&#x27;</span>, <span class="number">2</span>, <span class="number">4</span>)  <span class="comment">// [1, 2, &#x27;a&#x27;, &#x27;a&#x27;]</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>é€šè¿‡ <code>keys()</code>ï¼ˆé”®åï¼‰ã€<code>entries()</code>ï¼ˆé”®å€¼ï¼‰å’Œ <code>values()</code>ï¼ˆé”®å€¼å¯¹ï¼‰ è·å–æ•°ç»„è¿­ä»£å™¨å¯¹è±¡ï¼Œå¯ä»¥è¢« <code>for...of</code> è¿­ä»£ï¼Œ</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> arr.keys()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x)  <span class="comment">// 1, 2, 3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> arr.values()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(v)  <span class="comment">// &#x27;a&#x27; &#x27;b&#x27; &#x27;c&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> e <span class="keyword">of</span> arr.entries()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e)  <span class="comment">// [0, &#x27;a&#x27;] [0, &#x27;b&#x27;] [0, &#x27;c&#x27;]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ•°ç»„ç©ºä½ï¼Œæ˜¯æŒ‡æ•°ç»„æ²¡æœ‰å€¼ï¼Œæ¯”å¦‚ï¼š<code>[,,]</code>ï¼Œè€Œåƒè¿™ç§ <code>[undefined]</code> æ˜¯ä¸åŒ…å«ç©ºä½çš„ã€‚ç”±äº <code>ES6</code> ä¹‹å‰çš„ä¸€äº› <code>API</code> å¯¹ç©ºä½çš„å¤„ç†è§„åˆ™å¾ˆä¸ä¸€è‡´ï¼Œæ‰€ä»¥å®é™…æ“ä½œçš„æ—¶å€™åº”è¯¥å°½é‡é¿å…ç©ºä½çš„å‡ºç°ï¼Œè€Œä¸ºäº†æ”¹å˜è¿™ä¸ªç°çŠ¶ï¼Œ<code>ES6</code> çš„ <code>API</code> ä¼šé»˜è®¤å°†ç©ºä½å¤„ç†æˆ <code>undefined</code>ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[...[<span class="number">1</span>, , <span class="number">3</span>].values()]  <span class="comment">// [1, undefined, 3]</span></span><br><span class="line">[<span class="number">1</span>, , <span class="number">3</span>].findIndex(<span class="function"><span class="params">x</span> =&gt;</span> x === <span class="literal">undefined</span>)  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="å¯¹è±¡æ‰©å±•"><a href="#å¯¹è±¡æ‰©å±•" class="headerlink" title="å¯¹è±¡æ‰©å±•"></a>å¯¹è±¡æ‰©å±•</h3><ul><li><p>å¯¹è±¡å±æ€§ç®€å†™ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;å¸ƒå…°&#x27;</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    name,</span><br><span class="line">    getName() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> person1 = &#123;</span><br><span class="line">    name: <span class="string">&#x27;å¸ƒå…°&#x27;</span>,</span><br><span class="line">    getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å±æ€§åè¡¨è¾¾å¼ï¼šåœ¨ç”¨å¯¹è±¡å­—é¢é‡å®šä¹‰å¯¹è±¡çš„æ—¶å€™ï¼Œå…è®¸é€šè¿‡å±æ€§åè¡¨è¾¾å¼æ¥å®šä¹‰å¯¹è±¡å±æ€§ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;name&#x27;</span>, </span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    [name]: <span class="string">&#x27;å¸ƒå…°&#x27;</span>,</span><br><span class="line">    [<span class="string">&#x27;get&#x27;</span>+ name]()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ–¹æ³•çš„ <code>name</code> å±æ€§ï¼Œå­˜åœ¨å¥½å‡ ç§æƒ…å†µï¼Œè¿™é‡Œä»…åˆ—å‡ºå¸¸è§çš„å‡ ç§ï¼š</p><p>  æƒ…å†µä¸€ï¼šæ™®é€šå¯¹è±¡æ–¹æ³•çš„ <code>name</code> å±æ€§ç›´æ¥è¿”å›æ–¹æ³•åï¼Œå‡½æ•°å£°æ˜äº¦æ˜¯å¦‚æ­¤ï¼Œå‡½æ•°è¡¨è¾¾å¼è¿”å›å˜é‡åï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    hi()&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">person.hi.name  <span class="comment">// &#x27;hi&#x27;</span></span><br></pre></td></tr></table></figure><p>  æƒ…å†µäºŒï¼šæ„é€ å‡½æ•°çš„ <code>name</code> ä¸º <code>anonymous</code>ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">new</span> <span class="built_in">Function</span>).name  <span class="comment">// &#x27;anonymous&#x27;</span></span><br></pre></td></tr></table></figure><p>  æƒ…å†µä¸‰ï¼šç»‘å®šå‡½æ•°çš„ <code>name</code> å°†ä¼šåœ¨å‡½æ•°åå‰åŠ ä¸Š <code>bound</code>ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125; </span><br><span class="line">foo.bind(&#123;&#125;).name  <span class="comment">// &#x27;bound foo&#x27;</span></span><br></pre></td></tr></table></figure><p>  æƒ…å†µå››ï¼šå¦‚æœå¯¹è±¡çš„æ–¹æ³•ä½¿ç”¨äº†å–å€¼å‡½æ•°ï¼ˆ<code>getter</code>ï¼‰å’Œå­˜å€¼å‡½æ•°ï¼ˆ<code>setter</code>ï¼‰ï¼Œåˆ™ <code>name</code> å±æ€§ä¸æ˜¯åœ¨è¯¥æ–¹æ³•ä¸Šé¢ï¼Œè€Œæ˜¯è¯¥æ–¹æ³•çš„å±æ€§çš„æè¿°å¯¹è±¡çš„ <code>get</code> å’Œ <code>set</code> å±æ€§ä¸Šé¢ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o = &#123; </span><br><span class="line">    <span class="keyword">get</span> <span class="title">foo</span>()&#123;&#125;, </span><br><span class="line">    <span class="keyword">set</span> <span class="title">foo</span>(<span class="params">x</span>)&#123;&#125; </span><br><span class="line">&#125;</span><br><span class="line">o.foo.name  <span class="comment">// TypeError: Cannot read property &#x27;name&#x27; of undefined</span></span><br><span class="line"><span class="keyword">let</span> descriptor = <span class="built_in">Object</span>.getOwnPropertyDescriptor(o, <span class="string">&quot;foo&quot;</span>) </span><br><span class="line">descriptor.get.name  <span class="comment">// &quot;get foo&quot; </span></span><br><span class="line">descriptor.set.name  <span class="comment">// &quot;set foo&quot;</span></span><br></pre></td></tr></table></figure><p>  å‚è€ƒï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/name">function_name</a></p></li><li><p>å±æ€§çš„å¯æšä¸¾æ€§</p><p>  å¯¹è±¡çš„æ¯ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªæè¿°å¯¹è±¡ï¼ˆ<code>Descriptor</code>ï¼‰ï¼Œç”¨æ¥æ§åˆ¶è¯¥å±æ€§çš„è¡Œä¸ºã€‚å¯ä»¥é€šè¿‡ <code>Object.getOwnPropertyDescriptor()</code> æ¥è·å–å¯¹è±¡æŸä¸ªå±æ€§çš„æè¿°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span>, <span class="attr">age</span>: <span class="number">12</span> &#125;</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(person, <span class="string">&#x27;name&#x27;</span>)</span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     configurable: true,</span></span><br><span class="line"><span class="comment">//     enumerable: true,</span></span><br><span class="line"><span class="comment">//     value: &quot;å¸ƒå…°&quot;,</span></span><br><span class="line"><span class="comment">//     writable: true,</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><p>  è¿™é‡Œçš„ <code>enumerable</code> å°±æ˜¯å¯¹è±¡æŸä¸ªå±æ€§çš„å¯æšä¸¾å±æ€§ï¼Œå¦‚æœæŸä¸ªå±æ€§çš„ <code>enumerable</code> å€¼ä¸º <code>false</code> åˆ™è¡¨ç¤ºè¯¥å±æ€§ä¸èƒ½è¢«æšä¸¾ï¼Œæ‰€ä»¥è¯¥å±æ€§ä¼šè¢«å¦‚ä¸‹ 4 ç§æ“ä½œå¿½ç•¥ï¼š</p><ul><li><p><code>for...in</code> ï¼šåªéå†å¯¹è±¡è‡ªèº«çš„å’Œç»§æ‰¿çš„å¯æšä¸¾çš„å±æ€§ï¼›</p></li><li><p><code>Object.keys()</code>ï¼šè¿”å›å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å¯æšä¸¾çš„å±æ€§çš„é”®åï¼›</p></li><li><p><code>JSON.stringify()</code>ï¼šåªä¸²è¡ŒåŒ–å¯¹è±¡è‡ªèº«çš„å¯æšä¸¾çš„å±æ€§ï¼›</p></li><li><p><code>Object.assign()</code>ï¼š åªæ‹·è´å¯¹è±¡è‡ªèº«çš„å¯æšä¸¾çš„å±æ€§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span> &#125;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">false</span>,</span><br><span class="line">    value: <span class="number">12</span>,</span><br><span class="line">    writable: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line">person  <span class="comment">// &#123; name: &#x27;å¸ƒå…°&#x27;, age: 12 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹æ“ä½œéƒ½å°†å¿½ç•¥ person å¯¹è±¡çš„ age å±æ€§</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">in</span> person) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x)         <span class="comment">// &#x27;name&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.keys(person)        <span class="comment">// [&#x27;name&#x27;]</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(person)     <span class="comment">// &#x27;&#123;&quot;name&quot;: &quot;å¸ƒå…°&quot;&#125;&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.assign(&#123;&#125;, person)  <span class="comment">// &#123; name: &#x27;å¸ƒå…°&#x27; &#125;</span></span><br></pre></td></tr></table></figure><p><code>Reflect.ownKeys(obj)</code>ï¼š è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰é”®åï¼Œä¸ç®¡é”®åæ˜¯ <code>Symbol</code> æˆ–å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸ç®¡æ˜¯å¦å¯æšä¸¾ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸºäºä¸Šé¢çš„ä»£ç </span></span><br><span class="line"><span class="built_in">Reflect</span>.ownKeys(person)  <span class="comment">// [&#x27;name&#x27;, &#x27;age&#x27;]</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>super</code> å…³é”®å­—ï¼ŒæŒ‡å‘å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼Œåªèƒ½ç”¨äºå¯¹è±¡çš„æ–¹æ³•ä¸­ï¼Œå…¶ä»–åœ°æ–¹å°†æŠ¥é”™ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;å¸ƒå…°&#x27;</span>,</span><br><span class="line">    getName() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(person, &#123;<span class="attr">name</span>: <span class="string">&#x27;hello&#x27;</span>&#125;)</span><br><span class="line">person.getName()  <span class="comment">// &#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹å‡ ç§ super çš„ä½¿ç”¨å°†æŠ¥é”™</span></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123;</span><br><span class="line">    foo: <span class="built_in">super</span>.foo</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123;</span><br><span class="line">    foo: <span class="function">() =&gt;</span> <span class="built_in">super</span>.foo</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj3 = &#123;</span><br><span class="line">    foo: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.foo</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>Object.is()</code> ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œè¡¨ç°åŸºæœ¬å’Œ <code>===</code> ä¸€æ ·ï¼Œé™¤äº†ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+<span class="number">0</span> === <span class="number">-0</span>            <span class="comment">//true</span></span><br><span class="line"><span class="literal">NaN</span> === <span class="literal">NaN</span>          <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.is(+<span class="number">0</span>, <span class="number">-0</span>)    <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="literal">NaN</span>)  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p><code>Object.assign()</code> ç”¨äºå¯¹è±¡çš„åˆå¹¶ï¼Œå°†æºå¯¹è±¡ï¼ˆ<code>source</code>ï¼‰çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼ˆ<code>target</code>ï¼‰ï¼Œå¦‚æœæœ‰åŒåå±æ€§ï¼Œåˆ™åé¢çš„ä¼šç›´æ¥æ›¿æ¢å‰é¢çš„ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> target = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">let</span> source1 = &#123; <span class="attr">a</span>: <span class="number">2</span>, <span class="attr">b</span>: <span class="number">3</span>, <span class="attr">d</span>: &#123;<span class="attr">e</span>: <span class="number">1</span>, <span class="attr">f</span>: <span class="number">2</span>&#125; &#125;</span><br><span class="line"><span class="keyword">let</span> source2 = &#123; <span class="attr">a</span>: <span class="number">3</span>, <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: &#123;<span class="attr">g</span>: <span class="number">3</span>&#125; &#125;</span><br><span class="line"><span class="built_in">Object</span>.assign(target, source1, source2)</span><br><span class="line">target  <span class="comment">// &#123; a: 3, b: 3, c: 4, d: &#123;g: 3&#125; &#125;</span></span><br></pre></td></tr></table></figure><p>  <code>Object.assign()</code> å®è¡Œçš„æ˜¯æµ…æ‹·è´ï¼Œå¦‚æœæºå¯¹è±¡æŸä¸ªå±æ€§æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆæ‹·è´çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> target = &#123;<span class="attr">a</span>: &#123;<span class="attr">b</span>: <span class="number">1</span>&#125;&#125;</span><br><span class="line"><span class="keyword">let</span> source = &#123;<span class="attr">a</span>: &#123;<span class="attr">b</span>: <span class="number">2</span>&#125;&#125;</span><br><span class="line"><span class="built_in">Object</span>.assign(target, source)</span><br><span class="line">target.a.b = <span class="number">3</span></span><br><span class="line">source.a.b  <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></li><li><p><code>__proto__</code> å±æ€§æ˜¯ç”¨æ¥è¯»å–å’Œè®¾ç½®å½“å‰å¯¹è±¡çš„åŸå‹ï¼Œè€Œç”±äºå…¶ä¸‹åˆ’çº¿æ›´å¤šçš„æ˜¯è¡¨é¢å…¶æ˜¯ä¸€ä¸ªå†…éƒ¨å±æ€§ï¼Œæ‰€ä»¥å»ºè®®ä¸åœ¨æ­£å¼åœºåˆä½¿ç”¨å®ƒï¼Œè€Œæ˜¯ç”¨ä¸‹é¢çš„ <code>Object.setPrototypeOf()</code>ï¼ˆå†™æ“ä½œï¼‰ã€<code>Object.getPrototypeOf()</code>ï¼ˆè¯»æ“ä½œï¼‰ã€<code>Object.create()</code>ï¼ˆç”Ÿæˆæ“ä½œï¼‰ä»£æ›¿ã€‚</p></li><li><p><code>Object.setPrototypeOf()</code> ç”¨äºè®¾ç½®å¯¹è±¡åŸå‹ï¼Œ<code>Object.getPrototypeOf()</code> ç”¨äºè¯»å–å¯¹è±¡åŸå‹ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(person, &#123;<span class="attr">name</span>: <span class="string">&#x27;åŠ¨ç‰©&#x27;</span>&#125;)</span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(person)  <span class="comment">// &#123;name: &#x27;åŠ¨ç‰©&#x27;&#125;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="æ­£åˆ™æ‰©å±•"><a href="#æ­£åˆ™æ‰©å±•" class="headerlink" title="æ­£åˆ™æ‰©å±•"></a>æ­£åˆ™æ‰©å±•</h3><ul><li><p><code>RegExp</code> æ„é€ å‡½æ•°ï¼Œå…è®¸é¦–å‚ä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¿®é¥°ç¬¦ï¼Œå¦‚æœæœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™ä¿®é¥°ç¬¦ä»¥ç¬¬äºŒä¸ªä¸ºå‡†ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="regexp">/xYz\d+/gi</span>, i)</span><br><span class="line">reg.flags  <span class="comment">// &#x27;i&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>æ­£åˆ™æ–¹æ³•è°ƒç”¨å˜æ›´ï¼šå­—ç¬¦ä¸²å¯¹è±¡çš„ <code>match()</code>ã€<code>replace()</code>ã€<code>search()</code>ã€<code>split()</code> å†…éƒ¨è°ƒç”¨è½¬ä¸ºè°ƒç”¨ <code>RegExp</code> å®ä¾‹å¯¹åº”çš„ <code>RegExp.prototype[Symbol.æ–¹æ³•]</code>ï¼›</p></li><li><p><code>u</code> ä¿®é¥°ç¬¦ï¼šå«ä¹‰ä¸º <code>Unicode</code> æ¨¡å¼ï¼Œç”¨æ¥æ­£ç¡®å¤„ç†å¤§äº <code>\uFFFF</code> çš„ <code>Unicode</code> å­—ç¬¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå¾…åŒ¹é…çš„å­—ç¬¦ä¸²ä¸­å¯èƒ½åŒ…å«æœ‰å¤§äº <code>\uFFFF</code> çš„å­—ç¬¦ï¼Œå°±å¿…é¡»åŠ ä¸Š <code>u</code> ä¿®é¥°ç¬¦ï¼Œæ‰èƒ½æ­£ç¡®å¤„ç†ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŠ ä¸Š u ä¿®é¥°ç¬¦æ‰èƒ½è®© . å­—ç¬¦æ­£ç¡®è¯†åˆ«å¤§äº \uFFFF çš„å­—ç¬¦</span></span><br><span class="line">/^.$/.test(<span class="string">&#x27;ğŸ¤£&#x27;</span>)   <span class="comment">// false</span></span><br><span class="line">/^.$/u.test(<span class="string">&#x27;ğŸ¤£&#x27;</span>)  <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤§æ‹¬å· Unicode å­—ç¬¦è¡¨ç¤ºæ³•å¿…é¡»åŠ ä¸Š u ä¿®é¥°ç¬¦</span></span><br><span class="line">/\u&#123;<span class="number">61</span>&#125;/.test(<span class="string">&#x27;a&#x27;</span>)   <span class="comment">// false</span></span><br><span class="line">/\u&#123;<span class="number">61</span>&#125;/u.test(<span class="string">&#x27;a&#x27;</span>)  <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ‰ u ä¿®é¥°ç¬¦ï¼Œé‡è¯æ‰èƒ½æ­£ç¡®åŒ¹é…å¤§äº \uFFFF çš„å­—ç¬¦ </span></span><br><span class="line">/ğŸ¤£&#123;<span class="number">2</span>&#125;/.test(<span class="string">&#x27;ğŸ¤£ğŸ¤£&#x27;</span>)  <span class="comment">// false</span></span><br><span class="line">/ğŸ¤£&#123;<span class="number">2</span>&#125;/u.test(<span class="string">&#x27;ğŸ¤£ğŸ¤£&#x27;</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>  <code>RegExp.prototype.unicode</code> å±æ€§è¡¨ç¤ºæ­£åˆ™æ˜¯å¦è®¾ç½®äº† <code>u</code> ä¿®é¥°ç¬¦ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/ğŸ¤£/.unicode   <span class="comment">// false</span></span><br><span class="line">/ğŸ¤£/u.unicode  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p><code>y</code> ä¿®é¥°ç¬¦ï¼Œä¸ <code>g</code> ä¿®é¥°ç¬¦ç±»ä¼¼ä¹Ÿæ˜¯å…¨å±€åŒ¹é…ï¼›ä¸åŒçš„æ˜¯ <code>g</code> æ˜¯å‰©ä½™å­—ç¬¦ä¸­åŒ¹é…å³å¯ï¼Œè€Œ <code>y</code> åˆ™æ˜¯å¿…é¡»åœ¨å‰©ä½™çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹åŒ¹é…æ‰è¡Œï¼Œæ‰€ä»¥ <code>y</code> ä¿®é¥°ç¬¦ä¹Ÿå«é»è¿ä¿®é¥°ç¬¦ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&#x27;aaa_aa_a&#x27;</span></span><br><span class="line"><span class="keyword">let</span> r1 = <span class="regexp">/a+/g</span></span><br><span class="line"><span class="keyword">let</span> r2 = <span class="regexp">/a+/y</span></span><br><span class="line"></span><br><span class="line">r1.exec(s)  <span class="comment">// [&quot;aaa&quot;]</span></span><br><span class="line">r2.exec(s)  <span class="comment">// [&quot;aaa&quot;]</span></span><br><span class="line"></span><br><span class="line">r1.exec(s)  <span class="comment">// [&quot;aa&quot;]</span></span><br><span class="line">r2.exec(s)  <span class="comment">// null</span></span><br></pre></td></tr></table></figure><p>  <code>RegExp.prototype.sticky</code> å±æ€§è¡¨ç¤ºæ˜¯å¦è®¾ç½®äº† <code>y</code> ä¿®é¥°ç¬¦ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/abc/y.sticky  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p><code>RegExp.prototype.flags</code> å±æ€§ä¼šè¿”å›å½“å‰æ­£åˆ™çš„æ‰€æœ‰ä¿®é¥°ç¬¦ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/abcğŸ¤£/iuy.flags  <span class="comment">// &#x27;iuy&#x27;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="å‡½æ•°æ‰©å±•"><a href="#å‡½æ•°æ‰©å±•" class="headerlink" title="å‡½æ•°æ‰©å±•"></a>å‡½æ•°æ‰©å±•</h3><ul><li><p>å‡½æ•°å‚æ•°é»˜è®¤å€¼ã€‚å‚æ•°ä¸èƒ½æœ‰åŒåçš„ï¼Œå‡½æ•°ä½“å†…ä¸èƒ½ç”¨ <code>let</code> å’Œ <code>const</code> å£°æ˜åŒå‚æ•°åçš„å˜é‡ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printInfo</span>(<span class="params">name = <span class="string">&#x27;å¸ƒå…°&#x27;</span>, age = <span class="number">12</span></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>  ä½¿ç”¨å‚æ•°é»˜è®¤å€¼çš„æ—¶å€™ï¼Œå‚æ•°ä¸èƒ½æœ‰åŒåçš„ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, x, y</span>) </span>&#123;&#125;      <span class="comment">// ä¸æŠ¥é”™</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, x, y = <span class="number">1</span></span>) </span>&#123;&#125;  <span class="comment">// æŠ¥é”™</span></span><br></pre></td></tr></table></figure><p>  å‡½æ•°ä½“å†…ä¸èƒ½ç”¨ <code>let</code> å’Œ <code>const</code> å£°æ˜åŒå‚æ•°åçš„å˜é‡ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  å‡½æ•°çš„ <code>length</code> å±æ€§ä¼šè¿”å›æ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼çš„å‚æ•°ä¸ªæ•°ï¼Œä¸”å¦‚æœè®¾ç½®é»˜è®¤å€¼çš„å‚æ•°ä¸æ˜¯å°¾å‚æ•°ï¼Œåˆ™ <code>length</code> ä¸å†è®¡å…¥åé¢çš„å‚æ•°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y</span>)</span>&#123;&#125;).length      <span class="comment">// 2</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y = <span class="number">1</span></span>)</span>&#123;&#125;).length  <span class="comment">// 1</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x = <span class="number">1</span>, y</span>)</span>&#123;&#125;).length  <span class="comment">// 0</span></span><br></pre></td></tr></table></figure></li><li><p>å‰©ä½™ï¼ˆ<code>rest</code>ï¼‰ å‚æ•°ï¼ˆâ€¦å˜é‡åï¼‰çš„å½¢å¼ï¼Œç”¨äºè·å–å‡½æ•°çš„å‰©ä½™å‚æ•°ï¼Œæ³¨æ„ <code>rest</code> å‚æ•°å¿…é¡»æ”¾åœ¨æœ€åä¸€ä¸ªä½ç½®ï¼Œå¯ä»¥å¾ˆå¥½çš„ä»£æ›¿ <code>arguments</code> å¯¹è±¡ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, ...y</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x)  <span class="comment">// 1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> val <span class="keyword">of</span> y) &#123;</span><br><span class="line">        coonsole.log(val)  <span class="comment">// 2 3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">f(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure></li><li><p>ä¸¥æ ¼æ¨¡å¼ï¼šåªè¦å‡½æ•°å‚æ•°ä½¿ç”¨äº†é»˜è®¤å€¼ã€è§£æ„èµ‹å€¼æˆ–è€…æ‰©å±•è¿ç®—ç¬¦ï¼Œé‚£ä¹ˆå‡½æ•°ä½“å†…å°±ä¸èƒ½æ˜¾ç¤ºçš„è®¾å®šä¸ºä¸¥æ ¼æ¨¡å¼ï¼Œå› ä¸ºä¸¥æ ¼æ¨¡å¼çš„ä½œç”¨èŒƒå›´åŒ…å«äº†å‡½æ•°å‚æ•°ï¼Œè€Œå‡½æ•°æ‰§è¡Œçš„é¡ºåºæ˜¯å…ˆæ‰§è¡Œå‚æ•°ï¼Œç„¶åå†æ‰§è¡Œå‡½æ•°ä½“ï¼Œæ‰§è¡Œåˆ°å‡½æ•°ä½“é‡Œçš„ <code>use strict</code> çš„æ—¶å€™ï¼Œé‚£ä¹ˆæ­¤æ—¶å› ä¸ºå‡½æ•°å‚æ•°å·²ç»æ‰§è¡Œå®Œæˆäº†ï¼Œé‚£å‡½æ•°å‚æ•°è¿˜è¦ä¸è¦å—åˆ°ä¸¥æ ¼æ¨¡å¼çš„é™åˆ¶å‘¢ï¼Ÿè¿™å°±å‡ºç°çŸ›ç›¾äº†ã€‚è§„é¿é™åˆ¶çš„åŠæ³•æœ‰ä¸¤ä¸ªï¼šè®¾ç½®å…¨å±€çš„ä¸¥æ ¼æ¨¡å¼æˆ–è€…åœ¨å‡½æ•°ä½“å¤–åœ¨åŒ…ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°å¹¶ä¸”å£°æ˜ä¸¥æ ¼æ¨¡å¼ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§£æ³•ä¸€</span></span><br><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y = <span class="number">2</span></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£æ³•äºŒ</span></span><br><span class="line"><span class="keyword">let</span> f = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="meta">    &#x27;use strict&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">x, y = <span class="number">2</span></span>) </span>&#123;&#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure></li><li><p>ç®­å¤´å‡½æ•°è¯­æ³•æ¯”å‡½æ•°è¡¨è¾¾å¼æ›´ç®€æ´ï¼Œå¹¶ä¸”æ²¡æœ‰è‡ªå·±çš„ <code>this</code>ã€<code>arguments</code>ï¼Œä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°å’Œç”¨ä½œç”Ÿæˆå™¨ã€‚</p><p>  å‡ ç§ç®­å¤´å‡½æ•°å†™æ³•ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> f1 = <span class="function">() =&gt;</span> &#123;&#125;               <span class="comment">// æ²¡æœ‰å‚æ•°</span></span><br><span class="line"><span class="keyword">let</span> f2 = <span class="function">(<span class="params">x</span>) =&gt;</span> &#123;&#125;              <span class="comment">// 1ä¸ªå‚æ•°</span></span><br><span class="line"><span class="keyword">let</span> f3 = <span class="function"><span class="params">x</span> =&gt;</span> &#123;&#125;                <span class="comment">// 1ä¸ªå‚æ•°å¯ä»¥çœç•¥åœ†æ‹¬å·</span></span><br><span class="line"><span class="keyword">let</span> f4 = <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;&#125;           <span class="comment">// 2ä¸ªå‚æ•°ä»¥ä¸Šå¿…é¡»åŠ ä¸Šåœ†æ‹¬å·</span></span><br><span class="line"><span class="keyword">let</span> f5 = <span class="function">(<span class="params">x = <span class="number">1</span>, y = <span class="number">2</span></span>) =&gt;</span> &#123;&#125;   <span class="comment">// æ”¯æŒå‚æ•°é»˜è®¤å€¼</span></span><br><span class="line"><span class="keyword">let</span> f6 = <span class="function">(<span class="params">x, ...y</span>) =&gt;</span> &#123;&#125;        <span class="comment">// æ”¯æŒ rest å‚æ•°</span></span><br><span class="line"><span class="keyword">let</span> f7 = (&#123;x = <span class="number">1</span>, y = <span class="number">2</span>&#125; = &#123;&#125;)  <span class="comment">// æ”¯æŒå‚æ•°è§£æ„</span></span><br></pre></td></tr></table></figure><p>  ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ <code>this</code>ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.age = <span class="number">0</span></span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age++</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person()  <span class="comment">// 1 ç§’å Person &#123;age: 1&#125;</span></span><br></pre></td></tr></table></figure><p>  é€šè¿‡ <code>call/apply</code> è°ƒç”¨ç®­å¤´å‡½æ•°çš„æ—¶å€™å°†ä¸ä¼šç»‘å®šç¬¬ä¸€ä¸ªå‚æ•°çš„ä½œç”¨åŸŸï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> adder = &#123;</span><br><span class="line">    base: <span class="number">1</span>,</span><br><span class="line">    add: <span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> f = <span class="function"><span class="params">v</span> =&gt;</span> v + <span class="built_in">this</span>.base</span><br><span class="line">        <span class="keyword">return</span> f(a)</span><br><span class="line">    &#125;, </span><br><span class="line">    addThruCall: <span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> f = <span class="function"><span class="params">v</span> =&gt;</span> v + <span class="built_in">this</span>.base</span><br><span class="line">        <span class="keyword">let</span> b = &#123;</span><br><span class="line">            base: <span class="number">2</span></span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> f.call(b, a)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">adder.add(<span class="number">1</span>)          <span class="comment">// è¾“å‡º 2</span></span><br><span class="line">adder.addThruCall(<span class="number">1</span>)  <span class="comment">// ä»ç„¶è¾“å‡º 2</span></span><br></pre></td></tr></table></figure><p>  ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ <code>arguments</code> å¯¹è±¡ï¼Œä¸è¿‡å¯ä»¥ä½¿ç”¨ <code>rest</code> å‚æ•°ä»£æ›¿ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> log = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>)  <span class="comment">// ReferenceError</span></span><br><span class="line">&#125;</span><br><span class="line">log(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰©ä½™å‚æ•°ä»£æ›¿å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> restLog = <span class="function">(<span class="params">...arr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arr)  <span class="comment">// [2, 3]</span></span><br><span class="line">&#125;</span><br><span class="line">restLog(<span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>  ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œæ„é€ å™¨ï¼Œå’Œ <code>new</code> ä¸€èµ·ç”¨ä¼šæŠ›å‡ºé”™è¯¯ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Foo = <span class="function">() =&gt;</span> &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> foo = <span class="keyword">new</span> Foo()</span><br><span class="line"><span class="comment">// TypeError: Foo is not a constructor</span></span><br></pre></td></tr></table></figure><p>  ç®­å¤´å‡½æ•°è¿”å›å¯¹è±¡å­—é¢é‡ï¼Œéœ€è¦ç”¨åœ†æ‹¬å·åŒ…èµ·æ¥ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> func2 = <span class="function">() =&gt;</span> (&#123;<span class="attr">foo</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure><p>  å‚è€ƒï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions">Arrow_functions</a></p></li><li><p>å°¾è°ƒç”¨å’Œå°¾é€’å½’ </p><p>  é¦–å…ˆå¾—çŸ¥é“ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼šå‡½æ•°çš„æœ€åä¸€æ­¥è°ƒç”¨å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ˜¯å°¾è°ƒç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> g(x)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹éƒ½ä¸æ˜¯å°¾è°ƒç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> y = g(x)</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> y = g(x)</span><br><span class="line">    <span class="keyword">return</span> g(x) + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    g(x)</span><br><span class="line">    <span class="comment">// å› ä¸ºæœ€åä¸€æ­¥æ˜¯ return: undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  å°¾è°ƒç”¨æœ‰å•¥ç”¨ï¼Ÿæˆ‘ä»¬çŸ¥é“å‡½æ•°çš„ç›¸äº’è°ƒç”¨æ˜¯ä¼šç”Ÿæˆâ€œè°ƒç”¨å¸§â€çš„ï¼Œè€Œâ€œè°ƒç”¨å¸§â€é‡Œå­˜äº†å„ç§ä¿¡æ¯æ¯”å¦‚å‡½æ•°çš„å†…éƒ¨å˜é‡å’Œè°ƒç”¨å‡½æ•°çš„ä½ç½®ç­‰ï¼Œæ‰€æœ‰çš„â€œè°ƒç”¨å¸§â€ç»„æˆäº†ä¸€ä¸ªâ€œè°ƒç”¨æ ˆâ€ã€‚å¦‚æœåœ¨å‡½æ•°çš„æœ€åä¸€æ­¥æ“ä½œè°ƒç”¨äº†å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œå› ä¸ºå¤–å±‚å‡½æ•°é‡Œè°ƒç”¨ä½ç½®ã€å†…éƒ¨å˜é‡ç­‰ä¿¡æ¯éƒ½ä¸ä¼šå†ç”¨åˆ°äº†ï¼Œæ‰€æœ‰å°±æ— éœ€ä¿ç•™å¤–å±‚å‡½æ•°çš„â€œè°ƒç”¨å¸§â€äº†ï¼Œåªè¦ç›´æ¥ç”¨å†…å±‚å‡½æ•°çš„â€œè°ƒç”¨å¸§â€å–ä»£å¤–å±‚å‡½æ•°çš„â€œè°ƒç”¨å¸§â€å³å¯ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> m = <span class="number">1</span></span><br><span class="line">    <span class="keyword">let</span> n = <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> g(m + n)</span><br><span class="line">&#125;</span><br><span class="line">f()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> g(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br><span class="line">f()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">g(<span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>  è¿™æ ·ä¸€æ¥å°±å¾ˆæ˜æ˜¾çš„å‡å°‘äº†è°ƒç”¨æ ˆä¸­çš„å¸§æ•°ï¼Œå†…å­˜å ç”¨å°±å°‘äº†ï¼Œæ‰€ä»¥è¿™å°±æ˜¯å°¾è°ƒç”¨çš„ä¼˜åŒ–ä½œç”¨ã€‚å°¾é€’å½’ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œé€’å½’å¦‚æœæ¬¡æ•°å¤šé‚£å°±éœ€è¦ä¿ç•™éå¸¸å¤šçš„â€œè°ƒç”¨å¸§â€ï¼Œæ‰€ä»¥ç»å¸¸ä¼šå‡ºç°æ ˆæº¢å‡ºé”™è¯¯ï¼Œè€Œä½¿ç”¨äº†å°¾é€’å½’ä¼˜åŒ–åå°±ä¸ä¼šå‘ç”Ÿæ ˆæº¢å‡ºçš„é”™è¯¯äº†ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¸¸è§„é€’å½’çš„æ–æ³¢é‚£å¥‘å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fibonacci</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( n &lt;= <span class="number">1</span> ) &#123;<span class="keyword">return</span> <span class="number">1</span>&#125;</span><br><span class="line">    <span class="keyword">return</span> Fibonacci(n - <span class="number">1</span>) + Fibonacci(n - <span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line">Fibonacci(<span class="number">100</span>) <span class="comment">// è¶…æ—¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å°¾é€’å½’ä¼˜åŒ–åçš„æ–æ³¢é‚£å¥‘å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fibonacci2</span>(<span class="params">n, ac1 = <span class="number">1</span>, ac2 = <span class="number">1</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( n &lt;= <span class="number">1</span> ) &#123;<span class="keyword">return</span> ac2&#125;</span><br><span class="line">    <span class="keyword">return</span> Fibonacci2(n - <span class="number">1</span>, ac2, ac1 + ac2)</span><br><span class="line">&#125;s</span><br><span class="line">Fibonacci2(<span class="number">100</span>)  <span class="comment">// 573147844013817200000</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h3><ul><li><p><code>Symbol</code> æ˜¯ä¸€ä¸ªæ–°çš„åŸå§‹ç±»å‹ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å€¼ï¼Œå¯ä»¥é€šè¿‡ <code>Symbol()</code> å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ª <code>Symbol</code> ç±»å‹çš„å€¼ï¼Œä¸ºäº†åŠ ä»¥åŒºåˆ†ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå…¶æè¿°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s1 = <span class="built_in">Symbol</span>(<span class="string">&#x27;foo&#x27;</span>) </span><br><span class="line"><span class="keyword">let</span> s2 = <span class="built_in">Symbol</span>(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line">s1 === s2  <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p><code>Symbol</code> ç±»å‹æ— æ³•é€šè¿‡æ•°å­¦è¿ç®—ç¬¦è¿›è¡Œéšå¼ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ <code>String()</code> æ˜¾ç¤ºè½¬æˆå­—ç¬¦ä¸²æˆ–è€…é€šè¿‡ <code>Boolean()</code> æ˜¾ç¤ºè½¬æˆå¸ƒå°”å€¼ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="built_in">Symbol</span>(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line"><span class="built_in">String</span>(s)     <span class="comment">// &quot;Symbol(&#x27;foo&#x27;)&quot;</span></span><br><span class="line">s.toString()  <span class="comment">// &quot;Symbol(&#x27;foo&#x27;)&quot;</span></span><br><span class="line"><span class="built_in">Boolean</span>(s)    <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p>å¼•å…¥ <code>Symbol</code> æœ€å¤§çš„åˆè¡·å…¶å®å°±æ˜¯ä¸ºäº†è®©å®ƒä½œä¸ºå¯¹è±¡çš„å±æ€§åè€Œä½¿ç”¨ï¼Œè¿™æ ·å°±å¯ä»¥æœ‰æ•ˆé¿å…å±æ€§åçš„å†²çªäº†ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo = <span class="built_in">Symbol</span>(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    [foo]: <span class="string">&#x27;foo1&#x27;</span>,</span><br><span class="line">    foo: <span class="string">&#x27;foo2&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">obj[foo]  <span class="comment">// &#x27;foo1&#x27;</span></span><br><span class="line">obj.foo   <span class="comment">// &#x27;foo2&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p><code>Symbol</code> å±æ€§çš„ä¸å¯æšä¸¾æ€§ï¼Œä¸ä¼šè¢« <code>for...in</code>ã€<code>for...of</code>ã€<code>Object.keys()</code>ã€<code>Object.getOwnPropertyNames()</code>ã€<code>JSON.stringify()</code> ç­‰æšä¸¾ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;å¸ƒå…°&#x27;</span>,</span><br><span class="line">    [<span class="built_in">Symbol</span>(<span class="string">&#x27;age&#x27;</span>)]: <span class="number">12</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">in</span> person) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x)  <span class="comment">// &#x27;name&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.keys(person)  <span class="comment">// [&#x27;name&#x27;]</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(person)  <span class="comment">// [&#x27;name&#x27;]</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(person)  <span class="comment">// &#x27;&#123;&quot;name&quot;:&quot;å¸ƒå…°&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>  ä½†æ˜¯å¯ä»¥é€šè¿‡ <code>Object.getOwnPropertySymbols()</code> è·å–åˆ°å¯¹è±¡çš„æ‰€æœ‰ <code>Symbol</code> å±æ€§åï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸºäºä¸Šé¢çš„ä»£ç </span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertySymbols(person)  <span class="comment">// [Symbol(age)]</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>é™æ€æ–¹æ³•</strong>ï¼š</p><ul><li><p><code>Symbol.for()</code> æŒ‰ç…§æè¿°å»å…¨å±€æŸ¥æ‰¾ <code>Symbol</code>ï¼Œæ‰¾ä¸åˆ°åˆ™åœ¨å…¨å±€ç™»è®°ä¸€ä¸ªï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s1 = <span class="built_in">Symbol</span>.for(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> s2 = <span class="built_in">Symbol</span>.for(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line">s1 === s2 <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>  <code>Symbol.for()</code> çš„è¿™ä¸ªå…¨å±€ç™»è®°ç‰¹æ€§ï¼Œå¯ä»¥ç”¨åœ¨ä¸åŒçš„ <code>iframe</code> æˆ– <code>service worker</code> ä¸­å–åˆ°åŒä¸€ä¸ªå€¼ã€‚</p></li><li><p><code>Symbol.keyFor()</code> æ ¹æ®å·²ç»åœ¨å…¨å±€ç™»è®°çš„ <code>Symbol</code> æŸ¥æ‰¾å…¶æè¿°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="built_in">Symbol</span>.for(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line"><span class="built_in">Symbol</span>.keyFor(s)  <span class="comment">// &#x27;foo&#x27;</span></span><br></pre></td></tr></table></figure></li></ul><p><strong><code>Symbol</code> çš„å†…ç½®å€¼</strong>ï¼š</p><ul><li><code>Symbol.hasInstance</code>ï¼šæŒ‡å‘ä¸€ä¸ªå†…éƒ¨æ–¹æ³•ï¼Œå½“å…¶ä»–å¯¹è±¡ä½¿ç”¨ <code>instanceof</code> è¿ç®—ç¬¦åˆ¤æ–­æ˜¯å¦ä¸ºæ­¤å¯¹è±¡çš„å®ä¾‹æ—¶ä¼šè°ƒç”¨æ­¤æ–¹æ³•ï¼›</li><li><code>Symbol.isConcatSpreadable</code>ï¼šæŒ‡å‘ä¸€ä¸ªå¸ƒå°”ï¼Œå®šä¹‰å¯¹è±¡ç”¨äº <code>Array.prototype.concat()</code> æ—¶æ˜¯å¦å¯å±•å¼€ï¼›</li><li><code>Symbol.species</code>ï¼šæŒ‡å‘ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå½“å®ä¾‹å¯¹è±¡ä½¿ç”¨è‡ªèº«æ„é€ å‡½æ•°æ—¶ä¼šè°ƒç”¨æŒ‡å®šçš„æ„é€ å‡½æ•°ï¼›</li><li><code>Symbol.match</code>ï¼šæŒ‡å‘ä¸€ä¸ªå‡½æ•°ï¼Œå½“å®ä¾‹å¯¹è±¡è¢« <code>String.prototype.match()</code> è°ƒç”¨æ—¶ä¼šé‡æ–°å®šä¹‰match()çš„è¡Œä¸ºï¼›</li><li><code>Symbol.replace</code>ï¼šæŒ‡å‘ä¸€ä¸ªå‡½æ•°ï¼Œå½“å®ä¾‹å¯¹è±¡è¢« <code>String.prototype.replace()</code> è°ƒç”¨æ—¶ä¼šé‡æ–°å®šä¹‰ <code>replace()</code> çš„è¡Œä¸ºï¼›</li><li><code>Symbol.search</code>ï¼šæŒ‡å‘ä¸€ä¸ªå‡½æ•°ï¼Œå½“å®ä¾‹å¯¹è±¡è¢« <code>String.prototype.search()</code> è°ƒç”¨æ—¶ä¼šé‡æ–°å®šä¹‰ <code>search()</code> çš„è¡Œä¸ºï¼›s</li><li><code>Symbol.split</code>ï¼šæŒ‡å‘ä¸€ä¸ªå‡½æ•°ï¼Œå½“å®ä¾‹å¯¹è±¡è¢« <code>String.prototype.split()</code> è°ƒç”¨æ—¶ä¼šé‡æ–°å®šä¹‰ <code>split()</code> çš„è¡Œä¸ºï¼›</li><li><code>Symbol.iterator</code>ï¼šæŒ‡å‘ä¸€ä¸ªé»˜è®¤éå†å™¨æ–¹æ³•ï¼Œå½“å®ä¾‹å¯¹è±¡æ‰§è¡Œ<code> for...of</code> æ—¶ä¼šè°ƒç”¨æŒ‡å®šçš„é»˜è®¤éå†å™¨ï¼›</li><li><code>Symbol.toPrimitive</code>ï¼šæŒ‡å‘ä¸€ä¸ªå‡½æ•°ï¼Œå½“å®ä¾‹å¯¹è±¡è¢«è½¬ä¸ºåŸå§‹ç±»å‹çš„å€¼æ—¶ä¼šè¿”å›æ­¤å¯¹è±¡å¯¹åº”çš„åŸå§‹ç±»å‹å€¼ï¼›</li><li><code>Symbol.toStringTag</code>ï¼šæŒ‡å‘ä¸€ä¸ªå‡½æ•°ï¼Œå½“å®ä¾‹å¯¹è±¡è¢« <code>Object.prototype.toString()</code> è°ƒç”¨æ—¶å…¶è¿”å›å€¼ä¼šå‡ºç°åœ¨ <code>toString()</code> è¿”å›çš„å­—ç¬¦ä¸²ä¹‹ä¸­è¡¨ç¤ºå¯¹è±¡çš„ç±»å‹ï¼›</li><li><code>Symbol.unscopables</code>ï¼šæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼ŒæŒ‡å®šä½¿ç”¨ <code>with</code> æ—¶å“ªäº›å±æ€§ä¼šè¢« <code>with</code> ç¯å¢ƒæ’é™¤ï¼›</li></ul><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><ul><li><p><code>Set</code> æ˜¯ä¸€ç§æ–°çš„æ•°æ®ç»“æ„ï¼Œç±»ä¼¼æ•°ç»„ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰é”®åªæœ‰å€¼ï¼Œä¸”å€¼éƒ½æ˜¯å”¯ä¸€çš„ã€‚å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°ç”Ÿæˆä¸€ä¸ªæ–°å®ä¾‹ï¼Œæ¥æ”¶ä¸€ä¸ªæ•°ç»„æˆ–è€…å¯è¿­ä»£æ•°æ®ç»“æ„ä½œä¸ºå‚æ•°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])  <span class="comment">// Set &#123;1, 2, 3&#125;</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Set</span>(<span class="string">&#x27;abc&#x27;</span>)      <span class="comment">// Set &#123;&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;&#125;</span></span><br></pre></td></tr></table></figure></li><li><p><code>Set</code> åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯ä¸æ˜¯ç›¸ç­‰ç”¨çš„æ˜¯ <a href="https://tc39.es/ecma262/#sec-samevaluezero">sameValueZero</a> ç®—æ³•ï¼Œç±»ä¼¼äº <code>===</code>ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œåœ¨ <code>Set</code> é‡Œ <code>NaN</code> ä¹‹é—´è¢«è®¤ä¸ºæ˜¯ç›¸ç­‰çš„ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line"><span class="keyword">let</span> a = <span class="literal">NaN</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="literal">NaN</span></span><br><span class="line">set.add(a)</span><br><span class="line">set.add(b)</span><br><span class="line">set.size  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></li><li><p>ç›¸åŒå¯¹è±¡çš„ä¸åŒå®ä¾‹ä¹Ÿè¢« <code>Set</code> è®¤ä¸ºæ˜¯ä¸ç›¸ç­‰çš„ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line"><span class="keyword">let</span> a = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">let</span> b = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;</span><br><span class="line">set.add(a)</span><br><span class="line">set.add(b)</span><br><span class="line">set.size  <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></li><li><p><code>Set</code> æ˜¯æœ‰é¡ºåºçš„ï¼Œå°†æŒ‰ç…§æ’å…¥çš„é¡ºåºè¿›è¡Œè¿­ä»£ï¼Œå¯ä»¥ä½¿ç”¨ <code>for...of</code> è¿­ä»£ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">3</span>])</span><br><span class="line">set.add(<span class="number">5</span>)</span><br><span class="line">set.add(<span class="number">7</span>)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> x <span class="keyword">of</span> set) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong><code>Set</code> å®ä¾‹å±æ€§å’Œæ–¹æ³•</strong>ï¼š</p><ul><li><code>Set.prototype.constructor</code>ï¼šæ„é€ å‡½æ•°ï¼Œé»˜è®¤å°±æ˜¯ <code>Set</code> å‡½æ•°ï¼›</li><li><code>Set.prototype.size</code>ï¼šè¿”å› <code>Set</code> å®ä¾‹çš„æˆå‘˜æ€»æ•°ï¼›</li><li><code>Set.prototype.add(value)</code>ï¼šæ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å› <code>Set</code> ç»“æ„æœ¬èº«ï¼›</li><li><code>Set.prototype.delete(value)</code>ï¼šåˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸï¼›</li><li><code>Set.prototype.has(value)</code>ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸ºSetçš„æˆå‘˜ï¼›</li><li><code>Set.prototype.clear()</code>ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼›</li><li><code>Set.prototype.keys()</code>ï¼šè¿”å›é”®åçš„éå†å™¨ï¼›</li><li><code>Set.prototype.values()</code>ï¼šè¿”å›é”®å€¼çš„éå†å™¨ï¼›</li><li><code>Set.prototype.entries()</code>ï¼šè¿”å›é”®å€¼å¯¹çš„éå†å™¨ï¼›</li><li><code>Set.prototype.forEach()</code>ï¼šä½¿ç”¨å›è°ƒå‡½æ•°éå†æ¯ä¸ªæˆå‘˜ï¼›</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">3</span>])</span><br><span class="line">set.add(<span class="number">5</span>)     <span class="comment">// Set &#123;1, 3, 5&#125;</span></span><br><span class="line">set.size       <span class="comment">// 3</span></span><br><span class="line">set.delete(<span class="number">1</span>)  <span class="comment">// trueï¼Œ1 å·²è¢«åˆ é™¤</span></span><br><span class="line">set.has(<span class="number">1</span>)     <span class="comment">// false</span></span><br><span class="line">set.keys()     <span class="comment">// SetIterator &#123;3, 5&#125;</span></span><br><span class="line">set.clear()</span><br><span class="line">set.size       <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><p><strong><code>Set</code> åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li><p>æ•°ç»„å»é‡ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[...new <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">1</span>])]         <span class="comment">// [1, 3, 6]</span></span><br><span class="line"><span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">1</span>]))  <span class="comment">// [1, 3, 6]</span></span><br></pre></td></tr></table></figure></li><li><p>å­—ç¬¦ä¸²å»é‡ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[...new <span class="built_in">Set</span>(<span class="string">&#x27;abcbacd&#x27;</span>)].join(<span class="string">&#x27;&#x27;</span>)  <span class="comment">// &#x27;abcd&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>æ±‚ä¸¤ä¸ªé›†åˆçš„äº¤é›†/å¹¶é›†/å·®é›†ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¹¶é›†</span></span><br><span class="line"><span class="keyword">let</span> union = <span class="keyword">new</span> <span class="built_in">Set</span>([...a, ...b])  <span class="comment">// Set &#123;1, 2, 3, 4&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// äº¤é›†</span></span><br><span class="line"><span class="keyword">let</span> intersect = <span class="keyword">new</span> <span class="built_in">Set</span>([...a].filter(<span class="function"><span class="params">x</span> =&gt;</span> b.has(x)))  <span class="comment">// set &#123;2, 3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ï¼ˆa ç›¸å¯¹äº b çš„ï¼‰å·®é›†</span></span><br><span class="line"><span class="keyword">let</span> difference = <span class="keyword">new</span> <span class="built_in">Set</span>([...a].filter(<span class="function"><span class="params">x</span> =&gt;</span> !b.has(x)))  <span class="comment">// Set &#123;1&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>éå†ä¿®æ”¹é›†åˆæˆå‘˜çš„å€¼ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•ä¸€</span></span><br><span class="line"><span class="keyword">let</span> set1 = <span class="keyword">new</span> <span class="built_in">Set</span>([...set].map(<span class="function"><span class="params">val</span> =&gt;</span> val * <span class="number">2</span>))     <span class="comment">// Set &#123;2, 3, 6&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•äºŒ</span></span><br><span class="line"><span class="keyword">let</span> set2 = <span class="keyword">new</span> <span class="built_in">Set</span>(<span class="built_in">Array</span>.from(set, <span class="function"><span class="params">val</span> =&gt;</span> val * <span class="number">2</span>))  <span class="comment">// Set &#123;2, 4, 6&#125;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h3><ul><li><p><code>WeakSet</code> å¯¹è±¡å…è®¸å°†å¼±ä¿æŒå¯¹è±¡å­˜å‚¨åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ws = <span class="keyword">new</span> <span class="built_in">WeakSet</span>()</span><br><span class="line"><span class="keyword">let</span> foo = &#123;&#125;</span><br><span class="line">ws.add(foo)  <span class="comment">// WeakSet &#123;&#123;&#125;&#125;</span></span><br><span class="line">ws.has(foo)  <span class="comment">// true</span></span><br><span class="line">ws.delete(foo)  <span class="comment">// WeakSet &#123;&#125;</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>å’Œ <code>Set</code> çš„åŒºåˆ«</strong>ï¼š</p><ul><li><code>WeakSet</code> åªèƒ½æ˜¯å¯¹è±¡çš„é›†åˆï¼Œè€Œä¸èƒ½æ˜¯ä»»ä½•ç±»å‹çš„ä»»æ„å€¼ï¼›</li><li><code>WeakSet</code> æŒå¼±å¼•ç”¨ï¼šé›†åˆä¸­å¯¹è±¡çš„å¼•ç”¨ä¸ºå¼±å¼•ç”¨ã€‚å¦‚æœæ²¡æœ‰å…¶ä»–çš„å¯¹ <code>WeakSet</code> ä¸­å¯¹è±¡çš„å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™äº›å¯¹è±¡ä¼šè¢«å½“æˆåƒåœ¾å›æ”¶æ‰ã€‚è¿™ä¹Ÿæ„å‘³ç€ <code>WeakSet</code> ä¸­æ²¡æœ‰å­˜å‚¨å½“å‰å¯¹è±¡çš„åˆ—è¡¨ã€‚æ­£å› ä¸ºè¿™æ ·ï¼Œ<code>WeakSet</code> æ˜¯ä¸å¯æšä¸¾çš„ï¼Œä¹Ÿå°±æ²¡æœ‰ <code>size</code> å±æ€§ï¼Œæ²¡æœ‰ <code>clear</code> å’Œéå†çš„æ–¹æ³•ã€‚</li></ul><p><strong>å®ä¾‹æ–¹æ³•</strong>ï¼š</p><ul><li><code>WeakSet.prototype.add(value)</code>ï¼šæ·»åŠ ä¸€ä¸ªæ–°å…ƒç´  <code>value</code>ï¼›</li><li><code>WeakSet.prototype.delete(value)</code>ï¼šä»è¯¥ <code>WeakSet</code> å¯¹è±¡ä¸­åˆ é™¤ <code>value</code> è¿™ä¸ªå…ƒç´ ï¼›</li><li><code>WeakSet.prototype.has(value)</code>ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼,  è¡¨ç¤ºç»™å®šçš„å€¼ <code>value</code> æ˜¯å¦å­˜åœ¨äºè¿™ä¸ª <code>WeakSet</code> ä¸­ï¼›</li></ul><h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><ul><li><p><code>Map</code> æ˜¯ä¸€ç§ç±»ä¼¼äº <code>Object</code> çš„è¿™ç§é”®å€¼å¯¹çš„æ•°æ®ç»“æ„ï¼ŒåŒºåˆ«æ˜¯å¯¹è±¡çš„é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ–è€… <code>Symbol</code>ï¼Œè€Œ <code>Map</code> çš„é”®å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼ˆåŸå§‹ç±»å‹ã€å¯¹è±¡æˆ–è€…å‡½æ•°ï¼‰ï¼Œå¯ä»¥é€šè¿‡ <code>Map</code> æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œå…¥å‚æ˜¯å…·æœ‰ <code>Iterator</code> æ¥å£ä¸”æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªåŒå…ƒç´ æ•°ç»„ <code>[key, value]</code> çš„æ•°æ®ç»“æ„ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map1 = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">map1.set(&#123;&#125;, <span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [[<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;å¸ƒå…°&#x27;</span>], [<span class="string">&#x27;age&#x27;</span>, <span class="number">12</span>]]</span><br><span class="line"><span class="keyword">let</span> map2 = <span class="keyword">new</span> <span class="built_in">Map</span>(arr)</span><br></pre></td></tr></table></figure></li><li><p><code>Map</code> ä¸­çš„é”®å’Œ <code>Set</code> é‡Œçš„å€¼ä¸€æ ·ä¹Ÿå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œéµå¾ª <a href="https://tc39.es/ecma262/#sec-samevaluezero">sameValueZero</a> ç®—æ³•ï¼Œå¯¹äºåŒä¸€ä¸ªé”®åé¢æ’å…¥çš„ä¼šè¦†ç›–å‰é¢çš„ï¼Œ</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line"><span class="keyword">let</span> foo = &#123;<span class="attr">foo</span>: <span class="string">&#x27;foo&#x27;</span>&#125;</span><br><span class="line">map.set(foo, <span class="string">&#x27;foo1&#x27;</span>)</span><br><span class="line">map.set(foo, <span class="string">&#x27;foo2&#x27;</span>)</span><br><span class="line">map.get(foo)  <span class="comment">// &#x27;foo2&#x27; </span></span><br></pre></td></tr></table></figure></li><li><p>å¯¹äºé”®ååŒä¸º <code>NaN</code> ä»¥åŠç›¸åŒå¯¹è±¡è€Œä¸åŒå®ä¾‹çš„å¤„ç†åŒ <code>Set</code> çš„å€¼ä¸€æ ·ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="literal">NaN</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="literal">NaN</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">map.set(a, <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">map.set(b, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">map.size    <span class="comment">// 1</span></span><br><span class="line">map.get(a)  <span class="comment">// &#x27;b&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = &#123;<span class="attr">c</span>: <span class="string">&#x27;c&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">let</span> d = &#123;<span class="attr">c</span>: <span class="string">&#x27;c&#x27;</span>&#125;</span><br><span class="line">map.set(c, <span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">map.set(d, <span class="string">&#x27;d&#x27;</span>)</span><br><span class="line">map.size    <span class="comment">// 3</span></span><br><span class="line">map.get(c)  <span class="comment">// &#x27;c&#x27;</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>å®ä¾‹å±æ€§å’Œæ–¹æ³•</strong>ï¼š</p><ul><li><code>Map.prototype.size</code>ï¼šè¿”å› <code>Map</code> å¯¹è±¡çš„é”®å€¼å¯¹æ•°é‡ï¼›</li><li><code>Map.prototype.set(key, value)</code>ï¼šè®¾ç½® <code>Map</code> å¯¹è±¡ä¸­é”®çš„å€¼ã€‚è¿”å›è¯¥ <code>Map</code> å¯¹è±¡ï¼›</li><li><code>Map.prototype.get(key)</code>ï¼š è¿”å›é”®å¯¹åº”çš„å€¼ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› <code>undefined</code>ï¼›</li><li><code>Map.prototype.has(key)</code>ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤º <code>Map</code> å®ä¾‹æ˜¯å¦åŒ…å«é”®å¯¹åº”çš„å€¼ï¼›</li><li><code>Map.prototype.delete(key)</code>ï¼š å¦‚æœ <code>Map</code> å¯¹è±¡ä¸­å­˜åœ¨è¯¥å…ƒç´ ï¼Œåˆ™ç§»é™¤å®ƒå¹¶è¿”å› <code>true</code>ï¼›</li><li><code>Map.prototype.clear()</code>ï¼š ç§»é™¤ <code>Map</code> å¯¹è±¡çš„æ‰€æœ‰é”®/å€¼å¯¹ï¼›</li><li><code>Map.prototype.keys()</code>ï¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>Iterator</code> å¯¹è±¡ï¼Œ å®ƒæŒ‰æ’å…¥é¡ºåºåŒ…å«äº† <code>Map</code> å¯¹è±¡ä¸­æ¯ä¸ªå…ƒç´ çš„é”®ï¼›</li><li><code>Map.prototype.values()</code>ï¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>Iterator</code> å¯¹è±¡ï¼Œå®ƒæŒ‰æ’å…¥é¡ºåºåŒ…å«äº† <code>Map</code> å¯¹è±¡ä¸­æ¯ä¸ªå…ƒç´ çš„å€¼ï¼›</li><li><code>Map.prototype.entries()</code>ï¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>Iterator</code> å¯¹è±¡ï¼Œå®ƒæŒ‰æ’å…¥é¡ºåºåŒ…å«äº† <code>Map</code> å¯¹è±¡ä¸­æ¯ä¸ªå…ƒç´ çš„ <code>[key, value]</code> æ•°ç»„ï¼›</li><li><code>Map.prototype.forEach(callbackFn[, thisArg])</code>ï¼šæŒ‰æ’å…¥é¡ºåºéå† <code>Map</code>ï¼›</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">map.set(&#123;<span class="attr">a</span>: <span class="number">1</span>&#125;, <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">map.set(&#123;<span class="attr">a</span>: <span class="number">2</span>&#125;, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key, value)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#123;a: 1&#125; &#x27;a&#x27;</span></span><br><span class="line"><span class="comment">// &#123;a: 2&#125; &#x27;b&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> map.keys()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#123;a: 1&#125;</span></span><br><span class="line"><span class="comment">// &#123;a: 2&#125;</span></span><br></pre></td></tr></table></figure><h3 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h3><ul><li><p>ç±»ä¼¼äº <code>Map</code> çš„ç»“æ„ï¼Œä½†æ˜¯é”®å¿…é¡»æ˜¯å¯¹è±¡çš„å¼±å¼•ç”¨ï¼Œæ³¨æ„å¼±å¼•ç”¨çš„æ˜¯é”®åè€Œä¸æ˜¯é”®å€¼ï¼Œå› è€Œ <code>WeakMap</code> æ˜¯ä¸èƒ½è¢«è¿­ä»£çš„ï¼›</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> wm = <span class="keyword">new</span> <span class="built_in">WeakMap</span>()</span><br><span class="line"><span class="keyword">let</span> foo = &#123;<span class="attr">name</span>: <span class="string">&#x27;foo&#x27;</span>&#125;</span><br><span class="line">wm.set(foo, <span class="string">&#x27;a&#x27;</span>)  <span class="comment">// Weak</span></span><br><span class="line">wm.get(foo)       <span class="comment">// &#x27;a&#x27;</span></span><br><span class="line">wm.has(foo)       <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>  è™½ç„¶ <code>wm</code> çš„é”®å¯¹ <code>foo</code> å¯¹è±¡æœ‰å¼•ç”¨ï¼Œä½†æ˜¯ä¸æ¯«ä¸ä¼šé˜»æ­¢ <code>foo</code> å¯¹è±¡è¢« <code>GC</code> å›æ”¶ã€‚å½“å¼•ç”¨å¯¹è±¡ <code>foo</code> è¢«åƒåœ¾å›æ”¶ä¹‹åï¼Œ<code>wm</code> çš„ <code>foo</code> é”®å€¼å¯¹ä¹Ÿä¼šè‡ªåŠ¨ç§»é™¤ï¼Œæ‰€ä»¥ä¸ç”¨æ‰‹åŠ¨åˆ é™¤å¼•ç”¨ã€‚</p></li></ul><p><strong>å®ä¾‹æ–¹æ³•</strong>ï¼š</p><ul><li><code>WeakMap.prototype.delete(key)</code>ï¼šç§»é™¤ <code>key</code> çš„å…³è”å¯¹è±¡ï¼›</li><li><code>WeakMap.prototype.get(key)</code>ï¼šè¿”å›keyå…³è”å¯¹è±¡, æˆ–è€… undefined(æ²¡æœ‰keyå…³è”å¯¹è±¡æ—¶)ï¼›</li><li><code>WeakMap.prototype.has(key)</code>ï¼šæ ¹æ®æ˜¯å¦æœ‰ <code>key</code> å…³è”å¯¹è±¡è¿”å›ä¸€ä¸ª <code>Boolean</code> å€¼ï¼›</li><li><code>WeakMap.prototype.set(key, value)</code>ï¼šåœ¨ <code>WeakMap</code> ä¸­è®¾ç½®ä¸€ç»„ <code>key</code> å…³è”å¯¹è±¡ï¼Œè¿”å›è¿™ä¸ª <code>WeakMap</code> å¯¹è±¡ï¼›</li></ul><h3 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h3><ul><li><p><code>Proxy</code> ç”¨æ¥å®šä¹‰åŸºæœ¬æ“ä½œçš„çš„è‡ªå®šä¹‰è¡Œä¸ºï¼Œå¯ä»¥ç†è§£ä¸ºå½“å¯¹ç›®æ ‡å¯¹è±¡ <code>target</code> è¿›è¡ŒæŸä¸ªæ“ä½œä¹‹å‰ä¼šå…ˆè¿›è¡Œæ‹¦æˆªï¼ˆæ‰§è¡Œ <code>handler</code> é‡Œå®šä¹‰çš„æ–¹æ³•ï¼‰ï¼Œå¿…é¡»è¦å¯¹ <code>Proxy</code> å®ä¾‹è¿›è¡Œæ“ä½œæ‰èƒ½è§¦å‘æ‹¦æˆªï¼Œå¯¹ç›®æ ‡å¯¹è±¡æ“ä½œæ˜¯ä¸ä¼šæ‹¦æˆªçš„ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼å®šä¹‰ä¸€ä¸ªä»£ç†å®ä¾‹</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(target, handler)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> instance = <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span>&#125;, &#123;</span><br><span class="line">    get(target, propKey, receiver) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`hello, <span class="subst">$&#123;target.name&#125;</span>`</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">instance.name  <span class="comment">// &#x27;hello, å¸ƒå…°&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœ <code>handle</code> æ²¡æœ‰è®¾ç½®ä»»ä½•æ‹¦æˆªï¼Œé‚£ä¹ˆå¯¹å®ä¾‹çš„æ“ä½œå°±ä¼šè½¬å‘åˆ°ç›®æ ‡å¯¹è±¡èº«ä¸Šï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> target = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(target, &#123;&#125;)</span><br><span class="line">proxy.name = <span class="string">&#x27;å¸ƒå…°&#x27;</span></span><br><span class="line">target.name  <span class="comment">// &#x27;å¸ƒå…°&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>ç›®æ ‡å¯¹è±¡è¢« <code>Proxy</code> ä»£ç†çš„æ—¶å€™ï¼Œå†…éƒ¨çš„ <code>this</code> ä¼šæŒ‡å‘ä»£ç†çš„å®ä¾‹ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123;</span><br><span class="line">    m: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span> === proxy)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> handler = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(target, handler)</span><br><span class="line">target.m()  <span class="comment">// false</span></span><br><span class="line">proxy.m()   <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>é™æ€æ–¹æ³•</strong>ï¼š</p><ul><li><p><code>Proxy.revocable()</code> ç”¨ä»¥å®šä¹‰ä¸€ä¸ªå¯æ’¤é”€çš„ <code>Proxy</code>ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> target = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> handler = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;proxy, revoke&#125; = <span class="built_in">Proxy</span>.revocable(target, handler)</span><br><span class="line"></span><br><span class="line">proxy.foo = <span class="number">123</span></span><br><span class="line">proxy.foo  <span class="comment">// 123</span></span><br><span class="line">revoke()</span><br><span class="line">proxy.foo  <span class="comment">// TypeError</span></span><br></pre></td></tr></table></figure></li></ul><p><strong><code>handle</code> å¯¹è±¡çš„æ–¹æ³•</strong>ï¼š</p><ul><li><code>get(target, propKey, receiver)</code>ï¼šæ‹¦æˆªå¯¹è±¡å±æ€§çš„è¯»å–ï¼Œæ¯”å¦‚proxy.fooå’Œproxy[â€˜fooâ€™]ã€‚</li><li><code>set(target, propKey, value, receiver)</code>ï¼šæ‹¦æˆªå¯¹è±¡å±æ€§çš„è®¾ç½®ï¼Œæ¯”å¦‚ <code>proxy.foo = væˆ–proxy[&#39;foo&#39;] = v</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</li><li><code>has(target, propKey)</code>ï¼šæ‹¦æˆª <code>propKey in proxy</code> çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚<br><code>deleteProperty(target, propKey)</code>ï¼šæ‹¦æˆª <code>delete proxy[propKey]</code> çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</li><li><code>ownKeys(target)</code>ï¼šæ‹¦æˆª <code>Object.getOwnPropertyNames(proxy)</code>ã€<code>Object.getOwnPropertySymbols(proxy)</code>ã€<code>Object.keys(proxy)</code>ã€<code>for...in</code> å¾ªç¯ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ç›®æ ‡å¯¹è±¡æ‰€æœ‰è‡ªèº«çš„å±æ€§çš„å±æ€§åï¼Œè€Œ <code>Object.keys()</code> çš„è¿”å›ç»“æœä»…åŒ…æ‹¬ç›®æ ‡å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§ã€‚</li><li><code>getOwnPropertyDescriptor(target, propKey)</code>ï¼šæ‹¦æˆª<code>Object.getOwnPropertyDescriptor(proxy, propKey)</code>ï¼Œè¿”å›å±æ€§çš„æè¿°å¯¹è±¡ã€‚</li><li><code>defineProperty(target, propKey, propDesc)</code>ï¼šæ‹¦æˆª <code>Object.defineProperty(proxy, propKey, propDesc)</code>ã€<code>Object.defineProperties(proxy, propDescs)</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</li><li><code>preventExtensions(target)</code>ï¼šæ‹¦æˆª <code>Object.preventExtensions(proxy)</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</li><li><code>getPrototypeOf(target)</code>ï¼šæ‹¦æˆª <code>Object.getPrototypeOf(proxy)</code>ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚</li><li><code>isExtensible(target)</code>ï¼šæ‹¦æˆª <code>Object.isExtensible(proxy)</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</li><li><code>setPrototypeOf(target, proto)</code>ï¼šæ‹¦æˆª <code>Object.setPrototypeOf(proxy, proto)</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å¦‚æœç›®æ ‡å¯¹è±¡æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸¤ç§é¢å¤–æ“ä½œå¯ä»¥æ‹¦æˆªã€‚</li><li><code>apply(target, object, args)</code>ï¼šæ‹¦æˆª <code>Proxy</code> å®ä¾‹ä½œä¸ºå‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚<code>proxy(...args)</code>ã€<code>proxy.call(object, ...args)</code>ã€<code>proxy.apply(...)</code>ã€‚</li><li><code>construct(target, args)</code>ï¼šæ‹¦æˆª <code>Proxy</code> å®ä¾‹ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚ <code>new proxy(...args)</code>ã€‚</li></ul><h3 id="Reflect"><a href="#Reflect" class="headerlink" title="Reflect"></a>Reflect</h3><ul><li><p><code>Reflect</code> æ˜¯ä¸€ä¸ªå†…ç½®çš„å¯¹è±¡ï¼Œå®ƒæä¾›æ‹¦æˆª <code>JavaScript</code> æ“ä½œçš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•ä¸ <code>proxy handlers</code> çš„æ–¹æ³•ç›¸åŒã€‚<code>Reflect</code> ä¸æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå› æ­¤å®ƒæ˜¯ä¸å¯æ„é€ çš„ã€‚</p></li><li><p>è®¾è®¡çš„ç›®çš„ï¼š</p><ul><li>å°† <code>Object</code> å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•æ”¾åˆ° <code>Reflect</code> ä¸Šï¼›</li><li>ä¿®æ”¹æŸäº› <code>Object</code> æ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ï¼›</li><li>è®© <code>Object</code> æ“ä½œå˜æˆå‡½æ•°è¡Œä¸ºï¼›</li><li><code>Proxy handles</code> ä¸ <code>Reflect</code> æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œå‰è€…ç”¨äºå®šä¹‰è‡ªå®šä¹‰è¡Œä¸ºï¼Œè€Œåè€…ç”¨äºæ¢å¤é»˜è®¤è¡Œä¸ºï¼›</li></ul></li></ul><p><strong>é™æ€æ–¹æ³•</strong>ï¼š    </p><ul><li><code>Reflect.apply(target, thisArgument, argumentsList)</code> å¯¹ä¸€ä¸ªå‡½æ•°è¿›è¡Œè°ƒç”¨æ“ä½œï¼ŒåŒæ—¶å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ•°ç»„ä½œä¸ºè°ƒç”¨å‚æ•°ã€‚å’Œ <code>Function.prototype.apply()</code> åŠŸèƒ½ç±»ä¼¼ï¼›</li><li><code>Reflect.construct(target, argumentsList[, newTarget])</code> å¯¹æ„é€ å‡½æ•°è¿›è¡Œ <code>new</code> æ“ä½œï¼Œç›¸å½“äºæ‰§è¡Œ <code>new target(...args)</code>ï¼›</li><li><code>Reflect.defineProperty(target, propertyKey, attributes)</code> å’Œ <code>Object.defineProperty()</code> ç±»ä¼¼ã€‚å¦‚æœè®¾ç½®æˆåŠŸå°±ä¼šè¿”å› <code>true</code>ï¼›</li><li><code>Reflect.deleteProperty(target, propertyKey)</code> ä½œä¸ºå‡½æ•°çš„ <code>delete</code> æ“ä½œç¬¦ï¼Œç›¸å½“äºæ‰§è¡Œ <code>delete target[name]</code>ï¼›</li><li><code>Reflect.get(target, propertyKey[, receiver])</code> è·å–å¯¹è±¡èº«ä¸ŠæŸä¸ªå±æ€§çš„å€¼ï¼Œç±»ä¼¼äº <code>target[name]</code>ï¼›</li><li><code>Reflect.getOwnPropertyDescriptor(target, propertyKey)</code> ç±»ä¼¼äº <code>Object.getOwnPropertyDescriptor()</code>ã€‚å¦‚æœå¯¹è±¡ä¸­å­˜åœ¨è¯¥å±æ€§ï¼Œåˆ™è¿”å›å¯¹åº”çš„å±æ€§æè¿°ç¬¦,  å¦åˆ™è¿”å› <code>undefined</code>ï¼›</li><li><code>Reflect.getPrototypeOf(target)</code> ç±»ä¼¼äº <code>Object.getPrototypeOf()</code>ï¼›</li><li><code>Reflect.has(target, propertyKey)</code> åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨æŸä¸ªå±æ€§ï¼Œå’Œ <code>in</code> è¿ç®—ç¬¦ çš„åŠŸèƒ½å®Œå…¨ç›¸åŒï¼›</li><li><code>Reflect.isExtensible(target)</code> ç±»ä¼¼äº <code>Object.isExtensible()</code>ï¼›</li><li><code>Reflect.ownKeys(target)</code> è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰è‡ªèº«å±æ€§ï¼ˆä¸åŒ…å«ç»§æ‰¿å±æ€§ï¼‰çš„æ•°ç»„ã€‚(ç±»ä¼¼äº <code>Object.keys()</code>, ä½†ä¸ä¼šå— <code>enumerable</code> å½±å“)ï¼›</li><li><code>Reflect.preventExtensions(target)</code> ç±»ä¼¼äº <code>Object.preventExtensions()</code>ã€‚è¿”å›ä¸€ä¸ª <code>Boolean</code>ï¼›</li><li><code>Reflect.set(target, propertyKey, value[, receiver])</code> å°†å€¼åˆ†é…ç»™å±æ€§çš„å‡½æ•°ã€‚è¿”å›ä¸€ä¸ª <code>Boolean</code>ï¼Œå¦‚æœæ›´æ–°æˆåŠŸï¼Œåˆ™è¿”å› <code>true</code>ï¼›</li><li><code>Reflect.setPrototypeOf(target, prototype)</code> è®¾ç½®å¯¹è±¡åŸå‹çš„å‡½æ•°. è¿”å›ä¸€ä¸ª <code>Boolean</code>ï¼Œ å¦‚æœæ›´æ–°æˆåŠŸï¼Œåˆ™è¿”å› <code>true</code>ï¼›</li></ul><h3 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h3><ul><li><p>å¯ä»¥ç”¨ <code>class</code> å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªç±»ï¼Œç±»æ˜¯å¯¹ä¸€ç±»å…·æœ‰å…±åŒç‰¹å¾çš„äº‹ç‰©çš„æŠ½è±¡ï¼Œå°±æ¯”å¦‚å¯ä»¥æŠŠå°ç‹—å®šä¹‰ä¸ºä¸€ä¸ªç±»ï¼Œå°ç‹—æœ‰åå­—ä¼šå«ä¹Ÿä¼šè·³ï¼›ç±»æ˜¯ç‰¹æ®Šçš„å‡½æ•°ï¼Œå°±åƒå‡½æ•°å®šä¹‰çš„æ—¶å€™æœ‰å‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼ä¸€æ ·ï¼Œç±»çš„å®šä¹‰ä¹Ÿæœ‰ç±»å£°æ˜å’Œç±»è¡¨è¾¾å¼ï¼Œä¸è¿‡ç±»å£°æ˜ä¸åŒäºå‡½æ•°å£°æ˜ï¼Œå®ƒæ˜¯æ— æ³•æå‡çš„ï¼›ç±»ä¹Ÿæœ‰ <code>name</code> å±æ€§</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç±»å£°æ˜</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">    bark() &#123;&#125;</span><br><span class="line">    jump() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">Dog.name  <span class="comment">// &#x27;Dog&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»è¡¨è¾¾å¼ï¼šå¯ä»¥å‘½åï¼ˆç±»çš„ name å±æ€§å–ç±»åï¼‰ï¼Œä¹Ÿå¯ä»¥ä¸å‘½åï¼ˆç±»çš„ name å±æ€§å–å˜é‡åï¼‰</span></span><br><span class="line"><span class="keyword">let</span> Animal2 = <span class="class"><span class="keyword">class</span> </span>&#123;</span><br><span class="line">    <span class="comment">// xxx</span></span><br><span class="line">&#125;</span><br><span class="line">Animal2.name  <span class="comment">// &#x27;Animal2&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p><code>JS</code> ä¸­çš„ç±»å»ºç«‹åœ¨åŸå‹çš„åŸºç¡€ä¸Šï¼ˆé€šè¿‡å‡½æ•°æ¥æ¨¡æ‹Ÿç±»ï¼Œå…¶å®ç±»å°±æ˜¯æ„é€ å‡½æ•°çš„è¯­æ³•ç³–ï¼‰ï¼Œå’Œ <code>ES5</code> ä¸­æ„é€ å‡½æ•°ç±»ä¼¼ï¼Œä½†æ˜¯ä¹Ÿæœ‰åŒºåˆ«ï¼Œæ¯”å¦‚ç±»çš„å†…éƒ¨æ–¹æ³•æ˜¯ä¸å¯è¢«è¿­ä»£çš„ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;&#125;</span><br><span class="line">    bark() &#123;&#125;</span><br><span class="line">    jump() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.keys(Dog.prototype)  <span class="comment">// []</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»ä¼¼äº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dog2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">Dog2.prototype = &#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;&#125;,</span><br><span class="line">    bark() &#123;&#125;,</span><br><span class="line">    jump() &#123;&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.keys(Dog2.prototype)  <span class="comment">// [&#x27;constructor&#x27;, &#x27;bark&#x27;, &#x27;jump&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p>åŸºäºåŸå‹ç»™ç±»æ·»åŠ æ–°æ–¹æ³•ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(Dog.prototype, &#123;</span><br><span class="line">    wag() &#123;&#125;  <span class="comment">// æ‘‡å°¾å·´</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç±»å£°æ˜å’Œç±»è¡¨è¾¾å¼çš„ä¸»ä½“éƒ½æ‰§è¡Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ã€‚æ¯”å¦‚ï¼Œæ„é€ å‡½æ•°ï¼Œé™æ€æ–¹æ³•ï¼ŒåŸå‹æ–¹æ³•ï¼Œ<code>getter</code>å’Œ <code>setter</code> éƒ½åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æ‰§è¡Œã€‚</p></li><li><p>ç±»å†…éƒ¨çš„ <code>this</code> é»˜è®¤æŒ‡å‘ç±»å®ä¾‹ï¼Œæ‰€ä»¥å¦‚æœç›´æ¥è°ƒç”¨åŸå‹æ–¹æ³•æˆ–è€…é™æ€æ–¹æ³•ä¼šå¯¼è‡´ <code>this</code> æŒ‡å‘è¿è¡Œæ—¶çš„ç¯å¢ƒï¼Œè€Œç±»å†…éƒ¨æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥æ­¤æ—¶çš„ <code>this</code> ä¼šæ˜¯ <code>undefined</code>ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">    bark() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span> is bark.`</span> )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> jump() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span> is jump.`</span> )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> dog = <span class="keyword">new</span> Dog(<span class="string">&#x27;å¤§é»„&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> &#123; bark &#125; = dog</span><br><span class="line"><span class="keyword">let</span> &#123; jump &#125; = Dog</span><br><span class="line">bark()  <span class="comment">// TypeError: Cannot read property &#x27;name&#x27; of undefined</span></span><br><span class="line">jump()  <span class="comment">// TypeError: Cannot read property &#x27;name&#x27; of undefined</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>æ–¹æ³•å’Œå…³é”®å­—</strong>ï¼š</p><ul><li><p><code>constructor</code> æ–¹æ³•æ˜¯ç±»çš„é»˜è®¤æ–¹æ³•ï¼Œé€šè¿‡ <code>new</code> å…³é”®å­—ç”Ÿæˆå®ä¾‹çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ï¼›ä¸€ä¸ªç±»å¿…é¡»æœ‰<code>constructor</code> æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ˜¾ç¤ºå®šä¹‰ï¼Œåˆ™ä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªç©ºçš„ï¼›<code>constructor</code> é»˜è®¤ä¼šè¿”å›å®ä¾‹å¯¹è±¡ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç­‰åŒäº</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>() &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">- é€šè¿‡ `</span>get<span class="string">` å’Œ `</span>set<span class="string">` å…³é”®å­—æ‹¦æˆªæŸä¸ªå±æ€§çš„è¯»å†™æ“ä½œï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    `</span><span class="string">``</span>js</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">        <span class="keyword">get</span> <span class="title">age</span>()&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> <span class="title">age</span>(<span class="params">val</span>)&#123;</span><br><span class="line">            <span class="built_in">this</span>.age = val</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>ç”¨ <code>static</code> å…³é”®å­—ç»™ç±»å®šä¹‰é™æ€æ–¹æ³•ï¼Œé™æ€æ–¹æ³•ä¸ä¼šå­˜åœ¨ç±»çš„åŸå‹ä¸Šï¼Œæ‰€ä»¥ä¸èƒ½é€šè¿‡ç±»å®ä¾‹è°ƒç”¨ï¼Œåªèƒ½é€šè¿‡ç±»åæ¥è°ƒç”¨ï¼Œé™æ€æ–¹æ³•å’ŒåŸå‹æ–¹æ³•å¯ä»¥åŒåï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    bark() &#123;&#125;</span><br><span class="line">    jump() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;åŸå‹æ–¹æ³•&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> jump() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;é™æ€æ–¹æ³•&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(Dog.prototype)  <span class="comment">// [&#x27;constructor&#x27;, &#x27;bark&#x27;, &#x27;jump&#x27;]</span></span><br><span class="line">Dog.jump()  <span class="comment">// &#x27;é™æ€æ–¹æ³•&#x27;</span></span><br><span class="line"><span class="keyword">let</span> dog = <span class="keyword">new</span> Dog()</span><br><span class="line">dog.jump()  <span class="comment">// &#x27;åŸå‹æ–¹æ³•&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>å…¬æœ‰å­—æ®µå’Œç§æœ‰å­—æ®µï¼š</p><p>  é™æ€å…¬æœ‰å­—æ®µå’Œé™æ€æ–¹æ³•ä¸€æ ·åªèƒ½é€šè¿‡ç±»åè°ƒç”¨ï¼›ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•åªèƒ½åœ¨ç±»çš„å†…éƒ¨è°ƒç”¨ï¼Œå¤–éƒ¨è°ƒç”¨å°†æŠ¥é”™ï¼š</p>  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    age = <span class="number">12</span>                   <span class="comment">// å…¬æœ‰å­—æ®µ</span></span><br><span class="line">    <span class="keyword">static</span> sex = <span class="string">&#x27;male&#x27;</span>        <span class="comment">// é™æ€å…¬æœ‰å­—æ®µ</span></span><br><span class="line">    #secret = &#x27;æˆ‘æ˜¯äººç±»çš„å¥½æœ‹å‹&#x27;  // ç§æœ‰å­—æ®µ</span><br><span class="line">    #getSecret() &#123;              // ç§æœ‰æ–¹æ³•</span><br><span class="line">        return this.#secret</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Dog.sex  <span class="comment">// &#x27;male&#x27;</span></span><br><span class="line"><span class="keyword">let</span> dog = <span class="keyword">new</span> Dog()</span><br><span class="line">dog.#getSecret()  // SyntaxError</span><br></pre></td></tr></table></figure><blockquote><p>å…¬å…±å’Œç§æœ‰å­—æ®µå£°æ˜æ˜¯ JavaScript æ ‡å‡†å§”å‘˜ä¼š TC39 æå‡ºçš„å®éªŒæ€§åŠŸèƒ½ï¼ˆç¬¬ 3 é˜¶æ®µï¼‰ã€‚æµè§ˆå™¨ä¸­çš„æ”¯æŒæ˜¯æœ‰é™çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ Babel ç­‰ç³»ç»Ÿæ„å»ºåä½¿ç”¨æ­¤åŠŸèƒ½ã€‚</p></blockquote></li><li><p><code>new.target</code> å±æ€§å…è®¸ä½ æ£€æµ‹å‡½æ•°ã€æ„é€ æ–¹æ³•æˆ–è€…ç±»æ˜¯å¦æ˜¯é€šè¿‡ <code>new</code> è¿ç®—ç¬¦è¢«è°ƒç”¨çš„ã€‚åœ¨é€šè¿‡ <code>new</code> è¿ç®—ç¬¦è¢«åˆå§‹åŒ–çš„å‡½æ•°æˆ–æ„é€ æ–¹æ³•ä¸­ï¼Œ<code>new.target</code> è¿”å›ä¸€ä¸ªæŒ‡å‘æ„é€ æ–¹æ³•æˆ–å‡½æ•°çš„å¼•ç”¨ã€‚åœ¨æ™®é€šçš„å‡½æ•°è°ƒç”¨ä¸­ï¼Œ<code>new.target</code> çš„å€¼æ˜¯ <code>undefined</code>ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»çš„æ—¶å€™ä¼šè¿”å›å­ç±»ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">new</span>.target.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">new</span>.target) <span class="keyword">return</span> <span class="string">&#x27;new target is undefined&#x27;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;fn is called by new&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> dog = <span class="keyword">new</span> Dog()  <span class="comment">// &#x27;Dog&#x27;</span></span><br><span class="line">fn()                 <span class="comment">// &#x27;new target is undefined&#x27;</span></span><br><span class="line"><span class="keyword">new</span> fn()             <span class="comment">// &#x27;fn is called by new&#x27;</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>ç±»çš„ç»§æ‰¿</strong>ï¼š</p><ul><li><p>ç±»å¯ä»¥é€šè¿‡ <code>extends</code> å…³é”®å­—å®ç°ç»§æ‰¿ï¼Œå¦‚æœå­ç±»æ˜¾ç¤ºçš„å®šä¹‰äº† <code>constructor</code> åˆ™å¿…é¡»åœ¨å†…éƒ¨è°ƒç”¨ <code>super()</code> æ–¹æ³•ï¼Œå†…éƒ¨çš„ <code>this</code> æŒ‡å‘å½“å‰å­ç±»ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">    run() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span> is running.`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name)&#123;</span><br><span class="line">        <span class="built_in">super</span>(name)  <span class="comment">// å¿…é¡»è°ƒç”¨</span></span><br><span class="line">        <span class="built_in">this</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">    bark() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span> is barking.`</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> dog = <span class="keyword">new</span> Dog(<span class="string">&#x27;å¤§é»„&#x27;</span>)</span><br><span class="line">dog.run()  <span class="comment">// &#x27;å¤§é»„ is running.&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡ <code>super()</code> è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°æˆ–è€…é€šè¿‡ <code>super</code> è°ƒç”¨çˆ¶ç±»çš„åŸå‹æ–¹æ³•ï¼›å¦å¤–ä¹Ÿå¯ä»¥åœ¨å­ç±»çš„é™æ€æ–¹æ³•é‡Œé€šè¿‡ <code>super</code> è°ƒç”¨çˆ¶ç±»çš„é™æ€æ–¹æ³•ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">// åŸºäºä¸Šé¢çš„ä»£ç æ”¹é€ </span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>(name)&#123;</span><br><span class="line">            <span class="built_in">super</span>(name)  <span class="comment">// è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span></span><br><span class="line">            <span class="built_in">this</span>.name = name</span><br><span class="line">        &#125;</span><br><span class="line">        bark() &#123;</span><br><span class="line">            <span class="built_in">super</span>.run()  <span class="comment">// è°ƒç”¨çˆ¶ç±»åŸå‹æ–¹æ³•</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span> is barking.`</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> dog = <span class="keyword">new</span> Dog()</span><br><span class="line">    dog.bark()s</span><br><span class="line">    <span class="comment">// &#x27;å¤§é»„ is running.&#x27;</span></span><br><span class="line">    <span class="comment">// &#x27;å¤§é»„ is barking.&#x27;</span></span><br><span class="line">    <span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">- å­ç±»çš„ `</span>__proto__<span class="string">` å±æ€§ï¼Œè¡¨ç¤ºæ„é€ å‡½æ•°çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»ï¼›å­ç±» `</span>prototype<span class="string">` å±æ€§çš„ `</span>__proto__<span class="string">` å±æ€§ï¼Œè¡¨ç¤ºæ–¹æ³•çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»çš„prototypeå±æ€§ï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    `</span><span class="string">``</span>js</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;&#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    Dog.__proto__ === Animal  <span class="comment">// true</span></span><br><span class="line">    Dog.prototype.__proto__ === Animal.prototype  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>  å­ç±»åŸå‹çš„åŸå‹æŒ‡å‘çˆ¶ç±»çš„åŸå‹ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸºäºä¸Šé¢çš„ä»£ç </span></span><br><span class="line"><span class="keyword">let</span> animal = <span class="keyword">new</span> Animal()</span><br><span class="line"><span class="keyword">let</span> dog = <span class="keyword">new</span> Dog()</span><br><span class="line">dog.__proto__.__proto__  === animal.__proto__  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ <code>extends</code> è¿˜å¯ä»¥å®ç°ç»§æ‰¿åŸç”Ÿçš„æ„é€ å‡½æ•°ï¼Œå¦‚ä¸‹è¿™äº›æ„é€ å‡½æ•°éƒ½å¯ä»¥è¢«ç»§æ‰¿ï¼š</p><ul><li><p><code>String()</code></p></li><li><p><code>Number()</code></p></li><li><p><code>Boolean()</code></p></li><li><p><code>Array()</code></p></li><li><p><code>Object()</code></p></li><li><p><code>Function()</code></p></li><li><p><code>Date()</code></p></li><li><p><code>RegExp()</code></p></li><li><p><code>Error()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyString</span> <span class="keyword">extends</span> <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name)&#123;</span><br><span class="line">        <span class="built_in">super</span>(name)</span><br><span class="line">        <span class="built_in">this</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">    welcome() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`hello <span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> ms = <span class="keyword">new</span> MyString(<span class="string">&#x27;å¸ƒå…°&#x27;</span>)</span><br><span class="line">ms.welcome()      <span class="comment">// &#x27;hello å¸ƒå…°&#x27;</span></span><br><span class="line">ms.length         <span class="comment">// 2</span></span><br><span class="line">ms.indexOf(<span class="string">&#x27;å…°&#x27;</span>)  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h3><ul><li><p>æµè§ˆå™¨ä¼ ç»ŸåŠ è½½æ¨¡å—æ–¹å¼ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒæ­¥åŠ è½½</span></span><br><span class="line">&lt;script src=<span class="string">&quot;test.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// deferå¼‚æ­¥åŠ è½½ï¼šé¡ºåºæ‰§è¡Œï¼Œæ–‡æ¡£è§£æå®Œæˆåæ‰§è¡Œï¼›</span></span><br><span class="line">&lt;script src=<span class="string">&quot;test.js&quot;</span> defer&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// asyncå¼‚æ­¥åŠ è½½ï¼šä¹±åºåŠ è½½ï¼Œä¸‹è½½å®Œå°±æ‰§è¡Œã€‚</span></span><br><span class="line">&lt;script src=<span class="string">&quot;test.js&quot;</span> <span class="keyword">async</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>æµè§ˆå™¨ç°åœ¨å¯ä»¥æŒ‰ç…§æ¨¡å—ï¼ˆåŠ ä¸Š <code>type=&quot;module&quot;</code>ï¼‰æ¥åŠ è½½è„šæœ¬ï¼Œé»˜è®¤å°†æŒ‰ç…§ <code>defer</code> çš„æ–¹å¼å¼‚æ­¥åŠ è½½ï¼›<code>ES6</code> çš„æ¨¡å—åŠ è½½ä¾èµ–äº <code>import</code> å’Œ <code>export</code> è¿™ 2 ä¸ªå‘½ä»¤ï¼›æ¨¡å—å†…éƒ¨è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¨¡å—åŠ è½½</span></span><br><span class="line">&lt;script type=<span class="string">&quot;module&quot;</span> src=<span class="string">&quot;test.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p><code>export</code> ç”¨äºè¾“å‡ºæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œä¸€ä¸ªæ¨¡å—å†…åªèƒ½å…è®¸ä¸€ä¸ª <code>export default</code> å­˜åœ¨ï¼Œä»¥ä¸‹æ˜¯å‡ ç§è¾“å‡ºæ¨¡å—æ¥å£çš„å†™æ³•ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// person.js</span></span><br><span class="line"><span class="comment">// å†™æ³•ä¸€ï¼šå•ç‹¬å¯¼å‡º</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> name = <span class="string">&#x27;å¸ƒå…°&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> age = <span class="number">12</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•äºŒï¼šæŒ‰éœ€å¯¼å‡º</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;å¸ƒå…°&#x27;</span>, age = <span class="number">12</span></span><br><span class="line"><span class="keyword">export</span> &#123; name, age &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•ä¸‰ï¼šé‡å‘½ååå¯¼å‡º</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;å¸ƒå…°&#x27;</span>, age = <span class="number">12</span></span><br><span class="line"><span class="keyword">export</span> &#123; name <span class="keyword">as</span> name1, age <span class="keyword">as</span> age1 &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•å››ï¼šé»˜è®¤å¯¼å‡º</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;å¸ƒå…°&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> name</span><br></pre></td></tr></table></figure></li><li><p><code>import</code> ç”¨äºè¾“å…¥å…¶ä»–æ¨¡å—çš„æ¥å£ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‰éœ€å¯¼å…¥</span></span><br><span class="line"><span class="keyword">import</span> &#123; name, age &#125; <span class="string">&#x27;./person.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥åé‡å‘½å</span></span><br><span class="line"><span class="keyword">import</span> &#123; name1 <span class="keyword">as</span> name, age1 <span class="keyword">as</span> age &#125; <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤å¯¼å…¥</span></span><br><span class="line"><span class="keyword">import</span> person <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•´ä½“å¯¼å…¥</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> person <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ··åˆå¯¼å…¥</span></span><br><span class="line"><span class="keyword">import</span> _, &#123; each &#125; <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br></pre></td></tr></table></figure><p>  <code>import</code> å¯¼å…¥çš„ç»†èŠ‚ï¼š</p><ul><li>å¯¼å…¥çš„å˜é‡åå¿…é¡»ä¸å¯¼å‡ºæ¨¡å—çš„åå­—ä¸€è‡´ï¼Œå¯ä»¥ä½¿ç”¨ <code>as</code> è¿›è¡Œé‡å‘½åï¼›</li><li>å¯¼å…¥çš„å˜é‡éƒ½æ˜¯åªè¯»çš„ï¼Œä¸èƒ½æ”¹å†™ï¼›</li><li><code>import</code> å‘½ä»¤å…·æœ‰æå‡æ•ˆæœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œï¼›</li><li><code>import</code> æ˜¯ç¼–è¯‘æ—¶å¯¼å…¥ï¼Œæ‰€ä»¥ä¸èƒ½å°†å…¶å†™åˆ°ä»£ç å—ï¼ˆæ¯”å¦‚ <code>if</code> åˆ¤æ–­å—é‡Œï¼‰æˆ–è€…å‡½æ•°å†…éƒ¨ï¼›</li><li><code>import</code> ä¼šæ‰§è¡Œæ‰€åŠ è½½çš„æ¨¡å—çš„ä»£ç ï¼Œå¦‚æœé‡å¤å¯¼å…¥åŒä¸€ä¸ªæ¨¡å—åˆ™åªä¼šæ‰§è¡Œä¸€æ¬¡æ¨¡å—ï¼›</li></ul></li><li><p><code>import</code> å’Œ <code>export</code> çš„å¤åˆå†™æ³•ï¼š<code>export</code> å’Œ <code>import</code> è¯­å¥å¯ä»¥ç»“åˆåœ¨ä¸€èµ·å†™æˆä¸€è¡Œï¼Œç›¸å½“äºæ˜¯åœ¨å½“å‰æ¨¡å—ç›´æ¥è½¬å‘å¤–éƒ¨æ¨¡å—çš„æ¥å£ï¼Œå¤åˆå†™æ³•ä¹Ÿæ”¯æŒç”¨ <code>as</code> é‡å‘½åã€‚ä»¥ä¸‹ä¾‹å­ä¸­éœ€è¦åœ¨ <code>hub.js</code> æ¨¡å—ä¸­è½¬å‘ <code>person.js</code> çš„æ¥å£ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// person.js</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;å¸ƒå…°&#x27;</span>, age = <span class="number">12</span></span><br><span class="line"><span class="keyword">export</span> &#123; name, age &#125;</span><br><span class="line"><span class="comment">// æŒ‰éœ€è½¬å‘æ¥å£ï¼ˆä¸­è½¬æ¨¡å—ï¼šhub.jsï¼‰</span></span><br><span class="line"><span class="keyword">export</span> &#123; name, age &#125; <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span></span><br><span class="line"><span class="comment">// ç›¸å½“äº</span></span><br><span class="line"><span class="keyword">import</span> &#123; name, age &#125; <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span></span><br><span class="line"><span class="keyword">export</span> &#123; name, age &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// person.js</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;å¸ƒå…°&#x27;</span>, age = <span class="number">12</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123; name, age &#125;</span><br><span class="line"><span class="comment">// è½¬å‘é»˜è®¤æ¥å£ï¼ˆä¸­è½¬æ¨¡å—ï¼šhub.jsï¼‰</span></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span></span><br><span class="line"><span class="comment">// ç›¸å½“äº</span></span><br><span class="line"><span class="keyword">import</span> person <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> person</span><br></pre></td></tr></table></figure></li><li><p><code>ES6</code> æ¨¡å—å’Œ <code>CommonJS</code> æ¨¡å—çš„å·®å¼‚ï¼š</p><ul><li><code>CommonJS</code> æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ˆä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ï¼‰ï¼Œ<code>ES6</code> æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ï¼ˆæ˜¯åŠ¨æ€å¼•ç”¨ä¸”ä¸ä¼šç¼“å­˜å€¼ï¼Œæ¨¡å—é‡Œçš„å˜é‡ç»‘å®šå…¶æ‰€åœ¨çš„æ¨¡å—ï¼Œç­‰åˆ°è„šæœ¬çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå†æ ¹æ®è¿™ä¸ªåªè¯»å¼•ç”¨åˆ°è¢«åŠ è½½çš„é‚£ä¸ªæ¨¡å—é‡Œå»å–å€¼ï¼‰ï¼›</li><li><code>CommonJS</code> æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼Œ<code>ES6</code> æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ï¼›</li><li><code>CommonJS</code> æ¨¡å—çš„ <code>require()</code> æ˜¯åŒæ­¥åŠ è½½æ¨¡å—ï¼Œ<code>ES6</code> æ¨¡å—çš„ <code>import</code> å‘½ä»¤æ˜¯å¼‚æ­¥åŠ è½½ï¼Œæœ‰ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ä¾èµ–çš„è§£æé˜¶æ®µï¼›</li></ul></li></ul><h3 id="Iteratorå’Œforâ€¦of"><a href="#Iteratorå’Œforâ€¦of" class="headerlink" title="Iteratorå’Œforâ€¦of"></a>Iteratorå’Œforâ€¦of</h3><ul><li><p><code>Iterator</code> è¿­ä»£å™¨åè®®ï¼Œä¸ºå„ç§æ•°æ®ç»“æ„æä¾›äº†ä¸€ç§ç»Ÿä¸€æŒ‰ç…§æŸç§é¡ºåºè¿›è¡Œè®¿é—®çš„æœºåˆ¶ã€‚é€šå¸¸éƒ¨ç½²åœ¨ä¸€ä¸ªå¯è¿­ä»£æ•°æ®ç»“æ„å†…éƒ¨æˆ–å…¶åŸå‹ä¸Šã€‚ä¸€ä¸ªå¯¹è±¡è¦èƒ½å¤Ÿæˆä¸ºè¿­ä»£å™¨ï¼Œå®ƒå¿…é¡»æœ‰ä¸€ä¸ª <code>next()</code> æ–¹æ³•ï¼Œæ¯æ¬¡æ‰§è¡Œ <code>next()</code> æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«äº†ä¸€ä¸ª <code>done</code> å±æ€§ï¼ˆæ˜¯ä¸ªå¸ƒå°”å€¼ï¼Œ<code>true</code> è¡¨ç¤ºå¯ä»¥ç»§ç»­ä¸‹æ¬¡è¿­ä»£ï¼‰å’Œä¸€ä¸ª <code>value</code> å±æ€§ï¼ˆæ¯æ¬¡è¿­ä»£çš„å€¼ï¼‰ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">let</span> makeIterator = <span class="function">(<span class="params">arr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        next()&#123;</span><br><span class="line">            <span class="keyword">return</span> index &lt; arr.length ? &#123;</span><br><span class="line">                value: arr[index++],</span><br><span class="line">                done: <span class="literal">false</span></span><br><span class="line">            &#125; : &#123; <span class="attr">done</span>: <span class="literal">true</span> &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>iterable</code> å¯è¿­ä»£æ•°æ®ç»“æ„ï¼šå†…éƒ¨æˆ–è€…åŸå‹ä¸Šå¿…é¡»æœ‰ä¸€ä¸ª <code>Symbol.iterator</code> å±æ€§ï¼ˆå¦‚æœæ˜¯å¼‚æ­¥çš„åˆ™æ˜¯ <code>Symbol.asyncIterator</code>ï¼‰ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œåä¼šç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    [<span class="built_in">Symbol</span>.iterator]() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            index: <span class="number">0</span>,</span><br><span class="line">            next() &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">this</span>.index &lt; <span class="number">3</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> &#123;<span class="attr">value</span>: <span class="built_in">this</span>.index++, done: <span class="literal">false</span>&#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> &#123;<span class="attr">done</span>: <span class="literal">true</span>&#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> obj) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x)  <span class="comment">// 0 1 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  å†…ç½®çš„ä¸€äº›å¯è¿­ä»£æ•°æ®ç»“æ„æœ‰ï¼š<code>String</code>ã€<code>Array</code>ã€<code>TypedArray</code>ã€<code>Map</code> å’Œ <code>Set</code>ã€<code>arguments</code>ã€<code>NodeList</code>ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> si = <span class="string">&#x27;hi&#x27;</span>[<span class="built_in">Symbol</span>.iterator]()</span><br><span class="line">si         <span class="comment">// StringIterator</span></span><br><span class="line">si.next()  <span class="comment">// &#123;value: &#x27;h&#x27;, done: false&#125;</span></span><br><span class="line">si.next()  <span class="comment">// &#123;value: &#x27;i&#x27;, done: false&#125;</span></span><br><span class="line">si.next()  <span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure></li><li><p><code>for...of</code>ï¼šç”¨äºéå†å¯è¿­ä»£æ•°æ®ç»“æ„ï¼š</p><ul><li><p>éå†å­—ç¬¦ä¸²ï¼š<code>for...in</code> è·å–ç´¢å¼•ï¼Œ<code>for...of</code> è·å–å€¼ï¼›</p></li><li><p>éå†æ•°ç»„ï¼š<code>for...in</code> è·å–ç´¢å¼•ï¼Œ<code>for...of</code> è·å–å€¼ï¼›</p></li><li><p>éå†å¯¹è±¡ï¼š<code>for...in</code> è·å–é”®ï¼Œ<code>for...of</code> éœ€è‡ªè¡Œéƒ¨ç½² <code>[Symbol.iterator]</code> æ¥å£ï¼›</p></li><li><p>éå† <code>Set</code>ï¼š<code>for...of</code> è·å–å€¼ï¼Œ <code>for (const v of set)</code>ï¼›</p></li><li><p>éå† <code>Map</code>ï¼š<code>for...of</code> è·å–é”®å€¼å¯¹ï¼Œ<code>for (const [k, v] of map)</code>ï¼›</p></li><li><p>éå†ç±»æ•°ç»„ï¼šåŒ…å« <code>length</code> çš„å¯¹è±¡ã€<code>arguments</code> å¯¹è±¡ã€<code>NodeList</code>å¯¹è±¡(æ—  <code>Iterator</code> æ¥å£çš„ç±»æ•°ç»„å¯ç”¨ <code>Array.from()</code> è½¬æ¢)ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿­ä»£å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> <span class="string">&#x27;abc&#x27;</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x)  <span class="comment">// &#x27;a&#x27; &#x27;b&#x27; &#x27;c&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿­ä»£æ•°ç»„</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x)  <span class="comment">//  &#x27;a&#x27; &#x27;b&#x27; &#x27;c&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå† Set</span></span><br><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> set) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x)  <span class="comment">// &#x27;a&#x27; &#x27;b&#x27; &#x27;c&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå† Map</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;å¸ƒå…°&#x27;</span>], [<span class="string">&#x27;age&#x27;</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key + <span class="string">&#x27;: &#x27;</span> + value)  <span class="comment">// &#x27;name: å¸ƒå…°&#x27; &#x27;age: 12&#x27;  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>for...of</code> å’Œ <code>for...in</code> å¯¹æ¯”</p><p>  å…±åŒç‚¹ï¼šèƒ½å¤Ÿé€šè¿‡ <code>break</code>ã€<code>continue</code> å’Œ <code>return</code> è·³å‡ºå¾ªç¯ï¼›<br>  ä¸åŒç‚¹ï¼š</p><pre><code>  - `for...in` çš„ç‰¹ç‚¹ï¼šåªèƒ½éå†é”®ï¼Œä¼šéå†åŸå‹ä¸Šå±æ€§ï¼Œéå†æ— é¡ºåºï¼Œé€‚åˆäºå¯¹è±¡çš„éå†ï¼›  - `for...of` çš„ç‰¹ç‚¹ï¼šèƒ½å¤Ÿéå†å€¼ï¼ˆæŸäº›æ•°æ®ç»“æ„èƒ½éå†é”®å’Œå€¼ï¼Œæ¯”å¦‚ `Map`ï¼‰ï¼Œä¸ä¼šéå†åŸå‹ä¸Šçš„é”®å€¼ï¼Œéå†é¡ºåºä¸ºæ•°æ®çš„æ·»åŠ é¡ºåºï¼Œé€‚ç”¨äºéå†å¯è¿­ä»£æ•°æ®ç»“æ„ï¼›</code></pre></li></ul><h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><p><code>Promise</code> è¿™å—çŸ¥è¯†å¯ä»¥ç›´æ¥çœ‹æˆ‘ä¹‹å‰å†™çš„ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://juejin.im/post/6886247841686093837">æ·±å…¥ç†è§£Promise</a> éå¸¸å®Œæ•´ã€‚</p><h3 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h3><ul><li><p><code>function*</code> ä¼šå®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œè°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯ä¼šè¿”å›ä¸€ä¸ª <code>Generator</code> å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ç¬¦åˆå¯è¿­ä»£åè®®å’Œè¿­ä»£å™¨åè®®çš„ï¼Œæ¢å¥è¯è¯´è¿™ä¸ª <code>Generator</code> æ˜¯å¯ä»¥è¢«è¿­ä»£çš„ã€‚</p></li><li><p>ç”Ÿæˆå™¨å‡½æ•°å†…éƒ¨é€šè¿‡ <code>yield</code> æ¥æ§åˆ¶æš‚åœï¼Œè€Œ <code>next()</code> å°†æŠŠå®ƒæ¢å¤æ‰§è¡Œï¼Œå®ƒçš„è¿è¡Œé€»è¾‘æ˜¯å¦‚ä¸‹è¿™æ ·çš„ï¼š</p><ul><li><p>é‡åˆ° <code>yield</code> è¡¨è¾¾å¼ï¼Œå°±æš‚åœæ‰§è¡Œåé¢çš„æ“ä½œï¼Œå¹¶å°†ç´§è·Ÿåœ¨ <code>yield</code> åé¢çš„é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ä½œä¸ºè¿”å›çš„å¯¹è±¡çš„ <code>value</code> å±æ€§å€¼ï¼›</p></li><li><p>ä¸‹ä¸€æ¬¡è°ƒç”¨ <code>next</code> æ–¹æ³•æ—¶ï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª <code>yield</code> è¡¨è¾¾å¼ï¼›</p></li><li><p>å¦‚æœæ²¡æœ‰å†é‡åˆ°æ–°çš„ <code>yield</code> è¡¨è¾¾å¼ï¼Œå°±ä¸€ç›´è¿è¡Œåˆ°å‡½æ•°ç»“æŸï¼Œç›´åˆ° <code>return</code> è¯­å¥ä¸ºæ­¢ï¼Œå¹¶å°† <code>return</code> è¯­å¥åé¢çš„è¡¨è¾¾å¼çš„å€¼ï¼Œä½œä¸ºè¿”å›çš„å¯¹è±¡çš„ <code>value</code> å±æ€§å€¼ï¼›</p></li><li><p>å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰ <code>return</code> è¯­å¥ï¼Œåˆ™è¿”å›çš„å¯¹è±¡çš„ <code>value</code> å±æ€§å€¼ä¸º <code>undefined</code>ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;world&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;end&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> g = gen()</span><br><span class="line">g.next()  <span class="comment">// &#123;value: &#x27;hello&#x27;, done: false&#125;</span></span><br><span class="line">g.next()  <span class="comment">// &#123;value: &#x27;world&#x27;, done: false&#125;</span></span><br><span class="line">g.next()  <span class="comment">// &#123;value: &#x27;end&#x27;, done: true&#125;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>åœ¨ç”Ÿæˆå™¨å‡½æ•°å†…éƒ¨å¯ä»¥ä½¿ç”¨ <code>yield*</code> è¡¨è¾¾å¼å§”æ‰˜ç»™å¦ä¸€ä¸ª <code>Generator</code> æˆ–å¯è¿­ä»£å¯¹è±¡ï¼Œæ¯”å¦‚æ•°ç»„ã€å­—ç¬¦ä¸²ç­‰ï¼›<code>yield*</code> è¡¨è¾¾å¼æœ¬èº«çš„å€¼æ˜¯å½“è¿­ä»£å™¨å…³é—­æ—¶è¿”å›çš„å€¼ï¼ˆå³ <code>done</code> ä¸º <code>true</code> æ—¶ï¼‰ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">inner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span>* [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;foo&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">yield</span>* inner()</span><br><span class="line">    <span class="built_in">console</span>.log(result)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> g = gen()</span><br><span class="line">g.next()</span><br><span class="line">g.next()</span><br><span class="line">g.next()</span><br></pre></td></tr></table></figure></li></ul><p><strong>å®ä¾‹æ–¹æ³•</strong>ï¼š</p><ul><li><p><code>Generator.prototype.next()</code>ï¼šè¿”å›ä¸€ä¸ªåŒ…å«å±æ€§ <code>done</code> å’Œ <code>value</code> çš„å¯¹è±¡ã€‚è¯¥æ–¹æ³•ä¹Ÿå¯ä»¥é€šè¿‡æ¥å—ä¸€ä¸ªå‚æ•°ç”¨ä»¥å‘ç”Ÿæˆå™¨ä¼ å€¼ã€‚å¦‚æœä¼ å…¥äº†å‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå‚æ•°ä¼šä¼ ç»™ä¸Šä¸€æ¡æ‰§è¡Œçš„ <code>yield</code> è¯­å¥å·¦è¾¹çš„å˜é‡ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="keyword">yield</span> <span class="number">12</span></span><br><span class="line">    <span class="built_in">console</span>.log(a)</span><br><span class="line">    <span class="keyword">let</span> b = <span class="keyword">yield</span> a</span><br><span class="line">    <span class="built_in">console</span>.log(b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> g = f()</span><br><span class="line"><span class="built_in">console</span>.log(g.next(<span class="string">&#x27;a&#x27;</span>))</span><br><span class="line"><span class="built_in">console</span>.log(g.next(<span class="string">&#x27;b&#x27;</span>))</span><br><span class="line"><span class="built_in">console</span>.log(g.next(<span class="string">&#x27;c&#x27;</span>))</span><br><span class="line"><span class="comment">// &#123;value: 12, done: false&#125;</span></span><br><span class="line"><span class="comment">// &#x27;b&#x27;</span></span><br><span class="line"><span class="comment">// &#123;value: &#x27;b&#x27;, done: false&#125;</span></span><br><span class="line"><span class="comment">// &#x27;c&#x27;</span></span><br><span class="line"><span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure></li><li><p><code>Generator.prototype.throw()</code>ï¼šç”¨æ¥å‘ç”Ÿæˆå™¨æŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœå†…éƒ¨æ•è·äº†åˆ™ä¼šæ¢å¤ç”Ÿæˆå™¨çš„æ‰§è¡Œï¼ˆå³æ‰§è¡Œä¸‹ä¸€æ¡ <code>yield</code> è¡¨è¾¾å¼ï¼‰ï¼Œå¹¶ä¸”è¿”å›å¸¦æœ‰ <code>done</code> åŠ <code>value</code> ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">yield</span> <span class="string">&#x27;a&#x27;</span></span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(e)</span><br><span class="line">    &#125;</span><br><span class="line">    yiele <span class="string">&#x27;b&#x27;</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;c&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> g = gen()</span><br><span class="line">g.next()</span><br><span class="line">g.throw(<span class="string">&#x27;error a&#x27;</span>)</span><br><span class="line">g.next()</span><br><span class="line"><span class="comment">// &#123;value: &quot;a&quot;, done: false&#125;</span></span><br><span class="line"><span class="comment">// &#x27;error a&#x27; </span></span><br><span class="line"><span class="comment">// &#123;value: &quot;b&quot;, done: false&#125;</span></span><br><span class="line"><span class="comment">// &#123;value: &quot;c&quot;, done: false&#125;</span></span><br></pre></td></tr></table></figure><p>  å¦‚æœå†…éƒ¨æ²¡æœ‰æ•è·å¼‚å¸¸ï¼Œå°†ä¸­æ–­å†…éƒ¨ä»£ç çš„ç»§ç»­æ‰§è¡Œï¼ˆç±»ä¼¼ <code>throw</code> æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¦‚æœæ²¡æœ‰æ•è·ï¼Œåˆ™åé¢çš„ä»£ç å°†ä¸ä¼šæ‰§è¡Œï¼‰ï¼Œæ­¤æ—¶å¼‚å¸¸ä¼šæŠ›åˆ°å¤–éƒ¨ï¼Œå¯ä»¥è¢«å¤–éƒ¨çš„ <code>try...catch</code> å—æ•è·ï¼Œæ­¤æ—¶å¦‚æœå†æ‰§è¡Œä¸€æ¬¡ <code>next()</code>ï¼Œä¼šè¿”å›ä¸€ä¸ªå€¼ä¸º <code>done</code> å±æ€§ä¸º <code>true</code> çš„å¯¹è±¡ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;a&#x27;</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;b&#x27;</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;c&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> g = gen()</span><br><span class="line">g.next()</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    g.throw(<span class="string">&#x27;error a&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e)</span><br><span class="line">&#125;</span><br><span class="line">g.next()</span><br><span class="line"><span class="comment">// &#123;value: &quot;a&quot;, done: false&#125;</span></span><br><span class="line"><span class="comment">// &#x27;error a&#x27;</span></span><br><span class="line"><span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure></li><li><p><code>Generator.prototype.return()</code>ï¼šè¿”å›ç»™å®šçš„å€¼å¹¶ç»“æŸç”Ÿæˆå™¨ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">let</span> g = gen()</span><br><span class="line">g.next()         <span class="comment">// &#123; value: 1, done: false &#125;</span></span><br><span class="line">g.return(<span class="string">&#x27;foo&#x27;</span>)  <span class="comment">// &#123; value: &quot;foo&quot;, done: true &#125;</span></span><br><span class="line">g.next()         <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>åº”ç”¨</strong>ï¼š</p><ul><li><p>å°†å¼‚æ­¥æ“ä½œåŒæ­¥åŒ–ï¼Œæ¯”å¦‚åŒæ—¶æœ‰å¤šä¸ªè¯·æ±‚ï¼Œå¤šä¸ªè¯·æ±‚ä¹‹é—´æ˜¯æœ‰é¡ºåºçš„ï¼Œåªèƒ½ç­‰å‰é¢çš„è¯·æ±‚å®Œæˆäº†æ‰è¯·æ±‚åé¢çš„ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res1 = <span class="keyword">yield</span> request(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(res1)</span><br><span class="line">    <span class="keyword">let</span> res2 = <span class="keyword">yield</span> request(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(res2)</span><br><span class="line">    <span class="keyword">let</span> res3 = <span class="keyword">yield</span> request(<span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(res3)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">// æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚</span></span><br><span class="line">        it.next(url)</span><br><span class="line">    &#125;, <span class="number">300</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> it = main()</span><br><span class="line">it.next()</span><br><span class="line"><span class="comment">// &#x27;a&#x27; &#x27;b&#x27; &#x27;c&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>ç»™å¯¹è±¡éƒ¨ç½² <code>Iterator</code> æ¥å£ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">iterEntries</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> keys = <span class="built_in">Object</span>.keys(obj)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> key = keys[i]</span><br><span class="line">        <span class="keyword">yield</span> [key, obj[key]]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">foo</span>: <span class="number">3</span>, <span class="attr">bar</span>: <span class="number">7</span> &#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> iterEntries(myObj)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key, value)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#x27;foo&#x27; 3</span></span><br><span class="line"><span class="comment">// &#x27;bar&#x27; 7</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="ES2016"><a href="#ES2016" class="headerlink" title="ES2016"></a>ES2016</h2><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202011/es2016.png"></p><h3 id="Array-prototype-includes"><a href="#Array-prototype-includes" class="headerlink" title="Array.prototype.includes"></a>Array.prototype.includes</h3><p>åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ ï¼Œä¹‹å‰ä¸€èˆ¬æ˜¯è¿™ä¹ˆåšçš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (arr.indexOf(el) &gt;= <span class="number">0</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line"><span class="keyword">if</span> (~arr.indexOf(el)) &#123;&#125;</span><br></pre></td></tr></table></figure><p>è€Œç°åœ¨ä½ å¯ä»¥è¿™ä¹ˆåšäº†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (arr.includes(el)) &#123;&#125;</span><br></pre></td></tr></table></figure><p><code>indexOf</code> ä¼šè¿”å›æ‰¾åˆ°å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ä½ç½®ï¼Œåˆ¤æ–­çš„é€»è¾‘æ˜¯æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰ï¼Œæ‰€ä»¥ä»–åœ¨é‡åˆ° <code>NaN</code> çš„æ—¶å€™ä¸èƒ½æ­£ç¡®è¿”å›ç´¢å¼•ï¼Œä½†æ˜¯ <code>includes</code> è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="literal">NaN</span>, <span class="number">3</span>].indexOf(<span class="literal">NaN</span>)   <span class="comment">// -1</span></span><br><span class="line">[<span class="number">1</span>, <span class="literal">NaN</span>, <span class="number">3</span>].includes(<span class="literal">NaN</span>)  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="æ±‚å¹‚è¿ç®—ç¬¦ï¼ˆ-ï¼‰"><a href="#æ±‚å¹‚è¿ç®—ç¬¦ï¼ˆ-ï¼‰" class="headerlink" title="æ±‚å¹‚è¿ç®—ç¬¦ï¼ˆ**ï¼‰"></a>æ±‚å¹‚è¿ç®—ç¬¦ï¼ˆ**ï¼‰</h3><p><code>x ** y</code> æ˜¯æ±‚ <code>x</code> çš„ <code>y</code> æ¬¡å¹‚ï¼Œå’Œ <code>Math.pow(x, y)</code> åŠŸèƒ½ä¸€è‡´ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// x ** y</span></span><br><span class="line"><span class="keyword">let</span> squared = <span class="number">2</span> ** <span class="number">2</span>  <span class="comment">// 2 * 2 = 4</span></span><br><span class="line"><span class="keyword">let</span> cubed = <span class="number">2</span> ** <span class="number">3</span>    <span class="comment">// 2 * 2 * 2 = 8</span></span><br></pre></td></tr></table></figure><p><code>x **= y</code> è¡¨ç¤ºæ±‚ <code>x</code> çš„ <code>y</code> æ¬¡å¹‚ï¼Œå¹¶ä¸”æŠŠç»“æœèµ‹å€¼ç»™ <code>x</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// x **= y</span></span><br><span class="line"><span class="keyword">let</span> x = <span class="number">2</span>;</span><br><span class="line">x **= <span class="number">3</span>  <span class="comment">// x æœ€åç­‰äº 8</span></span><br></pre></td></tr></table></figure><h2 id="ES2017"><a href="#ES2017" class="headerlink" title="ES2017"></a>ES2017</h2><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202011/es2017.png"></p><h3 id="Object-values"><a href="#Object-values" class="headerlink" title="Object.values()"></a>Object.values()</h3><p>è¿”å›ä¸€ä¸ªç”±å¯¹è±¡è‡ªèº«æ‰€æœ‰å¯éå†å±æ€§çš„å±æ€§å€¼ç»„æˆçš„æ•°ç»„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">    value: <span class="number">12</span>,</span><br><span class="line">    enumrable: <span class="literal">false</span>  <span class="comment">// age å±æ€§å°†ä¸å¯éå†</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(person))  <span class="comment">// [&#x27;å¸ƒå…°&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»ä¼¼ str.split(&#x27;&#x27;) æ•ˆæœ</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(<span class="string">&#x27;abc&#x27;</span>))  <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure><h3 id="Object-entries"><a href="#Object-entries" class="headerlink" title="Object.entries()"></a>Object.entries()</h3><p>è¿”å›ä¸€ä¸ªç”±å¯¹è±¡è‡ªèº«æ‰€æœ‰å¯éå†å±æ€§çš„é”®å€¼å¯¹ç»„æˆçš„æ•°ç»„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span>, <span class="attr">age</span>: <span class="number">12</span> &#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.entries(person))  <span class="comment">// [[&quot;name&quot;, &quot;å¸ƒå…°&quot;], [&quot;age&quot;, 12]]</span></span><br></pre></td></tr></table></figure><p>åˆ©ç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥å¾ˆå¥½çš„å°†å¯¹è±¡è½¬æˆæ­£åœ¨çš„ <code>Map</code> ç»“æ„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span>, <span class="attr">age</span>: <span class="number">12</span> &#125;</span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="built_in">Object</span>.entries(person))</span><br><span class="line"><span class="built_in">console</span>.log(map)  <span class="comment">// Map &#123; name: &#x27;å¸ƒå…°&#x27;, age: 12 &#125;</span></span><br></pre></td></tr></table></figure><h3 id="Object-getOwnPropertyDescriptors"><a href="#Object-getOwnPropertyDescriptors" class="headerlink" title="Object.getOwnPropertyDescriptors()"></a>Object.getOwnPropertyDescriptors()</h3><p><code>Object.getOwnPropertyDescriptor()</code> ä¼šè¿”å›æŒ‡å®šå¯¹è±¡æŸä¸ªè‡ªèº«å±æ€§çš„çš„æè¿°å¯¹è±¡ï¼Œè€Œ <code>Object.getOwnPropertyDescriptors()</code> åˆ™æ˜¯è¿”å›æŒ‡å®šå¯¹è±¡è‡ªèº«æ‰€æœ‰å±æ€§çš„æè¿°å¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span>, <span class="attr">age</span>: <span class="number">12</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptor(person, <span class="string">&#x27;name&#x27;</span>))</span><br><span class="line"><span class="comment">// &#123; configurable: true, enumerable: true, value: &quot;å¸ƒå…°&quot;, writable: true &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptors(person))</span><br><span class="line"><span class="comment">//&#123; </span></span><br><span class="line"><span class="comment">//  name: &#123; configurable: true, enumerable: true, value: &quot;å¸ƒå…°&quot;, writable: true &#125;,</span></span><br><span class="line"><span class="comment">//  age: &#123;configurable: false, enumerable: false, value: 12, writable: false&#125;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br></pre></td></tr></table></figure><p>é…åˆ <code>Object.create()</code> å¯ä»¥å®ç°æµ…å…‹éš†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> shallowClone = <span class="function">(<span class="params">obj</span>) =&gt;</span> <span class="built_in">Object</span>.create(</span><br><span class="line">    <span class="built_in">Object</span>.getPrototypeOf(obj),</span><br><span class="line">    <span class="built_in">Object</span>.getOwnPropertyDescriptors(obj)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="String-prototype-padStart"><a href="#String-prototype-padStart" class="headerlink" title="String.prototype.padStart()"></a>String.prototype.padStart()</h3><p><code>str.padStart(length [, padStr])</code> ä¼šè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²å°†ä» <code>str</code> å­—ç¬¦ä¸²çš„å·¦ä¾§å¼€å§‹å¡«å……æŸä¸ªå­—ç¬¦ä¸² <code>padStr</code>ï¼ˆéå¿…å¡«ï¼Œå¦‚æœä¸æ˜¯å­—ç¬¦ä¸²åˆ™ä¼šè½¬æˆå­—ç¬¦ä¸², ä¼ å…¥ <code>undefined</code> å’Œä¸ä¼ è¿™ä¸ªå‚æ•°æ•ˆæœä¸€è‡´ï¼‰ç›´åˆ°è¾¾åˆ°æŒ‡å®šä½æ•° <code>length</code> ä¸ºæ­¢ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;abc&#x27;</span>.padStart(<span class="number">5</span>, <span class="number">2</span>)          <span class="comment">// &#x27;22abc&#x27;</span></span><br><span class="line"><span class="string">&#x27;abc&#x27;</span>.padStart(<span class="number">5</span>, <span class="literal">undefined</span>)  <span class="comment">// &#x27;  abc&#x27;</span></span><br><span class="line"><span class="string">&#x27;abc&#x27;</span>.padStart(<span class="number">5</span>, &#123;&#125;)         <span class="comment">// &#x27;[oabc&#x27;</span></span><br><span class="line"><span class="string">&#x27;abc&#x27;</span>.padStart(<span class="number">5</span>)             <span class="comment">// &#x27;  abc&#x27;</span></span><br><span class="line"><span class="string">&#x27;abcde&#x27;</span>.padStart(<span class="number">2</span>, <span class="string">&#x27;f&#x27;</span>)      <span class="comment">// &#x27;abcde&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="String-prototype-padEnd"><a href="#String-prototype-padEnd" class="headerlink" title="String.prototype.padEnd()"></a>String.prototype.padEnd()</h3><p>è§„åˆ™å’Œ <code>padStart</code> ç±»ä¼¼ï¼Œä½†æ˜¯æ˜¯ä»å­—ç¬¦ä¸²å³ä¾§å¼€å§‹å¡«å……ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;abc&#x27;</span>.padEnd(<span class="number">5</span>, <span class="number">2</span>)  <span class="comment">// &#x27;abc22&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°å‚æ•°å°¾é€—å·"><a href="#å‡½æ•°å‚æ•°å°¾é€—å·" class="headerlink" title="å‡½æ•°å‚æ•°å°¾é€—å·"></a>å‡½æ•°å‚æ•°å°¾é€—å·</h3><p>å…è®¸å‡½æ•°åœ¨å®šä¹‰å’Œè°ƒç”¨çš„æ—¶å€™æ—¶å€™æœ€åä¸€ä¸ªå‚æ•°ååŠ ä¸Šé€—å·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    param1, </span></span></span><br><span class="line"><span class="function"><span class="params">    param2,  </span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">init(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>,)</span><br></pre></td></tr></table></figure><h3 id="Asyncå‡½æ•°"><a href="#Asyncå‡½æ•°" class="headerlink" title="Asyncå‡½æ•°"></a>Asyncå‡½æ•°</h3><ul><li><p>ä½¿ç”¨ <code>async</code> å¯ä»¥å£°æ˜ä¸€ä¸ª <code>async</code> å‡½æ•°ï¼Œç»“åˆ <code>await</code> å¯ä»¥ç”¨ä¸€ç§å¾ˆç®€ä»‹çš„æ–¹æ³•å†™æˆåŸºäº <code>Promise</code> çš„å¼‚æ­¥è¡Œä¸ºï¼Œè€Œä¸éœ€è¦åˆ»æ„çš„é“¾å¼è°ƒç”¨ã€‚<code>await</code> è¡¨è¾¾å¼ä¼šæš‚åœæ•´ä¸ª <code>async</code> å‡½æ•°çš„æ‰§è¡Œè¿›ç¨‹å¹¶å‡ºè®©å…¶æ§åˆ¶æƒï¼Œåªæœ‰å½“å…¶ç­‰å¾…çš„åŸºäº <code>Promise</code> çš„å¼‚æ­¥æ“ä½œè¢«å…‘ç°æˆ–è¢«æ‹’ç»ä¹‹åæ‰ä¼šæ¢å¤è¿›ç¨‹ã€‚<code>async</code> å‡½æ•°æœ‰å¦‚ä¸‹å‡ ç§å®šä¹‰å½¢å¼ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°è¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">let</span> foo = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="keyword">let</span> foo = <span class="keyword">async</span> () =&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡æ–¹æ³•</span></span><br><span class="line">lef obj = &#123;</span><br><span class="line">    <span class="keyword">async</span> foo() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»æ–¹æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">async</span> bark() &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>async</code> å‡½æ•°ä¸€å®šä¼šè¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ä½¿ç”¨ <code>then</code> æ·»åŠ å¤„ç†å‡½æ•°ã€‚å¦‚æœä¸€ä¸ª <code>async</code> å‡½æ•°çš„è¿”å›å€¼çœ‹èµ·æ¥ä¸æ˜¯<code>Promise</code>ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šè¢«éšå¼åœ°åŒ…è£…åœ¨ä¸€ä¸ª <code>Promise</code> ä¸­ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;a&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">foo().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)  <span class="comment">// &#x27;a&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å†…éƒ¨å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œæˆ–è€…æ˜¾ç¤ºæŠ›å‡ºé”™è¯¯ï¼Œé‚£ä¹ˆ <code>async</code> å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª <code>rejected</code> çŠ¶æ€çš„ <code>Promsie</code>ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">foo().catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)  <span class="comment">// Error: error</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>è¿”å›çš„ <code>Promise</code> å¯¹è±¡å¿…é¡»ç­‰åˆ°å†…éƒ¨æ‰€æœ‰ <code>await</code> å‘½ä»¤ <code>Promise</code> å¯¹è±¡æ‰§è¡Œå®Œæ‰ä¼šå‘ç”ŸçŠ¶æ€æ”¹å˜ï¼Œé™¤éé‡åˆ° <code>return</code> è¯­å¥æˆ–æŠ›å‡ºé”™è¯¯ï¼›ä»»ä½•ä¸€ä¸ª <code>await</code> å‘½ä»¤è¿”å›çš„ <code>Promise</code> å¯¹è±¡å˜ <code>ä¸ºrejected</code> çŠ¶æ€ï¼Œæ•´ä¸ª <code>Async</code> å‡½æ•°éƒ½ä¼šä¸­æ–­åç»­æ‰§è¡Œï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;a_&#x27;</span> + a)</span><br><span class="line">    <span class="keyword">let</span> b = <span class="keyword">await</span> <span class="built_in">Promise</span>.reject(<span class="string">&#x27;fail&#x27;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;b_&#x27;</span> + b)  <span class="comment">// ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">&#125;</span><br><span class="line">fn().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)  <span class="comment">// ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// &#x27;a_success&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;fail&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>æ‰€ä»¥ä¸ºäº†ä¿è¯  <code>async</code> é‡Œçš„å¼‚æ­¥æ“ä½œéƒ½èƒ½å®Œæˆï¼Œæˆ‘ä»¬éœ€è¦å°†ä»–ä»¬æ”¾åˆ° <code>try...catch()</code> å—é‡Œæˆ–è€…åœ¨ <code>await</code> è¿”å›çš„ <code>Promise</code> åè·Ÿä¸€ä¸ª <code>catch</code> å¤„ç†å‡½æ•°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> a = <span class="keyword">await</span> <span class="built_in">Promise</span>.reject(<span class="string">&#x27;a fail&#x27;</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;a_&#x27;</span> + a)  <span class="comment">// ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(e)  <span class="comment">// &#x27;a fail&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="keyword">await</span> <span class="built_in">Promise</span>.reject(<span class="string">&#x27;b fail&#x27;</span>)</span><br><span class="line">        .catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(e)  <span class="comment">// &#x27;b fail&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;b_&#x27;</span> + b)  <span class="comment">// &#x27;bundefined&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">fn().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)  <span class="comment">// undefined</span></span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)  <span class="comment">// ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœ <code>async</code> å‡½æ•°é‡Œçš„å¤šä¸ªå¼‚æ­¥æ“ä½œä¹‹é—´æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œå»ºè®®å°†ä»–ä»¬å†™åˆ°ä¸€èµ·å‡å°‘æ‰§è¡Œæ—¶é—´ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å†™æ³•ä¸€</span></span><br><span class="line"><span class="keyword">let</span> [foo, bar] = <span class="keyword">await</span> <span class="built_in">Promise</span>.all([getFoo(), getBar()])</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">let</span> fooPromise = getFoo()</span><br><span class="line"><span class="keyword">let</span> barPromise = getBar()</span><br><span class="line"><span class="keyword">let</span> foo = <span class="keyword">await</span> fooPromise</span><br><span class="line"><span class="keyword">let</span> bar = <span class="keyword">await</span> barPromise</span><br></pre></td></tr></table></figure></li><li><p><code>await</code> å‘½ä»¤åªèƒ½ç”¨åœ¨ <code>async</code> å‡½æ•°ä¹‹ä¸­ï¼Œå¦‚æœç”¨åœ¨æ™®é€šå‡½æ•°ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p></li></ul><h3 id="å…±äº«å†…å­˜å’ŒAtomicså¯¹è±¡"><a href="#å…±äº«å†…å­˜å’ŒAtomicså¯¹è±¡" class="headerlink" title="å…±äº«å†…å­˜å’ŒAtomicså¯¹è±¡"></a>å…±äº«å†…å­˜å’ŒAtomicså¯¹è±¡</h3><ul><li><a href="https://es6.ruanyifeng.com/#docs/arraybuffer#SharedArrayBuffer">SharedArrayBuffer</a></li><li><a href="https://es6.ruanyifeng.com/#docs/arraybuffer#Atomics-%E5%AF%B9%E8%B1%A1">Atomics</a></li></ul><h2 id="ES2018"><a href="#ES2018" class="headerlink" title="ES2018"></a>ES2018</h2><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202011/es2018.png"></p><h3 id="Promise-prototype-finally"><a href="#Promise-prototype-finally" class="headerlink" title="Promise.prototype.finally()"></a>Promise.prototype.finally()</h3><p><code>Promise.prototype.finally()</code> ç”¨äºç»™ <code>Promise</code> å¯¹è±¡æ·»åŠ  <code>onFinally</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦æ˜¯åšä¸€äº›æ¸…ç†çš„å·¥ä½œï¼Œ<strong>åªæœ‰çŠ¶æ€å˜åŒ–</strong>çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œè¯¥ <code>onFinally</code> å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onFinally</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">888</span>)  <span class="comment">// å¹¶ä¸ä¼šæ‰§è¡Œ  </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;).finally(onFinally)</span><br></pre></td></tr></table></figure><p><code>finally()</code> ä¼šç”Ÿæˆä¸€ä¸ª <code>Promise</code> æ–°å®ä¾‹ï¼Œfinally ä¸€èˆ¬ä¼šåŸæ ·åä¼ çˆ¶ Promiseï¼Œæ— è®ºçˆ¶çº§å®ä¾‹æ˜¯ä»€ä¹ˆçŠ¶æ€ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line"><span class="keyword">let</span> p2 = p1.finally(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p2)  <span class="comment">// Promise &#123;&lt;pending&gt;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> p4 = p3.finally(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p3)  <span class="comment">// Promise &#123;&lt;fulfilled&gt;: 3&#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¯´çš„æ˜¯ä¸€èˆ¬ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚ <code>finally</code> é‡Œè¿”å›äº†ä¸€ä¸ªé <code>fulfilled</code> çš„ <code>Promise</code> æˆ–è€…æŠ›å‡ºäº†å¼‚å¸¸çš„æ—¶å€™ï¼Œåˆ™ä¼šè¿”å›å¯¹åº”çŠ¶æ€çš„æ–°å®ä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> p2 = p1.finally(<span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">() =&gt;</span> &#123;&#125;))</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p2)  <span class="comment">// Promise &#123;&lt;pending&gt;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p3 = p1.finally(<span class="function">() =&gt;</span> <span class="built_in">Promise</span>.reject(<span class="number">6</span>))</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p3)  <span class="comment">// Promise &#123;&lt;rejected&gt;: 6&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p4 = p1.finally(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p4)  <span class="comment">// Promise &#123;&lt;rejected&gt;: Error: error&#125;</span></span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<a href="https://juejin.im/post/6886247841686093837#heading-9">æ·±å…¥ç†è§£Promise</a></p><h3 id="å¼‚æ­¥è¿­ä»£å™¨"><a href="#å¼‚æ­¥è¿­ä»£å™¨" class="headerlink" title="å¼‚æ­¥è¿­ä»£å™¨"></a>å¼‚æ­¥è¿­ä»£å™¨</h3><p>æƒ³è¦äº†è§£å¼‚æ­¥è¿­ä»£å™¨æœ€å¥½çš„æ–¹å¼å°±æ˜¯å’ŒåŒæ­¥è¿­ä»£å™¨è¿›è¡Œå¯¹æ¯”ã€‚æˆ‘ä»¬çŸ¥é“å¯è¿­ä»£æ•°æ®çš„å†…éƒ¨éƒ½æ˜¯æœ‰ä¸€ä¸ª <code>Symbol.iterator</code> å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œåä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œè¿™ä¸ªè¿­ä»£å™¨å¯¹è±¡æœ‰ä¸€ä¸ª <code>next()</code> æ–¹æ³•å¯ä»¥å¯¹æ•°æ®è¿›è¡Œè¿­ä»£ï¼Œ<code>next()</code> æ‰§è¡Œåä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†å½“å‰è¿­ä»£å€¼ <code>value</code> å’Œ æ ‡è¯†æ˜¯å¦å®Œæˆè¿­ä»£çš„ <code>done</code> å±æ€§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> iterator = [<span class="number">1</span>, <span class="number">2</span>][<span class="built_in">Symbol</span>.iterator]()</span><br><span class="line">iterator.next()  <span class="comment">// &#123; value: 1, done: false &#125;</span></span><br><span class="line">iterator.next()  <span class="comment">// &#123; value: 2, done: false &#125;</span></span><br><span class="line">iterator.next()  <span class="comment">// &#123; value: undefinde, done: true &#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™é‡Œçš„ <code>next()</code> æ‰§è¡Œçš„æ˜¯åŒæ­¥æ“ä½œï¼Œæ‰€ä»¥è¿™ä¸ªæ˜¯åŒæ­¥è¿­ä»£å™¨ï¼Œä½†æ˜¯å¦‚æœ <code>next()</code> é‡Œéœ€è¦æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œé‚£å°±éœ€è¦å¼‚æ­¥è¿­ä»£äº†ï¼Œå¯å¼‚æ­¥è¿­ä»£æ•°æ®çš„å†…éƒ¨æœ‰ä¸€ä¸ª <code>Symbol.asyncIterator</code> å±æ€§ï¼ŒåŸºäºæ­¤æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå¼‚æ­¥è¿­ä»£å™¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Emitter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(iterable) &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = iterable</span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="built_in">Symbol</span>.asyncIterator]() &#123;</span><br><span class="line">        <span class="keyword">let</span> length = <span class="built_in">this</span>.data.length,</span><br><span class="line">            index = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            next:<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> done = index &gt;= length</span><br><span class="line">                <span class="keyword">const</span> value = !done ? <span class="built_in">this</span>.data[index++] : <span class="literal">undefined</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">                    resolve(&#123;value, done&#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¼‚æ­¥è¿­ä»£å™¨çš„ <code>next()</code> ä¼šè¿›è¡Œå¼‚æ­¥çš„æ“ä½œï¼Œé€šå¸¸æ˜¯è¿”å›ä¸€ä¸ª <code>Promise</code>ï¼Œæ‰€ä»¥éœ€è¦å¯¹åº”çš„å¤„ç†å‡½æ•°å»å¤„ç†ç»“æœï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> emitter = <span class="keyword">new</span> Emitter([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="keyword">let</span> asyncIterator = emitter[<span class="built_in">Symbol</span>.asyncIterator]()</span><br><span class="line">asyncIterator.next().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)  <span class="comment">// &#123; value: 1, done: false &#125;</span></span><br><span class="line">&#125;)</span><br><span class="line">asyncIterator.next().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)  <span class="comment">// &#123; value: 2, done: false &#125;</span></span><br><span class="line">&#125;)</span><br><span class="line">asyncIterator.next().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)  <span class="comment">// &#123; value: 3, done: false &#125;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>for await...of</code> æ¥è¿­ä»£å¼‚æ­¥å¯è¿­ä»£æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> asyncIterable = <span class="keyword">new</span> Emitter([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncCount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> x <span class="keyword">of</span> asyncIterable ) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(x)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">asyncCount()</span><br><span class="line"><span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure><p>å¦å¤–è¿˜å¯ä»¥é€šè¿‡å¼‚æ­¥ç”Ÿæˆå™¨æ¥åˆ›å»ºå¼‚æ­¥è¿­ä»£å™¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Emitter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(iterable) &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = iterable</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">async</span> *[<span class="built_in">Symbol</span>.asyncIterator]() &#123;</span><br><span class="line">        <span class="keyword">let</span> length = <span class="built_in">this</span>.data.length,</span><br><span class="line">            index = <span class="number">0</span>;</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">while</span> (index &lt; length) &#123;</span><br><span class="line">            <span class="keyword">yield</span> <span class="built_in">this</span>.data[index++]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncCount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> emitter = <span class="keyword">new</span> Emitter([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">    <span class="keyword">const</span> asyncIterable = emitter[<span class="built_in">Symbol</span>.asyncIterator]()</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> x <span class="keyword">of</span> asyncIterable ) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(x)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">asyncCount()</span><br><span class="line"><span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Iteration_protocols">Iteration_protocols</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for-await...of">for-awaitâ€¦of</a></li></ul><h3 id="sä¿®é¥°ç¬¦-dotAllæ¨¡å¼"><a href="#sä¿®é¥°ç¬¦-dotAllæ¨¡å¼" class="headerlink" title="sä¿®é¥°ç¬¦(dotAllæ¨¡å¼)"></a>sä¿®é¥°ç¬¦(dotAllæ¨¡å¼)</h3><p>æ­£åˆ™è¡¨è¾¾å¼æ–°å¢äº†ä¸€ä¸ª <code>s</code> ä¿®é¥°ç¬¦ï¼Œä½¿å¾— <code>.</code> å¯ä»¥åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/foo.bar/.test(<span class="string">&#x27;foo\nbar&#x27;</span>)   <span class="comment">// false</span></span><br><span class="line">/foo.bar/s.test(<span class="string">&#x27;foo\nbar&#x27;</span>)  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™åˆè¢«ç§°ä¸º <code>dotAll</code> æ¨¡å¼ï¼Œè¡¨ç¤ºç‚¹ï¼ˆ<code>dot</code>ï¼‰ä»£è¡¨ä¸€åˆ‡å­—ç¬¦ã€‚æ‰€ä»¥ï¼Œæ­£åˆ™è¡¨è¾¾å¼è¿˜å¼•å…¥äº†ä¸€ä¸ªdotAllå±æ€§ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦å¤„åœ¨dotAllæ¨¡å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/foo.bar/s.dotAll  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="å…·åç»„åŒ¹é…"><a href="#å…·åç»„åŒ¹é…" class="headerlink" title="å…·åç»„åŒ¹é…"></a>å…·åç»„åŒ¹é…</h3><p>æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨æ•è·ç»„æ¥åŒ¹é…å­—ç¬¦ä¸²ï¼Œä½†æ˜¯æƒ³è¦è·å–æŸä¸ªç»„çš„ç»“æœåªèƒ½é€šè¿‡å¯¹åº”çš„ç´¢å¼•æ¥è·å–ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> re = <span class="regexp">/(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/</span></span><br><span class="line"><span class="keyword">let</span> result = re.exec(<span class="string">&#x27;2015-01-02&#x27;</span>)</span><br><span class="line"><span class="comment">// result[0] === &#x27;2015-01-02&#x27;</span></span><br><span class="line"><span class="comment">// result[1] === &#x27;2015&#x27;</span></span><br><span class="line"><span class="comment">// result[2] === &#x27;01&#x27;</span></span><br><span class="line"><span class="comment">// result[3] === &#x27;02&#x27;</span></span><br></pre></td></tr></table></figure><p>è€Œç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»™æ•è·ç»„ <code>(?&lt;name&gt;...)</code> åŠ ä¸Šåå­— <code>name</code> ï¼Œé€šè¿‡åå­—æ¥è·å–å¯¹åº”ç»„çš„ç»“æœï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> re = <span class="regexp">/(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)/</span></span><br><span class="line"><span class="keyword">let</span> result = re.exec(<span class="string">&#x27;2015-01-02&#x27;</span>)</span><br><span class="line"><span class="comment">// result.groups.year === &#x27;2015&#x27;</span></span><br><span class="line"><span class="comment">// result.groups.month === &#x27;01&#x27;</span></span><br><span class="line"><span class="comment">// result.groups.day === &#x27;02&#x27;</span></span><br></pre></td></tr></table></figure><p>é…åˆè§£æ„èµ‹å€¼å¯ä»¥å†™å‡ºéå¸¸ç²¾ç®€çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="attr">groups</span>: &#123;year, month, day&#125;&#125; = <span class="regexp">/(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)/</span>.exec(<span class="string">&#x27;2015-01-02&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(year, month, day)  <span class="comment">// 2015 01 02</span></span><br></pre></td></tr></table></figure><p>å…·åç»„ä¹Ÿå¯ä»¥é€šè¿‡ä¼ é€’ç»™ <code>String.prototype.replace</code> çš„æ›¿æ¢å€¼ä¸­è¿›è¡Œå¼•ç”¨ã€‚å¦‚æœè¯¥å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>$&lt;name&gt;</code> è·å–åˆ°å¯¹åº”ç»„çš„ç»“æœï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> re = <span class="regexp">/(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)/</span></span><br><span class="line"><span class="keyword">let</span> result = <span class="string">&#x27;2015-01-02&#x27;</span>.replace(re, <span class="string">&#x27;$&lt;day&gt;/$&lt;month&gt;/$&lt;year&gt;&#x27;</span>)</span><br><span class="line"><span class="comment">// result === &#x27;02/01/2015&#x27;</span></span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<a href="https://github.com/tc39/proposal-regexp-named-groups">proposal-regexp-named-groups</a></p><h3 id="åè¡Œæ–­è¨€"><a href="#åè¡Œæ–­è¨€" class="headerlink" title="åè¡Œæ–­è¨€"></a>åè¡Œæ–­è¨€</h3><p>åè¡Œæ–­è¨€ï¼š <code>(?&lt;=y)x</code>ï¼Œ<code>x</code> åªæœ‰åœ¨ <code>y</code> åé¢æ‰èƒ½åŒ¹é…ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?&lt;=\$)\d+<span class="regexp">/.exec(&#x27;I have $100.&#x27;)  /</span><span class="regexp">/ [&#x27;100&#x27;]</span></span><br></pre></td></tr></table></figure><p>åè¡Œå¦å®šæ–­è¨€ï¼š <code>(?&lt;!y)x</code>ï¼Œ<code>x</code> åªæœ‰ä¸åœ¨ <code>y</code> åé¢æ‰èƒ½åŒ¹é…ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?&lt;!\$)\d+<span class="regexp">/.exec(&#x27;I have $100.&#x27;)  /</span><span class="regexp">/ [&#x27;00&#x27;]</span></span><br></pre></td></tr></table></figure><h3 id="Unicodeå±æ€§è½¬ä¹‰"><a href="#Unicodeå±æ€§è½¬ä¹‰" class="headerlink" title="Unicodeå±æ€§è½¬ä¹‰"></a>Unicodeå±æ€§è½¬ä¹‰</h3><p>å…è®¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç¬¦åˆ <code>Unicode</code> æŸç§å±æ€§çš„æ‰€æœ‰å­—ç¬¦ï¼Œ<code>\p&#123;...&#125;</code> æ˜¯åŒ¹é…åŒ…å«ï¼Œ<code>\P&#123;...&#125;</code> æ˜¯åŒ¹é…ä¸åŒ…å«çš„å­—ç¬¦ï¼Œä¸”å¿…é¡»æ­é… <code>/u</code> ä¿®é¥°ç¬¦æ‰ä¼šç”Ÿæ•ˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/\p&#123;Emoji&#125;+<span class="regexp">/u.exec(&#x27;ğŸ˜ğŸ˜­ç¬‘æ­»æˆ‘äº†ğŸ¤£ğŸ˜‚ä¸è¡Œäº†&#x27;)  /</span><span class="regexp">/ [&#x27;ğŸ˜ğŸ˜­&#x27;]</span></span><br><span class="line"><span class="regexp">/</span>\P&#123;Emoji&#125;+<span class="regexp">/u.exec(&#x27;ğŸ˜ğŸ˜­ç¬‘æ­»æˆ‘äº†ğŸ¤£ğŸ˜‚ä¸è¡Œäº†&#x27;)  /</span><span class="regexp">/ [&#x27;ç¬‘æ­»æˆ‘äº†&#x27;]</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯ä»¥æŸ¥è¯¢åˆ°æ›´å¤šçš„ <code>Unicode</code> çš„å±æ€§ <a href="http://unicode.org/reports/tr18/#Full_Properties">Full_Properties</a></p><h3 id="å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦"><a href="#å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦" class="headerlink" title="å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦"></a>å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦</h3><p>å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦å¯ä»¥ç”¨åˆ°è§£æ„èµ‹å€¼ä¸Šï¼Œä¸”åªèƒ½åº”ç”¨åˆ°æœ€åä¸€ä¸ªå˜é‡ä¸Šï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;x, ...y&#125; = &#123;<span class="attr">x</span>: <span class="number">1</span>, <span class="attr">a</span>: <span class="number">2</span>, <span class="attr">b</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(y)  <span class="comment">// &#123;a: 2, b: 3&#125;</span></span><br></pre></td></tr></table></figure><p>å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦ä¸èƒ½è§£æ„åŸå‹ä¸Šçš„å±æ€§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;</span><br><span class="line">obj.__proto__ = &#123; <span class="attr">y</span>: <span class="number">2</span> &#125;</span><br><span class="line"><span class="keyword">let</span> &#123;...a&#125; = obj</span><br><span class="line"><span class="built_in">console</span>.log(a.y)  <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>åº”ç”¨ä¸€ï¼šå¯ä»¥å®ç°æµ…æ‹·è´ï¼Œä½†æ˜¯ä¸ä¼šæ‹·è´åŸå§‹å±æ€§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = <span class="built_in">Object</span>.create(&#123; <span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span> &#125;)</span><br><span class="line">person.age = <span class="number">12</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ…æ‹·è´å†™æ³•ä¸€</span></span><br><span class="line"><span class="keyword">let</span> &#123; ...pClone1 &#125; = person</span><br><span class="line"><span class="built_in">console</span>.log(pClone1)  <span class="comment">// &#123; age: 12 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(pClone1.name)  <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ…æ‹·è´å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">let</span> pClone2 = &#123;...person&#125;</span><br><span class="line"><span class="built_in">console</span>.log(pClone2)  <span class="comment">// &#123; age: 12 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(pClone2.name)  <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>åº”ç”¨äºŒï¼šåˆå¹¶ä¸¤ä¸ªå¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ab = &#123;...a, ...b&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> ab = <span class="built_in">Object</span>.assign(&#123;&#125;, a, b);</span><br></pre></td></tr></table></figure><p>åº”ç”¨ä¸‰ï¼šé‡å†™å¯¹è±¡å±æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> aWithOverrides = &#123; ...a, <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br></pre></td></tr></table></figure><p>åº”ç”¨å››ï¼šç»™æ–°å¯¹è±¡è®¾ç½®é»˜è®¤å€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> aWithDefaults = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, ...a &#125;;</span><br></pre></td></tr></table></figure><p>åº”ç”¨äº”ï¼šåˆ©ç”¨æ‰©å±•è¿ç®—ç¬¦çš„è§£æ„èµ‹å€¼å¯ä»¥æ‰©å±•å‡½æ•°å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">baseFunction</span>(<span class="params">&#123; a, b &#125;</span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wrapperFunction</span>(<span class="params">&#123; x, y, ...restConfig &#125;</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ x å’Œ y å‚æ•°è¿›è¡Œæ“ä½œ</span></span><br><span class="line">    <span class="comment">// å…¶ä½™å‚æ•°ä¼ ç»™åŸå§‹å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> baseFunction(restConfig)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><ul><li><a href="https://github.com/tc39/proposal-object-rest-spread/blob/master/Spread.md">Object Spread Initializer</a></li><li><a href="https://github.com/tc39/proposal-object-rest-spread/blob/master/Rest.md">Object Rest Destructuring</a></li></ul><h3 id="æ”¾æ¾å¯¹æ ‡ç­¾æ¨¡æ¿é‡Œå­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶"><a href="#æ”¾æ¾å¯¹æ ‡ç­¾æ¨¡æ¿é‡Œå­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶" class="headerlink" title="æ”¾æ¾å¯¹æ ‡ç­¾æ¨¡æ¿é‡Œå­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶"></a>æ”¾æ¾å¯¹æ ‡ç­¾æ¨¡æ¿é‡Œå­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶</h3><p><a href="https://es6.ruanyifeng.com/#docs/string#%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%99%90%E5%88%B6">ECMAScript 6 å…¥é—¨</a></p><h2 id="ES2019"><a href="#ES2019" class="headerlink" title="ES2019"></a>ES2019</h2><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202011/es2019.png"></p><h3 id="å…è®¸çœç•¥catché‡Œçš„å‚æ•°"><a href="#å…è®¸çœç•¥catché‡Œçš„å‚æ•°" class="headerlink" title="å…è®¸çœç•¥catché‡Œçš„å‚æ•°"></a>å…è®¸çœç•¥catché‡Œçš„å‚æ•°</h3><p>å¼‚å¸¸è¢«æ•è·çš„æ—¶å€™å¦‚æœä¸éœ€è¦åšæ“ä½œï¼Œç”šè‡³å¯ä»¥çœç•¥ <code>catch(err)</code> é‡Œçš„å‚æ•°å’Œåœ†æ‹¬å·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="JSON-stringify-å˜åŠ¨"><a href="#JSON-stringify-å˜åŠ¨" class="headerlink" title="JSON.stringify()å˜åŠ¨"></a>JSON.stringify()å˜åŠ¨</h3><p><code>UTF-8</code> æ ‡å‡†è§„å®šï¼Œ<code>0xD800</code> åˆ° <code>0xDFFF</code> ä¹‹é—´çš„ç ç‚¹ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»é…å¯¹ä½¿ç”¨ã€‚<br>æ‰€ä»¥ <code>JSON.stringify()</code> å¯¹å•ä¸ªç ç‚¹è¿›è¡Œæ“ä½œï¼Œå¦‚æœç ç‚¹ç¬¦åˆ <code>UTF-8</code> æ ‡å‡†ï¼Œåˆ™ä¼šè¿”å›å¯¹åº”çš„å­—ç¬¦ï¼Œå¦åˆ™ä¼šè¿”å›å¯¹åº”çš„ç ç‚¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(<span class="string">&#x27;\u&#123;1f600&#125;&#x27;</span>)  <span class="comment">// &quot;&quot;ğŸ˜€&quot;&quot;</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(<span class="string">&#x27;\u&#123;D834&#125;&#x27;</span>)  <span class="comment">// &quot;&quot;\ud834&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="Symbol-prototype-description"><a href="#Symbol-prototype-description" class="headerlink" title="Symbol.prototype.description"></a>Symbol.prototype.description</h3><p><code>Symbol</code> å®ä¾‹æ–°å¢äº†ä¸€ä¸ªæè¿°å±æ€§ <code>description</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> symbol = <span class="built_in">Symbol</span>(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line">symbol.description  <span class="comment">// &#x27;foo&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="Function-prototype-toString"><a href="#Function-prototype-toString" class="headerlink" title="Function.prototype.toString()"></a>Function.prototype.toString()</h3><p>å‡½æ•°çš„ <code>toString()</code> ä¼šåŸæ ·è¾“å‡ºå‡½æ•°å®šä¹‰æ—¶å€™çš„æ ·å­ï¼Œä¸ä¼šçœç•¥æ³¨é‡Šå’Œç©ºæ ¼ã€‚</p><h3 id="Object-fromEntries"><a href="#Object-fromEntries" class="headerlink" title="Object.fromEntries()"></a>Object.fromEntries()</h3><p><code>Object.fromEntries()</code> æ–¹æ³•æ˜¯ <code>Object.entries()</code> çš„é€†æ“ä½œï¼Œç”¨äºå°†ä¸€ä¸ªé”®å€¼å¯¹æ•°ç»„è½¬ä¸ºå¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span>, <span class="attr">age</span>: <span class="number">12</span> &#125;</span><br><span class="line"><span class="keyword">let</span> keyValueArr = <span class="built_in">Object</span>.entries(person)   <span class="comment">// [[&#x27;name&#x27;, &#x27;å¸ƒå…°&#x27;], [&#x27;age&#x27;, 12]]</span></span><br><span class="line"><span class="keyword">let</span> obj = <span class="built_in">Object</span>.fromEntries(arr)  <span class="comment">// &#123; name: &#x27;å¸ƒå…°&#x27;, age: 12 &#125;</span></span><br></pre></td></tr></table></figure><p>å¸¸ç”¨å¯è¿­ä»£æ•°æ®ç»“æ„ä¹‹é—´çš„è£…æ¢ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span>, <span class="attr">age</span>: <span class="number">12</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡ -&gt; é”®å€¼å¯¹æ•°ç»„</span></span><br><span class="line"><span class="keyword">let</span> keyValueArr = <span class="built_in">Object</span>.entries(person)  <span class="comment">// [[&#x27;name&#x27;, &#x27;å¸ƒå…°&#x27;], [&#x27;age&#x27;, 12]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é”®å€¼å¯¹æ•°ç»„ -&gt; Map</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(keyValueArr)  <span class="comment">// Map &#123;&quot;name&quot;: &quot;å¸ƒå…°&quot;, &quot;age&quot;: 12&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Map -&gt; é”®å€¼å¯¹æ•°ç»„</span></span><br><span class="line"><span class="keyword">let</span> arr = <span class="built_in">Array</span>.from(map)  <span class="comment">// [[&#x27;name&#x27;, &#x27;å¸ƒå…°&#x27;], [&#x27;age&#x27;, 12]] </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é”®å€¼å¯¹æ•°ç»„ -&gt; å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> obj = <span class="built_in">Array</span>.from(arr).reduce(<span class="function">(<span class="params">acc, [ key, val ]</span>) =&gt;</span> <span class="built_in">Object</span>.assign(acc, &#123; [key]: val &#125;), &#123;&#125;)  <span class="comment">// &#123; name: &#x27;å¸ƒå…°&#x27;, age: 12 &#125;</span></span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<a href="https://github.com/tc39/proposal-object-from-entries">Object.fromEntries</a></p><h3 id="å­—ç¬¦ä¸²å¯ç›´æ¥è¾“å…¥è¡Œåˆ†éš”ç¬¦å’Œæ®µåˆ†éš”ç¬¦"><a href="#å­—ç¬¦ä¸²å¯ç›´æ¥è¾“å…¥è¡Œåˆ†éš”ç¬¦å’Œæ®µåˆ†éš”ç¬¦" class="headerlink" title="å­—ç¬¦ä¸²å¯ç›´æ¥è¾“å…¥è¡Œåˆ†éš”ç¬¦å’Œæ®µåˆ†éš”ç¬¦"></a>å­—ç¬¦ä¸²å¯ç›´æ¥è¾“å…¥è¡Œåˆ†éš”ç¬¦å’Œæ®µåˆ†éš”ç¬¦</h3><p><code>JavaScript</code> è§„å®šæœ‰ 5 ä¸ªå­—ç¬¦ï¼Œä¸èƒ½åœ¨å­—ç¬¦ä¸²é‡Œé¢ç›´æ¥ä½¿ç”¨ï¼Œåªèƒ½ä½¿ç”¨è½¬ä¹‰å½¢å¼ã€‚</p><ul><li><code>U+005C</code>ï¼šåæ–œæ ï¼ˆreverse solidus)</li><li><code>U+000D</code>ï¼šå›è½¦ï¼ˆcarriage returnï¼‰</li><li><code>U+2028</code>ï¼šè¡Œåˆ†éš”ç¬¦ï¼ˆline separatorï¼‰</li><li><code>U+2029</code>ï¼šæ®µåˆ†éš”ç¬¦ï¼ˆparagraph separatorï¼‰</li><li><code>U+000A</code>ï¼šæ¢è¡Œç¬¦ï¼ˆline feedï¼‰</li></ul><p>ä½†æ˜¯ç”±äº <code>JSON</code> å…è®¸å­—ç¬¦ä¸²é‡Œå¯ä»¥ä½¿ç”¨ <code>U+2028</code> å’Œ <code>U+2029</code>ï¼Œæ‰€ä»¥ä½¿å¾— <code>JSON.parse()</code> å»è§£æå­—ç¬¦ä¸²çš„æ—¶å€™å¯èƒ½ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥ <code>ES2019</code> å…è®¸æ¨¡æ¿å­—ç¬¦ä¸²é‡Œå¯ä»¥ç›´æ¥è¿™ä¸¤ä¸ªå­—ç¬¦ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">&#x27;&quot;\u2028&quot;&#x27;</span>)  <span class="comment">// &quot;&quot;</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">&#x27;&quot;\u2029&quot;&#x27;</span>)  <span class="comment">// &quot;&quot;</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">&#x27;&quot;\u005C&quot;&#x27;</span>)  <span class="comment">// SyntaxError</span></span><br></pre></td></tr></table></figure><h3 id="String-prototype-trimStart"><a href="#String-prototype-trimStart" class="headerlink" title="String.prototype.trimStart"></a>String.prototype.trimStart</h3><p>æ¶ˆé™¤å­—ç¬¦ä¸²å¤´éƒ¨ç©ºæ ¼ï¼Œè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼›æµè§ˆå™¨è¿˜é¢å¤–å¢åŠ äº†å®ƒçš„åˆ«åå‡½æ•° <code>trimLeft()</code>ï¼š </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;  hello world &#x27;</span></span><br><span class="line"><span class="keyword">let</span> newStr = str.trimStart()</span><br><span class="line"><span class="built_in">console</span>.log(newStr, newStr === str) </span><br><span class="line"><span class="comment">// &#x27;hello world &#x27;  false</span></span><br></pre></td></tr></table></figure><h3 id="String-prototype-trimEnd"><a href="#String-prototype-trimEnd" class="headerlink" title="String.prototype.trimEnd"></a>String.prototype.trimEnd</h3><p>æ¶ˆé™¤å­—ç¬¦ä¸²å°¾éƒ¨ç©ºæ ¼ï¼Œè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼›æµè§ˆå™¨è¿˜é¢å¤–å¢åŠ äº†å®ƒçš„åˆ«åå‡½æ•° <code>trimRight()</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;  hello world &#x27;</span></span><br><span class="line"><span class="keyword">let</span> newStr = str.trimEnd()</span><br><span class="line"><span class="built_in">console</span>.log(newStr, newStr === str) </span><br><span class="line"><span class="comment">// &#x27;  hello world&#x27;  false</span></span><br></pre></td></tr></table></figure><h3 id="Array-prototype-flat"><a href="#Array-prototype-flat" class="headerlink" title="Array.prototype.flat()"></a>Array.prototype.flat()</h3><p><code>arr.flat(depth)</code> æŒ‰ç…§ <code>depth</code> ï¼ˆä¸ä¼ å€¼çš„è¯é»˜è®¤æ˜¯ 1ï¼‰æ·±åº¦æ‹å¹³ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶ä¸”å°†ç»“æœä»¥æ–°æ•°ç»„å½¢å¼è¿”å›ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// depth é»˜è®¤æ˜¯ 1</span></span><br><span class="line"><span class="keyword">const</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line"><span class="built_in">console</span>.log(arr1.flat())  <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ Infinityï¼Œå¯å±•å¼€ä»»æ„æ·±åº¦çš„åµŒå¥—æ•°ç»„ï¼›è‡ªåŠ¨è·³è¿‡ç©ºæ•°ç»„ï¼›</span></span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="number">1</span>, , [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>]]]]</span><br><span class="line"><span class="built_in">console</span>.log(arr2.flat(<span class="literal">Infinity</span>))</span><br><span class="line"><span class="comment">// [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure><p>ç”¨ <code>reduce</code> å®ç°æ‹å¹³ä¸€å±‚æ•°ç»„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•ä¸€</span></span><br><span class="line"><span class="keyword">let</span> newStr = arr.reduce(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> acc.concat(cur), [])</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•äºŒ</span></span><br><span class="line"><span class="keyword">const</span> flattened = <span class="function"><span class="params">arr</span> =&gt;</span> [].concat(...arr)</span><br><span class="line">flattened(arr)</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flat">flat</a></p><h3 id="Array-prototype-flatMap"><a href="#Array-prototype-flatMap" class="headerlink" title="Array.prototype.flatMap()"></a>Array.prototype.flatMap()</h3><p><code>flatMap(callback)</code> ä½¿ç”¨æ˜ å°„å‡½æ•° <code>callback</code> æ˜ å°„æ¯ä¸ªå…ƒç´ ï¼Œ<code>callback</code> æ¯æ¬¡çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ•°ç»„æ‰§è¡Œç±»ä¼¼ <code>arr.flat(1)</code> çš„æ“ä½œè¿›è¡Œæ‹å¹³ä¸€å±‚åæœ€åè¿”å›ç»“æœï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">arr1.flatMap(<span class="function"><span class="params">x</span> =&gt;</span> [x * <span class="number">2</span>])</span><br><span class="line"><span class="comment">// å°† [[2], [4], [6], [8]] æ•°ç»„æ‹å¹³ä¸€å±‚å¾—åˆ°æœ€ç»ˆç»“æœï¼š[2, 4, 6, 8]</span></span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap">flatMap</a></p><h2 id="ES2020"><a href="#ES2020" class="headerlink" title="ES2020"></a>ES2020</h2><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202011/es2020.png"></p><h3 id="String-prototype-matchAll"><a href="#String-prototype-matchAll" class="headerlink" title="String.prototype.matchAll()"></a>String.prototype.matchAll()</h3><p><code>String.prototype.matchAll()</code> æ–¹æ³•ï¼Œå¯ä»¥ä¸€æ¬¡æ€§å–å‡ºæ‰€æœ‰åŒ¹é…ã€‚ä¸è¿‡ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ª <code>RegExpStringIterator</code> è¿­ä»£å™¨åŒæ˜¯ä¹Ÿæ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ <code>for...of</code> è¿›è¡Œè¿­ä»£ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;test1test2&#x27;</span></span><br><span class="line"><span class="keyword">let</span> regexp = <span class="regexp">/t(e)(st(\d?))/g</span></span><br><span class="line"><span class="keyword">let</span> iterable = str.matchAll(regexp)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> x <span class="keyword">of</span> iterable) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [&#x27;test1&#x27;, &#x27;e&#x27;, &#x27;st1&#x27;, &#x27;1&#x27;, index: 0, input: &#x27;test1test1&#x27;, groups: undefined]</span></span><br><span class="line"><span class="comment">// [&#x27;test2&#x27;, &#x27;e&#x27;, &#x27;st2&#x27;, &#x27;2&#x27;, index: 5, input: &#x27;test1test2&#x27;, groups: undefined]</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„å½“ä½¿ç”¨ matchAll(regexp) çš„æ—¶å€™ï¼Œæ­£åˆ™è¡¨è¾¾å¼å¿…é¡»åŠ ä¸Š /g ä¿®é¥°ç¬¦ã€‚</p></blockquote><p>ä¹Ÿå¯ä»¥å°†è¿™ä¸ªå¯è¿­ä»£æ•°æ®è½¬æˆæ•°ç»„å½¢å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•ä¸€</span></span><br><span class="line">[...str.matchAll(regexp)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•äºŒ</span></span><br><span class="line"><span class="built_in">Array</span>.from(str.matchAll(regexp))</span><br></pre></td></tr></table></figure><h3 id="åŠ¨æ€import"><a href="#åŠ¨æ€import" class="headerlink" title="åŠ¨æ€import()"></a>åŠ¨æ€import()</h3><p>æ ‡å‡†ç”¨æ³•çš„ <code>import</code> å¯¼å…¥çš„æ¨¡å—æ˜¯é™æ€çš„ï¼Œä¼šä½¿æ‰€æœ‰è¢«å¯¼å…¥çš„æ¨¡å—ï¼Œåœ¨åŠ è½½æ—¶å°±è¢«ç¼–è¯‘ï¼ˆæ— æ³•åšåˆ°æŒ‰éœ€ç¼–è¯‘ï¼Œé™ä½é¦–é¡µåŠ è½½é€Ÿåº¦ï¼‰ã€‚æœ‰äº›åœºæ™¯ä¸­ï¼Œä½ å¯èƒ½å¸Œæœ›æ ¹æ®æ¡ä»¶å¯¼å…¥æ¨¡å—æˆ–è€…æŒ‰éœ€å¯¼å…¥æ¨¡å—ï¼Œè¿™æ—¶ä½ å¯ä»¥ä½¿ç”¨åŠ¨æ€å¯¼å…¥ä»£æ›¿é™æ€å¯¼å…¥ã€‚</p><p>æ¯”å¦‚æŒ‰éœ€åŠ è½½ä¸€ä¸ªæ¨¡å—å¯ä»¥è¿™æ ·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (xxx) &#123;</span><br><span class="line">    <span class="keyword">import</span>(<span class="string">&#x27;./module.js&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>import()</code> æ˜¯å¼‚æ­¥å¯¼å…¥çš„ï¼Œç»“æœä¼šè¿”å›ä¸€ä¸ª <code>Promise</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;/module.js&#x27;</span>)</span><br><span class="line">.then(<span class="function">(<span class="params"><span class="built_in">module</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Do something with the module.</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>åŠ¨æ€ <code>import()</code> çš„åº”ç”¨åœºæ™¯æŒºå¤šçš„ï¼Œæ¯”å¦‚ <code>Vue</code> ä¸­çš„è·¯ç”±æ‡’åŠ è½½å°±æ˜¯ä½¿ç”¨çš„åŠ¨æ€å¯¼å…¥ç»„ä»¶ã€‚å¦å¤–ç”±äºåŠ¨æ€æ€§ä¸ä¾¿äºé™æ€åˆ†æå·¥å…·å’Œ <code>tree-shaking</code> å·¥ä½œï¼Œæ‰€ä»¥ä¸èƒ½æ»¥ç”¨ã€‚</p><h3 id="BigInt"><a href="#BigInt" class="headerlink" title="BigInt"></a>BigInt</h3><p><code>BigInt</code> æ˜¯ä¸€ç§å†…ç½®å¯¹è±¡ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–¹æ³•æ¥è¡¨ç¤ºå¤§äº $2^{53}$ - 1 çš„æ•´æ•°ã€‚è¿™åŸæœ¬æ˜¯ <code>Javascript</code> ä¸­å¯ä»¥ç”¨ <code>Number</code> è¡¨ç¤ºçš„æœ€å¤§æ•°å­—ã€‚<code>BigInt</code> å¯ä»¥è¡¨ç¤ºä»»æ„å¤§çš„æ•´æ•°ã€‚</p><p>ä¸ºäº†åŒºåˆ† <code>Number</code>ï¼Œå®šä¹‰ä¸€ä¸ª <code>BigInt</code> éœ€è¦åœ¨æ•´æ•°åé¢åŠ ä¸Šä¸€ä¸ª <code>n</code>ï¼Œæˆ–è€…ç”¨å‡½æ•°ç›´æ¥å®šä¹‰ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num1 = <span class="number">10n</span></span><br><span class="line"><span class="keyword">const</span> num2 = BigInt(<span class="number">20</span>)</span><br></pre></td></tr></table></figure><p><code>Number</code> å’Œ <code>BigInt</code> ä¹‹é—´èƒ½è¿›è¡Œæ¯”è¾ƒï¼Œä½†ä»–ä»¬ä¹‹é—´æ˜¯å®½æ¾ç›¸ç­‰ï¼›ä¸”ç”±äºä»–ä»¬è¡¨ç¤ºçš„æ˜¯ä¸åŒç±»å‹çš„æ•°å­—ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥è¿›è¡Œå››åˆ™è¿ç®—ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10n</span> == <span class="number">10</span>         <span class="comment">// true</span></span><br><span class="line"><span class="number">10n</span> === <span class="number">10</span>        <span class="comment">// false</span></span><br><span class="line"><span class="number">10n</span> &gt; <span class="number">8</span>           <span class="comment">// true</span></span><br><span class="line"><span class="number">10</span> + <span class="built_in">Number</span>(<span class="number">10n</span>)  <span class="comment">// 20</span></span><br><span class="line"><span class="number">10</span> + <span class="number">10n</span>          <span class="comment">// TypeError</span></span><br></pre></td></tr></table></figure><h3 id="Promise-allSettled"><a href="#Promise-allSettled" class="headerlink" title="Promise.allSettled"></a>Promise.allSettled</h3><p><code>Promise.allSettled(iterable)</code> å½“æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç» <code>settled</code>ï¼Œå³çŠ¶æ€å˜åŒ–è¿‡äº†ï¼Œé‚£ä¹ˆå°†è¿”å›ä¸€ä¸ªæ–°å®ä¾‹ï¼Œè¯¥æ–°å®ä¾‹çš„å†…éƒ¨å€¼æ˜¯ç”±æ‰€æœ‰å®ä¾‹çš„å€¼å’ŒçŠ¶æ€ç»„åˆæˆçš„æ•°ç»„ï¼Œæ•°ç»„çš„æ¯é¡¹æ˜¯ç”±æ¯ä¸ªå®ä¾‹çš„çŠ¶æ€å’Œå†…éƒ¨å€¼ç»„æˆçš„å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.allSettled([</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="number">9</span>)</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;&#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        reject(<span class="number">6</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    init()</span><br><span class="line">])</span><br><span class="line"><span class="keyword">let</span> p2 = p1.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//      &#123;status: &quot;fulfilled&quot;, value: undefined&#125;, </span></span><br><span class="line"><span class="comment">//      &#123;status: &quot;rejected&quot;, reason: 6&#125;, </span></span><br><span class="line"><span class="comment">//      &#123;status: &quot;fulfilled&quot;, value: 3&#125;</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure><p>åªè¦æ‰€æœ‰å®ä¾‹ä¸­åŒ…å«ä¸€ä¸ª <code>pending</code> çŠ¶æ€çš„å®ä¾‹ï¼Œé‚£ä¹ˆ <code>Promise.allSettled()</code> çš„ç»“æœä¸ºè¿”å›ä¸€ä¸ªè¿™æ · <code>Promise &#123;&lt;pending&gt;&#125;</code> çš„å®ä¾‹ã€‚</p><h3 id="globalThis"><a href="#globalThis" class="headerlink" title="globalThis"></a>globalThis</h3><p>åœ¨ä»¥å‰ï¼Œä»ä¸åŒçš„ <code>JavaScript</code> ç¯å¢ƒä¸­è·å–å…¨å±€å¯¹è±¡éœ€è¦ä¸åŒçš„è¯­å¥ã€‚åœ¨ <code>Web</code> ä¸­ï¼Œå¯ä»¥é€šè¿‡ <code>window</code>ã€<code>self</code> æˆ–è€… <code>frames</code> å–åˆ°å…¨å±€å¯¹è±¡ï¼Œä½†æ˜¯åœ¨ <code>Web Workers</code> ä¸­ï¼Œåªæœ‰ <code>self</code> å¯ä»¥ã€‚åœ¨ <code>Node.js</code> ä¸­ï¼Œå®ƒä»¬éƒ½æ— æ³•è·å–ï¼Œå¿…é¡»ä½¿ç”¨ <code>global</code>ã€‚</p><p>è€Œç°åœ¨åªéœ€è¦ä½¿ç”¨ <code>globalThis</code> å³å¯è·å–åˆ°é¡¶å±‚å¯¹è±¡ï¼Œè€Œä¸ç”¨æ‹…å¿ƒç¯å¢ƒé—®é¢˜ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨æµè§ˆå™¨ä¸­</span></span><br><span class="line">globalThis === <span class="built_in">window</span>  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="import-meta"><a href="#import-meta" class="headerlink" title="import.meta"></a>import.meta</h3><p><code>import.meta</code> æ˜¯ä¸€ä¸ªç»™ <code>JavaScript</code> æ¨¡å—æš´éœ²ç‰¹å®šä¸Šä¸‹æ–‡çš„å…ƒæ•°æ®å±æ€§çš„å¯¹è±¡ã€‚å®ƒåŒ…å«äº†è¿™ä¸ªæ¨¡å—çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´è¿™ä¸ªæ¨¡å—çš„ <code>URL</code>ï¼Œ<code>import.meta</code> å¿…é¡»åœ¨ä¸€ä¸ªæ¨¡å—é‡Œä½¿ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ²¡æœ‰å£°æ˜ type=&quot;module&quot;ï¼Œå°±ä½¿ç”¨ import.meta ä¼šæŠ¥é”™</span></span><br><span class="line">&lt;script type=<span class="string">&quot;module&quot;</span> src=<span class="string">&quot;./js/module.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨module.jsé‡Œ</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">import</span>.meta)  </span><br><span class="line"><span class="comment">// &#123;url: &quot;http://localhost/3ag/js/module.js&quot;&#125;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦åœ¨é…ç½®äº† <code>Webpack</code> çš„é¡¹ç›®ï¼Œæ¯”å¦‚ <code>Vue</code> é‡Œä½¿ç”¨ <code>import.meta</code> éœ€è¦åŠ ä¸€ä¸ªåŒ…ä¸”é…ç½®ä¸€ä¸‹å‚æ•°ï¼Œå¦åˆ™é¡¹ç›®ç¼–è¯‘é˜¶æ®µä¼šæŠ¥é”™ã€‚</p><p>åŒ…é…ç½®è¯¦æƒ…å‚è€ƒï¼š<a href="https://www.npmjs.com/package/@open-wc/webpack-import-meta-loader">@open-wc/webpack-import-meta-loader</a></p><p>æ¯”å¦‚æˆ‘ç”¨çš„æ˜¯ <code>4.x</code> ç‰ˆæœ¬çš„ <code>vue-cli</code>ï¼Œé‚£æˆ‘éœ€è¦åœ¨ <code>vue.config.js</code> é‡Œé…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">        config.module</span><br><span class="line">            .rule(<span class="string">&#x27;js&#x27;</span>)</span><br><span class="line">            .test(<span class="regexp">/\.js$/</span>)</span><br><span class="line">            .use(<span class="string">&#x27;@open-wc/webpack-import-meta-loader&#x27;</span>)</span><br><span class="line">                .loader(<span class="string">&#x27;@open-wc/webpack-import-meta-loader&#x27;</span>)</span><br><span class="line">                .end()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¯é€‰é“¾æ“ä½œç¬¦ï¼ˆ-ï¼‰"><a href="#å¯é€‰é“¾æ“ä½œç¬¦ï¼ˆ-ï¼‰" class="headerlink" title="å¯é€‰é“¾æ“ä½œç¬¦ï¼ˆ?.ï¼‰"></a>å¯é€‰é“¾æ“ä½œç¬¦ï¼ˆ?.ï¼‰</h3><p>é€šå¸¸æˆ‘ä»¬è·å–ä¸€ä¸ªæ·±å±‚å¯¹è±¡çš„å±æ€§ä¼šéœ€è¦å†™å¾ˆå¤šåˆ¤æ–­æˆ–è€…ä½¿ç”¨é€»è¾‘ä¸ <code>&amp;&amp;</code> æ“ä½œç¬¦ï¼Œå› ä¸ºå¯¹è±¡çš„æŸä¸ªå±æ€§å¦‚æœä¸º <code>null</code> æˆ–è€… <code>undefined</code> å°±æœ‰å¯èƒ½æŠ¥é”™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    first: &#123;</span><br><span class="line">        second: <span class="string">&#x27;å¸ƒå…°&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•ä¸€</span></span><br><span class="line"><span class="keyword">let</span> name1 = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.first) &#123;</span><br><span class="line">        name1 = obj.first.second</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">let</span> name2 = obj &amp;&amp; obj.first &amp;&amp; obj.first.second</span><br></pre></td></tr></table></figure><p><code>?.</code> æ“ä½œç¬¦å…è®¸è¯»å–ä½äºè¿æ¥å¯¹è±¡é“¾æ·±å¤„çš„å±æ€§çš„å€¼ï¼Œè€Œä¸å¿…æ˜ç¡®éªŒè¯é“¾ä¸­çš„æ¯ä¸ªå¼•ç”¨æ˜¯å¦æœ‰æ•ˆã€‚å¦‚æœæŸä¸ªå±æ€§ä¸º <code>null</code> æˆ–è€… <code>undefined</code> åˆ™ç»“æœç›´æ¥ä¸º <code>undefined</code>ã€‚æœ‰äº†å¯é€‰é“¾æ“ä½œç¬¦å°±å¯ä»¥ä½¿å¾—è¡¨è¾¾å¼æ›´åŠ ç®€æ˜äº†ï¼Œå¯¹äºä¸Šé¢ä¾‹å­ç”¨å¯é€‰é“¾æ“ä½œç¬¦å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name3 = obj?.first?.second</span><br></pre></td></tr></table></figure><h3 id="ç©ºå€¼åˆå¹¶æ“ä½œç¬¦ï¼ˆ-ï¼‰"><a href="#ç©ºå€¼åˆå¹¶æ“ä½œç¬¦ï¼ˆ-ï¼‰" class="headerlink" title="ç©ºå€¼åˆå¹¶æ“ä½œç¬¦ï¼ˆ??ï¼‰"></a>ç©ºå€¼åˆå¹¶æ“ä½œç¬¦ï¼ˆ??ï¼‰</h3><p>å¯¹äºé€»è¾‘æˆ– <code>||</code> è¿ç®—ç¬¦ï¼Œå½“å¯¹è¿ç®—ç¬¦å·¦ä¾§çš„æ“ä½œæ•°è¿›è¡Œè£…æ¢ä¸º <code>Boolean</code> å€¼çš„æ—¶å€™ï¼Œå¦‚æœä¸º <code>true</code>ï¼Œåˆ™å–å·¦è¾¹çš„æ“ä½œæ•°ä¸ºç»“æœï¼Œå¦åˆ™å–å³è¾¹çš„æ“ä½œæ•°ä¸ºç»“æœï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;&#x27;</span> || <span class="string">&#x27;å¸ƒå…°&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(name)  <span class="comment">// &#x27;å¸ƒå…°&#x27;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éƒ½çŸ¥é“ <code>&#39;&#39;</code>ã€<code>0</code>ã€<code>null</code>ã€<code>undefined</code>ã€<code>false</code>ã€<code>NaN</code> ç­‰è½¬æˆ <code>Boolean</code> å€¼çš„æ—¶å€™éƒ½æ˜¯ <code>false</code>ï¼Œæ‰€ä»¥éƒ½ä¼šå–å³è¾¹çš„æ“ä½œæ•°ã€‚è¿™ä¸ªæ—¶å€™å¦‚æœè¦ç»™å˜é‡è®¾ç½®é»˜è®¤å€¼ï¼Œå¦‚æœé‡åˆ°æœ¬èº«å€¼å°±å¯èƒ½æ˜¯ <code>&#39;&#39;</code> æˆ– <code>0</code> çš„æƒ…å†µé‚£å°±ä¼šå‡ºé”™äº†ï¼Œä¼šè¢«é”™è¯¯çš„è®¾ç½®ä¸ºé»˜è®¤å€¼äº†ã€‚</p><p>è€Œ <code>??</code> æ“ä½œç¬¦å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œå‡ºç°çš„ï¼Œ<code>x ?? y</code> åªæœ‰å·¦ä¾§çš„æ“ä½œæ•°ä¸º <code>null</code> æˆ– <code>undefined</code> çš„æ—¶å€™æ‰å–å³ä¾§æ“ä½œæ•°ï¼Œå¦åˆ™å–å·¦ä¾§æ“ä½œæ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">0</span> ?? <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(num)  <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><h2 id="ES2021"><a href="#ES2021" class="headerlink" title="ES2021"></a>ES2021</h2><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202011/es2021.png"></p><p>å¦‚ä¸‹è¿™å‡ ä¸ªææ¡ˆå·²ç»ç¡®å®šäº†ä¼šåœ¨ 2021 å¹´å‘å¸ƒï¼Œæ‰€ä»¥æŠŠä»–ä»¬å½’åˆ° <code>ES2021</code> ä¸­ã€‚</p><h3 id="String-prototype-replaceAll"><a href="#String-prototype-replaceAll" class="headerlink" title="String.prototype.replaceAll"></a>String.prototype.replaceAll</h3><p>ä¹‹å‰éœ€è¦æ›¿æ¢ä¸€ä¸ªå­—ç¬¦ä¸²é‡Œçš„å…¨éƒ¨åŒ¹é…å­—ç¬¦å¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> queryString = <span class="string">&#x27;q=query+string+parameters&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•ä¸€</span></span><br><span class="line"><span class="keyword">const</span> withSpaces1 = queryString.replace(<span class="regexp">/\+/g</span>, <span class="string">&#x27; &#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•äºŒ</span></span><br><span class="line"><span class="keyword">const</span> withSpaces2 = queryString.split(<span class="string">&#x27;+&#x27;</span>).join(<span class="string">&#x27; &#x27;</span>)</span><br></pre></td></tr></table></figure><p>è€Œç°åœ¨åªéœ€è¦è¿™ä¹ˆåšï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> withSpace3 = queryString.replaceAll(<span class="string">&#x27;+&#x27;</span>, <span class="string">&#x27; &#x27;</span>)</span><br></pre></td></tr></table></figure><blockquote><p>replaceAll çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œå½“æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„æ—¶å€™ï¼Œå¿…é¡»åŠ ä¸Šå…¨å±€ä¿®é¥°ç¬¦ /gï¼Œå¦åˆ™æŠ¥é”™ã€‚</p></blockquote><p>å‚è€ƒï¼š<a href="https://github.com/tc39/proposal-string-replaceall">string-replaceall</a></p><h3 id="Promise-any"><a href="#Promise-any" class="headerlink" title="Promise.any()"></a>Promise.any()</h3><p><code>Promsie.any()</code> å’Œ <code>Promise.all()</code> ä¸€æ ·æ¥å—ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡ï¼Œç„¶åä¾æ®ä¸åŒçš„å…¥å‚ä¼šè¿”å›ä¸åŒçš„æ–°å®ä¾‹ï¼š</p><ul><li><p>ä¼ ä¸€ä¸ªç©ºçš„å¯è¿­ä»£å¯¹è±¡æˆ–è€…å¯è¿­ä»£å¯¹è±¡æ‰€æœ‰ <code>Promise</code> éƒ½æ˜¯ <code>rejected</code> çŠ¶æ€çš„ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ª <code>AggregateError</code> ç±»å‹çš„é”™è¯¯ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ª <code>rejected</code> çŠ¶æ€çš„æ–°å®ä¾‹ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.any([])</span><br><span class="line"><span class="keyword">let</span> p2.catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p1)</span><br><span class="line"><span class="comment">// PromiseÂ &#123;&lt;rejected&gt;: AggregateError: All promises were rejected&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>åªè¦å¯è¿­ä»£å¯¹è±¡é‡ŒåŒ…å«ä»»ä½•ä¸€ä¸ª <code>fulfilled</code> çŠ¶æ€çš„ <code>Promise</code>ï¼Œåˆ™ä¼šè¿”å›ç¬¬ä¸€ä¸ª <code>fulfilled</code> çš„å®ä¾‹ï¼Œå¹¶ä¸”ä»¥å®ƒçš„å€¼ä½œä¸ºæ–°å®ä¾‹çš„å€¼ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="built_in">Promise</span>.any([</span><br><span class="line">    <span class="number">1</span>,</span><br><span class="line">    <span class="built_in">Promise</span>.reject(<span class="number">2</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;&#125;),</span><br><span class="line">    <span class="built_in">Promise</span>.resolve(<span class="number">3</span>),</span><br><span class="line">])</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p)</span><br><span class="line"><span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: 1&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>å…¶ä»–æƒ…å†µä¸‹ï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ª <code>pending</code> çŠ¶æ€çš„å®ä¾‹ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="built_in">Promise</span>.any([</span><br><span class="line">    <span class="built_in">Promise</span>.reject(<span class="number">2</span>),</span><br><span class="line">    <span class="built_in">Promise</span>.reject(<span class="number">3</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;&#125;),</span><br><span class="line">])</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p)</span><br><span class="line"><span class="comment">// PromiseÂ &#123;&lt;pending&gt;: undefined&#125;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="WeakRef"><a href="#WeakRef" class="headerlink" title="WeakRef"></a>WeakRef</h3><p>æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªæ™®é€šçš„å¼•ç”¨ï¼ˆé»˜è®¤æ˜¯å¼ºå¼•ç”¨ï¼‰ä¼šå°†ä¸ä¹‹å¯¹åº”çš„å¯¹è±¡ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚åªæœ‰å½“è¯¥å¯¹è±¡æ²¡æœ‰ä»»ä½•çš„å¼ºå¼•ç”¨æ—¶ï¼Œ<code>JavaScript</code> å¼•æ“ <code>GC</code> æ‰ä¼šé”€æ¯è¯¥å¯¹è±¡å¹¶ä¸”å›æ”¶è¯¥å¯¹è±¡æ‰€å çš„å†…å­˜ç©ºé—´ã€‚</p><p><code>WeakRef</code> å¯¹è±¡å…è®¸ä½ ä¿ç•™å¯¹å¦ä¸€ä¸ªå¯¹è±¡çš„å¼±å¼•ç”¨ï¼Œè€Œä¸ä¼šé˜»æ­¢è¢«å¼±å¼•ç”¨çš„å¯¹è±¡è¢« <code>GC</code> å›æ”¶ã€‚<code>WeakRef</code> çš„å®ä¾‹æ–¹æ³• <code>deref()</code> å¯ä»¥è¿”å›å½“å‰å®ä¾‹çš„ <code>WeakRef</code> å¯¹è±¡æ‰€ç»‘å®šçš„ <code>target</code> å¯¹è±¡ï¼Œå¦‚æœè¯¥ <code>target</code> å¯¹è±¡å·²è¢« <code>GC</code> å›æ”¶åˆ™è¿”å› <code>undefined</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;å¸ƒå…°&#x27;</span>, <span class="attr">age</span>: <span class="number">12</span> &#125;</span><br><span class="line"><span class="keyword">let</span> wr = <span class="keyword">new</span> WeakRef(person)</span><br><span class="line"><span class="built_in">console</span>.log(wr.deref())  </span><br><span class="line"><span class="comment">// &#123; name: &#x27;å¸ƒå…°&#x27;, age: 12 &#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ­£ç¡®ä½¿ç”¨ WeakRef å¯¹è±¡éœ€è¦ä»”ç»†çš„è€ƒè™‘ï¼Œæœ€å¥½å°½é‡é¿å…ä½¿ç”¨ã€‚è¿™é‡Œé¢æœ‰è¯¸å¤šåŸå› ï¼Œæ¯”å¦‚ï¼šGC åœ¨ä¸€ä¸ª JavaScript å¼•æ“ä¸­çš„è¡Œä¸ºæœ‰å¯èƒ½åœ¨å¦ä¸€ä¸ª JavaScript å¼•æ“ä¸­çš„è¡Œä¸ºå¤§ç›¸å¾„åº­ï¼Œæˆ–è€…ç”šè‡³åœ¨åŒä¸€ç±»å¼•æ“ï¼Œä¸åŒç‰ˆæœ¬ä¸­ GC çš„è¡Œä¸ºéƒ½æœ‰å¯èƒ½æœ‰è¾ƒå¤§çš„å·®è·ã€‚GC ç›®å‰è¿˜æ˜¯ JavaScript å¼•æ“å®ç°è€…ä¸æ–­æ”¹è¿›å’Œæ”¹è¿›è§£å†³æ–¹æ¡ˆçš„ä¸€ä¸ªéš¾é¢˜ã€‚</p></blockquote><p>å‚è€ƒï¼š</p><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/WeakRef">WeakRef</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Memory_Management">å†…å­˜ç®¡ç†</a></li></ul><h3 id="é€»è¾‘èµ‹å€¼ç¬¦"><a href="#é€»è¾‘èµ‹å€¼ç¬¦" class="headerlink" title="é€»è¾‘èµ‹å€¼ç¬¦"></a>é€»è¾‘èµ‹å€¼ç¬¦</h3><p>é€»è¾‘èµ‹å€¼ç¬¦åŒ…å« 3 ä¸ªï¼š</p><ul><li><code>x &amp;&amp;= y</code>ï¼šé€»è¾‘ä¸èµ‹å€¼ç¬¦ï¼Œç›¸å½“äº <code>x &amp;&amp; (x = y)</code></li><li><code>x ||= y</code>ï¼šé€»è¾‘æˆ–èµ‹å€¼ç¬¦ï¼Œç›¸å½“äº <code>x || (x = y)</code></li><li><code>x ??= y</code>ï¼šé€»è¾‘ç©ºèµ‹å€¼ç¬¦ï¼Œç›¸å½“äº <code>x ?? (x = y)</code></li></ul><p>çœ‹å¦‚ä¸‹ç¤ºä¾‹ï¼ŒåŠ æ·±ç†è§£ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">0</span></span><br><span class="line">x &amp;&amp;= <span class="number">1</span>  <span class="comment">// x: 0</span></span><br><span class="line">x ||= <span class="number">1</span>  <span class="comment">// x: 1</span></span><br><span class="line">x ??= <span class="number">2</span>  <span class="comment">// x: 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> y = <span class="number">1</span></span><br><span class="line">y &amp;&amp;= <span class="number">0</span>     <span class="comment">// y: 0</span></span><br><span class="line">y ||= <span class="literal">null</span>  <span class="comment">// y: null</span></span><br><span class="line">y ??= <span class="number">2</span>     <span class="comment">// y: 2</span></span><br></pre></td></tr></table></figure><h3 id="æ•°å€¼åˆ†éš”ç¬¦ï¼ˆ-ï¼‰"><a href="#æ•°å€¼åˆ†éš”ç¬¦ï¼ˆ-ï¼‰" class="headerlink" title="æ•°å€¼åˆ†éš”ç¬¦ï¼ˆ_ï¼‰"></a>æ•°å€¼åˆ†éš”ç¬¦ï¼ˆ_ï¼‰</h3><p>å¯¹äºä¸‹é¢ä¸€ä¸²æ•°å­—ï¼Œä½ ä¸€çœ¼çœ‹ä¸Šå»ä¸ç¡®å®šå®ƒåˆ°åº•æ˜¯å¤šå°‘å§ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = <span class="number">1000000000</span></span><br></pre></td></tr></table></figure><p>é‚£ç°åœ¨å‘¢ï¼Ÿæ˜¯ä¸æ˜¯å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹å‡ºæ¥å®ƒæ˜¯ 10 äº¿ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = <span class="number">1</span>_000_000_000</span><br></pre></td></tr></table></figure><p>æ•°å€¼åˆ†éš”ç¬¦ï¼ˆ<code>_</code>ï¼‰çš„ä½œç”¨å°±æ˜¯ä¸ºäº†è®©æ•°å€¼çš„å¯è¯»æ€§æ›´å¼ºã€‚é™¤äº†èƒ½ç”¨äºåè¿›åˆ¶ï¼Œè¿˜å¯ä»¥ç”¨äºäºŒçº§åˆ¶ï¼Œåå…­è¿›åˆ¶ç”šè‡³æ˜¯ <code>BigInt</code> ç±»å‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> binarary = <span class="number">0b1010</span>_0001_1000_0101</span><br><span class="line"><span class="keyword">let</span> hex = <span class="number">0xA0</span>_B0_C0</span><br><span class="line"><span class="keyword">let</span> budget = <span class="number">1</span>_000_000_000_000n</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ—¶å¿…é¡»æ³¨æ„ <code>_</code> çš„ä¸¤è¾¹å¿…é¡»è¦æœ‰ç±»å‹çš„æ•°å€¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œä»¥ä¸‹è¿™äº›éƒ½æ˜¯æ— æ•ˆçš„å†™æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">10</span>_</span><br><span class="line"><span class="keyword">let</span> binarary = <span class="number">0b1011</span>_</span><br><span class="line"><span class="keyword">let</span> hex = <span class="number">0</span>x_0A0B</span><br><span class="line"><span class="keyword">let</span> budget = <span class="number">1</span>_n</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><ul><li><a href="https://es6.ruanyifeng.com/">ECMAScript6å…¥é—¨</a></li><li><a href="https://juejin.im/post/6844903959283367950">1.5ä¸‡å­—æ¦‚æ‹¬ES6å…¨éƒ¨ç‰¹æ€§(å·²æ›´æ–°ES2020)</a></li><li><a href="https://juejin.im/post/6844903775329583112">è¿‘ä¸€ä¸‡å­—çš„ES6è¯­æ³•çŸ¥è¯†ç‚¹è¡¥å……</a></li><li><a href="https://juejin.im/post/6886247841686093837#heading-9">æ·±å…¥ç†è§£Promise</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for-await...of">for-awaitâ€¦of</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Iteration_protocols">Iteration_protocols</a></li><li><a href="https://github.com/tc39/proposal-object-from-entries">Object.fromEntries</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/WeakRef">WeakRef</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Memory_Management">å†…å­˜ç®¡ç†</a></li><li><a href="https://github.com/doodlewind/jshistory-cn">jshistory-cn</a></li><li><a href="https://tc39.es/ecma262/#sec-samevaluezero">sameValueZero</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥ç†è§£Promise</title>
      <link href="/2020/10/22/promise/"/>
      <url>/2020/10/22/promise/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»å¼‚æ­¥ç¼–ç¨‹è¯´èµ·"><a href="#ä»å¼‚æ­¥ç¼–ç¨‹è¯´èµ·" class="headerlink" title="ä»å¼‚æ­¥ç¼–ç¨‹è¯´èµ·"></a>ä»å¼‚æ­¥ç¼–ç¨‹è¯´èµ·</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ <code>JavaScript</code> çš„ä»£ç æ‰§è¡Œçš„æ—¶å€™æ˜¯è·‘åœ¨å•çº¿ç¨‹ä¸Šçš„ï¼Œå¯ä»¥ç†è§£ä¸ºåªèƒ½æŒ‰ç…§ä»£ç çš„å‡ºç°é¡ºåºï¼Œä»ä¸Šåˆ°ä¸‹ä¸€è¡Œä¸€è¡Œçš„æ‰§è¡Œï¼Œä½†æ˜¯é‡åˆ°äº†å¼‚æ­¥çš„è¡Œä¸ºï¼Œæ¯”å¦‚å®šæ—¶å™¨ï¼ˆä¸€å®šæ—¶é—´ä¹‹åæ‰å»æ‰§è¡Œï¼‰ï¼Œé‚£å°±éœ€è¦ç­‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆåçš„ä¸€æ®µæ—¶é—´é‡Œå†å»æ‰§è¡Œå¼‚æ­¥ä»£ç ã€‚</p><p>å¯¹äºåŒæ­¥è¡Œä¸ºï¼Œå¦‚ä¸‹é¢çš„ä»£ç ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¾ˆæ¸…æ¥šçš„çŸ¥é“æ¯ä¸€è¡Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Œè¿™æ˜¯å› ä¸ºåé¢çš„æŒ‡ä»¤æ€»æ˜¯ç­‰åˆ°å‰é¢çš„æŒ‡ä»¤æ‰§è¡Œå®Œæˆåæ‰å»æ‰§è¡Œï¼Œæ‰€ä»¥è¿™é‡Œçš„ç¬¬äºŒè¡Œé‡Œçš„å˜é‡ <code>x</code> åœ¨å†…å­˜é‡Œå·²ç»æ˜¯å®šä¹‰è¿‡çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> y = x + <span class="number">5</span>;</span><br></pre></td></tr></table></figure><a id="more"></a><p>ä½†æ˜¯å¯¹äºå¼‚æ­¥ä»£ç ï¼Œæˆ‘ä»¬å°±ä¸å¥½æ¨æ–­åˆ°åº•ä»€ä¹ˆæ—¶å€™ä¼šæ‰§è¡Œå®Œæˆäº†ã€‚æ¯”å¦‚ä¸¾ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œæˆ‘ä»¬å»åŠ¨æ€åŠ è½½æŸä¸ªè„šæœ¬ï¼Œä¼šè¿™æ ·åšï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScript</span>(<span class="params">src</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> script = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">    script.src = src</span><br><span class="line">    <span class="built_in">document</span>.head.append(script)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè„šæœ¬åŠ è½½å®Œæˆçš„æ—¶å€™ä¼šå»æ‰§è¡Œå®šä¹‰åœ¨è„šæœ¬é‡Œçš„ä¸€äº›å‡½æ•°ï¼Œæ¯”å¦‚åˆå§‹åŒ–å‡½æ•° <code>init</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä¼šè¿™æ ·å†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScript</span>(<span class="params">src</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> script = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">    script.src = src</span><br><span class="line">    <span class="built_in">document</span>.head.append(script)</span><br><span class="line">&#125;</span><br><span class="line">loadScript(<span class="string">&#x27;./js/script.js&#x27;</span>)</span><br><span class="line">init()  <span class="comment">// å®šä¹‰åœ¨ ./js/script.js é‡Œçš„å‡½æ•°</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å®é™…æ‰§è¡Œåå´å‘ç°ï¼Œè¿™æ ·æ ¹æœ¬ä¸è¡Œï¼Œå› ä¸ºåŠ è½½è„šæœ¬æ˜¯éœ€è¦èŠ±æ—¶é—´çš„ï¼Œæ˜¯ä¸€ä¸ªå¼‚æ­¥çš„è¡Œä¸ºï¼Œæµè§ˆå™¨æ‰§è¡Œ <code>JavaScript</code> çš„æ—¶å€™å¹¶ä¸ä¼šç­‰åˆ°è„šæœ¬åŠ è½½å®Œæˆçš„æ—¶å€™å†å»è°ƒç”¨ <code>init</code> å‡½æ•°ã€‚</p><p>ä»¥å¾€ï¼Œå¯¹äºè¿™ç§å¼‚æ­¥ç¼–ç¨‹çš„åšæ³•é€šå¸¸å°±æ˜¯é€šè¿‡ç»™å‡½æ•°ä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥å¤„ç†ï¼Œä¸Šé¢é‚£ä¸ªä¾‹å­å¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScript</span>(<span class="params">src, success, fail</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> script = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">    script.src = src</span><br><span class="line">    script.onload = success</span><br><span class="line">    script.onerror = fail</span><br><span class="line">    <span class="built_in">document</span>.head.append(script)</span><br><span class="line">&#125;</span><br><span class="line">loadScript(<span class="string">&#x27;./js/script.js&#x27;</span>, success, fail)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">success</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">    init()  <span class="comment">// å®šä¹‰åœ¨ ./js/script.js ä¸­çš„å‡½æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fail</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;fail&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™æ ·åšèƒ½å¤Ÿä¿è¯åœ¨è„šæœ¬åŠ è½½å®Œæˆçš„æ—¶å€™ï¼Œå†å»æ‰§è¡Œè„šæœ¬é‡Œçš„å‡½æ•°ã€‚ä½†æ˜¯å¤šè€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœ <code>success</code> é‡Œåˆéœ€è¦åŠ è½½åˆ«çš„ <code>js</code> æ–‡ä»¶å‘¢ï¼Œé‚£å²‚ä¸æ˜¯éœ€è¦å¤šå±‚åµŒå¥—äº†ã€‚æ˜¯çš„ï¼Œè¿™æ ·çš„å¤šå±‚åµŒå¥—ä¼šä½¿å¾—ä»£ç å±‚æ¬¡å˜å¾—æ›´åŠ æ·±å…¥ï¼Œéš¾ä»¥é˜…è¯»ä»¥åŠåæœŸç»´æŠ¤æˆæœ¬éå¸¸é«˜ï¼Œå°¤å…¶æ˜¯å½“é‡Œé¢åŠ ä¸Šäº†å¾ˆå¤šçš„åˆ¤æ–­é€»è¾‘çš„æ—¶å€™æƒ…å†µä¼šæ›´åŠ ç³Ÿç³•ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ â€œå›è°ƒåœ°ç‹±â€ï¼Œä¸”åˆå› ä¸ºå®ƒçš„ä»£ç å½¢çŠ¶å¾ˆåƒèººç€çš„é‡‘å­—å¡”ï¼Œæ‰€ä»¥æœ‰çš„äººä¹Ÿå–œæ¬¢å«å®ƒ â€œå™©è¿é‡‘å­—å¡”â€ã€‚</p><p>è€Œä¸ºäº†é¿å…è¿™ç±» â€œå›è°ƒåœ°ç‹±â€ é—®é¢˜ï¼Œç›®å‰æœ€å¥½çš„åšæ³•ä¹‹ä¸€å°±æ˜¯ä½¿ç”¨ <code>Promise</code>ã€‚</p><h2 id="Promiseæ­£ç¯‡"><a href="#Promiseæ­£ç¯‡" class="headerlink" title="Promiseæ­£ç¯‡"></a>Promiseæ­£ç¯‡</h2><p>ä½¿ç”¨ <code>Promise</code> å¯ä»¥å¾ˆå¥½çš„è§£å†³ä¸Šé¢æåˆ°çš„ â€œå›è°ƒåœ°ç‹±â€ é—®é¢˜ï¼Œç›´æ¥æ¥çœ‹ç»“æœï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScript</span>(<span class="params">src</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> script = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line">        script.src = src;</span><br><span class="line">        script.onload = <span class="function">() =&gt;</span> resolve(script);</span><br><span class="line">        script.onerror = <span class="function">() =&gt;</span> reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`Script load error for <span class="subst">$&#123;src&#125;</span>`</span>));</span><br><span class="line">        <span class="built_in">document</span>.head.append(script);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">loadScript(<span class="string">&#x27;./scripts.js&#x27;</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;success&#x27;</span>, res);</span><br><span class="line">    init()</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé€šè¿‡ä½¿ç”¨ <code>Promise</code> å®ä¾‹çš„ <code>then</code> å’Œ <code>catch</code> å‡½æ•°å°†å¤šå±‚åµŒå¥—çš„ä»£ç æ”¹æˆäº†åŒæ­¥å¤„ç†æµç¨‹ï¼Œçœ‹èµ·æ¥æ•ˆæœè¿˜æ˜¯ä¸é”™çš„ï¼Œé‚£ä»€ä¹ˆæ˜¯ <code>Promise</code> å‘¢ï¼Ÿ</p><p><code>Promise</code> é¦–å…ˆæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒé€šå¸¸ç”¨äºæè¿°ç°åœ¨å¼€å§‹æ‰§è¡Œï¼Œä¸€æ®µæ—¶é—´åæ‰èƒ½è·å¾—ç»“æœçš„è¡Œä¸ºï¼ˆå¼‚æ­¥è¡Œä¸ºï¼‰ï¼Œå†…éƒ¨ä¿å­˜äº†è¯¥å¼‚æ­¥è¡Œä¸ºçš„ç»“æœã€‚ç„¶åï¼Œå®ƒè¿˜æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„å¯¹è±¡ï¼š</p><ul><li><code>pending</code>ï¼šå¾…å®š</li><li><code>fulfilled</code>ï¼šå…‘ç°ï¼Œæœ‰æ—¶å€™ä¹Ÿå«è§£å†³ï¼ˆ<code>resolved</code>ï¼‰</li><li><code>rejected</code>ï¼šæ‹’ç»</li></ul><p>ä¸€ä¸ª <code>Promise</code> åªæœ‰è¿™ 3 ç§çŠ¶æ€ï¼Œä¸”çŠ¶æ€çš„è½¬æ¢è¿‡ç¨‹æœ‰ä¸”ä»…æœ‰ 2 ç§ï¼š</p><ul><li><code>pending</code> åˆ° <code>fulfilled</code></li><li><code>pending</code> åˆ° <code>rejected</code></li></ul><p>å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„ <code>Promise</code> å¯¹è±¡æ„é€ å™¨æ¥åˆ›å»ºä¸€ä¸ª <code>Promise</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;&#125;)</span><br></pre></td></tr></table></figure><p>ä¼ é€’ç»™ <code>new Promise</code> çš„æ˜¯ <code>executor</code> æ‰§è¡Œå™¨ã€‚å½“ <code>Promise</code> è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œ<code>executor</code> ä¼šç«‹å³åŒæ­¥æ‰§è¡Œã€‚<code>executor</code> å‡½æ•°é‡Œé€šå¸¸åšäº† 2 ä»¶äº‹æƒ…ï¼šåˆå§‹åŒ–ä¸€ä¸ªå¼‚æ­¥è¡Œä¸ºå’Œæ§åˆ¶çŠ¶æ€çš„æœ€ç»ˆè½¬æ¢ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        resolve()</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œ<code>setTimeout</code> å‡½æ•°ç”¨æ¥æè¿°ä¸€ä¸ªå¼‚æ­¥è¡Œä¸ºï¼Œè€Œ <code>resolve</code> ç”¨æ¥æ”¹å˜çŠ¶æ€ã€‚<br><code>executor</code> å‡½æ•°åŒ…å« 2 ä¸ªå‚æ•°ï¼Œä»–ä»¬éƒ½æ˜¯å›è°ƒå‡½æ•°ï¼Œç”¨äºæ§åˆ¶ <code>Promise</code> çš„çŠ¶æ€è½¬æ¢ï¼š</p><ul><li><code>resolve</code>ï¼šç”¨æ¥å°†çŠ¶æ€ <code>pending</code> è½¬æ¢æˆ <code>fulfilled</code></li><li><code>reject</code>ï¼šç”¨æ¥å°†çŠ¶æ€ <code>pending</code> è½¬æ¢æˆ <code>rejected</code></li></ul><p>ä¸€ä¸ª <code>Promise</code> çš„çŠ¶æ€ä¸€æ—¦è¢«è½¬æ¢è¿‡ï¼Œåˆ™æ— æ³•å†å˜æ›´ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="string">&#x27;ç¬¬ä¸€æ¬¡ resolve&#x27;</span>)</span><br><span class="line">        resolve(<span class="string">&#x27;ç¬¬äºŒæ¬¡ resolve&#x27;</span>)  <span class="comment">// å°†è¢«å¿½ç•¥</span></span><br><span class="line">        reject(<span class="string">&#x27;ç¬¬ä¸€æ¬¡ reject&#x27;</span>)  <span class="comment">// å°†è¢«å¿½ç•¥</span></span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">1000</span>, p)  <span class="comment">// Promise &#123;&lt;fulfilled&gt;: &quot;ç¬¬ä¸€æ¬¡ resolve&quot;&#125;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æ‰§è¡Œäº† 2 æ¬¡ <code>resolve</code> å‡½æ•°å’Œ 1 æ¬¡ <code>reject</code> å‡½æ•°ï¼Œä½†æ˜¯ <code>promise</code> çš„æœ€ç»ˆç»“æœæ˜¯å–çš„ç¬¬ä¸€æ¬¡ <code>resolve</code> çš„ç»“æœï¼Œå°è¯äº†ä¸Šé¢çš„ç»“è®ºã€‚</p><p>ç”± <code>new Promise</code> æ„é€ å™¨è¿”å›çš„ <code>Promise</code> å¯¹è±¡å…·æœ‰å¦‚ä¸‹å†…éƒ¨å±æ€§ï¼š</p><ul><li><code>PromiseState</code>ï¼šæœ€åˆæ˜¯ <code>pending</code>ï¼Œ<code>resolve</code> è¢«è°ƒç”¨çš„æ—¶å€™å˜ä¸º <code>fulfilled</code>ï¼Œæˆ–è€… <code>reject</code> è¢«è°ƒç”¨æ—¶ä¼šå˜ä¸º <code>rejected</code>ï¼›</li><li><code>PromiseResult</code>ï¼šæœ€åˆæ˜¯ <code>undefined</code>ï¼Œ<code>resolve(value)</code> è¢«è°ƒç”¨æ—¶å˜ä¸º <code>value</code>ï¼Œæˆ–è€…åœ¨ <code>reject(error)</code> è¢«è°ƒç”¨æ—¶å˜ä¸º <code>error</code>ã€‚</li></ul><p>æ¯”å¦‚ä¸Šé¢ä¾‹å­ä¸­æ‰“å°å‡ºæ¥çš„ <code>Promise</code> å¯¹è±¡ç»“æœä¸­ï¼Œ<code>fulfilled</code> æ˜¯å…¶å†…éƒ¨çš„ <code>PromiseState</code>ï¼Œè€Œ â€œç¬¬ä¸€æ¬¡ resolveâ€ æ˜¯å…¶ <code>PromiseResult</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Promise &#123;&lt;fulfilled&gt;: &quot;ç¬¬ä¸€æ¬¡ resolve&quot;&#125;</span></span><br></pre></td></tr></table></figure><h2 id="Promiseå®ä¾‹æ–¹æ³•"><a href="#Promiseå®ä¾‹æ–¹æ³•" class="headerlink" title="Promiseå®ä¾‹æ–¹æ³•"></a>Promiseå®ä¾‹æ–¹æ³•</h2><h3 id="Promise-prototype-then"><a href="#Promise-prototype-then" class="headerlink" title="Promise.prototype.then()"></a>Promise.prototype.then()</h3><p><code>Promise.prototype.then()</code> å°†ç”¨äºä¸º <code>Promise</code> å®ä¾‹æ·»åŠ å¤„ç†ç¨‹åºçš„å‡½æ•°ã€‚å®ƒæ¥å— 2 ä¸ªå¯é€‰çš„å‚æ•°ï¼š</p><ul><li><code>onResolved</code>ï¼šçŠ¶æ€ç”± <code>pending</code> è½¬æ¢æˆ <code>fulfilled</code> æ—¶æ‰§è¡Œï¼›</li><li><code>onRejected</code>ï¼šçŠ¶æ€ç”± <code>pending</code> è½¬æ¢æˆ <code>rejected</code> æ—¶æ‰§è¡Œã€‚</li></ul><p>å®ƒå¯ä»¥å†™æˆè¿™æ ·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onResolved</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;resolved&#x27;</span> + res)  <span class="comment">// resolved3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onRejected</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;rejected&#x27;</span> + err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">3</span>)</span><br><span class="line">&#125;).then(onResolved, onRejected)</span><br></pre></td></tr></table></figure><p>æˆ–è€…å†™æˆæ›´ç®€å•çš„æ–¹å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">3</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;resolved&#x27;</span> + res)  <span class="comment">// resolved3</span></span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;rejected&#x27;</span> + err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å› ä¸ºçŠ¶æ€çš„å˜åŒ–åªæœ‰ 2 ç§ï¼Œæ‰€ä»¥ <code>onResolved</code> å’Œ <code>onRejected</code> åœ¨æ‰§è¡Œçš„æ—¶å€™å¿…å®šæ˜¯äº’æ–¥ã€‚</p><p>ä¸Šé¢ä»‹ç»åˆ°äº† <code>then()</code> çš„å‚æ•°æ˜¯å¯é€‰çš„ï¼Œå½“åªæœ‰ <code>onResolved</code> çš„æ—¶å€™å¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve()</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;&#125;)</span><br></pre></td></tr></table></figure><p>å½“å‚æ•°åªæœ‰ <code>onRejected</code> çš„æ—¶å€™ï¼Œéœ€è¦æŠŠç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®ä¸º <code>null</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    reject()</span><br><span class="line">&#125;).then(<span class="literal">null</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;&#125;)</span><br></pre></td></tr></table></figure><p>å¦‚æœç»™ <code>then()</code> å‡½æ•°ä¼ é€’æ¥äº†éå‡½æ•°å‚æ•°ï¼Œåˆ™ä¼šé»˜è®¤å¿½ç•¥ã€‚</p><h3 id="Promise-prototype-catch"><a href="#Promise-prototype-catch" class="headerlink" title="Promise.prototype.catch()"></a>Promise.prototype.catch()</h3><p><code>Promise.prototype.catch()</code> ç”¨äºç»™ <code>Promise</code> å¯¹è±¡æ·»åŠ æ‹’ç»å¤„ç†ç¨‹åºã€‚åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼š<code>onRejected</code> å‡½æ•°ã€‚å®é™…ä¸Šï¼Œä¸‹é¢è¿™ä¸¤ç§å†™æ³•æ˜¯ç­‰æ•ˆçš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onRejected</span>(<span class="params">err</span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    reject()</span><br><span class="line">&#125;).catch(onRejected)</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    reject()</span><br><span class="line">&#125;).then(<span class="literal">null</span>, onRejected)</span><br></pre></td></tr></table></figure><h3 id="Promise-prototype-finally"><a href="#Promise-prototype-finally" class="headerlink" title="Promise.prototype.finally()"></a>Promise.prototype.finally()</h3><p><code>Promise.prototype.finally()</code> ç”¨äºç»™ <code>Promise</code> å¯¹è±¡æ·»åŠ  <code>onFinally</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦æ˜¯åšä¸€äº›æ¸…ç†çš„å·¥ä½œï¼Œåªæœ‰çŠ¶æ€å˜åŒ–çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œè¯¥ <code>onFinally</code> å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onFinally</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">888</span>)  <span class="comment">// å¹¶ä¸ä¼šæ‰§è¡Œ  </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;).finally(onFinally)</span><br></pre></td></tr></table></figure><p>å› ä¸º <code>onFinally</code> å‡½æ•°æ˜¯æ²¡æœ‰ä»»ä½•å‚æ•°çš„ï¼Œæ‰€ä»¥åœ¨å…¶å†…éƒ¨å…¶å®å¹¶ä¸çŸ¥é“è¯¥ <code>Promise</code> çš„çŠ¶æ€æ˜¯æ€ä¹ˆæ ·çš„ã€‚</p><h2 id="é“¾å¼è°ƒç”¨"><a href="#é“¾å¼è°ƒç”¨" class="headerlink" title="é“¾å¼è°ƒç”¨"></a>é“¾å¼è°ƒç”¨</h2><p>é“¾å¼è°ƒç”¨é‡Œæ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹å¾ˆå¤šï¼Œæˆ‘ä»¬ä¸å¦¨å…ˆçœ‹çœ‹ä¸‹é¢è¿™é“é¢˜ï¼Œä½ èƒ½æ­£ç¡®è¾“å‡ºå…¶æ‰“å°é¡ºåºå˜›ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve()</span><br><span class="line">&#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        resolve()</span><br><span class="line">    &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">    &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;D&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä¸ç»™å‡ºç­”æ¡ˆï¼Œå¸Œæœ›ä½ èƒ½åŠ¨æ‰‹æ•²ä¸€æ•²ä»£ç ï¼Œç„¶åæ€è€ƒä¸‹ä¸ºä»€ä¹ˆï¼Ÿå®¹æˆ‘è®²å®Œè¿™éƒ¨åˆ†çŸ¥è¯†ï¼Œç›¸ä¿¡ä½ èƒ½è‡ªå·±ç†è§£å…¶ä¸­ç¼˜ç”±ã€‚</p><p>ä»ä¸Šé¢è¿™ä¸²ä»£ç é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ° <code>new Promise</code> åé¢æ¥äº†å¾ˆå¤šçš„ <code>.then()</code> å¤„ç†ç¨‹åºï¼Œè¿™ä¸ªå…¶å®å°±æ˜¯ <code>Promise</code> çš„é“¾å¼è°ƒç”¨ï¼Œé‚£å®ƒä¸ºä»€ä¹ˆèƒ½é“¾å¼è°ƒç”¨å‘¢ï¼Ÿ</p><h3 id="åŸºäºonResolvedç”Ÿæˆä¸€ä¸ªæ–°çš„Promise"><a href="#åŸºäºonResolvedç”Ÿæˆä¸€ä¸ªæ–°çš„Promise" class="headerlink" title="åŸºäºonResolvedç”Ÿæˆä¸€ä¸ªæ–°çš„Promise"></a>åŸºäºonResolvedç”Ÿæˆä¸€ä¸ªæ–°çš„Promise</h3><p>å› ä¸º <code>Promise.prototype.then()</code> ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>Promise</code>ï¼Œæ¥çœ‹ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> p2 = p1.then(<span class="function">() =&gt;</span> <span class="number">6</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p1)  <span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: 3&#125;</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p2)  <span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: 6&#125;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° <code>p1</code> å’Œ <code>p2</code> çš„å†…éƒ¨ <code>PromiseResult</code> æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¯´æ˜ <code>p2</code> æ˜¯ä¸€ä¸ªæ–°çš„ <code>Promise</code> å®ä¾‹ã€‚ </p><p>æ–°äº§ç”Ÿçš„ <code>Promise</code> ä¼šåŸºäº <code>onResolved</code> çš„è¿”å›å€¼è¿›è¡Œæ„å»ºï¼Œæ„å»ºçš„æ—¶å€™å…¶å®æ˜¯æŠŠè¿”å›å€¼ä¼ é€’ç»™ <code>Promise.resolve()</code> ç”Ÿæˆçš„æ–°å®ä¾‹ï¼Œæ¯”å¦‚ä¸Šé¢é‚£ä¸²ä»£ç é‡Œ <code>p1.then(() =&gt; 6)</code> è¿™é‡Œçš„ <code>onResolved</code> å‡½æ•°è¿”å›äº†ä¸€ä¸ª 6 ï¼Œæ‰€ä»¥æ–°çš„ <code>Promise</code> çš„å†…éƒ¨å€¼ä¼šæ˜¯ 6ã€‚</p><p>å¦‚æœ <code>.then()</code> æ²¡æœ‰æä¾› <code>onResolved</code> è¿™ä¸ªå¤„ç†ç¨‹åºï¼Œåˆ™ <code>Promise.resolve()</code> ä¼šåŸºäºä¸Šä¸€ä¸ªå®ä¾‹ <code>resolve</code> åçš„å€¼æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> p2 = p1.then()</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p2)  <span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: 3&#125;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœ <code>onResolved</code> å¤„ç†ç¨‹åºæ²¡æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿”å›çš„æ–°å®ä¾‹çš„å†…éƒ¨å€¼ä¼šæ˜¯ <code>undefined</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> p2 = p1.then(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p2)  <span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: undefined&#125;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨ <code>onResolved</code> å¤„ç†ç¨‹åºé‡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>rejected</code> çŠ¶æ€çš„ <code>Promise</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> p2 = p1.then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;è¿™æ˜¯ä¸€ä¸ªé”™è¯¯&#x27;</span>)&#125;</span><br><span class="line">)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p2)  <span class="comment">// PromiseÂ &#123;&lt;rejected&gt;: è¿™æ˜¯ä¸€ä¸ªé”™è¯¯&#125;</span></span><br></pre></td></tr></table></figure><h3 id="åŸºäºonRejectedç”Ÿæˆä¸€ä¸ªæ–°çš„Promise"><a href="#åŸºäºonRejectedç”Ÿæˆä¸€ä¸ªæ–°çš„Promise" class="headerlink" title="åŸºäºonRejectedç”Ÿæˆä¸€ä¸ªæ–°çš„Promise"></a>åŸºäºonRejectedç”Ÿæˆä¸€ä¸ªæ–°çš„Promise</h3><p>åŸºäº <code>onRejected</code> çš„è¿”å›å€¼ä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>Promise</code>ï¼Œè€Œä¸”å¤„ç†é€»è¾‘ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿæ˜¯é€šè¿‡æŠŠè¿”å›å€¼ä¼ é€’ç»™ <code>Promise.resolve()</code> äº§ç”Ÿä¸€ä¸ªæ–°çš„å®ä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    reject(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ²¡æœ‰ `onRejected` å¤„ç†ç¨‹åºæ—¶ï¼Œä¼šåŸæ ·å‘åä¼ ï¼Œä¸è¿‡æ˜¯æ–°å®ä¾‹</span></span><br><span class="line"><span class="keyword">let</span> p2 = p1.then(<span class="function">() =&gt;</span> &#123;&#125;)  s</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p2)  <span class="comment">// PromiseÂ &#123;&lt;rejected&gt;: 3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›å€¼ä¸ºundefinedæ—¶</span></span><br><span class="line"><span class="keyword">let</span> p3 = p1.then(<span class="literal">null</span>, <span class="function">() =&gt;</span> &#123;&#125;) </span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p3)  <span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: undefined&#125; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›å€¼æœ‰å®é™…å€¼çš„æ—¶å€™</span></span><br><span class="line"><span class="keyword">let</span> p4 = p1.then(<span class="literal">null</span>, <span class="function">() =&gt;</span> <span class="number">6</span>) </span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p4)  <span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: 6&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“è¿”å›å€¼æ˜¯Promiseæ—¶ï¼Œä¼šä¿ç•™å½“å‰Promise</span></span><br><span class="line"><span class="keyword">let</span> p5 = p1.then(<span class="literal">null</span>, <span class="function">() =&gt;</span> <span class="built_in">Promise</span>.reject()) </span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p5)  <span class="comment">// PromiseÂ &#123;&lt;rejected&gt;: undefined&#125; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“é‡åˆ°ä¸€ä¸ªé”™è¯¯çš„æ—¶å€™</span></span><br><span class="line"><span class="keyword">let</span> p6 = p1.then(<span class="literal">null</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">&#125;) </span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p6)  <span class="comment">// PromiseÂ &#123;&lt;rejected&gt;: error&#125; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“è¿”å›å€¼æ˜¯ä¸€ä¸ªé”™è¯¯æ—¶</span></span><br><span class="line"><span class="keyword">let</span> p7 = p1.then(<span class="literal">null</span>, <span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;error&#x27;</span>)) </span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p7)  <span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: Error: error&#125; </span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½ ä¼šä¸ä¼šæœ‰ä¸ªç–‘æƒ‘ï¼Ÿå®ä¾‹ <code>resolve()</code> çš„æ—¶å€™ï¼ŒçŠ¶æ€ç”± <code>pending</code> å˜æˆ <code>rejected</code>ï¼Œä»è€Œè°ƒç”¨ <code>onRejected</code> è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆæœ‰æ—¶å€™ä¼šè¿”å›ä¸€ä¸ª <code>fulfilled</code> çš„æ–°å®ä¾‹å‘¢ï¼Ÿè¯•ç€æƒ³ä¸€ä¸‹ï¼Œå¦‚æœ <code>onRejected</code> è¿”å›äº†ä¸€ä¸ª <code>pending</code> çš„æˆ–è€… <code>rejected</code> çŠ¶æ€çš„æ–°å®ä¾‹ï¼Œé‚£åç»­çš„é“¾å¼è°ƒç”¨å°±è¿›è¡Œä¸ä¸‹å»äº†ï¼Œçœ‹ä¸‹é¢ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    reject()</span><br><span class="line">&#125;).then(<span class="literal">null</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">&#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">&#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line">&#125;).catch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;D&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¦‚æœ A å¤„ç†å‡½æ•°è¿™é‡Œè¿”å›äº†ä¸€ä¸ª <code>pending</code> çŠ¶æ€çš„æ–°å®ä¾‹ï¼Œé‚£ä¹ˆåç»­æ‰€æœ‰çš„é“¾å¼æ“ä½œéƒ½æ— æ³•æ‰§è¡Œï¼›æˆ–è€…è¿”å›çš„æ˜¯ä¸€ä¸ª <code>rejected</code> çŠ¶æ€çš„æ–°å®ä¾‹ï¼Œé‚£ä¹ˆåç»­çš„ B å’Œ C ä¹Ÿå°±æ— æ³•æ‰§è¡Œäº†ï¼Œé‚£å±…ç„¶éƒ½ä¸èƒ½æ‰§è¡Œ B å’Œ C æ‰€åœ¨å¤„ç†ç¨‹åºï¼Œé‚£å®šä¹‰æ¥å¹²å˜›å‘¢ï¼Ÿé“¾å¼æ“ä½œå°±æ¯«æ— é“¾å¼å¯è¨€ã€‚åˆï¼Œ<code>onRejected</code> çš„å­˜åœ¨çš„æ ¹æœ¬æ„ä¹‰æ— éå°±æ˜¯ç”¨äºæ•è· <code>Promise</code> äº§ç”Ÿçš„é”™è¯¯ï¼Œä»è€Œä¸å½±å“ç¨‹åºçš„æ­£å¸¸æ‰§è¡Œï¼Œæ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹ç†åº”è¿”å›ä¸€ä¸ª <code>fulfilled</code> çš„æ–°å®ä¾‹ã€‚</p><p><code>Promise.prototype.catch()</code> ä¹Ÿä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ <code>Promise</code>ï¼Œå…¶ç”Ÿæˆè§„åˆ™å’Œ <code>onRejected</code> æ˜¯ä¸€æ ·çš„ã€‚</p><h3 id="finallyç”Ÿæˆä¸€ä¸ªæ–°çš„Promise"><a href="#finallyç”Ÿæˆä¸€ä¸ªæ–°çš„Promise" class="headerlink" title="finallyç”Ÿæˆä¸€ä¸ªæ–°çš„Promise"></a>finallyç”Ÿæˆä¸€ä¸ªæ–°çš„Promise</h3><p>æ²¡æƒ³åˆ°å§ï¼Œ<code>Promise.prototype.finally()</code> ä¹Ÿèƒ½ç”Ÿæˆä¸€ä¸ª <code>Promise</code>ã€‚<code>finally</code> é‡Œçš„æ“ä½œæ˜¯å’ŒçŠ¶æ€æ— å…³çš„ï¼Œä¸€èˆ¬ç”¨æ¥åšåç»­ä»£ç çš„å¤„ç†å·¥ä½œï¼Œæ‰€ä»¥ <code>finally</code> ä¸€èˆ¬ä¼šåŸæ ·åä¼ çˆ¶ <code>Promise</code>ï¼Œæ— è®ºçˆ¶çº§å®ä¾‹æ˜¯ä»€ä¹ˆçŠ¶æ€ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line"><span class="keyword">let</span> p2 = p1.finally(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p2)  <span class="comment">// Promise &#123;&lt;pending&gt;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> p4 = p3.finally(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p3)  <span class="comment">// Promise &#123;&lt;fulfilled&gt;: 3&#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¯´çš„æ˜¯ä¸€èˆ¬ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚ <code>finally</code> é‡Œè¿”å›äº†ä¸€ä¸ªé <code>fulfilled</code> çš„ <code>Promise</code> æˆ–è€…æŠ›å‡ºäº†å¼‚å¸¸çš„æ—¶å€™ï¼Œåˆ™ä¼šè¿”å›å¯¹åº”çŠ¶æ€çš„æ–°å®ä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> p2 = p1.finally(<span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">() =&gt;</span> &#123;&#125;))</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p2)  <span class="comment">// Promise &#123;&lt;pending&gt;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p3 = p1.finally(<span class="function">() =&gt;</span> <span class="built_in">Promise</span>.reject(<span class="number">6</span>))</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p3)  <span class="comment">// Promise &#123;&lt;rejected&gt;: 6&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p4 = p1.finally(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p4)  <span class="comment">// Promise &#123;&lt;rejected&gt;: Error: error&#125;</span></span><br></pre></td></tr></table></figure><h3 id="æ‰§è¡Œé¡ºåº"><a href="#æ‰§è¡Œé¡ºåº" class="headerlink" title="æ‰§è¡Œé¡ºåº"></a>æ‰§è¡Œé¡ºåº</h3><p>å…ˆæ¥çœ‹ä¸€æ®µç®€å•çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">    resolve(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;D&#x27;</span>)</span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœï¼šA B D C</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸²ä»£ç çš„è¾“å‡ºé¡ºåºæ˜¯ï¼šA B D Cã€‚ä»ä¸Šé¢ç« èŠ‚ä»‹ç»çš„çŸ¥è¯†ç‚¹æˆ‘ä»¬çŸ¥é“ï¼Œ<code>executor</code> æ‰§è¡Œå™¨ä¼šåœ¨ <code>new Promise</code> è°ƒç”¨çš„æ—¶å€™ç«‹å³åŒæ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å…ˆåæ‰“å° A B æ˜¯æ²¡é—®é¢˜çš„ã€‚å½“æ‰§è¡Œ <code>resolve()/reject()</code> çš„æ—¶å€™ï¼Œä¼šå°† <code>Promise</code> å¯¹åº”çš„å¤„ç†ç¨‹åºæ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç¨ç­‰è¿™é‡Œæåˆ°çš„å¯¹åº”çš„å¤„ç†ç¨‹åºå…·ä½“æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿ</p><ul><li><code>resolve()</code> å¯¹åº” <code>.then()</code> é‡Œçš„ç¬¬ä¸€ä¸ªå…¥å‚ï¼Œå³ <code>onResolved</code> å‡½æ•°ï¼›</li><li><code>reject()</code> å¯¹åº” <code>.then()</code> é‡Œçš„ç¬¬äºŒä¸ªå…¥å‚ï¼Œå³ <code>onRejected</code> å‡½æ•°ï¼›æˆ–è€… <code>Promise.prototype.catch()</code> é‡Œçš„å›è°ƒå‡½æ•°ï¼›</li></ul><p>æ‰€ä»¥å½“æ‰§è¡Œ <code>resolve(3)</code> çš„æ—¶å€™ï¼ˆæ­¤æ—¶ä¸‹é¢å®šä¹‰çš„è¿™ä¸ªç®­å¤´å‡½æ•°å…¶å®å°±æ˜¯ <code>onResolved</code> å‡½æ•°ï¼‰ï¼Œ<code>onResolved</code> å‡½æ•°å°†è¢«æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç„¶åæ‰“å° Dï¼Œæ­¤æ—¶æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œæµè§ˆå™¨ä¼šå»æ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå‘ç°å­˜åœ¨ä¸€ä¸ªï¼Œæ‰€ä»¥æœ€åä¼šå»è°ƒç”¨ <code>onResolved</code> å‡½æ•°ï¼Œæ‰“å°å‡º Cã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> onResolved = <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å®é™¤äº† <code>onResolved</code>ã€<code>onRejected</code> ä»¥åŠ <code>Promise.prototype.catch()</code> é‡Œçš„å¤„ç†ç¨‹åºå¤–ï¼Œ<code>Promise.prototype.finally()</code> çš„å¤„ç†ç¨‹åº <code>onFinally</code> ä¹Ÿæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">    resolve(<span class="number">3</span>)</span><br><span class="line">&#125;).finally(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœï¼šA C B</span></span><br></pre></td></tr></table></figure><p><code>Promise</code> é“¾å¼è°ƒç”¨çš„åŸºç¡€å°±æ˜¯å› ä¸º <code>onResolved</code>ã€<code>onRejected</code>ã€<code>catch()</code> çš„å¤„ç†ç¨‹åºä»¥åŠ <code>onFinally</code> ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ <code>Promise</code> å®ä¾‹ï¼Œä¸”åˆå› ä¸ºä»–ä»¬éƒ½æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥åœ¨é“¾å¼è°ƒç”¨çš„æ—¶å€™ï¼Œå¯¹äºå®ƒä»¬æ‰§è¡Œé¡ºåºä¼šç¨€é‡Œç³Šæ¶‚ç¢ç£¨ä¸é€å°±æ˜¯è¿™ä¸ªåŸå› ã€‚</p><h3 id="é¢˜ç›®ä¸€"><a href="#é¢˜ç›®ä¸€" class="headerlink" title="é¢˜ç›®ä¸€"></a>é¢˜ç›®ä¸€</h3><p>é‚£ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹ç‚¹å¤æ‚çš„ä¾‹å­ï¼Œå…ˆæ¥åˆ†æä¸‹è¿™ç« å¼€ç¯‡æåˆ°çš„é¢˜ç›®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve()</span><br><span class="line">&#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        resolve()</span><br><span class="line">    &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">    &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;D&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœï¼šA </span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ–¹ä¾¿åˆ†æï¼Œæˆ‘ä»¬æŠŠä¸Šé¢çš„è¿™ä¸²ä»£ç å†™å¾—å¥½çœ‹ä¸€ç‚¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(executor).then(onResolvedA).then(onResolvedD)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">executor</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    resolve()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onResolvedA</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(executor).then(onResolvedB).then(onResolvedC)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onResolvedB</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onResolvedC</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onResolvedD</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;D&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè¿‡ç¨‹ï¼š</p><ul><li>æ‰§è¡Œ <code>new Promise()</code>ï¼Œç«‹å³åŒæ­¥æ‰§è¡Œ <code>executor</code> å‡½æ•°ï¼Œè°ƒç”¨ <code>resolve()</code>ï¼Œæ­¤æ—¶ä¼šå°† <code>onResolvedA</code> æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ— 1ï¼Œæˆªæ­¢ç›®å‰æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼›</li><li>æ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œ <code>onResolvedA</code> å‡½æ•°ï¼Œæ‰“å° Aï¼Œæ‰§è¡Œ <code>new Promise(executor)</code>ï¼Œè°ƒç”¨ <code>resolve()</code> å‡½æ•°ï¼Œæ­¤æ—¶å°† <code>onResolvedB</code> æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ— 2ï¼›</li><li>æˆªæ­¢ç›®å‰å¾®ä»»åŠ¡é˜Ÿåˆ— 1 çš„ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œå³ <code>onResolvedA</code> å‡½æ•°æ‰§è¡Œå®Œæˆã€‚æˆ‘ä»¬çŸ¥é“ <code>onResolved</code> å‡½æ•°ä¼šåŸºäºè¿”å›å€¼ç”Ÿæˆä¸€ä¸ªæ–°çš„ <code>Promise</code>ï¼Œè€Œ <code>onResolvedA</code> å‡½æ•°æ²¡æœ‰æ˜¾ç¤ºçš„è¿”å›å€¼ï¼Œæ‰€ä»¥å…¶è¿”å›å€¼ä¸º <code>undefined</code>ï¼Œé‚£ä¹ˆç»è¿‡ <code>Promise.resolve(undefined)</code> åˆå§‹åŒ–åä¼šç”Ÿæˆä¸€ä¸ªè¿™æ ·çš„æ–°å®ä¾‹ï¼š<code>Promise &#123;&lt;fulfilled&gt;: undefined&#125;</code>ï¼›ç”±äºè¿™ä¸ªæ–°çš„å®ä¾‹çŠ¶æ€å·²ç»å˜æˆ <code>fulfilled</code>ï¼Œæ‰€ä»¥ä¼šç«‹å³å°†å…¶å¤„ç†å‡½æ•° <code>onResolvedD</code> æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ— 3ï¼›</li><li>å¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ— 2 é‡Œçš„å†…å®¹ï¼Œæ‰“å° Bï¼ŒåŒä¸Šä¸€æ¡åŸç†ï¼Œç”±äº <code>onResolvedB</code> å‡½æ•°çš„è¿”å›å€¼ä¸º <code>undefined</code>ï¼Œæ‰€ä»¥ç”Ÿæˆäº†ä¸€ä¸ª <code>resolved</code> çš„æ–°å®ä¾‹ï¼Œåˆ™ä¼šç«‹å³å°† <code>onResolvedC</code> æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ— 4ï¼›</li><li>æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ— 3ï¼Œæ‰“å° Dï¼›</li><li>æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ— 4ï¼Œæ‰“å° Cï¼›</li><li>è‡³æ­¤å…¨éƒ¨ä»£ç æ‰§è¡Œå®Œæˆï¼Œæœ€ç»ˆçš„æ‰“å°ç»“æœä¸ºï¼šA B D Cã€‚</li></ul><h3 id="é¢˜ç›®äºŒ"><a href="#é¢˜ç›®äºŒ" class="headerlink" title="é¢˜ç›®äºŒ"></a>é¢˜ç›®äºŒ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">1</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">&#125;).finally(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">2</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line">&#125;).finally(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;D&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœï¼šA C B D</span></span><br></pre></td></tr></table></figure><p>åº”è¯¥å¾ˆå¤šäººä¼šå’Œæˆ‘å½“åˆä¸€æ ·å¥½å¥‡ï¼šä¸ºä»€ä¹ˆæ‰“å°ç»“æœä¸æ˜¯ A B C D å‘¢ï¼Ÿ<br>è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼šå¦‚æœç»™ <code>Promise</code> å®ä¾‹æ·»åŠ äº†å¤šä¸ªå¤„ç†å‡½æ•°ï¼Œå½“å®ä¾‹çŠ¶æ€å˜åŒ–çš„æ—¶å€™ï¼Œé‚£ä¹ˆæ‰§è¡Œçš„è¿‡ç¨‹å°±æ˜¯æŒ‰ç…§æ·»åŠ æ—¶çš„é¡ºåºè€Œæ‰§è¡Œçš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">1</span>)</span><br><span class="line">&#125;).then(onResolvedA).finally(onFinally)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onResolvedA</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onFinally</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœï¼š A B</span></span><br></pre></td></tr></table></figure><p>å¯¹äºä¸Šé¢è¿™ä¸²ä»£ç ï¼Œå…¶å® <code>finally()</code> å¤„ç†ç¨‹åºæ‰§è¡Œçš„æ—¶å€™å·²ç»ä¸æ˜¯é€šè¿‡ <code>new Promise()</code> åˆå§‹åŒ–çš„å®ä¾‹ï¼Œè€Œæ˜¯æ‰§è¡Œå®Œ <code>onResolvedA</code> å‡½æ•°çš„æ—¶å€™ç”Ÿæˆçš„æ–°å®ä¾‹ï¼Œä¸ä¿¡æˆ‘ä»¬å°†ä¸Šé¢ä»£ç ä¸­çš„å‡½æ•° <code>onResolvedA</code> ç¨å¾®æ”¹åŠ¨ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">1</span>)</span><br><span class="line">&#125;).then(onResolvedA).finally(onFinally)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onResolvedA</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onFinally</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœï¼š A</span></span><br></pre></td></tr></table></figure><p>ç”±äº <code>onResolvedA</code> è¿”å›äº†ä¸€ä¸ªè¿™æ ·çš„ <code>Promise &#123;&lt;pending&gt;&#125;</code> æ–°å®ä¾‹ï¼Œè¿™ä¸ªæ–°å®ä¾‹çš„çŠ¶æ€æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥ä¸ä¼šæ‰§è¡Œ <code>finally</code> å¤„ç†ç¨‹åº <code>onFinally</code>ï¼Œæ‰€ä»¥ä¸ä¼šæ‰“å° Bã€‚è¿™ä¸ªå°±è¯´æ˜äº†ï¼Œé“¾å¼è°ƒç”¨çš„æ—¶å€™å¤„ç†ç¨‹åºçš„æ‰§è¡Œæ˜¯ä¸€æ­¥ä¸€æ­¥æ¥çš„ï¼Œåªè¦å‰é¢çš„æ‰§è¡Œå®Œäº†ï¼Œç”Ÿæˆäº†æ–°çš„å®ä¾‹ï¼Œç„¶åæ ¹æ®æ–°å®ä¾‹çš„çŠ¶æ€å˜åŒ–ï¼Œæ‰å»æ‰§è¡Œåç»­çš„å¤„ç†ç¨‹åºã€‚</p><p>æ‰€ä»¥æ‹¿æœ€å¼€å§‹é‚£é“é¢˜æ¥è¯´ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">1</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">&#125;).finally(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="number">2</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line">&#125;).finally(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;D&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœï¼šA C B D</span></span><br></pre></td></tr></table></figure><p>ä»–çš„æ‰§è¡Œè¿‡ç¨‹åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>æ‰§è¡Œ <code>resolve(1)</code>ï¼Œå°†å¤„ç†ç¨‹åº A æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ— 1ï¼›</li><li>æ‰§è¡Œ <code>resolve(2)</code>ï¼Œå°†å¤„ç†ç¨‹åº C æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ— 2ï¼›</li><li>åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ— 1 é‡Œçš„å†…å®¹ï¼Œæ‰“å° Aï¼ŒA æ‰€åœ¨å‡½æ•°æ‰§è¡Œå®Œæˆåç”Ÿæˆäº†ä¸€ä¸ª <code>fulfilled</code> çš„æ–°å®ä¾‹ï¼Œç”±äºæ–°å®ä¾‹çŠ¶æ€å˜åŒ–ï¼Œæ‰€ä»¥ä¼šç«‹å³æ‰§è¡Œ <code>finally()</code> å¤„ç†ç¨‹åº B æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ— 3ï¼›</li><li>æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ— 2 çš„å†…å®¹ï¼Œæ‰“å° Cï¼ŒC æ‰€åœ¨å‡½æ•°æ‰§è¡Œå®Œæˆåï¼ŒåŒä¸Šæ¡åŸç†ä¼šå°†å¤„ç†ç¨‹åº D æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ— 4ï¼›</li><li>æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ— 3 çš„å†…å®¹ï¼Œæ‰“å° Bï¼›</li><li>æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ— 4 çš„å†…å®¹ï¼Œæ‰“å° Dï¼›</li><li>ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œæœ€ç»ˆæ‰“å°ï¼šA C B Dã€‚</li></ul><p>é¢˜ç›®å°±å…ˆåšåˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å’Œæˆ‘ä¸€æ ·ï¼Œå¯¹ <code>Promise</code> çš„æ‰§è¡Œè¿‡ç¨‹åº”è¯¥æœ‰æ›´æ·±å…¥çš„ç†è§£äº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†ç»§ç»­å­¦ä¹  <code>Promise</code> çš„ç›¸å…³ <code>API</code>ã€‚</p><h2 id="Promiseä¸é”™è¯¯å¤„ç†"><a href="#Promiseä¸é”™è¯¯å¤„ç†" class="headerlink" title="Promiseä¸é”™è¯¯å¤„ç†"></a>Promiseä¸é”™è¯¯å¤„ç†</h2><p>å¹³æ—¶æˆ‘ä»¬å†™ä»£ç é‡åˆ°é”™è¯¯ï¼Œéƒ½ä¹ æƒ¯ç”¨ <code>try/catch</code> å—æ¥å¤„ç†ï¼Œä½†æ˜¯å¯¹äº <code>Promise</code> äº§ç”Ÿçš„é”™è¯¯ï¼Œç”¨è¿™ä¸ªæ˜¯å¤„ç†ä¸äº†çš„ï¼Œçœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>()</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">    &#125;)  </span><br><span class="line">&#125; <span class="keyword">catch</span>(err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line"><span class="comment">// A</span></span><br><span class="line"><span class="comment">// C </span></span><br><span class="line"><span class="comment">// Uncaught (in promise) Error</span></span><br></pre></td></tr></table></figure><p>ä»æ‰§è¡Œç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒæŠ¥é”™çš„ä¿¡æ¯å‡ºç°åœ¨æ‰“å° C ä¹‹åï¼Œè¯´æ˜æŠ›å‡ºé”™è¯¯è¿™ä¸ªåŠ¨ä½œæ˜¯åœ¨å¼‚æ­¥ä»»åŠ¡ä¸­åšçš„ï¼Œæ‰€ä»¥ <code>catch</code> æ•è·ä¸åˆ°è¯¥é”™è¯¯å°±åœ¨æƒ…ç†ä¹‹ä¸­äº†ï¼Œå¦åˆ™å°±ä¸ä¼šæ‰“å° C äº†ã€‚å¯è§ï¼Œä¼ ç»Ÿçš„ <code>try/catch</code> è¯­å¥å¹¶ä¸èƒ½æ•è· <code>Promise</code> äº§ç”Ÿçš„é”™è¯¯ï¼Œè€Œéœ€è¦ä½¿ç”¨ <code>onRejected</code> å¤„ç†ç¨‹åºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> p2 = p1.catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;) </span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p2)</span><br><span class="line"><span class="comment">// A</span></span><br><span class="line"><span class="comment">// Error: error</span></span><br><span class="line"><span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: undefined&#125;</span></span><br></pre></td></tr></table></figure><p><code>onRejected</code> æ•è·äº†ä¸Šé¢æŠ›å‡ºçš„é”™è¯¯åï¼Œä½¿å¾—ç¨‹åºæ­£å¸¸æ‰§è¡Œï¼Œæœ€åè¿˜ç”Ÿæˆäº†ä¸€ä¸ª <code>fulfilled</code> çš„æ–°å®ä¾‹ã€‚</p><p>é™¤äº†ä»¥ä¸Šè¿™ç§ç›´æ¥åœ¨ <code>executor</code> é‡Œé€šè¿‡ <code>throw</code> ä¸»åŠ¨æŠ›å‡ºä¸€ä¸ªé”™è¯¯å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼äº§å‡ºéœ€è¦ <code>onRejected</code> å¤„ç†çš„é”™è¯¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    init() <span class="comment">// è¢«åŠ¨å‡ºé”™ï¼Œè°ƒç”¨äº†ä¸å­˜åœ¨çš„å‡½æ•°</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    reject()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve()</span><br><span class="line">&#125;).then(<span class="function">() =&gt;</span> <span class="built_in">Promise</span>.reject())</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    resolve()</span><br><span class="line">&#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå¦‚æœåªæ˜¯äº§ç”Ÿäº†ä¸€ä¸ªé”™è¯¯ï¼Œå´æ²¡æœ‰æŠ›å‡ºæ¥æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    reject()</span><br><span class="line">&#125;).then(<span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="built_in">Error</span>())</span><br></pre></td></tr></table></figure><p><code>Promise</code> å‡ºç°äº†é”™è¯¯å°±éœ€è¦ä½¿ç”¨ <code>onRejected</code> å¤„ç†ç¨‹åºå¤„ç†ï¼Œå¦åˆ™ç¨‹åºå°±ä¼šæŠ¥é”™ï¼Œæ‰§è¡Œä¸ä¸‹å»äº†ã€‚</p><h2 id="Promise-API"><a href="#Promise-API" class="headerlink" title="Promise API"></a>Promise API</h2><h3 id="Promise-resolve"><a href="#Promise-resolve" class="headerlink" title="Promise.resolve()"></a>Promise.resolve()</h3><p>å¹¶éæ‰€æœ‰çš„ <code>Promise</code> çš„åˆå§‹çŠ¶æ€éƒ½æ˜¯ <code>pending</code>ï¼Œå¯ä»¥é€šè¿‡ <code>Promise.resolve(value)</code> æ¥åˆå§‹åŒ–ä¸€ä¸ªçŠ¶æ€ä¸º <code>fulfilled</code>ï¼Œå€¼ä¸º <code>value</code> çš„ <code>Promise</code> å®ä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="built_in">Promise</span>.resolve(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p)  <span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: 3&#125;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ“ä½œå’Œä¸‹é¢è¿™ç§åˆ›å»ºä¸€ä¸ª <code>fulfilled</code> çš„ <code>Promise</code> åœ¨æ•ˆæœä¸Šæ˜¯ä¸€æ ·çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve(<span class="number">3</span>))</span><br><span class="line"><span class="built_in">console</span>.log(p)  <span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: 3&#125;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¿™ä¸ªé™æ€æ–¹æ³•ï¼Œç†è®ºä¸Šå¯ä»¥æŠŠä»»ä½•ä¸€ä¸ªå€¼è½¬æ¢æˆ <code>Promise</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, <span class="built_in">Promise</span>.resolve())  <span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: undefined&#125;</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, <span class="built_in">Promise</span>.resolve(<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>))  <span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: 3&#125; å¤šä½™çš„å‚æ•°å°†è¢«å¿½ç•¥</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, <span class="built_in">Promise</span>.resolve(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;error&#x27;</span>)))  <span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: Error: error&#125;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè¢«è½¬æ¢çš„å€¼ç”šè‡³å¯ä»¥æ˜¯ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œå¦‚æœæ˜¯è¿™æ ·ï¼Œ<code>Promise.resolve</code> ä¼šå°†å…¶åŸæ ·è¾“å‡ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="built_in">Promise</span>.resolve(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p === <span class="built_in">Promise</span>.resolve(p))  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="Promise-reject"><a href="#Promise-reject" class="headerlink" title="Promise.reject()"></a>Promise.reject()</h3><p>å’Œ <code>Promise.resolve()</code> ç±»ä¼¼ï¼Œ<code>Promise.reject()</code> ä¼šå®ä¾‹åŒ–ä¸€ä¸ª <code>rejected</code> çŠ¶æ€çš„ <code>Promise</code>ï¼Œä¸”ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¯¥é”™è¯¯åªèƒ½é€šè¿‡æ‹’ç»å¤„ç†ç¨‹åºæ•è·ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span></span><br><span class="line">    .reject(<span class="number">3</span>)</span><br><span class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err)  <span class="comment">// 3</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><p>å¯¹äºåˆå§‹åŒ–ä¸€ä¸ª <code>rejected</code> çŠ¶æ€çš„å®ä¾‹ï¼Œä»¥ä¸‹ä¸¤ç§å†™æ³•éƒ½å¯ä»¥è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.reject()</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> reject())</span><br></pre></td></tr></table></figure><p>ä¸ <code>Promise.resolve()</code> ä¸åŒçš„æ˜¯ï¼Œå¦‚æœç»™ <code>Promise.reject()</code> ä¼ é€’ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡ä¼šæˆä¸ºæ–° <code>Promise</code> çš„å€¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="built_in">Promise</span>.reject(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p === <span class="built_in">Promise</span>.reject(p))  <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all()"></a>Promise.all()</h3><p><code>Promise.all(iterable)</code> ç”¨æ¥å°†å¤šä¸ª <code>Promise</code> å®ä¾‹åˆæˆä¸€ä¸ªæ–°å®ä¾‹ã€‚å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œé€šå¸¸æ˜¯æ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.all([</span><br><span class="line">    <span class="built_in">Promise</span>.resolve(<span class="number">3</span>),</span><br><span class="line">    <span class="built_in">Promise</span>.resolve(<span class="number">6</span>)</span><br><span class="line">])</span><br></pre></td></tr></table></figure><p>å¯è¿­ä»£å¯¹è±¡é‡Œçš„æ‰€æœ‰å…ƒç´ éƒ½ä¼šé€šè¿‡ <code>Promise.resolve()</code> è½¬æˆ <code>Promise</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.all([<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>])</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰ <code>Promise</code> éƒ½ <code>resolve</code> åï¼Œ<code>Promise.all()</code> æ‰ä¼šç”Ÿæˆä¸€ä¸ª <code>fulfilled</code> çš„æ–°å®ä¾‹ã€‚ä¸”æ–°å®ä¾‹çš„å†…éƒ¨å€¼æ˜¯ç”±æ‰€æœ‰ <code>Promise</code> è§£å†³åçš„å€¼ç»„æˆçš„æ•°ç»„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.all([</span><br><span class="line">    <span class="built_in">Promise</span>.resolve(<span class="string">&#x27;3&#x27;</span>),</span><br><span class="line">    <span class="built_in">Promise</span>.resolve(),</span><br><span class="line">    <span class="number">6</span></span><br><span class="line">])</span><br><span class="line"><span class="keyword">let</span> p2 = p1.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p1)</span><br><span class="line"><span class="comment">// [&quot;3&quot;, undefined, 6]</span></span><br><span class="line"><span class="comment">// Promise &#123;&lt;fulfilled&gt;: Array(3)&#125;</span></span><br></pre></td></tr></table></figure><p>æ‰€æœ‰ <code>Promise</code> ä¸­ï¼Œåªè¦å‡ºç°ä¸€ä¸ª <code>pending</code> çŠ¶æ€çš„å®ä¾‹ï¼Œé‚£ä¹ˆåˆæˆçš„æ–°å®ä¾‹ä¹Ÿæ˜¯ <code>pending</code> çŠ¶æ€çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.all([</span><br><span class="line">    <span class="number">3</span>,</span><br><span class="line">    <span class="built_in">Promise</span>.resolve(<span class="number">6</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line">])</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p1)</span><br><span class="line"><span class="comment">// PromiseÂ &#123;&lt;pending&gt;&#125;</span></span><br></pre></td></tr></table></figure><p>æ‰€æœ‰ <code>Promise</code> ä¸­ï¼Œåªè¦å‡ºç°ä¸€ä¸ª <code>rejected</code> çŠ¶æ€çš„å®ä¾‹ï¼Œé‚£ä¹ˆåˆæˆçš„æ–°å®ä¾‹ä¹Ÿæ˜¯ <code>rejected</code> çŠ¶æ€çš„ï¼Œä¸”æ–°å®ä¾‹çš„å†…éƒ¨å€¼æ˜¯ç¬¬ä¸€ä¸ªæ‹’ç» <code>Promise</code> çš„å†…éƒ¨å€¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.all([</span><br><span class="line">    <span class="number">3</span>,</span><br><span class="line">    <span class="built_in">Promise</span>.reject(<span class="number">6</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        reject(<span class="number">9</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">])</span><br><span class="line"><span class="keyword">let</span> p2 = p1.catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p1)</span><br><span class="line"><span class="comment">// 6</span></span><br><span class="line"><span class="comment">// PromiseÂ &#123;&lt;rejected&gt;: 6&#125;</span></span><br></pre></td></tr></table></figure><h3 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race()"></a>Promise.race()</h3><p><code>Promise.race(iterable)</code> ä¼šè¿”å›ä¸€ä¸ªç”±æ‰€æœ‰å¯è¿­ä»£å®ä¾‹ä¸­ç¬¬ä¸€ä¸ª <code>fulfilled</code> æˆ– <code>rejected</code> çš„å®ä¾‹åŒ…è£…åçš„æ–°å®ä¾‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.race([</span><br><span class="line">    <span class="number">3</span>,</span><br><span class="line">    <span class="built_in">Promise</span>.reject(<span class="number">6</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="number">9</span>)</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">    &#125;)</span><br><span class="line">])</span><br><span class="line"><span class="keyword">let</span> p2 = p1.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p1)</span><br><span class="line"><span class="comment">// 9</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="comment">// PromiseÂ &#123;&lt;fulfilled&gt;: 3&#125;</span></span><br></pre></td></tr></table></figure><p>æ¥å°†ä¸Šé¢è¿™ä¸²ä»£ç å˜åŠ¨ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.race([</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="number">9</span>)</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;A&#x27;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        reject(<span class="number">6</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    init(),</span><br><span class="line">])</span><br><span class="line"><span class="keyword">let</span> p2 = p1.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="built_in">console</span>.log, <span class="number">0</span>, p1)</span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="comment">// 9</span></span><br><span class="line"><span class="comment">// 6</span></span><br><span class="line"><span class="comment">// PromiseÂ &#123;&lt;rejected&gt;: 6&#125;</span></span><br></pre></td></tr></table></figure><p>æƒ³è¦çŸ¥é“ <code>Promise.race()</code> çš„ç»“æœï¼Œæ— éæ˜¯è¦çŸ¥é“åˆ°åº•è°æ‰æ˜¯ç¬¬ä¸€ä¸ªçŠ¶æ€å˜åŒ–çš„å®ä¾‹ï¼Œè®©æˆ‘ä»¬æ¥å…·ä½“åˆ†æä¸‹ä»£ç æ‰§è¡Œè¿‡ç¨‹ï¼š</p><ul><li>è¿­ä»£ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ‰§è¡ŒåŒæ­¥ä»£ç  <code>resolve(9)</code>ï¼Œç”± <code>new Promise</code> åˆå§‹åŒ–çš„å®ä¾‹çš„çŠ¶æ€å·²ç»å˜ä¸ºäº† <code>fulfilled</code>ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªçŠ¶æ€å˜åŒ–çš„å®ä¾‹å·²ç»å‡ºç°äº†å—ï¼Ÿå…¶å®å¹¶æ²¡æœ‰ï¼Œå› ä¸ºè¿­ä»£ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä»£ç è¿˜æ²¡æ‰§è¡Œå®Œæˆå‘¢ï¼Œç„¶åä¼šå°† <code>return &#39;A&#39;</code> æ‰€åœ¨å‡½æ•°çš„è¿™æ®µå¤„ç†ç¨‹åºæ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ— 1ï¼›</li><li>è¿­ä»£ç¬¬äºŒä¸ªå…ƒç´ ï¼Œæ‰§è¡Œ <code>reject(6)</code>ï¼Œæ‰€ä»¥ç”± <code>new Promise</code> åˆå§‹åŒ–çš„å®ä¾‹çš„çŠ¶æ€å·²ç»å˜ä¸º <code>rejected</code>ï¼Œç”±äºè¯¥å®ä¾‹æ²¡æœ‰å¤„ç†å‡½æ•°ï¼Œæ‰€ä»¥è¿­ä»£ç¬¬äºŒä¸ªå…ƒç´ çš„ä»£ç å·²ç»å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œæ­¤æ—¶ï¼Œç¬¬ä¸€ä¸ªçŠ¶æ€å˜åŒ–çš„å®ä¾‹å·²ç»äº§ç”Ÿï¼›</li><li>è¿­ä»£ç¬¬ä¸‰ä¸ªå…ƒç´ ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰§è¡ŒåŒæ­¥ä»£ç æ‰“å°å‡º 3ï¼Œç„¶åç”¨ <code>Promise.resolve</code> å°†å‡½æ•°è¿”å›å€¼ 3 è½¬æˆä¸€ä¸ª <code>Promise &#123;&lt;fulfilled&gt;: 3&#125;</code> çš„æ–°å®ä¾‹ï¼Œè¿™æ˜¯ç¬¬äºŒä¸ªçŠ¶æ€å‘ç”Ÿå˜åŒ–çš„å®ä¾‹ï¼›</li><li>æ­¤æ—¶æ‰€æœ‰è¿­ä»£å¯¹è±¡éå†å®Œæˆï¼Œå³åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ— 1 çš„å†…å®¹ï¼Œæ‰“å° <code>res</code>ï¼Œå…¶å€¼æ˜¯ 9ï¼Œç„¶åå¤„ç†ç¨‹åºè¿”å›äº† â€˜Aâ€™ï¼Œæ­¤æ—¶æ ¹æ®ä¹‹å‰æåˆ°çš„çŸ¥è¯†ç‚¹ï¼Œè¿™é‡Œä¼šæ–°ç”Ÿæˆä¸€ä¸ª <code>Promise &#123;&lt;fulfilled&gt;: &#39;A&#39;&#125;</code> çš„å®ä¾‹ï¼Œè¿™æ˜¯ç¬¬ä¸‰ä¸ªçŠ¶æ€å‘ç”Ÿå˜åŒ–çš„å®ä¾‹ã€‚æ­¤æ—¶ï¼Œç¬¬ä¸€ä¸ªè¿­ä»£å…ƒç´ çš„ä»£ç å·²ç»å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªè¿­ä»£å…ƒç´ æœ€ç»ˆç”Ÿæˆçš„å®ä¾‹æ˜¯ç¬¬ä¸‰æ¬¡çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„è¿™ä¸ªï¼›</li><li>æ­¤æ—¶ <code>p1</code> å·²ç»äº§ç”Ÿï¼Œå®ƒæ˜¯ <code>Promise &#123;&lt;rejected&gt;: 6&#125;</code>ï¼Œæ‰€ä»¥ä¼šå°†å®ƒçš„å¤„ç†ç¨‹åº <code>console.log(err)</code> æ‰€åœ¨å‡½æ•°æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ— 2ï¼›</li><li>æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ— 2 çš„å†…å®¹ï¼Œæ‰“å° <code>err</code>ï¼Œå…¶å€¼æ˜¯ 6ï¼›</li><li>æ‰€æœ‰å¾®ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹æ‰§è¡Œ <code>setTimeout</code> é‡Œçš„å®ä»»åŠ¡ï¼Œæ‰“å° <code>p1</code>ï¼Œè‡³æ­¤å…¨éƒ¨ä»£ç æ‰§è¡Œå®Œæˆã€‚</li></ul><h3 id="Promise-allSettled"><a href="#Promise-allSettled" class="headerlink" title="Promise.allSettled()"></a>Promise.allSettled()</h3><p><code>Promise.allSettled(iterable)</code> å½“æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç» <code>settled</code>ï¼Œå³çŠ¶æ€å˜åŒ–è¿‡äº†ï¼Œé‚£ä¹ˆå°†è¿”å›ä¸€ä¸ªæ–°å®ä¾‹ï¼Œè¯¥æ–°å®ä¾‹çš„å†…éƒ¨å€¼æ˜¯ç”±æ‰€æœ‰å®ä¾‹çš„å€¼å’ŒçŠ¶æ€ç»„åˆæˆçš„æ•°ç»„ï¼Œæ•°ç»„çš„æ¯é¡¹æ˜¯ç”±æ¯ä¸ªå®ä¾‹çš„çŠ¶æ€å’Œå†…éƒ¨å€¼ç»„æˆçš„å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.allSettled([</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="number">9</span>)</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;&#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        reject(<span class="number">6</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    init()</span><br><span class="line">])</span><br><span class="line"><span class="keyword">let</span> p2 = p1.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//      &#123;status: &quot;fulfilled&quot;, value: undefined&#125;, </span></span><br><span class="line"><span class="comment">//      &#123;status: &quot;rejected&quot;, reason: 6&#125;, </span></span><br><span class="line"><span class="comment">//      &#123;status: &quot;fulfilled&quot;, value: 3&#125;</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure><p>åªè¦æ‰€æœ‰å®ä¾‹ä¸­åŒ…å«ä¸€ä¸ª <code>pending</code> çŠ¶æ€çš„å®ä¾‹ï¼Œé‚£ä¹ˆ <code>Promise.allSettled()</code> çš„ç»“æœä¸ºè¿”å›ä¸€ä¸ªè¿™æ · <code>Promise &#123;&lt;pending&gt;&#125;</code> çš„å®ä¾‹ã€‚</p><blockquote><p>Promise.allSettled() æ˜¯ ES2020 ä¸­æ–°å¢çš„æ–¹æ³•ï¼Œæ‰€ä»¥æœ‰ä¸€äº›æµè§ˆå™¨å¯èƒ½è¿˜æš‚æ—¶ä¸æ”¯æŒã€‚</p></blockquote><p>å¯¹äºä¸æ”¯æŒçš„æµè§ˆå™¨ï¼Œå¯ä»¥å†™ <code>polyfill</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="built_in">Promise</span>.allSettled) &#123;</span><br><span class="line">    <span class="built_in">Promise</span>.allSettled = <span class="function"><span class="keyword">function</span>(<span class="params">promises</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.all(promises.map(<span class="function"><span class="params">p</span> =&gt;</span> <span class="built_in">Promise</span>.resolve(p)</span><br><span class="line">            .then(<span class="function"><span class="params">value</span> =&gt;</span> (&#123;</span><br><span class="line">                status: <span class="string">&#x27;fulfilled&#x27;</span>,</span><br><span class="line">                value</span><br><span class="line">            &#125;), <span class="function"><span class="params">reason</span> =&gt;</span> (&#123;</span><br><span class="line">                status: <span class="string">&#x27;rejected&#x27;</span>,</span><br><span class="line">                reason</span><br><span class="line">            &#125;))</span><br><span class="line">        ));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯¦ç»†è®¾è®¡ä¸€ä¸ªæ–‡ç« é¡µç›®å½•æ’ä»¶</title>
      <link href="/2020/10/14/article-catalog/"/>
      <url>/2020/10/14/article-catalog/</url>
      
        <content type="html"><![CDATA[<p>åœ¨è¯´è¿™ä¸ªæ’ä»¶ä¹‹å‰ï¼Œå¯ä»¥å…ˆå» <a href="https://bubuzou.com/2020/09/21/vue-operate/">https://bubuzou.com/</a> è¿™ä¸ªç½‘ç«™ä½“éªŒä¸‹è¿™ä¸ªæ’ä»¶çš„æ•ˆæœï¼Œå¥½æœ‰ä¸ªå¤§æ¦‚çš„å°è±¡ã€‚</p><p>é€šè¿‡é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼Œä½ å¯ä»¥æ”¶è·ä»€ä¹ˆï¼Ÿ</p><ol><li>ç”¨ <code>JS</code> ç›´æ¥æ“ä½œ <code>DOM</code></li><li>æµè§ˆå™¨ <code>BOM</code> ç›¸å…³çŸ¥è¯†</li><li>æ€§èƒ½ä¼˜åŒ–æ€è€ƒ</li><li>æ’ä»¶è®¾è®¡æ€è€ƒ</li></ol><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>å¹³æ—¶æˆ‘ä»¬åœ¨ç”¨ <code>Markdown</code> å†™çš„æ–‡ç« ï¼Œå¦‚æœæ”¾åˆ°è‡ªå·±çš„åšå®¢æˆ–è€…æŠ•ç¨¿åˆ°æ˜é‡‘ç­‰å¹³å°ï¼Œå…¶å†…å®¹ä¼šè¢«æµè§ˆå™¨è§£ææˆ <code>HTML</code>ã€‚è€Œ <code>Markdown</code> é‡Œé¢çš„ä¸€çº§ï¼ˆ#ï¼‰ã€äºŒçº§ï¼ˆ##ï¼‰ã€ä¸‰çº§æ ‡é¢˜ï¼ˆ###ï¼‰åˆ†åˆ«å¯¹åº”äºé¡µé¢çš„æ–‡ç« æ ‡é¢˜ã€ä¸€çº§ç›®å½•ã€äºŒçº§ç›®å½•ã€‚åŸºäºæ­¤ï¼Œå°±å¯ä»¥å¾ˆå¥½çš„åˆ©ç”¨è¯¥ç”Ÿæˆçš„é¡µé¢å®ç°ä¸€ä¸ªç›®å½•ï¼Œä¾¿äºæ›´ç›´è§‚æ–¹ä¾¿çš„çš„æµè§ˆæ–‡ç« å†…å®¹ï¼Œè€Œè¿™å°±æ˜¯æœ€åˆæˆ‘æƒ³ä¸ºåšå®¢é‡Œçš„æ–‡ç« é¡µå®ç°ä¸€ä¸ªç›®å½•åŠŸèƒ½çš„ç†ç”±ã€‚</p><blockquote><p>è¿™ä¸ªæ’ä»¶æ˜¯åŸºäº <code>Hexo</code> ç”Ÿæˆçš„ç½‘é¡µæ¥å®ç°çš„ï¼Œä¸”ç›®å‰åªæ”¯æŒä¸€çº§å’ŒäºŒçº§ç›®å½•ï¼Œå› ä¸ºä½œä¸ºä¸€ç¯‡æ–‡ç« æ¥è¯´æœ‰ä¸¤ä¸ªå±‚çº§å·²ç»å¯ä»¥å¾ˆå¥½çš„å°†ä¸€å—å†…å®¹åˆ’åˆ†ç»†è¯´å¾—å¾ˆæ¸…æ¥šäº†ã€‚</p></blockquote><a id="more"></a><h2 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h2><h3 id="ä½ç½®"><a href="#ä½ç½®" class="headerlink" title="ä½ç½®"></a>ä½ç½®</h3><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202010/catalog.png"></p><p>é¦–å…ˆæˆ‘æ‰“ç®—å°†æ–‡ç« çš„ç›®å½•æ”¾ç½®åœ¨æ–‡ç« å†…å®¹çš„å³ä¾§ï¼Œä¸”æ˜¯æ‚¬æµ®å›ºå®šåœ¨é‚£é‡Œä¸éšæµè§ˆå™¨çš„æ»šåŠ¨è€Œæ»šåŠ¨ã€‚å› ä¸ºæˆ‘ä»¬éƒ½ä¹ æƒ¯ä»ä¸Šåˆ°ä¸‹ä»å·¦åˆ°å³çš„å»æµè§ˆæ–‡ç« ï¼Œæ‰€ä»¥æˆ‘å¸Œæœ›é¦–å…ˆæ˜ å…¥çœ¼å¸˜çš„æ˜¯æ–‡ç« å†…å®¹è€Œä¸æ˜¯æ–‡ç« ç›®å½•ï¼›å¦å¤–å› ä¸ºæˆ‘çš„åšå®¢çš„é¦–é¡µå’Œæ–‡ç« åˆ—è¡¨é¡µéƒ½æ˜¯å·¦ä¾§æ˜¯æµè§ˆåŒºåŸŸè€Œå³ä¾§æ˜¯æ“ä½œåŒºåŸŸï¼Œæ‰€ä»¥æŠŠç›®å½•æ”¾åˆ°å³ä¾§èƒ½ä¿æŒæ•´ç«™çš„å¸ƒå±€ç»Ÿä¸€ä»¥åŠæ“ä½œçš„ä¾¿åˆ©æ€§ã€‚</p><h3 id="éœ€è¦åšä»€ä¹ˆ"><a href="#éœ€è¦åšä»€ä¹ˆ" class="headerlink" title="éœ€è¦åšä»€ä¹ˆ"></a>éœ€è¦åšä»€ä¹ˆ</h3><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202010/highlight.png"></p><ol><li>é¦–å…ˆéœ€è¦æ ¹æ®æ–‡ç« å†…å®¹çš„äºŒçº§å’Œä¸‰çº§æ ‡é¢˜ç”Ÿæˆç›®å½•ï¼›</li><li>ç„¶åï¼Œé¡µé¢ä»ä¸Šåˆ°ä¸‹æ»šåŠ¨è¿‡ç¨‹ä¸­ï¼Œéœ€è¦åœ¨å³ä¾§ç›®å½•é‡Œé«˜äº®å½“å‰çš„æ ‡é¢˜ï¼Œè€Œé«˜äº®çš„åŸåˆ™æ˜¯å½“å‰æ ‡é¢˜æ‰€åœ¨çš„ä½ç½®åˆ°æµè§ˆå™¨å¯è§†åŒºåŸŸé¡¶éƒ¨çš„è·ç¦»éœ€è¦å°äºæˆ–ç­‰äºä¸€ä¸ªå›ºå®šå€¼ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼›</li><li>åœ¨åˆé€‚çš„æ—¶å€™æ»šåŠ¨ç›®å½•åˆ—è¡¨ï¼Œä½¿å¾—å½“å‰é«˜äº®çš„å­ç›®å½•ä¼šå‡ºç°åœ¨æ»šåŠ¨åŒºåŸŸå†…éƒ¨ï¼Œä¸”å°½é‡å¤„äºæ»šåŠ¨åŒºåŸŸçš„ä¸­é—´åŒºåŸŸï¼›</li><li>å½“ç‚¹å‡»æŸä¸ªå­ç›®å½•çš„æ—¶å€™éœ€è¦é«˜äº®å½“å‰ç‚¹å‡»çš„ç›®å½•ï¼Œä¸”æ–‡ç« å†…å®¹æ»šåŠ¨åˆ°å¯¹åº”ç›®å½•çš„ä½ç½®ï¼Œä½¿å¾—ç‚¹å‡»ç›®å½•å¯¹åº”çš„æ–‡ç« æ ‡é¢˜æ‰€åœ¨çš„ä½ç½®è·ç¦»å¯è§†åŒºåŸŸé¡¶éƒ¨çš„è·ç¦»åˆšå¥½ç­‰äºä¸€ä¸ªå›ºå®šå€¼ã€‚</li></ol><h3 id="æ»šåŠ¨ç›®å½•çš„æœºåˆ¶æ˜¯æ€æ ·çš„"><a href="#æ»šåŠ¨ç›®å½•çš„æœºåˆ¶æ˜¯æ€æ ·çš„" class="headerlink" title="æ»šåŠ¨ç›®å½•çš„æœºåˆ¶æ˜¯æ€æ ·çš„"></a>æ»šåŠ¨ç›®å½•çš„æœºåˆ¶æ˜¯æ€æ ·çš„</h3><p>å¯¹äºçš„ç¬¬ä¸‰ç‚¹æåˆ°åœ¨åˆé€‚çš„æ—¶å€™æ»šåŠ¨ç›®å½•ï¼Œé‚£ä»€ä¹ˆæ—¶å€™æ‰ç®—åˆé€‚å‘¢ï¼Ÿç›®å½•èƒ½ä¸èƒ½æ»šåŠ¨ï¼Œä»¥åŠæ€ä¹ˆæ»šåŠ¨æ€»å…±åˆ†ä¸ºä»¥ä¸‹ 5 ç§æƒ…å†µï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202010/scroll_top.png"></p><ol><li>å½“ç›®å½•èƒ½åœ¨æ»šåŠ¨åŒºåŸŸå®Œå…¨æ˜¾ç¤ºçš„æ—¶å€™ï¼Œå³æ»šåŠ¨åŒºåŸŸé«˜åº¦å¤§äºæ‰€æœ‰ç›®å½•å­é¡¹é«˜åº¦æ€»å’Œçš„æ—¶å€™ï¼Œä¸è¿›è¡Œç›®å½•æ»šåŠ¨ï¼Œå¦‚ä¸Šé¢çš„å›¾ â‘  ï¼›</li><li>å½“ç›®å½•ä¸èƒ½åœ¨æ»šåŠ¨åŒºåŸŸå®Œå…¨æ˜¾ç¤ºçš„æ—¶å€™ï¼Œç›®å½•éœ€è¦æ»šåŠ¨ã€‚æ‰€ä»¥éœ€è¦åšçš„å°±æ˜¯åœ¨ä¸€ä¸ªåˆ’å®šçš„åŒºåŸŸå†…æ»šåŠ¨ç›®å½•ï¼Œè¶…å‡ºè¯¥åŒºåŸŸçš„ç›®å½•å­é¡¹å°†ä¼šè‡ªåŠ¨éšè—ã€‚é€šè¿‡æ»šåŠ¨ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ç›®å½•åˆ—è¡¨çš„å¤´å°¾ä¸¤ä¸ªç›®å½•å­é¡¹éƒ½èƒ½å¾ˆå¥½çš„åœ¨åˆ’å®šåŒºåŸŸé‡Œæ˜¾ç¤ºå‡ºæ¥ã€‚éšç€é¡µé¢çš„æ»šåŠ¨ï¼Œç›®å½•å°†ä»å¤´æ»šåˆ°å°¾ï¼Œé‚£ä¹ˆæ»šåŠ¨çš„èŒƒå›´æ˜¯ä»ç¬¬ä¸€ä¸ªå­ç›®å½•è´´ç€æ»šåŠ¨åŒºåŸŸçš„é¡¶éƒ¨åˆ°æœ€åä¸€ä¸ªå­ç›®å½•è´´ç€æ»šåŠ¨åŒºåŸŸçš„åº•éƒ¨ä¸ºæ­¢ï¼›</li><li>å½“é¡µé¢åœ¨æœ€é¡¶éƒ¨çš„æ—¶å€™ï¼Œå½“å‰é«˜äº®çš„å­ç›®å½•è‚¯å®šæ˜¯ç¬¬ä¸€ä¸ªï¼Œéšç€é¡µé¢çš„å‘ä¸‹æ»šåŠ¨ï¼Œé«˜äº®çš„ä½ç½®ä¹Ÿåœ¨ä¸æ–­ä¸‹ç§»ï¼Œå½“é«˜äº®ä½ç½®ç§»åŠ¨åˆ°åœ¨ç›®å½•æ»šåŠ¨åŒºåŸŸçš„ä¸ŠåŠéƒ¨åˆ†ä¹‹å‰ï¼Œè¿™æ®µä¸è¿›è¡Œç›®å½•æ»šåŠ¨ï¼Œå¦‚ä¸Šé¢çš„å›¾ â‘¡ åˆ° å›¾ â‘¢ çš„å˜åŒ–è¿‡ç¨‹ï¼›</li><li>å½“ç¬¬ä¸€ä¸ªå­ç›®å½•è´´ç€æ»šåŠ¨åŒºåŸŸçš„é¡¶éƒ¨ï¼Œä¸”é«˜äº®ä½ç½®åœ¨ä¸­ä½å¾€ä¸‹ç»§ç»­æ»šåŠ¨çš„æ—¶å€™ï¼Œéœ€è¦è¿›è¡Œç›®å½•æ»šåŠ¨ï¼Œæ»šåŠ¨çš„è·ç¦»æ˜¯å½“å‰é«˜äº®ç›®å½•æ‰€åœ¨ä½ç½®è·ç¦»æ»šåŠ¨åŒºåŸŸä¸­é—´ä½ç½®çš„é«˜åº¦å·®ï¼Œå¦‚ä¸Šé¢çš„å›¾ â‘¢ åˆ°å›¾ â‘£ çš„å˜åŒ–è¿‡ç¨‹ï¼›</li><li>å¦‚æœè¿™ä¸ªé«˜åº¦å·®è¿‡äºå¤§ï¼Œä½¿å¾—æ»šåŠ¨åæœ€åä¸€ä¸ªå­å…ƒç´ ä¸èƒ½è´´ç€æ»šåŠ¨åŒºåŸŸåº•éƒ¨çš„æ—¶å€™ï¼Œåˆ™ä¸æŒ‰ç…§è¿™ä¸ªé«˜åº¦å·®è¿›è¡Œæ»šåŠ¨ï¼Œè€ŒçœŸå®éœ€è¦æ»šåŠ¨çš„è·ç¦»æ˜¯æœ€åä¸€ä¸ªå­ç›®å½•åˆ°æ»šåŠ¨åŒºåŸŸåº•éƒ¨çš„è·ç¦»ï¼Œå¦‚ä¸Šé¢çš„å›¾ â‘£ åˆ°å›¾ â‘¤ çš„å˜åŒ–è¿‡ç¨‹ã€‚</li></ol><h2 id="åŠŸèƒ½å®ç°"><a href="#åŠŸèƒ½å®ç°" class="headerlink" title="åŠŸèƒ½å®ç°"></a>åŠŸèƒ½å®ç°</h2><p>ç”±äºæ–‡ç« é¡µæ˜¯ç”± <code>Hexo</code> åŸºäº <code>Markdown</code> ç”Ÿæˆè€Œæ¥çš„ï¼Œæ‰€ä»¥å®ƒæœ‰è‡ªå·±ç‰¹å®šçš„ <code>HTML</code> æ ¼å¼ï¼Œå®ƒçš„æ ¼å¼å¤§æ¦‚æ˜¯å¦‚ä¸‹è¿™æ ·ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;7ç§ç»„ä»¶é€šä¿¡æ–¹å¼éšä½ é€‰&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;headerlink&quot;</span> <span class="attr">title</span>=<span class="string">&quot;7ç§ç»„ä»¶é€šä¿¡æ–¹å¼éšä½ é€‰&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    7ç§ç»„ä»¶é€šä¿¡æ–¹å¼éšä½ é€‰</span><br><span class="line"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è¿™é‡Œæ˜¯éƒ¨åˆ†æ–‡ç« å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">id</span>=<span class="string">&quot;props-on-emit&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;headerlink&quot;</span> <span class="attr">title</span>=<span class="string">&quot;props/@on+$emit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    props/@on+$emit</span><br><span class="line"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è¿™é‡Œæ˜¯éƒ¨åˆ†æ–‡ç« å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">id</span>=<span class="string">&quot;$attrså’Œ$listeners&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;headerlink&quot;</span> <span class="attr">title</span>=<span class="string">&quot;$attrså’Œ$listeners&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    $attrså’Œ$listeners</span><br><span class="line"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è¿™é‡Œæ˜¯éƒ¨åˆ†æ–‡ç« å†…å®¹ --&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„äºŒçº§æ ‡é¢˜ï¼ˆH2ï¼‰å’Œä¸‰çº§æ ‡é¢˜ï¼ˆH3ï¼‰éƒ½æ˜¯åœ¨åŒä¸€ä¸ªçˆ¶å…ƒç´ ä¸‹é¢ï¼Œä¸”æ¯ä¸ªæ ‡é¢˜ä¸‹é¢éƒ½åŒ…å«äº†ä¸€ä¸ªå¸¦æœ‰ <code>headerlink</code> ç±»åçš„é“¾æ¥ï¼Œå¦å¤–è¿˜æœ‰æ ‡é¢˜å±æ€§ã€‚</p><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±èƒ½å¾ˆå®¹æ˜“çš„è·å–åˆ°æ‰€æœ‰çš„æ ‡é¢˜ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arContentAnchor = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.headerlink&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸²ä»£ç çš„ç»“æœä¼šè¿”å›ä¸€ä¸ª <code>NodeList</code>ï¼Œæœ‰äº†å®ƒæˆ‘ä»¬å°±å¯ä»¥å»ç”Ÿæˆç›®å½•äº†ã€‚</p><h3 id="ç”Ÿæˆç›®å½•"><a href="#ç”Ÿæˆç›®å½•" class="headerlink" title="ç”Ÿæˆç›®å½•"></a>ç”Ÿæˆç›®å½•</h3><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202010/catalog_show.png"></p><p>ç”Ÿæˆç›®å½•æ— éå°±æ˜¯äº§ç”Ÿä¸€ä¸² <code>HTML</code>ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰å“ªäº›è¦åšçš„å‘¢ï¼Ÿ<br>é¦–å…ˆè¦ç¡®å®šä¸‹ï¼Œç›®å½•éƒ½åŒ…å«äº†å“ªäº›éƒ¨åˆ†ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºè¿™é‡Œå¤§æ¦‚æ˜¯åŒ…å«äº† 3 éƒ¨åˆ†ï¼šç›®å½•æ¡ã€åºå·å’Œæ ‡é¢˜ã€‚é‚£ä¹ˆå°±å¯ä»¥å…ˆç¡®å®šå¥½ <code>HTML</code> ç»“æ„ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;arCatalog&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;arCatalog-line&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;arCatalog-body&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">&quot;arCatalog-tack1 on&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;arCatalog-index&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>7ç§ç»„ä»¶é€šä¿¡æ–¹å¼éšä½ é€‰<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;arCatalog-dot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>arCatalog-line</code> è¡¨ç¤ºç›®å½•æ¡ï¼Œ<code>arCatalog-body</code> æ˜¯æ»šåŠ¨åŒºåŸŸï¼Œ<code>dl</code> æ˜¯æ»šåŠ¨åˆ—è¡¨ï¼Œ<code>dd</code> æ˜¯ç›®å½•å­é¡¹ï¼Œ<code>arCatalog-index</code> æ˜¯ç›®å½•åºå·ï¼Œé“¾æ¥é‡Œæ”¾çš„æ˜¯å­ç›®å½•æ ‡é¢˜ã€‚æœ‰äº† <code>HTML</code> ï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯æŠŠç›®å½•çš„æ ·å¼å†™å¥½ï¼Œå†™å®Œåæ ·å¼æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥å°±ä¸åœ¨è¿™é‡Œè´´å‡ºæ¥äº†ã€‚</p><p>ç”Ÿæˆç›®å½•åˆ°è¿™é‡Œå°±å®Œäº‹äº†å—ï¼Ÿå¹¶æ²¡æœ‰ï¼Œç”±äºæµè§ˆå™¨å¯è§†åŒºåŸŸæ˜¯ä¸å›ºå®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®¡ç®—å‡ºç›®å½•æ‰€åœ¨æ»šåŠ¨åŒºåŸŸçš„é«˜åº¦ã€‚</p><p>æ»šåŠ¨é«˜åº¦ = nä¸ªç›®å½•å­é¡¹ * å­é¡¹çš„å®é™…é«˜åº¦</p><p>å…ˆè¯´å­é¡¹çš„å®é™…é«˜åº¦ï¼Œå¯¹äºç›®å½•å­é¡¹çš„æ ·å¼ä¸Šï¼Œæˆ‘è¿™é‡Œæ²¡æœ‰ç”¨å†…é—´è·å’Œå¤–è¾¹è·ï¼Œè€Œæ˜¯é€šè¿‡ <code>line-height</code> æ¥æ§åˆ¶ä»–ä»¬ä¹‹é—´çš„é—´éš™ï¼Œé‚£ä¹ˆï¼š</p><p>å­é¡¹çš„å®é™…é«˜åº¦ = å­é¡¹çš„è¡Œé«˜</p><p>å†è¯´ <code>n</code> ä¸ªç›®å½•å­é¡¹ï¼Œé‚£åˆ°åº• <code>n</code> æ˜¯å¤šå°‘å‘¢ï¼Ÿåœ¨ç›®å½•çš„ <code>Y</code> è½´æ–¹å‘ä¸Šï¼Œé™¤äº†æœ‰ç›®å½•ï¼Œè¿˜æœ‰é¡¶éƒ¨çš„èœå•ï¼Œä»¥åŠä¸ºäº†ç¾è§‚è¿˜éœ€è¦é€‚å½“çš„ç•™ç™½ï¼Œæ‰€ä»¥ï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202010/scroll_height.png"></p><p>n = (è§†å£é«˜åº¦ - ï¼ˆé¡¶éƒ¨èœå•é«˜åº¦ + ç•™ç™½é«˜åº¦ï¼‰ï¼‰/ å­é¡¹è¡Œé«˜</p><p>æ‰€ä»¥ï¼Œæœ€ç»ˆæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºæ»šåŠ¨é«˜åº¦ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> DEFAULT = &#123;</span><br><span class="line">    lineHeight: <span class="number">28</span>,           <span class="comment">// æ¯ä¸ªèœå•çš„è¡Œé«˜æ˜¯ 28</span></span><br><span class="line">    moreHeight: <span class="number">10</span>,           <span class="comment">// èœå•å·¦ä¾§çš„çº¿æ¯”èœå•å¤šå‡ºçš„é«˜åº¦</span></span><br><span class="line">    surplusHeight: <span class="number">180</span>,       <span class="comment">// é™¤äº†èœå•é«˜åº¦+ç•™ç™½é«˜åº¦</span></span><br><span class="line">    delay: <span class="number">200</span>,               <span class="comment">// é˜²æŠ–çš„å»¶è¿Ÿæ—¶é—´</span></span><br><span class="line">    duration: <span class="number">200</span>,            <span class="comment">// æ»šåŠ¨çš„åŠ¨ç”»æŒç»­æ—¶é—´</span></span><br><span class="line">    toTopDistance: <span class="number">80</span>,        <span class="comment">// è·ç¦»è§†å£é¡¶éƒ¨å¤šå°‘é«˜åº¦ä¹‹å†…æ—¶å€™è§¦å‘é«˜äº®</span></span><br><span class="line">    selector: <span class="string">&#x27;.headerlink&#x27;</span>,  <span class="comment">// æ–‡ç« å†…å®¹ä¸­æ ‡é¢˜æ ‡ç­¾çš„ selector</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// maxCatalogCount å°±æ˜¯ä¸Šé¢æåˆ°çš„ n ä¸ªç›®å½•å­é¡¹ä¸­çš„ n</span></span><br><span class="line"><span class="keyword">let</span> maxCatalogCount = <span class="built_in">Math</span>.floor((<span class="built_in">window</span>.innerHeight - DEFAULT.surplusHeight) / DEFAULT.lineHeight)  </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ»šåŠ¨åŒºåŸŸé«˜åº¦</span></span><br><span class="line"><span class="keyword">let</span> catalogHeight = arContentAnchor.length &gt; maxCatalogCount ? maxCatalogCount * DEFAULT.lineHeight : arContentAnchor.length * DEFAULT.lineHeight;</span><br></pre></td></tr></table></figure><p>å®Œæ•´çš„ç”Ÿæˆç›®å½•çš„å‡½æ•°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”Ÿæˆç›®å½•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateCatalog</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> catalogHeight = arContentAnchor.length &gt; maxCatalogCount ? maxCatalogCount * DEFAULT.lineHeight : arContentAnchor.length * DEFAULT.lineHeight;</span><br><span class="line">    <span class="keyword">let</span> retStr = <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;arCatalog&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;arCatalog-line&quot; </span></span><br><span class="line"><span class="string">        style=&quot;height: <span class="subst">$&#123;catalogHeight + DEFAULT.moreHeight&#125;</span>px&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;arCatalog-body&quot; </span></span><br><span class="line"><span class="string">        style=&quot;max-height: <span class="subst">$&#123;catalogHeight&#125;</span>px; height: <span class="subst">$&#123;catalogHeight&#125;</span>px&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;dl style=&quot;margin-top: <span class="subst">$&#123;marginTop&#125;</span>px&quot;&gt;`</span>;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">let</span> h2Index = <span class="number">0</span>,</span><br><span class="line">        h3Index = <span class="number">1</span>,</span><br><span class="line">        acIndex = <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        tagName = <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        index = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> currNode <span class="keyword">of</span> arContentAnchor) &#123;</span><br><span class="line">        tagName = currNode.parentElement.tagName</span><br><span class="line">        <span class="keyword">if</span> ( tagName === <span class="string">&#x27;H3&#x27;</span> ) &#123;</span><br><span class="line">            acIndex = <span class="string">`<span class="subst">$&#123;h2Index&#125;</span>.<span class="subst">$&#123;h3Index++&#125;</span>`</span></span><br><span class="line">            className = <span class="string">&#x27;arCatalog-tack2&#x27;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            acIndex = ++h2Index</span><br><span class="line">            h3Index = <span class="number">1</span></span><br><span class="line">            className = <span class="string">&#x27;arCatalog-tack1&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        retStr += <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;dd class=&quot;<span class="subst">$&#123;className&#125;</span> <span class="subst">$&#123;index++ === lastOnIndex ? <span class="string">&#x27;on&#x27;</span> : <span class="string">&#x27;&#x27;</span>&#125;</span>&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;span class=&quot;arCatalog-index&quot;&gt;<span class="subst">$&#123;acIndex&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;a href=&quot;#&quot;&gt;<span class="subst">$&#123;currNode.title&#125;</span>&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;span class=&quot;arCatalog-dot&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;/dd&gt;`</span></span><br><span class="line">    &#125;;</span><br><span class="line">    retStr += <span class="string">`&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;`</span></span><br><span class="line">        </span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;arAnchorBar&#x27;</span>).innerHTML = retStr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®æ»šåŠ¨ç›‘å¬äº‹ä»¶"><a href="#è®¾ç½®æ»šåŠ¨ç›‘å¬äº‹ä»¶" class="headerlink" title="è®¾ç½®æ»šåŠ¨ç›‘å¬äº‹ä»¶"></a>è®¾ç½®æ»šåŠ¨ç›‘å¬äº‹ä»¶</h3><p>ç»™ <code>window</code> åŠ ä¸Šæ»šåŠ¨äº‹ä»¶ï¼Œç”¨äºç›‘å¬å½“æ»šåŠ¨çš„æ—¶å€™å»åšä¸€äº›æ“ä½œï¼Œè¿™é‡Œçš„æ“ä½œå°±æ˜¯è®¾ç½®é«˜äº®å’Œæ»šåŠ¨ç›®å½•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setHighlight()</span><br><span class="line">&#125;, <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åªæœ‰ç›®å½•æ€»æ•°è¶…è¿‡æ»šåŠ¨åŒºåŸŸå¯å®¹çº³æœ€å¤§ç›®å½•æ•°çš„æ—¶å€™ï¼Œç›®å½•æ‰éœ€è¦æ»šåŠ¨</span></span><br><span class="line"><span class="keyword">if</span> (catalogLength &gt; maxCatalogCount) &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        scrollCatalog()</span><br><span class="line">    &#125;, <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šè¿™æ ·å°±èƒ½ç›‘å¬æµè§ˆå™¨æ»šåŠ¨äº‹ä»¶ï¼Œä»è€Œåšä¸€äº›äº‹æƒ…å•¦ã€‚ä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´å‡½æ•°è¢«é¢‘ç¹è°ƒç”¨ï¼Œä»è€Œå­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œå…¶å®æˆ‘ä»¬æ›´å¸Œæœ›å½“æ»šåŠ¨å¼€å§‹åˆ°æ»šåŠ¨ç»“æŸçš„æ—¶å€™ï¼Œåªæ‰§è¡Œä¸€æ¬¡å‡½æ•°å³å¯ï¼Œé‚£è¿™ä¸ªç›´æ¥ä¸Šé˜²æŠ–å³å¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é˜²æŠ–ï¼šè§¦å‘é«˜é¢‘äº‹ä»¶ n ç§’ååªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœ n ç§’å†…äº‹ä»¶å†æ¬¡è§¦å‘ï¼Œåˆ™ä¼šé‡æ–°è®¡æ—¶ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, delay = <span class="number">200</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">args</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> _this = <span class="built_in">this</span></span><br><span class="line">        <span class="built_in">clearTimeout</span>(fn.id)</span><br><span class="line">        fn.id = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            fn.apply(_this, args)</span><br><span class="line">        &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬åªéœ€è¦æŠŠ <code>scroll</code> ç›‘å¬å›è°ƒé‡Œçš„å‡½æ•°å¯¹åº”æ¢æˆå¦‚ä¸‹çš„å³å¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    debounce(setHighlight, DEFAULT.delay)()</span><br><span class="line">    debounce(resetStatus, DEFAULT.delay)()</span><br><span class="line">&#125;, <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (catalogLength &gt; maxCatalogCount) &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        debounce(scrollCatalog, DEFAULT.delay)()</span><br><span class="line">    &#125;, <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é«˜äº®å½“å‰ç›®å½•"><a href="#é«˜äº®å½“å‰ç›®å½•" class="headerlink" title="é«˜äº®å½“å‰ç›®å½•"></a>é«˜äº®å½“å‰ç›®å½•</h3><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202010/bcr.png"></p><p>è¿™éƒ¨åˆ†å†…å®¹å¼€å§‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å¤ä¹ ä¸€ä¸ª <code>API</code>ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›å…ƒç´ çš„å¤§å°åŠå…¶ç›¸å¯¹äºè§†å£çš„ä½ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Element.getBoundingClientRect()</span><br></pre></td></tr></table></figure><p>éœ€æ±‚åˆ†æçš„æ—¶å€™æœ‰æåˆ°ï¼Œé«˜äº®çš„åŸåˆ™æ˜¯å½“å‰æ ‡é¢˜æ‰€åœ¨çš„ä½ç½®åˆ°æµè§ˆå™¨å¯è§†åŒºåŸŸé¡¶éƒ¨çš„è·ç¦»éœ€è¦å°äºæˆ–ç­‰äºä¸€ä¸ªå›ºå®šå€¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arContentAnchor[index].getBoundingClientRect().top &lt;= DEFAULT.toTopDistance</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥å½“éå† <code>arContentAnchor</code> è¿™ä¸ªåˆ—è¡¨ï¼ŒæŸé¡¹çš„ä½ç½®å°äºå›ºå®šå€¼ï¼Œä¸”å·®å€¼æœ€å°çš„æ—¶å€™ï¼Œè¯¥é¡¹å¯¹åº”çš„ç›®å½•å°±åº”è¯¥è¢«è®¾ç½®ä¸ºé«˜äº®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> curr = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.arCatalog .on&#x27;</span>)</span><br><span class="line">curr.classList.remove(<span class="string">&#x27;on&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nextOnIndex = <span class="number">0</span>,</span><br><span class="line">    currNode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (nextOnIndex &lt; arContentAnchor.length) &#123;</span><br><span class="line">    currNode = arContentAnchor[nextOnIndex]</span><br><span class="line">    <span class="keyword">if</span> (currNode.getBoundingClientRect().top &lt;= DEFAULT.toTopDistance) &#123;</span><br><span class="line">        nextOnIndex++</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">nextOnIndex = nextOnIndex === arContentAnchor.length ? nextOnIndex - <span class="number">1</span> : nextOnIndex;</span><br><span class="line"><span class="keyword">let</span> catalogDd = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.arCatalog dd&#x27;</span>)</span><br><span class="line">catalogDd[nextOnIndex].classList.add(<span class="string">&#x27;on&#x27;</span>)</span><br></pre></td></tr></table></figure><p>åˆ°æ­¤ä¸€åˆ‡éƒ½çœ‹èµ·æ¥å¾ˆç¾å¥½ï¼Œä½†æ˜¯ä¸Šé¢è¿™æ®µä»£ç å­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œåªè¦é¡µé¢ä¸€æ»šåŠ¨å°±ä¼šä»ç¬¬ä¸€ä¸ªç›®å½•åˆ°æœ€åä¸€ä¸ªç›®å½•ä¹‹é—´è¿›è¡ŒæŸ¥æ‰¾ï¼ŒçŸ¥é“æ‰¾åˆ°é‚£ä¸ªç¬¦åˆè¦æ±‚çš„ä¸ºæ­¢ï¼Œè¿™æ ·çš„è¯éå†æ¬¡æ•°å¤ªå¤šäº†ã€‚</p><p>æˆ‘ä»¬çŸ¥é“é¡µé¢æ»šåŠ¨æ— éå°±æ˜¯åœ¨å½“å‰è¿™ä¸ªä½ç½®çš„å‰æä¸‹ï¼Œå¾€ä¸Šæ»šåŠ¨æˆ–è€…å‘ä¸‹æ»šåŠ¨ï¼Œå¦‚æœæˆ‘ä»¬æŠŠ <code>nextOnIndex</code> è®°ä¸ºæ»šåŠ¨å‰çš„ç´¢å¼•ï¼Œåœ¨æ ¹æ®æ»šåŠ¨æ–¹å‘è¿›è¡ŒåŠ åŠ å‡å‡ä¸å°±å¯ä»¥å¾ˆå¥½çš„å‡å°‘éå†æ¬¡æ•°å˜›ï¼Ÿæƒ³æ³•è²Œä¼¼ä¸é”™ï¼Œæ¥è¯•ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬è¦åˆ¤æ–­å½“å‰æ»šåŠ¨æ˜¯å‘ä¸Šè¿˜æ˜¯å‘ä¸‹æ»šåŠ¨ï¼Œå¯ä»¥æ ¹æ®ä¸¤æ¬¡æ»šåŠ¨å‰åçš„åç§»é‡æ¥åˆ¤æ–­ï¼š</p><p>å‘ä¸Šæ»šåŠ¨ = æ»šåŠ¨ååç§»é‡ &lt; æ»šåŠ¨å‰åç§»é‡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> lastSH = <span class="built_in">window</span>.pageYOffset</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æœ€è¿‘ä¸€æ¬¡é¡µé¢çš„æ»šåŠ¨æ–¹å‘</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getScrollDirection</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> sh = <span class="built_in">window</span>.pageYOffset, ret = <span class="string">&#x27;bottom&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> (sh &lt; lastSH) &#123;</span><br><span class="line">        ret = <span class="string">&#x27;top&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    lastSH = sh</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çŸ¥é“äº†æ»šåŠ¨æ–¹å‘ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆå¥½çš„å†™å‡ºè®¾ç½®é«˜äº®çš„ä¼˜åŒ–ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> curr = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.arCatalog .on&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> nextOnIndex = onIndex;</span><br><span class="line"><span class="keyword">if</span> (defaultDirec === <span class="string">&#x27;bottom&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">while</span> (nextOnIndex &lt; catalogLength) &#123;</span><br><span class="line">        <span class="keyword">let</span> currTop = arContentAnchor[nextOnIndex].getBoundingClientRect().top</span><br><span class="line">        <span class="keyword">if</span> ( currTop &gt; DEFAULT.toTopDistance &amp;&amp; nextOnIndex &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            nextOnIndex--</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">        nextOnIndex++</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (nextOnIndex &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> currTop = arContentAnchor[nextOnIndex].getBoundingClientRect().top</span><br><span class="line">        <span class="keyword">if</span> ( currTop &lt;= DEFAULT.toTopDistance)&#123;</span><br><span class="line">               <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">        nextOnIndex--</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">nextOnIndex = nextOnIndex === arContentAnchor.length ? nextOnIndex - <span class="number">1</span> : nextOnIndex &lt; <span class="number">0</span> ? <span class="number">0</span> : nextOnIndex </span><br><span class="line">catalogDd[nextOnIndex].classList.add(<span class="string">&#x27;on&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ä¼˜åŒ–åçš„éå†æ¬¡æ•°æ˜æ˜¾å‡å°‘ï¼Œè€Œä¸”éå†æ¬¡æ•°åŸºæœ¬ä¸Šæ˜¯å°äºæˆ–ç­‰äºæ»šåŠ¨å‰åç›®å½•ç´¢å¼•çš„å·®å€¼ã€‚<br>è™½ç„¶ç»è¿‡ä¼˜åŒ–åï¼Œå·²ç»æ˜æ˜¾çš„å‡å°‘äº†éå†æ¬¡æ•°ï¼Œä½†æ˜¯æˆ‘è¿˜æƒ³å†ä¼˜åŒ–ä¸€ä¸‹ã€‚çº³å°¼ï¼Ÿ</p><p>å¾ˆå¤šæ–‡ç« é¡µå¾ˆé•¿ï¼Œæ‰€ä»¥æœ‰å›åˆ°é¡¶éƒ¨è¿™ç§åŠŸèƒ½ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå½“å‰é¡µé¢å·²ç»æ»šåŠ¨åˆ°æœ€åº•éƒ¨ï¼Œè¿™ä¸ªæ—¶å€™æ¥ä¸€ä¸‹å›åˆ°é¡¶éƒ¨ï¼Œé‚£åˆšåˆšå†™çš„ä¼˜åŒ–ä»£ç ä¼šéå†å‡ æ¬¡ï¼Ÿç­”æ¡ˆæ˜¯ï¼šéå†æ¬¡æ•°å°†ä¼šæ˜¯ç›®å½•å­é¡¹çš„æ€»æ•°ã€‚æ–‡ç« æœ€å¼€å§‹æåˆ°çš„é‚£ä¸ªä½“éªŒåœ°å€çš„é‚£ç¯‡æ–‡ç«  <a href="https://bubuzou.com/2020/09/21/vue-operate/">34æ¡æˆ‘èƒ½å‘Šè¯‰ä½ çš„Vueä¹‹å®æ“ç¯‡</a> æœ‰ 43 ä¸ªå­ç›®å½•ï¼Œæ‰€ä»¥éœ€è¦éå† 43 æ¬¡ï¼ŒçœŸçš„ä¸èƒ½æ¥å—ç»“æœï¼Œæ‰€ä»¥å†æ¥ä¼˜åŒ–ä¸€æ¬¡ã€‚</p><p>äºŒæ¬¡ä¼˜åŒ–ä¸»è¦æ˜¯å¤„ç†è¾¹é™…é—®é¢˜ï¼Œå³æ»šåŠ¨åˆ°å¤´å°¾éƒ¨çš„æ—¶å€™åŠ ä¸Šåˆ¤æ–­ï¼Œæœ€ç»ˆäºŒæ¬¡ä¼˜åŒ–åçš„é«˜äº®å½“å‰ç›®å½•å‡½æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é«˜äº®å½“å‰ç›®å½•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setHighlight</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    defaultDirec = getScrollDirection()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (hasStopSetHighlight) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> &#123;</span><br><span class="line">        scrollTop,</span><br><span class="line">    &#125; = <span class="built_in">document</span>.scrollingElement;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">let</span> curr = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.arCatalog .on&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> onIndex = [].indexOf.call(catalogDd, curr),  <span class="comment">// å½“å‰é«˜äº®ç´¢å¼•</span></span><br><span class="line">        nextOnIndex = onIndex;  <span class="comment">// æ»šåŠ¨åé«˜äº®ç´¢å¼•</span></span><br><span class="line">        </span><br><span class="line">    curr.classList.remove(<span class="string">&#x27;on&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> scrollHeight = <span class="built_in">document</span>.documentElement.scrollHeight || <span class="built_in">document</span>.body.scrollHeight</span><br><span class="line">    <span class="keyword">if</span> (arContentAnchor[catalogLength - <span class="number">1</span>].getBoundingClientRect().top &lt;= DEFAULT.toTopDistance || </span><br><span class="line">        <span class="built_in">window</span>.innerHeight + <span class="built_in">window</span>.pageYOffset === scrollHeight) &#123;  <span class="comment">// å°¾éƒ¨</span></span><br><span class="line">        lastOnIndex = catalogLength - <span class="number">1</span></span><br><span class="line">        catalogDd[lastOnIndex].classList.add(<span class="string">&#x27;on&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (scrollTop &lt;= firstDdTop) &#123;  <span class="comment">// é¡¶éƒ¨</span></span><br><span class="line">        catalogDd[<span class="number">0</span>].classList.add(<span class="string">&#x27;on&#x27;</span>)</span><br><span class="line">        lastOnIndex = <span class="number">0</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;  <span class="comment">// ä¸­é—´ï¼šä½¿ç”¨ç¼“å­˜ï¼Œç›´æ¥ä»ä¸Šä¸€æ¬¡ç´¢å¼•ï¼ˆonIndexï¼‰ä½ç½®å¼€å§‹æŸ¥æ‰¾</span></span><br><span class="line">        <span class="keyword">if</span> (defaultDirec === <span class="string">&#x27;bottom&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (nextOnIndex &lt; catalogLength) &#123;</span><br><span class="line">                <span class="keyword">let</span> currTop = arContentAnchor[nextOnIndex].getBoundingClientRect().top</span><br><span class="line">                <span class="keyword">if</span> ( currTop &gt; DEFAULT.toTopDistance &amp;&amp; nextOnIndex &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    nextOnIndex--</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                &#125;</span><br><span class="line">                nextOnIndex++</span><br><span class="line">                &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (nextOnIndex &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> currTop = arContentAnchor[nextOnIndex].getBoundingClientRect().top</span><br><span class="line">                <span class="keyword">if</span> ( currTop &lt;= DEFAULT.toTopDistance)&#123;</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                &#125;</span><br><span class="line">                nextOnIndex--</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        nextOnIndex = nextOnIndex === catalogLength ? nextOnIndex - <span class="number">1</span> : nextOnIndex &lt; <span class="number">0</span> ? <span class="number">0</span> : nextOnIndex </span><br><span class="line">        lastOnIndex = nextOnIndex</span><br><span class="line">        catalogDd[nextOnIndex].classList.add(<span class="string">&#x27;on&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ»šåŠ¨ç›®å½•"><a href="#æ»šåŠ¨ç›®å½•" class="headerlink" title="æ»šåŠ¨ç›®å½•"></a>æ»šåŠ¨ç›®å½•</h3><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202010/scroll_to_bottom.png"></p><p>æ ¹æ®ä¹‹å‰éœ€æ±‚åˆ†æé‡Œçš„è¯´æ˜ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“å½“æµè§ˆå™¨å‘ä¸‹æ»šåŠ¨çš„æ—¶å€™ï¼Œä¼šåˆ†æˆ 3 ç§æƒ…å†µï¼š</p><ol><li>æ»šåŠ¨åçš„é«˜äº®å­ç›®å½•å¤„äºäºæ»šåŠ¨åŒºåŸŸä¸ŠåŠéƒ¨åˆ†ï¼Œå³ä¸­ä½çº¿ä»¥ä¸Šï¼Œæ­¤æ—¶ç›®å½•ä¸è¿›è¡Œæ»šåŠ¨ï¼Œå¦‚ä¸Šå›¾ â‘ ï¼›</li><li>æ»šåŠ¨åçš„é«˜äº®å­ç›®å½•å¤„äºæ»šåŠ¨åŒºåŸŸçš„ä¸‹åŠéƒ¨åˆ†ï¼Œå³ä¸­ä½çº¿ä»¥ä¸‹ï¼Œæ­¤æ—¶ç›®å½•çš„æ»šåŠ¨è·ç¦»å°†æ˜¯æ»šåŠ¨åé«˜äº®å­ç›®å½•çš„åº•éƒ¨ä½ç½®åˆ°ä¸­ä½çº¿çš„é«˜åº¦å·®ï¼Œå¦‚ä¸Šå›¾ â‘¡ï¼›</li><li>æ»šåŠ¨åçš„é«˜äº®ç›®å½•å¤„äºä¸­ä½çº¿ä»¥ä¸‹ä¸”æœ€åä¸€ä¸ªå­ç›®å½•éœ€è¦è´´ç€æ»šåŠ¨åŒºåŸŸåº•éƒ¨ï¼Œæ­¤æ—¶ç›®å½•çš„æ»šåŠ¨è·ç¦»å°†æ˜¯æ»šåŠ¨åˆ—è¡¨åº•éƒ¨åˆ°æ»šåŠ¨åŒºåŸŸåº•éƒ¨çš„é«˜åº¦å·®ï¼Œå¦‚ä¸Šå›¾ â‘¢ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> catalogBody = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.arCatalog-body&#x27;</span>),</span><br><span class="line">    initBodyTop = catalogBody..getBoundingClientRect().top,</span><br><span class="line">    bodyMidBottom = initBodyTop + <span class="built_in">Math</span>.ceil((maxCatalogCount / <span class="number">2</span> )) * DEFAULT.lineHeight;  <span class="comment">// ä¸­ä½çº¿ä½ç½®</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> (curr.bottom + (maxCatalogCount / <span class="number">2</span>) * DEFAULT.lineHeight &lt;= bodyBCR.bottom) &#123;  <span class="comment">// ä¸ŠåŠéƒ¨åˆ†</span></span><br><span class="line">    <span class="comment">// ä¸æ»šåŠ¨</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (curr.bottom - bodyMidBottom &lt; list.bottom - bodyBCR.bottom) &#123;  <span class="comment">// ä¸­ä½ä»¥ä¸‹</span></span><br><span class="line">    marginTop += -<span class="built_in">Math</span>.floor((curr.bottom - bodyMidBottom ) / DEFAULT.lineHeight) * DEFAULT.lineHeight</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (bodyBCR.bottom &lt;= list.bottom) &#123;  <span class="comment">// å½“å‰©ä½™æ»šåŠ¨è·ç¦»</span></span><br><span class="line">    marginTop = bodyBCR.bottom - initDlBottom</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒç†ï¼Œå½“æµè§ˆå™¨å‘ä¸Šæ»šåŠ¨çš„æ—¶å€™ï¼Œä¹Ÿèƒ½å¾ˆå¥½çš„å¾—å‡ºå…¶æ»šåŠ¨é€»è¾‘ï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202010/scroll_to_top.png"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (bodyBCR.top + (maxCatalogCount / <span class="number">2</span>) * DEFAULT.lineHeight &lt;= curr.top) &#123;</span><br><span class="line">    <span class="comment">// ä¸æ»šåŠ¨</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (bodyMidBottom - curr.top &lt; bodyBCR.top - list.top) &#123;</span><br><span class="line">    marginTop += <span class="built_in">Math</span>.floor((bodyMidBottom - curr.top) / DEFAULT.lineHeight) * DEFAULT.lineHeight</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (list.top &lt;= bodyBCR.top) &#123;</span><br><span class="line">    marginTop = <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆçš„æ»šåŠ¨ç›®å½•å‡½æ•°å®Œæ•´ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªåŠ¨æ»šåŠ¨ç›®å½•æ ‘ï¼Œä½¿å¾—å½“å‰é«˜äº®ç›®å½•åœ¨å¯è§†èŒƒå›´å†…</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scrollCatalog</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> currentCatalog = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.arCatalog .on&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> curr = currentCatalog.getBoundingClientRect(),</span><br><span class="line">        list = catalogDl.getBoundingClientRect();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (defaultDirec === <span class="string">&#x27;bottom&#x27;</span>) &#123;  <span class="comment">// å‘ä¸‹æ»šåŠ¨</span></span><br><span class="line">        <span class="keyword">if</span> (curr.bottom + (maxCatalogCount / <span class="number">2</span>) * DEFAULT.lineHeight &lt;= bodyBCR.bottom) &#123;  <span class="comment">// ä¸ŠåŠéƒ¨åˆ†</span></span><br><span class="line">            <span class="comment">// ä¸æ»šåŠ¨</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (curr.bottom - bodyMidBottom &lt; list.bottom - bodyBCR.bottom)&#123;  <span class="comment">// ä¸­ä½ä»¥ä¸‹</span></span><br><span class="line">            marginTop += -<span class="built_in">Math</span>.floor((curr.bottom - bodyMidBottom ) / DEFAULT.lineHeight) * DEFAULT.lineHeight</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bodyBCR.bottom &lt;= list.bottom) &#123;  <span class="comment">// å½“å‰©ä½™æ»šåŠ¨è·ç¦»</span></span><br><span class="line">            marginTop = bodyBCR.bottom - initDlBottom</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;  <span class="comment">// å‘ä¸Šæ»šåŠ¨</span></span><br><span class="line">        <span class="keyword">if</span> (bodyBCR.top + (maxCatalogCount / <span class="number">2</span>) * DEFAULT.lineHeight &lt;= curr.top) &#123;</span><br><span class="line">            <span class="comment">// ä¸æ»šåŠ¨</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bodyMidBottom - curr.top &lt; bodyBCR.top - list.top) &#123;</span><br><span class="line">            marginTop += <span class="built_in">Math</span>.floor((bodyMidBottom - curr.top) / DEFAULT.lineHeight) * DEFAULT.lineHeight</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (list.top &lt;= bodyBCR.top) &#123;</span><br><span class="line">            marginTop = <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    catalogDl.style.marginTop = marginTop + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å­ç›®å½•ç‚¹å‡»äº‹ä»¶"><a href="#å­ç›®å½•ç‚¹å‡»äº‹ä»¶" class="headerlink" title="å­ç›®å½•ç‚¹å‡»äº‹ä»¶"></a>å­ç›®å½•ç‚¹å‡»äº‹ä»¶</h3><p>å½“ç‚¹å‡»å­ç›®å½•çš„æ—¶å€™éœ€è¦åš 2 ä»¶äº‹æƒ…ï¼Œç¬¬ä¸€æ˜¯æ»šåŠ¨é¡µé¢åˆ°å¯¹åº”çš„ç›®å½•ä½ç½®ï¼Œç„¶åæ˜¯é«˜äº®å½“å‰ç‚¹å‡»çš„ç›®å½•ï¼›</p><p>æ»šåŠ¨é¡µé¢åˆ°å¯¹åº”çš„ç›®å½•ä½ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»™ç›®å½•å­é¡¹ç»‘å®šäº‹ä»¶</span></span><br><span class="line"><span class="keyword">let</span> catalogDd = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.arCatalog dd&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">catalogDd.forEach(<span class="function">(<span class="params">curr, index</span>) =&gt;</span> &#123;</span><br><span class="line">    curr.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        e.preventDefault()</span><br><span class="line">        <span class="keyword">let</span> currTop = arContentAnchor[index].getBoundingClientRect().top</span><br><span class="line">        <span class="built_in">document</span>.documentElement.scrollTop = <span class="built_in">document</span>.body.scrollTop = currTop + <span class="built_in">window</span>.pageYOffset - DEFAULT.toTopDistance</span><br><span class="line">    &#125;, <span class="literal">false</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿™æ ·å®ç°é¡µé¢çš„æ»šåŠ¨æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå°±æ˜¯ä½“éªŒä¸å¤ªå¥½ï¼Œçªç„¶ä»ä¸€ä¸ªä½ç½®æ»šåŠ¨åˆ°å¦å¤–ä¸€ä¸ªä½ç½®ï¼Œæ˜¾å¾—çªå…€ï¼Œèƒ½ä¸èƒ½æ¥ç‚¹åŠ¨ç”»æ•ˆæœï¼Ÿç±»ä¼¼ <code>jQuery</code> çš„ <code>animate()</code> ï¼Ÿæ²¡é—®é¢˜ï¼Œæˆ‘ä»¬æ¥å°è¯•ç€å®ç°ä¸€ä¸‹ã€‚</p><p>ç”¨ <code>JS</code> å®ç°åŠ¨ç”»æ•ˆæœï¼Œä¸€å®šç¦»ä¸å¼€å®šæ—¶å™¨ï¼Œè¯¸å¦‚ <code>setTimeout</code>ã€<code>setInterval</code> ä¹‹ç±»ï¼Œä½†æ˜¯è¿™æ¬¡æˆ‘ä¸æ‰“ç®—ç”¨ä»–ä»¬ï¼Œè€Œæ˜¯ç”¨ <code>HTML5</code> ä¸­å¢åŠ çš„ <code>requestAnimationFrame</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºæµè§ˆå™¨å®ç°åŠ¨ç”»è€Œæä¾›çš„ <code>API</code>ã€‚å®ƒè™½ç„¶ä¹Ÿæ˜¯ä¸ªå®šæ—¶å™¨ï¼Œä½†æ˜¯ç›¸æ¯”äºå¦å¤–ä¸¤ä¸ªï¼Œä»–ä¸éœ€è¦ä¼ é€’æ—¶é—´ï¼Œå› ä¸ºä¼ é€’çš„å›è°ƒå‡½æ•°é‡Œè‡ªå¸¦äº†å‚æ•° <code>DOMHighResTimeStamp</code>ï¼Œè¿™ä¸ªå‚æ•°è¡¨ç¤ºå›è°ƒå‡½æ•°è¢«è§¦å‘çš„æ—¶é—´ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œ<code>requestAnimationFrame</code> ä¸­çš„å›è°ƒå‡½æ•°æ‰§è¡Œæ¬¡æ•°é€šå¸¸æ˜¯æ¯ç§’60æ¬¡ï¼Œå³å¤§æ¦‚æ¯ 16.6 æ¯«ç§’æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ï¼Œä½†åœ¨å¤§å¤šæ•°éµå¾ª <code>W3C</code> å»ºè®®çš„æµè§ˆå™¨ä¸­ï¼Œå›è°ƒå‡½æ•°æ‰§è¡Œæ¬¡æ•°é€šå¸¸ä¸æµè§ˆå™¨å±å¹•åˆ·æ–°æ¬¡æ•°ç›¸åŒ¹é…ã€‚å¥½äº†ï¼Œå¯¹äº <code>requestAnimationFrame</code> çš„ä»‹ç»å°±åˆ°è¿™é‡Œï¼Œä¸‹é¢æˆ‘ä»¬ç›´æ¥æ¥è¯´ä¸‹åŠ¨ç”»å®ç°æ»šåŠ¨çš„æ ¸å¿ƒåŸç†ï¼š</p><p>æ¯æ¬¡æ»šåŠ¨è·ç¦» = ( æ»šåŠ¨è·ç¦» / åŠ¨ç”»æŒç»­æ—¶é—´ ) * æ¯æ¬¡åŠ¨ç”»æ‰§è¡Œæ—¶é—´è·ç¦»ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶é—´çš„å·®å€¼ + å½“å‰æ»šåŠ¨è·ç¦»</p><p>ç›´æ¥æ¥çœ‹å®Œæ•´çš„åŠ¨ç”»å®ç°æ»šåŠ¨çš„å‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ»šåŠ¨åˆ°ç›®æ ‡ä½ç½®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scrollToDest</span>(<span class="params">destScrollTop</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> startTime;   </span><br><span class="line">    <span class="keyword">let</span> currScrollTop = <span class="built_in">window</span>.pageYOffset;</span><br><span class="line">    <span class="keyword">let</span> duration = <span class="number">200</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">step</span>(<span class="params">timestamp</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!startTime) &#123;</span><br><span class="line">            startTime = timestamp</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> elapsed = <span class="built_in">Math</span>.round(timestamp - startTime)</span><br><span class="line">        <span class="keyword">const</span> distance = elapsed * ((<span class="built_in">Math</span>.floor(destScrollTop) - currScrollTop) / duration) + currScrollTop</span><br><span class="line">            </span><br><span class="line">        <span class="built_in">document</span>.documentElement.scrollTop = <span class="built_in">document</span>.body.scrollTop = distance</span><br><span class="line">          </span><br><span class="line">        <span class="keyword">if</span> (elapsed &lt; duration) &#123;</span><br><span class="line">            <span class="built_in">window</span>.requestAnimationFrame(step)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.requestAnimationFrame(step)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œç°åœ¨æœ‰äº†åŠ¨ç”»å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦æ”¹å†™ä¸‹å­ç›®å½•çš„ç‚¹å‡»äº‹ä»¶ï¼Œç»™æ»šåŠ¨åŠ ä¸Šè¿‡æ¸¡æ•ˆæœï¼Œè®©äººä½“éªŒèµ·æ¥æ›´åŠ èˆ’æœï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> catalogDd = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.arCatalog dd&#x27;</span>);</span><br><span class="line"></span><br><span class="line">catalogDd.forEach(<span class="function">(<span class="params">curr, index</span>) =&gt;</span> &#123;</span><br><span class="line">    curr.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        e.preventDefault()</span><br><span class="line">        <span class="keyword">let</span> currTop = arContentAnchor[index].getBoundingClientRect().top</span><br><span class="line">        scrollToDest(currTop + <span class="built_in">window</span>.pageYOffset - DEFAULT.toTopDistance)</span><br><span class="line">    &#125;, <span class="literal">false</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä»¶äº‹å·²ç»åšå¥½ï¼Œæ¥ä¸‹æ¥åšç¬¬äºŒä»¶äº‹ï¼Œé«˜äº®å½“å‰ç‚¹å‡»æŸä¸ªå­ç›®å½•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»™ç›®å½•å­é¡¹ç»‘å®šäº‹ä»¶</span></span><br><span class="line"><span class="keyword">let</span> catalogDd = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.arCatalog dd&#x27;</span>);</span><br><span class="line"></span><br><span class="line">catalogDd.forEach(<span class="function">(<span class="params">curr, index</span>) =&gt;</span> &#123;</span><br><span class="line">    curr.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        e.preventDefault()</span><br><span class="line">        hasStopSetHighlight = <span class="literal">true</span></span><br><span class="line">        <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.arCatalog .on&#x27;</span>).classList.remove(<span class="string">&#x27;on&#x27;</span>)</span><br><span class="line">        catalogDd[index].classList.add(<span class="string">&#x27;on&#x27;</span>)</span><br><span class="line">        lastOnIndex = index</span><br><span class="line">        <span class="keyword">let</span> currTop = arContentAnchor[index].getBoundingClientRect().top</span><br><span class="line">        scrollToDest(currTop + <span class="built_in">window</span>.pageYOffset - DEFAULT.toTopDistance)</span><br><span class="line">    &#125;, <span class="literal">false</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šå³å¯ï¼Œä½†æ˜¯ç”±äºç‚¹å‡»äº†æŸä¸ªå­ç›®å½•ï¼Œé¡µé¢ä¼šè¿›è¡Œæ»šåŠ¨ï¼Œè€Œé¡µé¢æ»šåŠ¨åˆä¼šè§¦å‘ <code>setHighlight</code> å‡½æ•°å¯¹ç›®å½•è¿›è¡Œé«˜äº®ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œçš„åšæ³•æ˜¯ç”¨äº†ä¸€ä¸ªå…¨å±€å˜é‡ <code>hasStopSetHighlight</code> ç”¨æ¥æ§åˆ¶å½“ç‚¹å‡»å­ç›®å½•çš„æ—¶å€™ï¼Œä¸è¿›è¡Œ <code>setHighlight</code> è®¾ç½®é«˜äº®æ“ä½œã€‚</p><h3 id="æµè§ˆå™¨è§†å£é«˜åº¦å˜äº†æ€ä¹ˆåŠ"><a href="#æµè§ˆå™¨è§†å£é«˜åº¦å˜äº†æ€ä¹ˆåŠ" class="headerlink" title="æµè§ˆå™¨è§†å£é«˜åº¦å˜äº†æ€ä¹ˆåŠ"></a>æµè§ˆå™¨è§†å£é«˜åº¦å˜äº†æ€ä¹ˆåŠ</h3><p>å› ä¸ºæˆ‘ä»¬çš„æ»šåŠ¨é«˜åº¦æ˜¯æ ¹æ®æµè§ˆå™¨è§†å£é«˜åº¦è®¡ç®—å‡ºæ¥çš„ï¼Œå¦‚æœæµè§ˆå™¨è§†å£é«˜åº¦å˜åŒ–äº†ï¼Œé‚£è¿™ä¸ªæ—¶å€™å†å»æ»šåŠ¨é¡µé¢ï¼Œé‚£è‚¯å®šä¼šå‡ºé—®é¢˜çš„ã€‚æ‰€ä»¥éœ€è¦åšçš„å°±æ˜¯æŠŠå’Œè§†å£é«˜åº¦æœ‰å…³çš„é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œç»Ÿä¸€æ”¾åˆ°ä¸€ä¸ªå‡½æ•°é‡Œï¼Œå½“ç›‘å¬åˆ°è§†å£é«˜åº¦å˜åŒ–çš„æ—¶å€™ï¼Œå†å»æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚</p><p>å…ˆæ¥å†™ç›‘å¬å‡½æ•°ï¼ŒåŒæ ·ç”¨ä¸Šäº†é˜²æŠ–å‡½æ•°å¤„ç†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;resize&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    debounce(initCatalog, DEFAULT.delay)()</span><br><span class="line">&#125;, <span class="literal">false</span>)</span><br></pre></td></tr></table></figure><p>ç„¶åå»æŠŠç›¸å…³é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initCatalog</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> tempHeight = <span class="built_in">window</span>.innerHeight</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">if</span> (viewPortHeight !== tempHeight) &#123;</span><br><span class="line">        viewPortHeight = tempHeight</span><br><span class="line">        maxCatalogCount = <span class="built_in">Math</span>.floor((viewPortHeight - DEFAULT.surplusHeight) / DEFAULT.lineHeight)</span><br><span class="line">        </span><br><span class="line">        generateCatalog()</span><br><span class="line">        </span><br><span class="line">        catalogLength = arContentAnchor.length</span><br><span class="line">        lastSH = <span class="built_in">window</span>.pageYOffset</span><br><span class="line">        catalogBody = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.arCatalog-body&#x27;</span>)</span><br><span class="line">        catalogDl = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.arCatalog dl&#x27;</span>)</span><br><span class="line">        catalogDd = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.arCatalog dd&#x27;</span>)</span><br><span class="line">        bodyBCR = catalogBody.getBoundingClientRect()</span><br><span class="line">        initBodyTop = bodyBCR.top</span><br><span class="line">        initDlBottom = initDlBottom || catalogDl.getBoundingClientRect().bottom</span><br><span class="line">        firstDdTop = firstDdTop || catalogDd[<span class="number">0</span>].getBoundingClientRect().top,</span><br><span class="line">        bodyMidBottom = initBodyTop + <span class="built_in">Math</span>.ceil((maxCatalogCount / <span class="number">2</span> )) * DEFAULT.lineHeight;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç»™ç›®å½•å­é¡¹ç»‘å®šäº‹ä»¶</span></span><br><span class="line">        catalogDd.forEach(<span class="function">(<span class="params">curr, index</span>) =&gt;</span> &#123;</span><br><span class="line">            curr.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">                e.preventDefault()</span><br><span class="line">                hasStopSetHighlight = <span class="literal">true</span></span><br><span class="line">                <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.arCatalog .on&#x27;</span>).classList.remove(<span class="string">&#x27;on&#x27;</span>)</span><br><span class="line">                catalogDd[index].classList.add(<span class="string">&#x27;on&#x27;</span>)</span><br><span class="line">                lastOnIndex = index</span><br><span class="line">                <span class="keyword">let</span> currTop = arContentAnchor[index].getBoundingClientRect().top</span><br><span class="line">                scrollToDest(currTop + <span class="built_in">window</span>.pageYOffset - DEFAULT.toTopDistance)</span><br><span class="line">            &#125;, <span class="literal">false</span>)</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨è§†å£é«˜åº¦å˜åŒ–åï¼Œè¿™é‡Œæœ‰ä¸ªç»†èŠ‚éœ€è¦æä¸€ä¸‹ï¼Œé‚£å°±æ˜¯æ»šåŠ¨ç›®å½•çš„ <code>margin-top</code> ä»¥åŠé«˜äº®ä½ç½®æ˜¯å¸Œæœ›å˜åŒ–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨å…¨å±€å˜é‡è¿›è¡Œæå‰ä¿å­˜èµ·æ¥ï¼Œåˆ†åˆ«ç”¨åˆ°çš„å…¨å±€å˜é‡æ˜¯ <code>marginTop</code> å’Œ <code>lastOnIndex</code>ã€‚</p><h3 id="ç»„è£…"><a href="#ç»„è£…" class="headerlink" title="ç»„è£…"></a>ç»„è£…</h3><p>ä¸Šé¢çš„ä»£ç éƒ½æ˜¯æŠŠä¸åŒçš„åŠŸèƒ½ç‚¹æå–åˆ°å‡½æ•°é‡Œè¿›è¡Œæ“ä½œï¼Œçœ‹èµ·æ¥æ¯”è¾ƒæ•£ä¹±ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦çœ‹çœ‹ä¸€ä¸ªå®Œæ•´çš„ç›®å½•æ’ä»¶åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * articleCatalog v2.0</span></span><br><span class="line"><span class="comment"> * Copyright(c) 2016 by bulandent</span></span><br><span class="line"><span class="comment"> * Date: 2017-5-27 16:10:41</span></span><br><span class="line"><span class="comment"> * Updated: 2020-10-10 17:40:04</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> articleCatalog = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.headerlink&#x27;</span>).length === <span class="number">0</span> || <span class="built_in">window</span>.innerWidth &lt; <span class="number">900</span> ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> DEFAULT = &#123;</span><br><span class="line">        lineHeight: <span class="number">28</span>,           <span class="comment">// æ¯ä¸ªèœå•çš„è¡Œé«˜æ˜¯ 28</span></span><br><span class="line">        moreHeight: <span class="number">10</span>,           <span class="comment">// èœå•å·¦ä¾§çš„çº¿æ¯”èœå•å¤šå‡ºçš„é«˜åº¦</span></span><br><span class="line">        surplusHeight: <span class="number">180</span>,       <span class="comment">// é™¤äº†èœå•é«˜åº¦+ç•™ç™½é«˜åº¦</span></span><br><span class="line">        delay: <span class="number">200</span>,               <span class="comment">// é˜²æŠ–çš„å»¶è¿Ÿæ—¶é—´</span></span><br><span class="line">        duration: <span class="number">200</span>,            <span class="comment">// æ»šåŠ¨çš„åŠ¨ç”»æŒç»­æ—¶é—´</span></span><br><span class="line">        toTopDistance: <span class="number">80</span>,        <span class="comment">// è·ç¦»è§†å£é¡¶éƒ¨å¤šå°‘é«˜åº¦ä¹‹å†…æ—¶å€™è§¦å‘é«˜äº®</span></span><br><span class="line">        selector: <span class="string">&#x27;.headerlink&#x27;</span>,  <span class="comment">// æ–‡ç« å†…å®¹ä¸­æ ‡é¢˜æ ‡ç­¾çš„ selector</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">args</span>) </span>&#123;</span><br><span class="line">        DEFAULT = <span class="built_in">Object</span>.assign(DEFAULT, args)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">let</span> arContentAnchor = <span class="built_in">document</span>.querySelectorAll(DEFAULT.selector),</span><br><span class="line">            catalogLength = arContentAnchor.length,</span><br><span class="line">            maxCatalogCount = <span class="number">0</span>,          <span class="comment">// è§†å£å†…èƒ½å®¹çº³çš„æœ€å¤§ç›®å½•ä¸ªæ•°</span></span><br><span class="line">            viewPortHeight = <span class="number">0</span>,           <span class="comment">// å½“å‰è§†å£çš„é«˜åº¦</span></span><br><span class="line">            marginTop = <span class="number">0</span>,                <span class="comment">// èœå•çš„åˆå§‹æ»šåŠ¨è·ç¦»</span></span><br><span class="line">            defaultDirec = <span class="string">&#x27;bottom&#x27;</span>,      <span class="comment">// é»˜è®¤æ»šåŠ¨æ–¹å‘</span></span><br><span class="line">            lastSH = <span class="number">0</span>,                   <span class="comment">// è·å–é¡µé¢åˆå§‹æ»šåŠ¨è·ç¦»</span></span><br><span class="line">            lastOnIndex = <span class="number">0</span>,              <span class="comment">// ä¸Šæ¬¡é«˜äº®çš„ç›®å½•ç´¢å¼•</span></span><br><span class="line">            catalogBody = [],             <span class="comment">// .arCatalog-body</span></span><br><span class="line">            catalogDl = <span class="literal">null</span>,             <span class="comment">// .arCatalog-body dl</span></span><br><span class="line">            catalogDd = [],                 <span class="comment">// .arCatalog-body dd</span></span><br><span class="line">            initBodyTop = <span class="number">0</span>,              <span class="comment">// ç›®å½•å¯è§†åŒºåŸŸçš„ top</span></span><br><span class="line">            initDlBottom = <span class="number">0</span>,             <span class="comment">// ç›®å½• dl çš„ bottom</span></span><br><span class="line">            firstDdTop = <span class="number">0</span>,               <span class="comment">// ç¬¬ä¸€ä¸ª dd çš„ top</span></span><br><span class="line">            bodyMidBottom = <span class="number">0</span>,            <span class="comment">// ç›®å½•å¯è§†åŒºåŸŸçš„ä¸­é—´ä½ç½®çš„ dd çš„ bottom</span></span><br><span class="line">            bodyBCR = <span class="literal">null</span>,                  <span class="comment">// ç›®å½•å¯è§†åŒºåŸŸçš„è¾¹ç•Œå€¼</span></span><br><span class="line">            hasStopSetHighlight = <span class="literal">false</span>;  <span class="comment">// åœ¨ç‚¹å‡»ç›®å½•å­é¡¹çš„æ—¶å€™ç›´æ¥é«˜äº®å½“å‰ç›®å½•ï¼Œè€Œä¸é€šè¿‡ scroll äº‹ä»¶è§¦å‘ setHighlight å‡½æ•°</span></span><br><span class="line">            </span><br><span class="line">        initCatalog()</span><br><span class="line">            </span><br><span class="line">        <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            debounce(setHighlight, DEFAULT.delay)()</span><br><span class="line">        &#125;, <span class="literal">false</span>)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">if</span> (catalogLength &gt; maxCatalogCount) &#123;</span><br><span class="line">            <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                debounce(scrollCatalog, DEFAULT.delay)()</span><br><span class="line">            &#125;, <span class="literal">false</span>)</span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">        <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;resize&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            debounce(initCatalog, DEFAULT.delay)()</span><br><span class="line">        &#125;, <span class="literal">false</span>)</span><br><span class="line">            </span><br><span class="line">        <span class="comment">// æ­¤å¤„å£°æ˜åˆå§‹åŒ–å‡½æ•° initCatalog</span></span><br><span class="line">        <span class="comment">// æ­¤å¤„å£°æ˜ç”Ÿæˆç›®å½•å‡½æ•° generateCatalog</span></span><br><span class="line">        <span class="comment">// æ­¤å¤„å£°æ˜è®¾ç½®é«˜äº®å‡½æ•° setHighlight</span></span><br><span class="line">        <span class="comment">// æ­¤å¤„å£°æ˜æ»šåŠ¨ç›®å½•å‡½æ•° scrollCatalog</span></span><br><span class="line">        <span class="comment">// æ­¤å¤„å£°æ˜åŠ¨ç”»å®ç°æ»šåŠ¨å‡½æ•° scrollToDest</span></span><br><span class="line">        <span class="comment">// æ­¤å¤„å£°æ˜é˜²æŠ–å‡½æ•° debounce</span></span><br><span class="line">        <span class="comment">// æ­¤å¤„å£°æ˜è·å–æ»šåŠ¨æ–¹å‘å‡½æ•° getScrollDirection</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">resetStatus</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (hasStopSetHighlight) &#123;</span><br><span class="line">                hasStopSetHighlight = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ’ä»¶"><a href="#ä½¿ç”¨æ’ä»¶" class="headerlink" title="ä½¿ç”¨æ’ä»¶"></a>ä½¿ç”¨æ’ä»¶</h3><p>ç„¶ååœ¨å®é™…é¡µé¢é‡Œä½¿ç”¨çš„æ—¶å€™ï¼Œåªéœ€è¦å¼•å…¥ <code>articleCatalog.js</code>ï¼Œç„¶åç›´æ¥ç”¨è°ƒç”¨å‡½æ•°å³å¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">articleCatalog()</span><br></pre></td></tr></table></figure><p>å½“ç„¶è°ƒç”¨çš„æ—¶å€™ä¹Ÿæ”¯æŒä¼ å…¥ä¸€äº›å‚æ•°ï¼Œå‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">articleCatalog(&#123;</span><br><span class="line">    lineHeight: 28,           &#x2F;&#x2F; æ¯ä¸ªèœå•çš„è¡Œé«˜æ˜¯ 28</span><br><span class="line">    moreHeight: 10,           &#x2F;&#x2F; èœå•å·¦ä¾§çš„çº¿æ¯”èœå•å¤šå‡ºçš„é«˜åº¦</span><br><span class="line">    surplusHeight: 180,       &#x2F;&#x2F; é™¤äº†èœå•é«˜åº¦+ç•™ç™½é«˜åº¦</span><br><span class="line">    delay: 200,               &#x2F;&#x2F; é˜²æŠ–çš„å»¶è¿Ÿæ—¶é—´</span><br><span class="line">    duration: 200,            &#x2F;&#x2F; æ»šåŠ¨çš„åŠ¨ç”»æŒç»­æ—¶é—´</span><br><span class="line">    toTopDistance: 80,        &#x2F;&#x2F; è·ç¦»è§†å£é¡¶éƒ¨å¤šå°‘é«˜åº¦ä¹‹å†…æ—¶å€™è§¦å‘é«˜äº®</span><br><span class="line">    selector: &#39;.headerlink&#39;,  &#x2F;&#x2F; æ–‡ç« å†…å®¹ä¸­æ ‡é¢˜æ ‡ç­¾çš„ selector</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ³¨æ„ä¼ å…¥å‚æ•°ä¹Ÿæ˜¯çä¼ çš„ï¼Œéœ€è¦é…åˆè¯¥æ’ä»¶çš„æ ·å¼ï¼Œå¦åˆ™å®¹æ˜“ç¨‹é—®é¢˜ã€‚æ¯”å¦‚æ˜æ˜é¡µé¢ä¸­å­ç›®å½•çš„çœŸå®è¡Œé«˜æ˜¯ <code>28px</code>ï¼Œä½ å´ä¼ å…¥ <code>lineHeight: 24</code>ï¼Œé‚£è‚¯å®šæ˜¯ä¸è¡Œçš„ã€‚</p><blockquote><p>ä½¿ç”¨è¿™ä¸ªæ’ä»¶æ˜¯æœ‰å‰æçš„ï¼Œé‚£å°±æ˜¯å…¶æ–‡ç« é¡µçš„ HTML ç»“æ„å¿…é¡»æ»¡è¶³ä¸Šé¢æåˆ°çš„é‚£ç§ç»“æ„æ‰è¡Œï¼Œä¸”åªæ”¯æŒä¸¤çº§å­ç›®å½•ã€‚</p></blockquote><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202009/gzh.png"></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>34æ¡æˆ‘èƒ½å‘Šè¯‰ä½ çš„Vueä¹‹å®æ“ç¯‡</title>
      <link href="/2020/09/21/vue-operate/"/>
      <url>/2020/09/21/vue-operate/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯æˆ‘å­¦ä¹ æ•´ç†çš„å…³äº <code>Vue.js</code> ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œå¦å¤–è¿˜æœ‰ä¸¤ç¯‡åˆ†åˆ«æ˜¯å…³äºä¼˜åŒ–å’ŒåŸç†çš„ã€‚å¸Œæœ›è¯»å®Œè¿™3ç¯‡æ–‡ç« ï¼Œä½ èƒ½å¯¹ <code>Vue</code> æœ‰ä¸ªæ›´æ·±å…¥çš„è®¤è¯†ã€‚</p><h2 id="7ç§ç»„ä»¶é€šä¿¡æ–¹å¼éšä½ é€‰"><a href="#7ç§ç»„ä»¶é€šä¿¡æ–¹å¼éšä½ é€‰" class="headerlink" title="7ç§ç»„ä»¶é€šä¿¡æ–¹å¼éšä½ é€‰"></a>7ç§ç»„ä»¶é€šä¿¡æ–¹å¼éšä½ é€‰</h2><p>ç»„ä»¶é€šä¿¡æ˜¯ <code>Vue</code> çš„æ ¸å¿ƒçŸ¥è¯†ï¼ŒæŒæ¡è¿™å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼Œé¢è¯•å¼€å‘ä¸€ç‚¹é—®é¢˜éƒ½æ²¡æœ‰ã€‚</p><h3 id="props-on-emit"><a href="#props-on-emit" class="headerlink" title="props/@on+$emit"></a>props/@on+$emit</h3><p>ç”¨äºå®ç°çˆ¶å­ç»„ä»¶é—´é€šä¿¡ã€‚é€šè¿‡ <code>props</code> å¯ä»¥æŠŠçˆ¶ç»„ä»¶çš„æ¶ˆæ¯ä¼ é€’ç»™å­ç»„ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- parent.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child</span> <span class="attr">:title</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure><a id="more"></a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// child.vue</span></span><br><span class="line">props: &#123;</span><br><span class="line">    title: &#123;</span><br><span class="line">        type: <span class="built_in">String</span>,</span><br><span class="line">        <span class="keyword">default</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥ <code>this.title</code> å°±ç›´æ¥æ‹¿åˆ°ä»çˆ¶ç»„ä»¶ä¸­ä¼ è¿‡æ¥çš„ <code>title</code> çš„å€¼äº†ã€‚æ³¨æ„ï¼Œä½ ä¸åº”è¯¥åœ¨å­ç»„ä»¶å†…éƒ¨ç›´æ¥æ”¹å˜ <code>prop</code>ï¼Œè¿™é‡Œå°±ä¸å¤šèµ˜è¿°ï¼Œ<a href="https://cn.vuejs.org/v2/guide/components-props.html#%E5%8D%95%E5%90%91%E6%95%B0%E6%8D%AE%E6%B5%81">å¯ä»¥ç›´æ¥çœ‹å®˜ç½‘ä»‹ç»</a>ã€‚</p><p>è€Œé€šè¿‡ <code>@on+$emit</code> ç»„åˆå¯ä»¥å®ç°å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ é€’ä¿¡æ¯ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- parent.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child</span> @<span class="attr">changeTitle</span>=<span class="string">&quot;changeTitle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// child.vue</span></span><br><span class="line"><span class="built_in">this</span>.$emit(<span class="string">&#x27;changeTitle&#x27;</span>, <span class="string">&#x27;bubuzou.com&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="attrså’Œ-listeners"><a href="#attrså’Œ-listeners" class="headerlink" title="$attrså’Œ$listeners"></a>$attrså’Œ$listeners</h3><p><code>Vue_2.4</code> ä¸­æ–°å¢çš„ <code>$attrs/$listeners</code> å¯ä»¥è¿›è¡Œè·¨çº§çš„ç»„ä»¶é€šä¿¡ã€‚<br><code>$attrs</code> åŒ…å«äº†çˆ¶çº§ä½œç”¨åŸŸä¸­ä¸ä½œä¸º <code>prop</code> çš„å±æ€§ç»‘å®šï¼ˆ<code>class</code> å’Œ <code>style</code> é™¤å¤–ï¼‰ï¼Œå¥½åƒå¬èµ·æ¥æœ‰äº›ä¸å¥½ç†è§£ï¼Ÿæ²¡äº‹ï¼Œçœ‹ä¸‹ä»£ç å°±çŸ¥é“æ˜¯ä»€ä¹ˆæ„æ€äº†ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶ index.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">list</span> <span class="attr">class</span>=<span class="string">&quot;list-box&quot;</span> <span class="attr">title</span>=<span class="string">&quot;æ ‡é¢˜&quot;</span> <span class="attr">desc</span>=<span class="string">&quot;æè¿°&quot;</span> <span class="attr">:list</span>=<span class="string">&quot;list&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­ç»„ä»¶ list.vue</span></span><br><span class="line">props: &#123;</span><br><span class="line">    list: [],</span><br><span class="line">&#125;,</span><br><span class="line">mounted() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$attrs)  <span class="comment">// &#123;title: &quot;æ ‡é¢˜&quot;, desc: &quot;æè¿°&quot;&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„çˆ¶ç»„ä»¶ <code>index.vue</code> ä¸­æˆ‘ä»¬ç»™å­ç»„ä»¶ <code>list.vue</code> ä¼ é€’äº†4ä¸ªå‚æ•°ï¼Œä½†æ˜¯åœ¨å­ç»„ä»¶å†…éƒ¨ <code>props</code> é‡Œåªå®šä¹‰äº†ä¸€ä¸ª <code>list</code>ï¼Œé‚£ä¹ˆæ­¤æ—¶ <code>this.$attrs</code> çš„å€¼æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé¦–å…ˆè¦å»é™¤ <code>props</code> ä¸­å·²ç»ç»‘å®šäº†çš„ï¼Œç„¶åå†å»é™¤ <code>class</code> å’Œ <code>style</code>ï¼Œæœ€åå‰©ä¸‹ <code>title</code> å’Œ <code>desc</code> ç»“æœå’Œæ‰“å°çš„æ˜¯ä¸€è‡´çš„ã€‚<br>åŸºäºä¸Šé¢ä»£ç çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬åœ¨ç»™ <code>list.vue</code> ä¸­åŠ ä¸€ä¸ªå­ç»„ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶ list.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">detail</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">detial</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­™å­ç»„ä»¶ detail.vue</span></span><br><span class="line"><span class="comment">// ä¸å®šä¹‰propsï¼Œç›´æ¥æ‰“å° $attrs</span></span><br><span class="line">mounted() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$attrs)  <span class="comment">// &#123;title: &quot;æ ‡é¢˜&quot;, desc: &quot;æè¿°&quot;&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å­ç»„ä»¶ä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>v-bind=&quot;$attrs&quot;</code> å¯ä»¥æŠŠçˆ¶çº§ä¼ è¿‡æ¥çš„å‚æ•°ï¼Œå»é™¤ <code>props</code>ã€<code>class</code> å’Œ <code>style</code> ä¹‹åå‰©ä¸‹çš„ç»§ç»­å¾€ä¸‹çº§ä¼ é€’ï¼Œè¿™æ ·å°±å®ç°äº†è·¨çº§çš„ç»„ä»¶é€šä¿¡ã€‚</p><p><code>$attrs</code> æ˜¯å¯ä»¥è¿›è¡Œè·¨çº§çš„å‚æ•°ä¼ é€’ï¼Œå®ç°çˆ¶åˆ°å­çš„é€šä¿¡ï¼›åŒæ ·çš„ï¼Œé€šè¿‡ <code>$listeners</code> ç”¨ç±»ä¼¼çš„æ“ä½œæ–¹å¼å¯ä»¥è¿›è¡Œè·¨çº§çš„äº‹ä»¶ä¼ é€’ï¼Œå®ç°å­åˆ°çˆ¶çš„é€šä¿¡ã€‚<code>$listeners</code> åŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­ä¸å« <code>.native</code> ä¿®é¥°çš„ <code>v-on</code> äº‹ä»¶ç›‘å¬å™¨ï¼Œé€šè¿‡ <code>v-on=&quot;$listeners&quot;</code> ä¼ é€’åˆ°å­ç»„ä»¶å†…éƒ¨ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶ index.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">list</span> @<span class="attr">change</span>=<span class="string">&quot;change&quot;</span> @<span class="attr">update.native</span>=<span class="string">&quot;update&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶ list.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">detail</span> <span class="attr">v-on</span>=<span class="string">&quot;$listeners&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">detail</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­™å­ç»„ä»¶ detail.vue</span></span><br><span class="line">mounted() &#123;</span><br><span class="line">    <span class="built_in">this</span>.$listeners.change()</span><br><span class="line">    <span class="built_in">this</span>.$listeners.update() <span class="comment">// TypeError: this.$listeners.update is not a function</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="provide-injectç»„åˆæ‹³"><a href="#provide-injectç»„åˆæ‹³" class="headerlink" title="provide/injectç»„åˆæ‹³"></a>provide/injectç»„åˆæ‹³</h3><p><code>provide/inject</code> ç»„åˆä»¥å…è®¸ä¸€ä¸ªç¥–å…ˆç»„ä»¶å‘å…¶æ‰€æœ‰å­å­™åä»£æ³¨å…¥ä¸€ä¸ªä¾èµ–ï¼Œå¯ä»¥æ³¨å…¥å±æ€§å’Œæ–¹æ³•ï¼Œä»è€Œå®ç°è·¨çº§çˆ¶å­ç»„ä»¶é€šä¿¡ã€‚åœ¨å¼€å‘é«˜é˜¶ç»„ä»¶å’Œç»„ä»¶åº“çš„æ—¶å€™å°¤å…¶å¥½ç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç»„ä»¶ index.vue</span></span><br><span class="line">data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        title: <span class="string">&#x27;bubuzou.com&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">provide() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        detail: &#123;</span><br><span class="line">            title: <span class="built_in">this</span>.title,</span><br><span class="line">            change: <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log( val )</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­™å­ç»„ä»¶ detail.vue</span></span><br><span class="line">inject: [<span class="string">&#x27;detail&#x27;</span>],</span><br><span class="line">mounted() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.detail.title)  <span class="comment">// bubuzou.com</span></span><br><span class="line">    <span class="built_in">this</span>.detail.title = <span class="string">&#x27;hello world&#x27;</span>  <span class="comment">// è™½ç„¶å€¼è¢«æ”¹å˜äº†ï¼Œä½†æ˜¯çˆ¶ç»„ä»¶ä¸­ title å¹¶ä¸ä¼šé‡æ–°æ¸²æŸ“</span></span><br><span class="line">    <span class="built_in">this</span>.detail.change(<span class="string">&#x27;æ”¹å˜åçš„å€¼&#x27;</span>)  <span class="comment">// æ‰§è¡Œè¿™å¥åå°†æ‰“å°ï¼šæ”¹å˜åçš„å€¼ </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>provide</code> å’Œ <code>inject</code> çš„ç»‘å®šå¯¹äºåŸå§‹ç±»å‹æ¥è¯´å¹¶ä¸æ˜¯å¯å“åº”çš„ã€‚è¿™æ˜¯åˆ»æ„ä¸ºä¹‹çš„ã€‚ç„¶è€Œï¼Œå¦‚æœä½ ä¼ å…¥äº†ä¸€ä¸ªå¯ç›‘å¬çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå…¶å¯¹è±¡çš„ property è¿˜æ˜¯å¯å“åº”çš„ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆåœ¨å­™å­ç»„ä»¶ä¸­æ”¹å˜äº† <code>title</code>ï¼Œä½†æ˜¯çˆ¶ç»„ä»¶ä¸ä¼šé‡æ–°æ¸²æŸ“çš„åŸå› ã€‚</p></blockquote><h3 id="EventBus"><a href="#EventBus" class="headerlink" title="EventBus"></a>EventBus</h3><p>ä»¥ä¸Šä¸‰ç§æ–¹å¼éƒ½æ˜¯åªèƒ½ä»çˆ¶åˆ°å­æ–¹å‘æˆ–è€…å­åˆ°çˆ¶æ–¹å‘è¿›è¡Œç»„ä»¶çš„é€šä¿¡ï¼Œè€Œæˆ‘å°±æ¯”è¾ƒç‰›é€¼äº†ğŸ˜€ï¼Œæˆ‘è¿˜èƒ½è¿›è¡Œå…„å¼Ÿç»„ä»¶ä¹‹é—´çš„é€šä¿¡ï¼Œç”šè‡³ä»»æ„2ä¸ªç»„ä»¶é—´é€šä¿¡ã€‚åˆ©ç”¨ <code>Vue</code> å®ä¾‹å®ç°ä¸€ä¸ª <code>EventBus</code> è¿›è¡Œä¿¡æ¯çš„å‘å¸ƒå’Œè®¢é˜…ï¼Œå¯ä»¥å®ç°åœ¨ä»»æ„2ä¸ªç»„ä»¶ä¹‹é—´é€šä¿¡ã€‚æœ‰ä¸¤ç§å†™æ³•éƒ½å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ª <code>eventBus</code> å¯¹è±¡ï¼š</p><ol><li><p>é€šè¿‡å¯¼å‡ºä¸€ä¸ª <code>Vue</code> å®ä¾‹ï¼Œç„¶åå†éœ€è¦çš„åœ°æ–¹å¼•å…¥ï¼š</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// eventBus.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> EventBus = <span class="keyword">new</span> Vue()</span><br></pre></td></tr></table></figure><p> ä½¿ç”¨ <code>EventBus</code> è®¢é˜…å’Œå‘å¸ƒæ¶ˆæ¯ï¼š</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;EventBus&#125; <span class="keyword">from</span> <span class="string">&#x27;../utils/eventBus.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¢é˜…å¤„</span></span><br><span class="line">EventBus.$on(<span class="string">&#x27;update&#x27;</span>, <span class="function"><span class="params">val</span> =&gt;</span> &#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¸ƒå¤„</span></span><br><span class="line">EventBus.$emit(<span class="string">&#x27;update&#x27;</span>, <span class="string">&#x27;æ›´æ–°ä¿¡æ¯&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ <code>main.js</code> ä¸­åˆå§‹åŒ–ä¸€ä¸ªå…¨å±€çš„äº‹ä»¶æ€»çº¿ï¼š</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line">Vue.prototype.$eventBus = <span class="keyword">new</span> Vue()</span><br></pre></td></tr></table></figure><p> ä½¿ç”¨ï¼š</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éœ€è¦è®¢é˜…çš„åœ°æ–¹</span></span><br><span class="line"><span class="built_in">this</span>.$eventBus.$on(<span class="string">&#x27;update&#x27;</span>, <span class="function"><span class="params">val</span> =&gt;</span> &#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// éœ€è¦å‘å¸ƒä¿¡æ¯çš„åœ°æ–¹</span></span><br><span class="line"><span class="built_in">this</span>.$eventBus.$emit(<span class="string">&#x27;update&#x27;</span>, <span class="string">&#x27;æ›´æ–°ä¿¡æ¯&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ol><p>å¦‚æœæƒ³è¦ç§»é™¤äº‹ä»¶ç›‘å¬ï¼Œå¯ä»¥è¿™æ ·æ¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$eventBus.$off(<span class="string">&#x27;update&#x27;</span>, &#123;&#125;)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»‹ç»äº†ä¸¤ç§å†™æ³•ï¼Œæ¨èä½¿ç”¨ç¬¬äºŒç§å…¨å±€å®šä¹‰çš„æ–¹å¼ï¼Œå¯ä»¥é¿å…åœ¨å¤šå¤„å¯¼å…¥ <code>EventBus</code> å¯¹è±¡ã€‚è¿™ç§ç»„ä»¶é€šä¿¡æ–¹å¼åªè¦è®¢é˜…å’Œå‘å¸ƒçš„é¡ºåºå¾—å½“ï¼Œä¸”äº‹ä»¶åç§°ä¿æŒå”¯ä¸€æ€§ï¼Œç†è®ºä¸Šå¯ä»¥åœ¨ä»»ä½• 2 ä¸ªç»„ä»¶ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼Œç›¸å½“çš„å¼ºå¤§ã€‚ä½†æ˜¯æ–¹æ³•è™½å¥½ï¼Œå¯ä¸è¦æ»¥ç”¨ï¼Œå»ºè®®åªç”¨äºç®€å•ã€å°‘é‡ä¸šåŠ¡çš„é¡¹ç›®ä¸­ï¼Œå¦‚æœåœ¨ä¸€ä¸ªå¤§å‹ç¹æ‚çš„é¡¹ç›®ä¸­æ— ä¼‘æ­¢çš„ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå°†ä¼šå¯¼è‡´é¡¹ç›®éš¾ä»¥ç»´æŠ¤ã€‚</p><h3 id="Vuexè¿›è¡Œå…¨å±€çš„æ•°æ®ç®¡ç†"><a href="#Vuexè¿›è¡Œå…¨å±€çš„æ•°æ®ç®¡ç†" class="headerlink" title="Vuexè¿›è¡Œå…¨å±€çš„æ•°æ®ç®¡ç†"></a>Vuexè¿›è¡Œå…¨å±€çš„æ•°æ®ç®¡ç†</h3><p><code>Vuex</code> æ˜¯ä¸€ä¸ªä¸“é—¨æœåŠ¡äº <code>Vue.js</code> åº”ç”¨çš„çŠ¶æ€ç®¡ç†å·¥å…·ã€‚é€‚ç”¨äºä¸­å¤§å‹åº”ç”¨ã€‚<code>Vuex</code> ä¸­æœ‰ä¸€äº›ä¸“æœ‰æ¦‚å¿µéœ€è¦å…ˆäº†è§£ä¸‹ï¼š</p><ul><li><code>State</code>ï¼šç”¨äºæ•°æ®çš„å­˜å‚¨ï¼Œæ˜¯ <code>store</code> ä¸­çš„å”¯ä¸€æ•°æ®æºï¼›</li><li><code>Getter</code>ï¼šç±»ä¼¼äºè®¡ç®—å±æ€§ï¼Œå°±æ˜¯å¯¹ <code>State</code> ä¸­çš„æ•°æ®è¿›è¡ŒäºŒæ¬¡çš„å¤„ç†ï¼Œæ¯”å¦‚ç­›é€‰å’Œå¯¹å¤šä¸ªæ•°æ®è¿›è¡Œæ±‚å€¼ç­‰ï¼›</li><li><code>Mutation</code>ï¼šç±»ä¼¼äº‹ä»¶ï¼Œæ˜¯æ”¹å˜ <code>Store</code> ä¸­æ•°æ®çš„å”¯ä¸€é€”å¾„ï¼Œåªèƒ½è¿›è¡ŒåŒæ­¥æ“ä½œï¼›</li><li><code>Action</code>ï¼šç±»ä¼¼ <code>Mutation</code>ï¼Œé€šè¿‡æäº¤ <code>Mutation</code> æ¥æ”¹å˜æ•°æ®ï¼Œè€Œä¸ç›´æ¥æ“ä½œ <code>State</code>ï¼Œå¯ä»¥è¿›è¡Œå¼‚æ­¥æ“ä½œï¼›</li><li><code>Module</code>ï¼šå½“ä¸šåŠ¡å¤æ‚çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠ <code>store</code> åˆ†æˆå¤šä¸ªæ¨¡å—ï¼Œä¾¿äºç»´æŠ¤ï¼›</li></ul><p>å¯¹äºè¿™å‡ ä¸ªæ¦‚å¿µæœ‰å„ç§å¯¹åº”çš„ <code>map</code> è¾…åŠ©å‡½æ•°ç”¨æ¥ç®€åŒ–æ“ä½œï¼Œæ¯”å¦‚ <code>mapState</code>ï¼Œå¦‚ä¸‹ä¸‰ç§å†™æ³•å…¶å®æ˜¯ä¸€ä¸ªæ„æ€ï¼Œéƒ½æ˜¯ä¸ºäº†ä» <code>state</code> ä¸­è·å–æ•°æ®ï¼Œå¹¶ä¸”é€šè¿‡è®¡ç®—å±æ€§è¿”å›ç»™ç»„ä»¶ä½¿ç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    count() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.$store.state.count</span><br><span class="line">    &#125;,</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">        count: <span class="function"><span class="params">state</span> =&gt;</span> state.count</span><br><span class="line">    &#125;),</span><br><span class="line">    ...mapState([<span class="string">&#x27;count&#x27;</span>]),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>åˆæ¯”å¦‚ <code>mapMutations</code>ï¼Œ ä»¥ä¸‹ä¸¤ç§å‡½æ•°çš„å®šä¹‰æ–¹å¼è¦å®ç°çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯è¦æäº¤ä¸€ä¸ª <code>mutation</code> å»æ”¹å˜ <code>state</code> ä¸­çš„æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    increment() &#123;</span><br><span class="line">        <span class="built_in">this</span>.$store.commit(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    ...mapMutations([<span class="string">&#x27;increment&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±ç”¨ä¸€ä¸ªæç®€çš„ä¾‹å­æ¥å±•ç¤º <code>Vuex</code> ä¸­ä»»æ„2ä¸ªç»„ä»¶é—´çš„çŠ¶æ€ç®¡ç†ã€‚<br>1ã€ æ–°å»º <code>store.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">        count: <span class="number">0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    mutations: &#123;</span><br><span class="line">        increment(state) &#123;</span><br><span class="line">            state.count++</span><br><span class="line">        &#125;,</span><br><span class="line">        decrement(state) &#123;</span><br><span class="line">            state.count--</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>2ã€ åˆ›å»ºä¸€ä¸ªå¸¦ <code>store</code> çš„ <code>Vue</code> å®ä¾‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./utils/store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    router,</span><br><span class="line">    store,</span><br><span class="line">    render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>3ã€ ä»»æ„ç»„ä»¶ <code>A</code> å®ç°ç‚¹å‡»é€’å¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>click to incrementï¼š&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123;mapState, mapMutations&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    computed: &#123;</span><br><span class="line"><span class="javascript">        ...mapState([<span class="string">&#x27;count&#x27;</span>])</span></span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line"><span class="javascript">        ...mapMutations([<span class="string">&#x27;increment&#x27;</span>])</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>4ã€ ä»»æ„ç»„ä»¶ <code>B</code> å®ç°ç‚¹å‡»é€’å‡</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;decrement&quot;</span>&gt;</span>click to decrementï¼š&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123;mapState, mapMutations&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    computed: &#123;</span><br><span class="line"><span class="javascript">        ...mapState([<span class="string">&#x27;count&#x27;</span>])</span></span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line"><span class="javascript">        ...mapMutations([<span class="string">&#x27;decrement&#x27;</span>])</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šåªæ˜¯ç”¨æœ€ç®€å•çš„ <code>vuex</code> é…ç½®å»å®ç°ç»„ä»¶é€šä¿¡ï¼Œå½“ç„¶çœŸå®é¡¹ç›®ä¸­çš„é…ç½®è‚¯å®šä¼šæ›´å¤æ‚ï¼Œæ¯”å¦‚éœ€è¦å¯¹ <code>State</code> æ•°æ®è¿›è¡ŒäºŒæ¬¡ç­›é€‰ä¼šç”¨åˆ° <code>Getter</code>ï¼Œç„¶åå¦‚æœéœ€è¦å¼‚æ­¥çš„æäº¤é‚£ä¹ˆéœ€è¦ä½¿ç”¨ <code>Action</code>ï¼Œå†æ¯”å¦‚å¦‚æœæ¨¡å—å¾ˆå¤šï¼Œå¯ä»¥å°† <code>store</code> åˆ†æ¨¡å—è¿›è¡ŒçŠ¶æ€ç®¡ç†ã€‚å¯¹äº <code>Vuex</code> æ›´å¤šå¤æ‚çš„æ“ä½œè¿˜æ˜¯å»ºè®®å»çœ‹<a href="https://vuex.vuejs.org/zh/">Vuex å®˜æ–¹æ–‡æ¡£</a>ï¼Œç„¶åå¤šå†™ä¾‹å­ã€‚</p><h3 id="Vue-observableå®ç°mini-vuex"><a href="#Vue-observableå®ç°mini-vuex" class="headerlink" title="Vue.observableå®ç°mini vuex"></a>Vue.observableå®ç°mini vuex</h3><p>è¿™æ˜¯ä¸€ä¸ª <code>Vue2.6</code> ä¸­æ–°å¢çš„ <code>API</code>ï¼Œç”¨æ¥è®©ä¸€ä¸ªå¯¹è±¡å¯ä»¥å“åº”ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹æ¥å®ç°ä¸€ä¸ªå°å‹çš„çŠ¶æ€ç®¡ç†å™¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> state = Vue.observable(&#123;</span><br><span class="line">    count: <span class="number">0</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    increment() &#123;</span><br><span class="line">        state.count++</span><br><span class="line">    &#125;</span><br><span class="line">    decrement() &#123;</span><br><span class="line">        state.count--</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- parent.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; state &#125; <span class="keyword">from</span> <span class="string">&#x27;../store&#x27;</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    computed: &#123;</span><br><span class="line">        count() &#123;</span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> state.count</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// child.vue</span></span><br><span class="line"><span class="keyword">import</span>  &#123; mutations &#125; <span class="keyword">from</span> <span class="string">&#x27;../store&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        handleClick() &#123;</span><br><span class="line">            mutations.increment()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="refs-children-parent-root"><a href="#refs-children-parent-root" class="headerlink" title="$refs/$children/$parent/$root"></a>$refs/$children/$parent/$root</h3><p>é€šè¿‡ç»™å­ç»„ä»¶å®šä¹‰ <code>ref</code> å±æ€§å¯ä»¥ä½¿ç”¨ <code>$refs</code> æ¥ç›´æ¥æ“ä½œå­ç»„ä»¶çš„æ–¹æ³•å’Œå±æ€§ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child</span> <span class="attr">ref</span>=<span class="string">&quot;list&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¯”å¦‚å­ç»„ä»¶æœ‰ä¸€ä¸ª <code>getList</code> æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è¿›è¡Œè°ƒç”¨ï¼Œå®ç°çˆ¶åˆ°å­çš„é€šä¿¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$refs.list.getList()</span><br></pre></td></tr></table></figure><p>é™¤äº† <code>$refs</code> å¤–ï¼Œå…¶ä»–3ä¸ªéƒ½æ˜¯è‡ª <code>Vue</code> å®ä¾‹åˆ›å»ºåå°±ä¼šè‡ªåŠ¨åŒ…å«çš„å±æ€§ï¼Œä½¿ç”¨å’Œä¸Šé¢çš„ç±»ä¼¼ã€‚</p><h2 id="6ç±»å¯ä»¥æŒæ¡çš„ä¿®é¥°ç¬¦"><a href="#6ç±»å¯ä»¥æŒæ¡çš„ä¿®é¥°ç¬¦" class="headerlink" title="6ç±»å¯ä»¥æŒæ¡çš„ä¿®é¥°ç¬¦"></a>6ç±»å¯ä»¥æŒæ¡çš„ä¿®é¥°ç¬¦</h2><h3 id="è¡¨å•ä¿®é¥°ç¬¦"><a href="#è¡¨å•ä¿®é¥°ç¬¦" class="headerlink" title="è¡¨å•ä¿®é¥°ç¬¦"></a>è¡¨å•ä¿®é¥°ç¬¦</h3><p>è¡¨å•ç±»çš„ä¿®é¥°ç¬¦éƒ½æ˜¯å’Œ <code>v-model</code> æ­é…ä½¿ç”¨çš„ï¼Œæ¯”å¦‚ï¼š<code>v-model.lazy</code>ã€<code>v-model-trim</code> ä»¥åŠ <code>v-model.number</code> ç­‰ã€‚</p><ul><li><p><code>.lazy</code>ï¼šå¯¹è¡¨å•è¾“å…¥çš„ç»“æœè¿›è¡Œå»¶è¿Ÿå“åº”ï¼Œé€šå¸¸å’Œ <code>v-model</code> æ­é…ä½¿ç”¨ã€‚æ­£å¸¸æƒ…å†µä¸‹åœ¨ <code>input</code> é‡Œè¾“å…¥å†…å®¹ä¼šåœ¨ <code>p</code> æ ‡ç­¾é‡Œå®æ—¶çš„å±•ç¤ºå‡ºæ¥ï¼Œä½†æ˜¯åŠ ä¸Š <code>.lazy</code> ååˆ™éœ€è¦åœ¨è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹çš„æ—¶å€™æ‰è§¦å‘å“åº”ã€‚</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model.lazy</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>.trim</code>ï¼šè¿‡æ»¤è¾“å…¥å†…å®¹çš„é¦–å°¾ç©ºæ ¼ï¼Œè¿™ä¸ªå’Œç›´æ¥æ‹¿åˆ°å­—ç¬¦ä¸²ç„¶åé€šè¿‡ <code>str.trim()</code> å»é™¤å­—ç¬¦ä¸²é¦–å°¾ç©ºæ ¼æ˜¯ä¸€ä¸ªæ„æ€ã€‚</p></li><li><p><code>.number</code>ï¼šå¦‚æœè¾“å…¥çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯æ•°å­—ï¼Œé‚£å°±åªèƒ½è¾“å…¥æ•°å­—ï¼Œå¦åˆ™ä»–è¾“å…¥çš„å°±æ˜¯æ™®é€šå­—ç¬¦ä¸²ã€‚</p></li></ul><h3 id="äº‹ä»¶ä¿®é¥°ç¬¦"><a href="#äº‹ä»¶ä¿®é¥°ç¬¦" class="headerlink" title="äº‹ä»¶ä¿®é¥°ç¬¦"></a>äº‹ä»¶ä¿®é¥°ç¬¦</h3><p><code>Vue</code> çš„äº‹ä»¶ä¿®é¥°ç¬¦æ˜¯ä¸“é—¨ä¸º <code>v-on</code> è®¾è®¡çš„ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š <code>@click.stop=&quot;handleClick&quot;</code>ï¼Œè¿˜èƒ½ä¸²è”ä½¿ç”¨ï¼š<code>@click.stop.prevent=&quot;handleClick&quot;</code>ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;doDiv&quot;</span>&gt;</span></span><br><span class="line">    click div</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;doP&quot;</span>&gt;</span>click p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p><code>.stop</code>ï¼šé˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œå’ŒåŸç”Ÿ <code>event.stopPropagation()</code> æ˜¯ä¸€æ ·çš„æ•ˆæœã€‚å¦‚ä¸Šä»£ç ï¼Œå½“ç‚¹å‡» <code>p</code> æ ‡ç­¾çš„æ—¶å€™ï¼Œ<code>div</code> ä¸Šçš„ç‚¹å‡»äº‹ä»¶ä¹Ÿä¼šè§¦å‘ï¼ŒåŠ ä¸Š <code>.stop</code> åäº‹ä»¶å°±ä¸ä¼šå¾€çˆ¶çº§ä¼ é€’ï¼Œé‚£çˆ¶çº§çš„äº‹ä»¶å°±ä¸ä¼šè§¦å‘äº†ã€‚</p></li><li><p><code>.prevent</code>ï¼šé˜»æ­¢é»˜è®¤äº‹ä»¶ï¼Œå’ŒåŸç”Ÿçš„ <code>event.preventDefault()</code> æ˜¯ä¸€æ ·çš„æ•ˆæœã€‚æ¯”å¦‚ä¸€ä¸ªå¸¦æœ‰ <code>href</code> çš„é“¾æ¥ä¸Šæ·»åŠ äº†ç‚¹å‡»äº‹ä»¶ï¼Œé‚£ä¹ˆäº‹ä»¶è§¦å‘çš„æ—¶å€™ä¹Ÿä¼šè§¦å‘é“¾æ¥çš„è·³è½¬ï¼Œä½†æ˜¯åŠ ä¸Š <code>.prevent</code> åå°±ä¸ä¼šè§¦å‘é“¾æ¥è·³è½¬äº†ã€‚</p></li><li><p><code>.capture</code>ï¼šé»˜è®¤çš„äº‹ä»¶æµæ˜¯ï¼šæ•è·é˜¶æ®µ-ç›®æ ‡é˜¶æ®µ-å†’æ³¡é˜¶æ®µï¼Œå³äº‹ä»¶ä»æœ€å…·ä½“ç›®æ ‡å…ƒç´ å¼€å§‹è§¦å‘ï¼Œç„¶åå¾€ä¸Šå†’æ³¡ã€‚è€ŒåŠ ä¸Š <code>.capture</code> ååˆ™æ˜¯åè¿‡æ¥ï¼Œå¤–å±‚å…ƒç´ å…ˆè§¦å‘äº‹ä»¶ï¼Œç„¶åå¾€æ·±å±‚ä¼ é€’ã€‚</p></li><li><p><code>.self</code>ï¼šåªè§¦å‘è‡ªèº«çš„äº‹ä»¶ï¼Œä¸ä¼šä¼ é€’åˆ°çˆ¶çº§ï¼Œå’Œ <code>.stop</code> çš„ä½œç”¨æœ‰ç‚¹ç±»ä¼¼ã€‚</p></li><li><p><code>.once</code>ï¼šåªä¼šè§¦å‘ä¸€æ¬¡è¯¥äº‹ä»¶ã€‚</p></li><li><p><code>.passive</code>ï¼šå½“é¡µé¢æ»šåŠ¨çš„æ—¶å€™å°±ä¼šä¸€ç›´è§¦å‘ <code>onScroll</code> äº‹ä»¶ï¼Œè¿™ä¸ªå…¶å®æ˜¯å­˜åœ¨æ€§èƒ½é—®é¢˜çš„ï¼Œå°¤å…¶æ˜¯åœ¨ç§»åŠ¨ç«¯ï¼Œå½“ç»™ä»–åŠ ä¸Š <code>.passive</code> åè§¦å‘çš„å°±ä¸ä¼šé‚£ä¹ˆé¢‘ç¹äº†ã€‚</p></li><li><p><code>.native</code>ï¼šç°åœ¨åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ <code>v-on</code> åªä¼šç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ (ç»„ä»¶ç”¨ <code>$emit</code> è§¦å‘çš„äº‹ä»¶)ã€‚å¦‚æœè¦ç›‘å¬æ ¹å…ƒç´ çš„åŸç”Ÿäº‹ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>.native</code> ä¿®é¥°ç¬¦ï¼Œæ¯”å¦‚å¦‚ä¸‹çš„ <code>el-input</code>ï¼Œå¦‚æœä¸åŠ  <code>.native</code> å½“å›è½¦çš„æ—¶å€™å°±ä¸ä¼šè§¦å‘ <code>search</code> å‡½æ•°ã€‚</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span> @<span class="attr">keyup.enter.native</span>=<span class="string">&quot;search&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><blockquote><p>ä¸²è”ä½¿ç”¨äº‹ä»¶ä¿®é¥°ç¬¦çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„å…¶é¡ºåºï¼ŒåŒæ ·2ä¸ªä¿®é¥°ç¬¦è¿›è¡Œä¸²è”ä½¿ç”¨ï¼Œé¡ºåºä¸åŒï¼Œç»“æœå¤§ä¸ä¸€æ ·ã€‚<code>@click.prevent.self</code> ä¼šé˜»æ­¢æ‰€æœ‰çš„ç‚¹å‡»äº‹ä»¶ï¼Œè€Œ <code>@click.self.prevent</code> åªä¼šé˜»æ­¢å¯¹è‡ªèº«å…ƒç´ çš„ç‚¹å‡»ã€‚</p></blockquote><h3 id="é¼ æ ‡æŒ‰é’®ä¿®é¥°ç¬¦"><a href="#é¼ æ ‡æŒ‰é’®ä¿®é¥°ç¬¦" class="headerlink" title="é¼ æ ‡æŒ‰é’®ä¿®é¥°ç¬¦"></a>é¼ æ ‡æŒ‰é’®ä¿®é¥°ç¬¦</h3><ul><li><code>.left</code>ï¼šé¼ æ ‡å·¦é”®ç‚¹å‡»ï¼›</li><li><code>.right</code>ï¼šé¼ æ ‡å³é”®ç‚¹å‡»ï¼›</li><li><code>.middle</code>ï¼šé¼ æ ‡ä¸­é”®ç‚¹å‡»ï¼›</li></ul><h3 id="é”®ç›˜æŒ‰é”®ä¿®é¥°ç¬¦"><a href="#é”®ç›˜æŒ‰é”®ä¿®é¥°ç¬¦" class="headerlink" title="é”®ç›˜æŒ‰é”®ä¿®é¥°ç¬¦"></a>é”®ç›˜æŒ‰é”®ä¿®é¥°ç¬¦</h3><p><code>Vue</code> æä¾›äº†ä¸€äº›å¸¸ç”¨çš„æŒ‰é”®ç ï¼š</p><ul><li><code>.enter</code></li><li><code>.tab</code></li><li><code>.delete</code> (æ•è·â€œåˆ é™¤â€å’Œâ€œé€€æ ¼â€é”®)</li><li><code>.esc</code></li><li><code>.space</code></li><li><code>.up</code></li><li><code>.down</code></li><li><code>.left</code></li><li><code>.right</code></li></ul><p>å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥å°† <code>KeyboardEvent.key</code> æš´éœ²çš„ä»»æ„æœ‰æ•ˆæŒ‰é”®åè½¬æ¢ä¸º <code>kebab-case</code> æ¥ä½œä¸ºä¿®é¥°ç¬¦ï¼Œæ¯”å¦‚å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„ä»£ç æ¥æŸ¥çœ‹å…·ä½“æŒ‰é”®çš„é”®åæ˜¯ä»€ä¹ˆï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup</span>=<span class="string">&quot;onKeyUp&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onKeyUp(event) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event.key)  <span class="comment">// æ¯”å¦‚é”®ç›˜çš„æ–¹å‘é”®å‘ä¸‹å°±æ˜¯ ArrowDown</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="exactä¿®é¥°ç¬¦"><a href="#exactä¿®é¥°ç¬¦" class="headerlink" title=".exactä¿®é¥°ç¬¦"></a>.exactä¿®é¥°ç¬¦</h3><p><code>.exact</code> ä¿®é¥°ç¬¦å…è®¸ä½ æ§åˆ¶ç”±ç²¾ç¡®çš„ç³»ç»Ÿä¿®é¥°ç¬¦ç»„åˆè§¦å‘çš„äº‹ä»¶ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å³ä½¿ Alt æˆ– Shift è¢«ä¸€åŒæŒ‰ä¸‹æ—¶ä¹Ÿä¼šè§¦å‘ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click.ctrl</span>=<span class="string">&quot;onClick&quot;</span>&gt;</span>A<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æœ‰ä¸”åªæœ‰ Ctrl è¢«æŒ‰ä¸‹çš„æ—¶å€™æ‰è§¦å‘ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click.ctrl.exact</span>=<span class="string">&quot;onCtrlClick&quot;</span>&gt;</span>A<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ²¡æœ‰ä»»ä½•ç³»ç»Ÿä¿®é¥°ç¬¦è¢«æŒ‰ä¸‹çš„æ—¶å€™æ‰è§¦å‘ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click.exact</span>=<span class="string">&quot;onClick&quot;</span>&gt;</span>A<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="syncä¿®é¥°ç¬¦"><a href="#syncä¿®é¥°ç¬¦" class="headerlink" title=".syncä¿®é¥°ç¬¦"></a>.syncä¿®é¥°ç¬¦</h3><p><code>.sync</code> ä¿®é¥°ç¬¦å¸¸è¢«ç”¨äºå­ç»„ä»¶æ›´æ–°çˆ¶ç»„ä»¶æ•°æ®ã€‚ç›´æ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- parent.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child</span> <span class="attr">:title.sync</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// child.vue</span></span><br><span class="line"><span class="built_in">this</span>.$emit(<span class="string">&#x27;update:title&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶å¯ä»¥ç›´æ¥é€šè¿‡ <code>update:title</code> çš„å½¢å¼è¿›è¡Œæ›´æ–°çˆ¶ç»„ä»¶ä¸­å£°æ˜äº† <code>.sync</code> çš„ <code>prop</code>ã€‚<br>ä¸Šé¢çˆ¶ç»„ä»¶ä¸­çš„å†™æ³•å…¶å®æ˜¯ä¸‹é¢è¿™ç§å†™æ³•çš„ç®€å†™ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child</span> <span class="attr">:title</span>=<span class="string">&quot;title&quot;</span> @<span class="attr">update:title</span>=<span class="string">&quot;title = $event&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„å¸¦æœ‰ .sync ä¿®é¥°ç¬¦çš„ v-bind ä¸èƒ½å’Œè¡¨è¾¾å¼ä¸€èµ·ä½¿ç”¨</p></blockquote><p>å¦‚æœéœ€è¦è®¾ç½®å¤šä¸ª <code>prop</code>ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child</span> <span class="attr">:name.sync</span>=<span class="string">&quot;name&quot;</span> <span class="attr">:age.sync</span>=<span class="string">&quot;age&quot;</span> <span class="attr">:sex.sync</span>=<span class="string">&quot;sex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡ <code>v-bind.sync</code> ç®€å†™æˆè¿™æ ·ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child</span> <span class="attr">v-bind.sync</span>=<span class="string">&quot;person&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">person: &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou&#x27;</span>,</span><br><span class="line">    age: <span class="number">21</span>,</span><br><span class="line">    sex: <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Vue</code> å†…éƒ¨ä¼šè‡ªè¡Œè¿›è¡Œè§£ææŠŠ <code>person</code> å¯¹è±¡é‡Œçš„æ¯ä¸ªå±æ€§éƒ½ä½œä¸ºç‹¬ç«‹çš„ <code>prop</code> ä¼ é€’è¿›å»ï¼Œå„è‡ªæ·»åŠ ç”¨äºæ›´æ–°çš„ <code>v-on</code> ç›‘å¬å™¨ã€‚è€Œä»å­ç»„ä»¶è¿›è¡Œæ›´æ–°çš„æ—¶å€™è¿˜æ˜¯ä¿æŒä¸å˜ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$emit(<span class="string">&#x27;update:name&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="6ç§æ–¹å¼ç¼–å†™å¯å¤ç”¨æ¨¡å—"><a href="#6ç§æ–¹å¼ç¼–å†™å¯å¤ç”¨æ¨¡å—" class="headerlink" title="6ç§æ–¹å¼ç¼–å†™å¯å¤ç”¨æ¨¡å—"></a>6ç§æ–¹å¼ç¼–å†™å¯å¤ç”¨æ¨¡å—</h2><p>ä»Šå¤©éœ€æ±‚è¯„å®¡äº†ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦å®ç°ä¸€ä¸ªè¯¦æƒ…é¡µï¼Œè¿™ä¸ªè¯¦æƒ…é¡µæ™®é€šç”¨æˆ·å’Œç®¡ç†å‘˜éƒ½èƒ½è¿›å»ï¼Œä½†æ˜¯å±•ç¤ºçš„æ•°æ®æœ‰ç¨æœ‰ä¸åŒï¼Œä½†ç»å¤§éƒ¨åˆ†æ˜¯ä¸€æ ·çš„ï¼›æœ€ä¸»è¦çš„åŒºåˆ«æ˜¯è¯¦æƒ…å¯¹äºæ™®é€šç”¨æˆ·æ˜¯çº¯å±•ç¤ºï¼Œè€Œå¯¹äºç®¡ç†å‘˜è¦æ±‚èƒ½å¤Ÿç¼–è¾‘ï¼Œç„¶åç®¡ç†å‘˜è¿˜æœ‰ä¸€äº›åˆ«çš„æŒ‰é’®æƒé™ç­‰ã€‚éœ€æ±‚çœ‹åˆ°è¿™é‡Œï¼Œå¦‚æœåœ¨æ’æœŸçš„æ—¶å€™æŠŠç”¨æˆ·çš„è¯¦æƒ…åˆ†ç»™å¼€å‘Aåšï¼Œè€ŒæŠŠç®¡ç†å‘˜çš„è¯¦æƒ…åˆ†ç»™Bå»åšï¼Œé‚£è¿™æ ·åšçš„ç»“æœå°±æ˜¯å¼€å‘Aå†™äº†ä¸€ä¸ªè¯¦æƒ…é¡µï¼Œå¼€å‘Bå†™äº†ä¸€ä¸ªè¯¦æƒ…é¡µï¼Œè¿™åœ¨å¼€å‘é˜¶æ®µã€ææµ‹åçš„ä¿®æ”¹ <code>bug</code> é˜¶æ®µä»¥åŠåæœŸè¿­ä»£é˜¶æ®µï¼Œéƒ½éœ€è¦åŒæ—¶ç»´æŠ¤è¿™ 2 ä¸ªæ–‡ä»¶ï¼Œæµªè´¹äº†æ—¶é—´æµªè´¹äº†äººåŠ›ï¼Œæ‰€ä»¥ä½ å¯ä»¥ä»ä¸­æ„è¯†åˆ°ç¼–å†™å¯å¤ç”¨æ¨¡å—çš„é‡è¦æ€§ã€‚</p><p>è€Œ <code>Vue</code> ä½œè€…å°¤å¤§ä¸ºäº†è®©å¼€å‘è€…æ›´å¥½çš„ç¼–å†™å¯å¤ç”¨æ¨¡å—ï¼Œæä¾›äº†å¾ˆå¤šçš„æ‰‹æ®µï¼Œæ¯”å¦‚ï¼šç»„ä»¶ã€è‡ªå®šä¹‰æŒ‡ä»¤ã€æ¸²æŸ“å‡½æ•°ã€æ’ä»¶ä»¥åŠè¿‡æ»¤å™¨ç­‰ã€‚</p><h3 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h3><p>ç»„ä»¶æ˜¯ <code>Vue</code> ä¸­æœ€ç²¾é«“çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å¹³æ—¶ç¼–å†™å¯å¤ç”¨æ¨¡å—æœ€å¸¸ç”¨çš„æ‰‹æ®µï¼Œä½†æ˜¯ç”±äºè¿™å—å†…å®¹ç¯‡å¹…å¾ˆå¤šï¼Œæ‰€ä»¥ä¸åœ¨è¿™é‡Œå±•å¼€ï¼Œåç»­ä¼šå†™ç›¸å…³çš„å†…å®¹è¿›è¡Œè¯¦è¿°ã€‚</p><h3 id="ä½¿ç”¨æ··å…¥mixins"><a href="#ä½¿ç”¨æ··å…¥mixins" class="headerlink" title="ä½¿ç”¨æ··å…¥mixins"></a>ä½¿ç”¨æ··å…¥mixins</h3><p>ä»€ä¹ˆæ˜¯æ··å…¥å‘¢ï¼Ÿ ä»ä»£ç ç»“æ„ä¸Šæ¥çœ‹ï¼Œæ··å…¥å…¶å®å°±æ˜¯åŠä¸ªç»„ä»¶ï¼Œä¸€ä¸ª <code>Vue</code> ç»„ä»¶å¯ä»¥åŒ…æ‹¬ <code>template</code>ã€<code>script</code> å’Œ <code>style</code> ä¸‰éƒ¨åˆ†ï¼Œè€Œæ··å…¥å…¶å®å°±æ˜¯ <code>script</code> é‡Œé¢çš„å†…å®¹ã€‚ä¸€ä¸ªæ··å…¥å¯¹è±¡åŒ…å«ä»»æ„ç»„ä»¶é€‰é¡¹ï¼Œæ¯”å¦‚ <code>data</code>ã€<code>methods</code>ã€<code>computed</code>ã€<code>watch</code> ã€ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ã€ç”šè‡³æ˜¯ <code>mixins</code> è‡ªå·±ç­‰ï¼Œæ··å…¥è¢«è®¾è®¡å‡ºæ¥å°±æ˜¯æ—¨åœ¨æé«˜ä»£ç çš„çµæ´»æ€§ã€å¯å¤ç”¨æ€§ã€‚</p><p>ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨æ··å…¥å‘¢ï¼Ÿå½“å¯å¤ç”¨é€»è¾‘åªæ˜¯ <code>JS</code> ä»£ç å±‚é¢çš„ï¼Œè€Œæ—  <code>template</code> çš„æ—¶å€™å°±å¯ä»¥è€ƒè™‘ç”¨æ··å…¥äº†ã€‚æ¯”å¦‚éœ€è¦è®°å½•ç”¨æˆ·åœ¨é¡µé¢çš„åœç•™çš„æ—¶é—´ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™æ®µé€»è¾‘æŠ½å‡ºæ¥æ”¾åœ¨ <code>mixins</code> é‡Œï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mixins.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> statMixin = &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        enterPage() &#123;&#125;,</span><br><span class="line">        leavePage() &#123;&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        <span class="built_in">this</span>.enterPage()</span><br><span class="line">    &#125;,</span><br><span class="line">    beforeDestroyed() &#123;</span><br><span class="line">        <span class="built_in">this</span>.leavePage()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨éœ€è¦ç»Ÿè®¡é¡µé¢åœç•™æ—¶é—´çš„åœ°æ–¹åŠ ä¸Šï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; statMixin &#125; <span class="keyword">from</span> <span class="string">&#x27;../common/mixins&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    mixins: [statMixin]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ··å…¥çš„æ—¶å€™è¦æ³¨æ„å’Œç»„ä»¶é€‰é¡¹çš„åˆå¹¶è§„åˆ™ï¼Œå¯ä»¥åˆ†ä¸ºå¦‚ä¸‹ä¸‰ç±»ï¼š</p><ul><li><p><code>data</code> å°†è¿›è¡Œé€’å½’åˆå¹¶ï¼Œå¯¹äºé”®åå†²çªçš„ä»¥ç»„ä»¶æ•°æ®ä¸ºå‡†ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">// mixinA çš„ data</span></span><br><span class="line">   data() &#123;</span><br><span class="line">       obj: &#123;</span><br><span class="line">           name: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">       &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// component A</span></span><br><span class="line">   <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">       mixins: [mixinA],</span><br><span class="line">       data()&#123;</span><br><span class="line">           obj: &#123;</span><br><span class="line">               name: <span class="string">&#x27;bubuzou&#x27;</span>,</span><br><span class="line">               age: <span class="number">21</span></span><br><span class="line">           &#125;,</span><br><span class="line">       &#125;,</span><br><span class="line">       mounted() &#123;</span><br><span class="line">           <span class="built_in">console</span>.log( <span class="built_in">this</span>.obj )  <span class="comment">// &#123; name: &#x27;bubuzou&#x27;, &#x27;age&#x27;: 21 &#125;</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li><li><p>å¯¹äºç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°å°†ä¼šåˆå¹¶æˆä¸€ä¸ªæ•°ç»„ï¼Œæ··å…¥å¯¹è±¡çš„é’©å­å°†å…ˆè¢«æ‰§è¡Œï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mixin A</span></span><br><span class="line"><span class="keyword">const</span> mixinA = &#123;</span><br><span class="line">    created() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">&#x27;ç¬¬ä¸€ä¸ªæ‰§è¡Œ&#x27;</span> )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mixin B</span></span><br><span class="line"><span class="keyword">const</span> mixinB = &#123;</span><br><span class="line">    mixins: [mixinA]</span><br><span class="line">    created() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">&#x27;ç¬¬äºŒä¸ªæ‰§è¡Œ&#x27;</span> )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// component A</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    mixins: [mixinB]</span><br><span class="line">    created() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">&#x27;æœ€åä¸€ä¸ªæ‰§è¡Œ&#x27;</span> )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å€¼ä¸ºå¯¹è±¡çš„é€‰é¡¹ï¼Œä¾‹å¦‚ <code>methods</code>ã€<code>components</code> å’Œ <code>directives</code>ï¼Œå°†è¢«åˆå¹¶ä¸ºåŒä¸€ä¸ªå¯¹è±¡ã€‚ä¸¤ä¸ªå¯¹è±¡é”®åå†²çªæ—¶ï¼Œå–ç»„ä»¶å¯¹è±¡çš„é”®å€¼å¯¹ã€‚</p></li></ul><h3 id="è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="è‡ªå®šä¹‰æŒ‡ä»¤"></a>è‡ªå®šä¹‰æŒ‡ä»¤</h3><p>é™¤äº† <code>Vue</code> å†…ç½®çš„ä¸€äº›æŒ‡ä»¤æ¯”å¦‚ <code>v-model</code>ã€<code>v-if</code> ç­‰ï¼Œ<code>Vue</code> è¿˜å…è®¸æˆ‘ä»¬è‡ªå®šä¹‰æŒ‡ä»¤ã€‚åœ¨ <code>Vue2.0</code> ä¸­ï¼Œä»£ç å¤ç”¨å’ŒæŠ½è±¡çš„ä¸»è¦å½¢å¼æ˜¯ç»„ä»¶ã€‚ç„¶è€Œï¼Œæœ‰çš„æƒ…å†µä¸‹ï¼Œä½ ä»ç„¶éœ€è¦å¯¹æ™®é€š <code>DOM</code> å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œï¼Œè¿™æ—¶å€™å°±ä¼šç”¨åˆ°è‡ªå®šä¹‰æŒ‡ä»¤ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ä¸€ä¸ªæŒ‡ä»¤æ¥æ§åˆ¶æŒ‰é’®çš„æƒé™ã€‚æˆ‘ä»¬æœŸæœ›è®¾è®¡ä¸€ä¸ªå¦‚ä¸‹å½¢å¼çš„æŒ‡ä»¤æ¥æ§åˆ¶æŒ‰é’®æƒé™ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-auth</span>=<span class="string">&quot;[&#x27;user&#x27;]&quot;</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡åœ¨æŒ‰é’®çš„æŒ‡ä»¤é‡Œä¼ å…¥ä¸€ç»„æƒé™ï¼Œå¦‚æœè¯¥æŒ‰é’®åªæœ‰ <code>admin</code> æƒé™æ‰å¯ä»¥æäº¤ï¼Œè€Œæˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªåˆ«çš„æƒé™ï¼Œæ¯”å¦‚ <code>user</code>ï¼Œé‚£è¿™ä¸ªæŒ‰é’®å°±ä¸åº”è¯¥æ˜¾ç¤ºäº†ã€‚<br>æ¥ä¸‹æ¥æˆ‘ä»¬å»æ³¨å†Œä¸€ä¸ªå…¨å±€çš„æŒ‡ä»¤ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// auth.js</span></span><br><span class="line"><span class="keyword">const</span> AUTH_LIST = [<span class="string">&#x27;admin&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkAuth</span>(<span class="params">auths</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> AUTH_LIST.some(<span class="function"><span class="params">item</span> =&gt;</span> auths.includes(item))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">install</span>(<span class="params">Vue, options = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">    Vue.directive(<span class="string">&#x27;auth&#x27;</span>, &#123;</span><br><span class="line">        inserted(el, binding) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!checkAuth(binding.value)) &#123;</span><br><span class="line">                el.parentNode &amp;&amp; el.parentNode.removeChild(el)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123; install &#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬éœ€è¦åœ¨ <code>main.js</code> é‡Œé€šè¿‡å®‰è£…æ’ä»¶çš„æ–¹å¼æ¥å¯ç”¨è¿™ä¸ªæŒ‡ä»¤ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Auth <span class="keyword">from</span> <span class="string">&#x27;./utils/auth&#x27;</span></span><br><span class="line">Vue.use(Auth)</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ¸²æŸ“å‡½æ•°"><a href="#ä½¿ç”¨æ¸²æŸ“å‡½æ•°" class="headerlink" title="ä½¿ç”¨æ¸²æŸ“å‡½æ•°"></a>ä½¿ç”¨æ¸²æŸ“å‡½æ•°</h3><p>è¿™é‡Œå°†ä½¿ç”¨æ¸²æŸ“å‡½æ•°å®ç°ä¸Šé¢ä»‹ç»è¿‡çš„çš„æƒé™æŒ‰é’®ã€‚<br>ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼ŒæŠŠéœ€è¦æ§åˆ¶æƒé™çš„æŒ‰é’®åŒ…åœ¨æƒé™ç»„ä»¶ <code>authority</code> é‡Œé¢ï¼Œå¦‚æœæœ‰è¯¥æƒé™å°±æ˜¾ç¤ºï¼Œæ²¡æœ‰å°±ä¸æ˜¾ç¤ºã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">authority</span> <span class="attr">:auth</span>=<span class="string">&quot;[&#x27;admin&#x27;]&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">authority</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬ç”¨æ¸²æŸ“å‡½æ•°å»å®ç°ä¸€ä¸ª <code>authority</code> ç»„ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">const</span> AUTH_LIST = [<span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;org&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkAuth</span>(<span class="params">auths</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> AUTH_LIST.some(<span class="function"><span class="params">item</span> =&gt;</span> auths.includes(item))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    functional: <span class="literal">true</span>,</span><br><span class="line">    props: &#123;</span><br><span class="line">        auth: &#123;</span><br><span class="line">            type: <span class="built_in">Array</span>,</span><br><span class="line">            required: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    render(h, context) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; props,  scopedSlots&#125; = context</span><br><span class="line">        <span class="keyword">return</span> checkAuth(props.auth) ? scopedSlots.default() : <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å…¨å±€æ³¨å†Œè¿™ä¸ªç»„ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> Authority <span class="keyword">from</span> <span class="string">&#x27;./components/authority&#x27;</span></span><br><span class="line">Vue.component(<span class="string">&#x27;authority&#x27;</span>, Authority)</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨è¿‡æ»¤å™¨"><a href="#ä½¿ç”¨è¿‡æ»¤å™¨" class="headerlink" title="ä½¿ç”¨è¿‡æ»¤å™¨"></a>ä½¿ç”¨è¿‡æ»¤å™¨</h3><p><code>Vue</code> æä¾›äº†è‡ªå®šä¹‰è¿‡æ»¤å™¨çš„åŠŸèƒ½ï¼Œä¸»è¦åº”ç”¨åœºæ™¯æ˜¯æƒ³è¦å°†æ•°æ®ä»¥æŸç§æ ¼å¼å±•ç¤ºå‡ºæ¥ï¼Œè€ŒåŸå§‹æ•°æ®åˆä¸ç¬¦åˆè¿™ç§æ ¼å¼çš„æ—¶å€™ã€‚æ¯”å¦‚æœ‰ä¸€ç»„å…³äºäººçš„æ•°æ®ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">    name: &#x27;å¼ èŒ‚&#x27;,</span><br><span class="line">    population: &#x27;young&#x27;,</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    name: &#x27;ç‹ä¸½&#x27;,</span><br><span class="line">    population: &#x27;middle&#x27;,</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    name: &#x27;éƒé¹ç¨‹&#x27;,</span><br><span class="line">    population: &#x27;child&#x27;,</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure><p>å…¶ä¸­æœ‰ä¸€é¡¹æ˜¯å…³äºæŒ‰ç…§å¹´é¾„åˆ’åˆ†çš„ç¾¤ä½“ç±»å‹ <code>population</code>ï¼Œè€Œå®ƒæ˜¯ç”¨ <code>code</code> è¿›è¡Œæ ‡è¯†çš„ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨å±•ç¤ºçš„æ—¶å€™èƒ½å¤Ÿæ˜¾ç¤ºæˆå¯¹åº”çš„ä¸­æ–‡æ„æ€ï¼Œæ¯”å¦‚ <code>young</code> æ˜¾ç¤ºæˆé’å¹´ã€‚é‚£æˆ‘ä»¬å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªå¦‚ä¸‹çš„å±€éƒ¨è¿‡æ»¤å™¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    filters: &#123;</span><br><span class="line">        popuFilters(value) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!value) &#123; <span class="keyword">return</span> <span class="string">&#x27;æœªçŸ¥&#x27;</span> &#125;</span><br><span class="line">            <span class="keyword">let</span> index = [<span class="string">&#x27;child&#x27;</span>, <span class="string">&#x27;lad&#x27;</span>, <span class="string">&#x27;young&#x27;</span>, <span class="string">&#x27;middle&#x27;</span>, <span class="string">&#x27;wrinkly&#x27;</span>].indexOf(value)</span><br><span class="line">            <span class="keyword">return</span> index &gt; <span class="number">0</span> &amp;&amp; [<span class="string">&#x27;å„¿ç«¥&#x27;</span>, <span class="string">&#x27;å°‘å¹´&#x27;</span>, <span class="string">&#x27;é’å¹´&#x27;</span>, <span class="string">&#x27;ä¸­å¹´&#x27;</span>, <span class="string">&#x27;è€å¹´&#x27;</span>][index] || <span class="string">&#x27;æœªçŸ¥&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¿‡æ»¤å™¨çš„æ—¶å€™åªè¦åœ¨ <code>template</code> ä¸­è¿™æ ·ä½¿ç”¨å³å¯ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; item.population | popuFilters &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰æ’ä»¶"><a href="#è‡ªå®šä¹‰æ’ä»¶" class="headerlink" title="è‡ªå®šä¹‰æ’ä»¶"></a>è‡ªå®šä¹‰æ’ä»¶</h3><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°è£…çš„å†…å®¹å¯èƒ½ä¸éœ€è¦ä½¿ç”¨è€…å¯¹å…¶å†…éƒ¨ä»£ç ç»“æ„è¿›è¡Œäº†è§£ï¼Œå…¶åªéœ€è¦ç†Ÿæ‚‰æˆ‘ä»¬æä¾›å‡ºæ¥çš„ç›¸åº”æ–¹æ³•å’Œ <code>api</code> å³å¯ï¼Œè¿™éœ€è¦æˆ‘ä»¬æ›´ç³»ç»Ÿæ€§çš„å°†å…¬ç”¨éƒ¨åˆ†é€»è¾‘å°è£…æˆæ’ä»¶ï¼Œæ¥ä¸ºé¡¹ç›®æ·»åŠ å…¨å±€åŠŸèƒ½ï¼Œæ¯”å¦‚å¸¸è§çš„ <code>loading</code> åŠŸèƒ½ã€å¼¹æ¡†åŠŸèƒ½ç­‰ã€‚</p><p>å¼€å‘ <code>Vue</code> çš„æ’ä»¶åº”è¯¥æš´éœ²ä¸€ä¸ª <code>install</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>Vue</code> æ„é€ å™¨ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯é€‰çš„é€‰é¡¹å¯¹è±¡ã€‚å¯ä»¥é€šè¿‡å¦‚ä¸‹4ç§æ–¹å¼æ¥è‡ªå®šä¹‰æ’ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">MyPlugin.install = <span class="function"><span class="keyword">function</span> (<span class="params">Vue, options</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1. æ·»åŠ å…¨å±€æ–¹æ³•æˆ– property</span></span><br><span class="line">  Vue.myGlobalMethod = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// é€»è¾‘...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. æ·»åŠ å…¨å±€èµ„æº</span></span><br><span class="line">  Vue.directive(<span class="string">&#x27;my-directive&#x27;</span>, &#123;</span><br><span class="line">    bind (el, binding, vnode, oldVnode) &#123;</span><br><span class="line">      <span class="comment">// é€»è¾‘...</span></span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. æ³¨å…¥ç»„ä»¶é€‰é¡¹</span></span><br><span class="line">  Vue.mixin(&#123;</span><br><span class="line">    created: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// é€»è¾‘...</span></span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 4. æ·»åŠ å®ä¾‹æ–¹æ³•</span></span><br><span class="line">  Vue.prototype.$myMethod = <span class="function"><span class="keyword">function</span> (<span class="params">methodOptions</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// é€»è¾‘...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åéœ€è¦åœ¨å…¥å£æ–‡ä»¶ï¼Œæ¯”å¦‚ <code>main.js</code> ä¸­æ³¨å†Œæ’ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> MyPlugin <span class="keyword">from</span> <span class="string">&#x27;./plugins/plugins.js&#x27;</span></span><br><span class="line">Vue.use(MyPlugin)</span><br></pre></td></tr></table></figure><h2 id="3ç§æ–¹å¼æ‰‹å†™ä¼˜é›…ä»£ç "><a href="#3ç§æ–¹å¼æ‰‹å†™ä¼˜é›…ä»£ç " class="headerlink" title="3ç§æ–¹å¼æ‰‹å†™ä¼˜é›…ä»£ç "></a>3ç§æ–¹å¼æ‰‹å†™ä¼˜é›…ä»£ç </h2><p>å¹³æ—¶å†™é¡¹ç›®çš„æ—¶å€™æˆ‘ä»¬éƒ½æ˜¯åœ¨ç¬¬ä¸€æ—¶é—´å®Œæˆéœ€æ±‚åŠŸèƒ½çš„å¼€å‘ã€ææµ‹ä¿®æ”¹ <code>bug</code> ç­‰ï¼Œç„¶åå¼€å¼€å¿ƒå¿ƒçš„ç­‰å¾…ç€å‘å¸ƒç”Ÿäº§ä»¥ä¸ºæ²¡å•¥äº‹æƒ…äº†ã€‚å…¶å®å›è¿‡å¤´æ¥ç»†ç»†çš„çœ‹æˆ‘ä»¬å¹³æ—¶å†™çš„ä»£ç ï¼Œå¯èƒ½ä¼šå‘ç°å¾ˆå¤šåœ°æ–¹éƒ½æ˜¯å€¼å¾—ä¼˜åŒ–çš„ï¼Œæ¯”å¦‚å¯¹äºå¾ˆå¤šé‡å¤æ€§å¾ˆå¼ºçš„ä»£ç ï¼Œæ¯”å¦‚å¯¹äºæŸäº›å†™å¾—å¾ˆç¹æ‚çš„åœ°æ–¹ã€‚ä¼˜é›…çš„ä»£ç å¯ä»¥åŒ–æœºæ¢°ä¸ºè‡ªåŠ¨ã€åŒ–ç¹ä¸ºç®€ï¼Œçœ‹äººå¼€äº†å¦‚æ²æ˜¥é£ï¼Œå¿ƒæƒ…å¤§å¥½ã€‚è¿™é‡Œåˆ—äº†å‡ ä¸ªåœ¨ <code>Vue</code> ä¸­ä¸€å®šä¼šé‡åˆ°çš„é—®é¢˜ï¼Œç„¶åé€šè¿‡ä¼˜é›…çš„æ–¹å¼è¿›è¡Œè§£å†³ã€‚</p><h3 id="è‡ªåŠ¨åŒ–å¯¼å…¥æ¨¡å—"><a href="#è‡ªåŠ¨åŒ–å¯¼å…¥æ¨¡å—" class="headerlink" title="è‡ªåŠ¨åŒ–å¯¼å…¥æ¨¡å—"></a>è‡ªåŠ¨åŒ–å¯¼å…¥æ¨¡å—</h3><p>åœ¨å¼€å‘ä¸€ä¸ªç¨å¾®å¤§ç‚¹çš„é¡¹ç›®çš„æ—¶å€™ï¼Œä¼šä¹ æƒ¯å°†è·¯ç”±æŒ‰ç…§æ¨¡å—æ¥åˆ’åˆ†ï¼Œç„¶åå°±å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹è¿™ç§ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">// å¯¼å…¥äº†ä¸€å¤§å †è·¯ç”±æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> mediator <span class="keyword">from</span> <span class="string">&#x27;./mediator&#x27;</span></span><br><span class="line"><span class="keyword">import</span> judges <span class="keyword">from</span> <span class="string">&#x27;./judges&#x27;</span></span><br><span class="line"><span class="keyword">import</span> disputeMediation <span class="keyword">from</span> <span class="string">&#x27;./disputeMediation&#x27;</span></span><br><span class="line"><span class="keyword">import</span> onlineMediation <span class="keyword">from</span> <span class="string">&#x27;./onlineMediation&#x27;</span></span><br><span class="line"><span class="keyword">import</span> useraction <span class="keyword">from</span> <span class="string">&#x27;./useraction&#x27;</span></span><br><span class="line"><span class="keyword">import</span> organcenter <span class="keyword">from</span> <span class="string">&#x27;./organcenter&#x27;</span></span><br><span class="line"><span class="keyword">import</span> admin <span class="keyword">from</span> <span class="string">&#x27;./admin&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> routeList = []</span><br><span class="line">routeList.push(mediator, judges, disputeMediation, onlineMediation, useraction, organcenter, admin)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">    mode: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">    routes: routeList,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å…¶å®çœŸå®çš„è¿œè¿œä¸æ­¢è¿™ä¹ˆç‚¹ï¼Œå°±æˆ‘æœ¬åœ°é¡¹ç›®è€Œè¨€å°±æœ‰20å‡ ä¸ªè·¯ç”±æ–‡ä»¶ï¼Œå†™äº†ä¸€å¤§å †çš„å¯¼å…¥ä»£ç ï¼Œæ˜¾å¾—å¾ˆè‡ƒè‚¿ï¼Œæ›´æ— å¥ˆçš„æ˜¯æ¯å½“éœ€è¦æ–°å¢ä¸€ä¸ªè·¯ç”±æ¨¡å—ï¼Œè¿˜å¾—å†æ¬¡ <code>import</code> å†æ¬¡ <code>push</code>ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆè‡ªç„¶æ˜¯æœ‰çš„ã€‚</p><p>åˆ©ç”¨ <code>webpack</code> çš„ <a href="https://webpack.js.org/guides/dependency-management/#requirecontext"><code>require.context</code></a> å°±å¯ä»¥å¾ˆä¼˜é›…çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>.context(</span><br><span class="line">    directory,  <span class="comment">// æœç´¢çš„ç›®å½•</span></span><br><span class="line">    useSubdirectories = <span class="literal">true</span>,  <span class="comment">// æ˜¯å¦æœç´¢å­ç›®å½•</span></span><br><span class="line">    regExp = <span class="regexp">/^\.\/.*$/</span>,  <span class="comment">// åŒ¹é…çš„ç›®æ ‡æ–‡ä»¶æ ¼å¼</span></span><br><span class="line">    mode = <span class="string">&#x27;sync&#x27;</span>  <span class="comment">// åŒæ­¥è¿˜æ˜¯å¼‚æ­¥</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™ä¸ªè¯­æ³•ï¼Œæˆ‘ä»¬å°±èƒ½å¾ˆå®¹æ˜“çš„å†™å‡ºä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> routeList = []</span><br><span class="line"><span class="keyword">let</span> importAll = <span class="built_in">require</span>.context(<span class="string">&#x27;@/publicResource/router&#x27;</span>, <span class="literal">false</span>, <span class="regexp">/\.js$/</span>)</span><br><span class="line">importAll.keys().map(<span class="function"><span class="params">path</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å› ä¸º index.js ä¹Ÿåœ¨ @/publicResource/router ç›®å½•ä¸‹ï¼Œæ‰€ä»¥éœ€è¦æ’é™¤</span></span><br><span class="line">    <span class="keyword">if</span> (!path.includes(<span class="string">&#x27;index.js&#x27;</span>)) &#123;</span><br><span class="line">        <span class="comment">//å…¼å®¹å¤„ç†ï¼š.default è·å– ES6 è§„èŒƒæš´éœ²çš„å†…å®¹; åè€…è·å– commonJS è§„èŒƒæš´éœ²çš„å†…å®¹</span></span><br><span class="line">        <span class="keyword">let</span> router = importAll(path).default || importAll(path)</span><br><span class="line">        routeList(router)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">    mode: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">    routes: routeList,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å…¶å®ä¸ä»…ä»…åªæ˜¯ç”¨åœ¨å¯¼å…¥è·¯ç”±æ¨¡å—è¿™é‡Œï¼Œå¯¹äºé¡¹ç›®é‡Œä»»ä½•éœ€è¦å¯¼å…¥å¤§é‡æœ¬åœ°æ¨¡å—çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼æ¥è§£å†³ã€‚</p><h3 id="æ¨¡å—åŒ–æ³¨å†Œæ’ä»¶"><a href="#æ¨¡å—åŒ–æ³¨å†Œæ’ä»¶" class="headerlink" title="æ¨¡å—åŒ–æ³¨å†Œæ’ä»¶"></a>æ¨¡å—åŒ–æ³¨å†Œæ’ä»¶</h3><p>ç›¸ä¿¡å†™ <code>Vue</code> çš„åŒå­¦ä»¬éƒ½çŸ¥é“ <code>element-ui</code> è¿™ä¸ªç»„ä»¶åº“ï¼Œåœ¨ä½¿ç”¨è¿™ä¸ªç»„ä»¶åº“çš„æ—¶å€™å¤§éƒ¨åˆ†éƒ½æ˜¯åªä½¿ç”¨æŸäº›ä¸ªåˆ«çš„ç»„ä»¶ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šéƒ½æ˜¯æŒ‰éœ€å¼•å…¥éœ€è¦çš„ç»„ä»¶ï¼Œç„¶åå°±æœ‰å¦‚ä¸‹ä¸€å † <code>Vue.use()</code> çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    Input,</span><br><span class="line">    Radio,</span><br><span class="line">    RadioGroup,</span><br><span class="line">    Checkbox,</span><br><span class="line">    CheckboxGroup,</span><br><span class="line">    Select</span><br><span class="line">    <span class="comment">// è¿˜æœ‰å¾ˆå¤šç»„ä»¶</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(Input)</span><br><span class="line">Vue.use(Radio)</span><br><span class="line">Vue.use(RadioGroup)</span><br><span class="line">Vue.use(Checkbox)</span><br><span class="line">Vue.use(CheckboxGroup)</span><br><span class="line">Vue.use(Select)</span><br></pre></td></tr></table></figure><p>è¿™æ ·å†™æ˜¯æ²¡ä»»ä½•é—®é¢˜çš„ï¼Œå°±æ˜¯çœ‹ç€ä¸å¤Ÿç®€æ´èˆ’æœï¼Œé‚£æ›´ä¼˜é›…çš„åšæ³•æ˜¯æŠŠè¿™å—é€»è¾‘æŠ½åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œç„¶åé€šè¿‡æ³¨å†Œæ’ä»¶çš„æ–¹å¼æ¥ä½¿ç”¨ä»–ä»¬ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// elementComponent.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    Input,</span><br><span class="line">    Radio,</span><br><span class="line">    RadioGroup,</span><br><span class="line">    Checkbox,</span><br><span class="line">    CheckboxGroup,</span><br><span class="line">    Select</span><br><span class="line">    <span class="comment">// è¿˜æœ‰å¾ˆå¤šç»„ä»¶</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> components = &#123;</span><br><span class="line">    Input,</span><br><span class="line">    Radio,</span><br><span class="line">    RadioGroup,</span><br><span class="line">    Checkbox,</span><br><span class="line">    CheckboxGroup,</span><br><span class="line">    Select</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">install</span>(<span class="params">Vue</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">Object</span>.keys(components).forEach(<span class="function"><span class="params">key</span> =&gt;</span> Vue.use(components[key]))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123; install &#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ <code>main.js</code> é‡Œä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> elementComponent <span class="keyword">from</span> <span class="string">&#x27;./config/elementComponent&#x27;</span></span><br><span class="line">Vue.use(elementComponent)</span><br></pre></td></tr></table></figure><h3 id="ä¼˜é›…å¯¼å‡ºè¯·æ±‚æ¥å£"><a href="#ä¼˜é›…å¯¼å‡ºè¯·æ±‚æ¥å£" class="headerlink" title="ä¼˜é›…å¯¼å‡ºè¯·æ±‚æ¥å£"></a>ä¼˜é›…å¯¼å‡ºè¯·æ±‚æ¥å£</h3><p>ä¸çŸ¥é“å¤§ä¼™æ˜¯å¦‚ä½•å®šä¹‰è¯·æ±‚æ¥å£çš„ï¼Œå°±æˆ‘ç›®å‰è¿™ä¸ªé¡¹ç›®è€Œè¨€ï¼Œæ˜¯è¿™ä¹ˆåšçš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// api.js</span></span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;./config/httpServer.js&#x27;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">/* ç™»å…¥é¡µé¢è·å–å…¬é’¥ */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getPublicKey = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> http(&#123; <span class="attr">url</span>: <span class="string">&#x27;/userGateway/user/getPublicKey&#x27;</span> &#125;, data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æˆ·ç™»å½•</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> login = <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> http(&#123; <span class="attr">url</span>: <span class="string">&#x27;/userGateway/userSentry/login&#x27;</span> &#125;, data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éªŒè¯ç ç™»å½•</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> loginByCode = <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> http(&#123; <span class="attr">url</span>: <span class="string">&#x27;/userGateway/userSentry/loginByCode&#x27;</span> &#125;, data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨æ¥å£ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; getPublicKey &#125; <span class="keyword">from</span> <span class="string">&#x27;./config/api.js&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        getPublicKey().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// xxx</span></span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// xxx</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>è¿™ä¸€åˆ‡éƒ½å¾ˆæ­£å¸¸ï¼Œä½†ï¼Œæˆ‘ä»¬è¿™ä¸ªé¡¹ç›®æ€»å…±æœ‰200å¤šä¸ªæ¥å£ï¼ŒæŒ‰ç…§ä¸Šé¢è¿™ç§å®šä¹‰æ–¹å¼çš„è¯ï¼Œä¸€ä¸ªæ¥å£å®šä¹‰åŠ ä¸Šç©ºè¡Œéœ€è¦å ç”¨ 5 è¡Œï¼Œæ‰€ä»¥å¦‚æœæŠŠå…¨éƒ¨æ¥å£éƒ½å®šä¹‰åˆ°è¿™ä¸ª <code>api.js</code> é‡Œéœ€è¦å ç”¨ 1000 è¡Œå·¦å³ï¼Œçœ‹äº†å®åœ¨è®©äººå¿ƒå¾ˆæ…Œå‘€ã€‚æ‰€ä»¥è§‰å¾—åº”è¯¥è¿™ä¸ªåœ°æ–¹åº”è¯¥å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/userGateway/user/getPublicKey</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™æ˜¯ä¸€ä¸ªåç«¯ç»™æ¥å£è·¯å¾„ï¼Œæ–œæ†æŠŠè¿™ä¸ªè·¯å¾„åˆ’åˆ†æˆ 3 ä¸ªå­ä¸²ï¼Œè€Œæœ€åä¸€ä¸ªå­ä¸²å¿…å®šæ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä»ä¸­åšæ–‡ç« ã€‚äºæ˜¯ä¹å°±æœ‰äº†ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// api.js</span></span><br><span class="line"><span class="keyword">const</span> apiList = [</span><br><span class="line">    <span class="string">&#x27;/userGateway/user/getPublicKey&#x27;</span>,  <span class="comment">// ç™»å…¥é¡µé¢è·å–å…¬é’¥</span></span><br><span class="line">    <span class="string">&#x27;/userGateway/userSentry/login&#x27;</span>,  <span class="comment">// ç”¨æˆ·ç™»å½•</span></span><br><span class="line">    <span class="string">&#x27;/userGateway/userSentry/loginByCode&#x27;</span>,  <span class="comment">// éªŒè¯ç ç™»å½•</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> apiName, API = &#123;&#125;</span><br><span class="line">apiList.forEach(<span class="function"><span class="params">path</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨æ­£åˆ™å–åˆ°æ¥å£è·¯å¾„çš„æœ€åä¸€ä¸ªå­ä¸²ï¼Œæ¯”å¦‚: getPublicKey</span></span><br><span class="line">    apiName = <span class="regexp">/(?&lt;=\/)[^/]+$/</span>.exec(path)[<span class="number">0</span>]</span><br><span class="line">    API[apiName] = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> http(&#123;<span class="attr">url</span>: path&#125;, data)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> &#123; API &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¤§æ¦‚å°±æŠŠå®šä¹‰ä¸€ä¸ªæ¥å£éœ€è¦å ç”¨ 5 è¡Œç¼©å°åˆ°åªéœ€è¦ 1 è¡Œäº†ï¼Œå¤§å¤§å‡å°äº†æ–‡ä»¶å†…å®¹ã€‚åœ¨æµè§ˆè¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œæˆ‘çš„é¼ æ ‡æ»šè½®ä¹Ÿä¸ä¼šä¸€ç›´åœ¨æ»šæ»šæ»šäº†ã€‚</p><p>å¦‚æœæ˜¯è¿™æ ·å®šä¹‰æ¥å£çš„è¯ï¼Œé‚£åœ¨ä½¿ç”¨çš„æ—¶å€™è¿˜éœ€è¦åšç‚¹å˜åŒ–çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; API &#125; <span class="keyword">from</span> <span class="string">&#x27;./config/api.js&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        API.getPublicKey().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// xxx</span></span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// xxx</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="4ç§-eventä¼ å‚æ–¹å¼"><a href="#4ç§-eventä¼ å‚æ–¹å¼" class="headerlink" title="4ç§$eventä¼ å‚æ–¹å¼"></a>4ç§$eventä¼ å‚æ–¹å¼</h2><p>åœ¨è¿›è¡Œå®é™…é¡¹ç›®å¼€å‘çš„æ—¶å€™ç»å¸¸ä¼šéœ€è¦é€šè¿‡äº‹ä»¶ä¼ é€’å‚æ•°ï¼Œè¿™é‡Œæ€»ç»“äº†4ç§åº”ç”¨åœºæ™¯ã€‚</p><h3 id="ç”¨äºç»„ä»¶é€šä¿¡"><a href="#ç”¨äºç»„ä»¶é€šä¿¡" class="headerlink" title="ç”¨äºç»„ä»¶é€šä¿¡"></a>ç”¨äºç»„ä»¶é€šä¿¡</h3><p>æ¯”å¦‚å­ç»„ä»¶é€šè¿‡ <code>$emit</code> æ¥è°ƒç”¨çˆ¶ç»„ä»¶æ–¹æ³•çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¸­ç”¨ <code>$event</code> æ¥æ”¶åˆ°ä»å­ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å‚æ•°ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$emit(&#x27;changeText&#x27;, &#x27;18px&#x27;)&quot;</span>&gt;</span>ç‚¹å‡»åŠ å¤§å­—å·<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">blog-post</span> @<span class="attr">changeText</span>=<span class="string">&quot;changeText(&#x27;article&#x27;, $event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">blog-post</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">changeText(type, value) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(type, value)  <span class="comment">// &#x27;article&#x27; &#x27;18px&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœå­ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å‚æ•°æœ‰å¤šä¸ªï¼Œè¿™ä¸ªæ—¶å€™ç”¨ <code>$event</code> å°±ä¸å¤ªè¡Œäº†ï¼Œæ­¤æ—¶å¯ä»¥ç”¨ <code>arguments</code> ä»£æ›¿ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$emit(&#x27;changeText&#x27;, &#x27;red&#x27;, &#x27;18px&#x27;)&quot;</span>&gt;</span>ç‚¹å‡»æ”¹å˜æ ·å¼<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">blog-post</span> @<span class="attr">changeText</span>=<span class="string">&quot;changeText(...arguments, &#x27;article&#x27;)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">blog-post</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">changeText(...value) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log( value )  <span class="comment">// [&#x27;red&#x27;, &#x27;18px&#x27;, &#x27;article&#x27;]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¼ é€’åŸç”ŸDOMäº‹ä»¶å¯¹è±¡"><a href="#ä¼ é€’åŸç”ŸDOMäº‹ä»¶å¯¹è±¡" class="headerlink" title="ä¼ é€’åŸç”ŸDOMäº‹ä»¶å¯¹è±¡"></a>ä¼ é€’åŸç”ŸDOMäº‹ä»¶å¯¹è±¡</h3><p>æ¯”å¦‚æˆ‘ä»¬éœ€è¦è·å–åˆ°å½“å‰çš„ç‚¹å‡»å…ƒç´ ï¼Œå°±å¯ä»¥é€šè¿‡ç»™ç‚¹å‡»äº‹ä»¶ä¼ é€’ <code>$event</code> å‚æ•°ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;submit(&#x27;first&#x27;, $event)&quot;</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">submit(type, event) &#123;</span><br><span class="line">    <span class="keyword">const</span> target = event.target.tagName</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç”¨äºç¬¬ä¸‰æ–¹ç±»åº“äº‹ä»¶å›è°ƒ"><a href="#ç”¨äºç¬¬ä¸‰æ–¹ç±»åº“äº‹ä»¶å›è°ƒ" class="headerlink" title="ç”¨äºç¬¬ä¸‰æ–¹ç±»åº“äº‹ä»¶å›è°ƒ"></a>ç”¨äºç¬¬ä¸‰æ–¹ç±»åº“äº‹ä»¶å›è°ƒ</h3><p>æ¯”å¦‚æœ‰ä¸€ä¸ªç»„ä»¶é‡Œä½¿ç”¨äº†å¥½å‡ ä¸ª <code>element-ui</code> çš„åˆ†é¡µç»„ä»¶ï¼Œæ¯ä¸ªåˆ†é¡µéƒ½æœ‰ä¸€ä¸ª <code>current-change</code> äº‹ä»¶ï¼Œç”¨æ¥å¤„ç†å½“åˆ†é¡µæ”¹å˜ä¹‹åçš„äº‹æƒ…ï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬å°±éœ€è¦å†™å¤šä¸ªå›è°ƒå‡½æ•°ï¼Œä½†æ˜¯å¦‚æœç”¨ä»¥ä¸‹æ–¹å¼ï¼Œæˆ‘ä»¬å°±ä¹Ÿå¯ä»¥åªå†™ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡ <code>type</code> æ¥åˆ¤æ–­æ˜¯å“ªä¸ªåˆ†é¡µçš„å›è°ƒï¼Œè€Œ <code>$event</code> åˆ™ç”¨æ¥ä¼ é€’ <code>current-change</code> å›è°ƒé»˜è®¤çš„å‚æ•°ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é¡µé¢åˆ—è¡¨çš„åˆ†é¡µ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span> </span></span><br><span class="line"><span class="tag">    @<span class="attr">current-change</span>=<span class="string">&quot;changePage(&#x27;main&#x27;, $event)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼¹çª—Aåˆ—è¡¨çš„åˆ†é¡µ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span> </span></span><br><span class="line"><span class="tag">    @<span class="attr">current-change</span>=<span class="string">&quot;changePage(&#x27;modalA&#x27;, $event)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼¹çª—Båˆ—è¡¨çš„åˆ†é¡µ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span> </span></span><br><span class="line"><span class="tag">    @<span class="attr">current-change</span>=<span class="string">&quot;changePage(&#x27;modalB&#x27;, $event)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">changePage(type, page) &#123;</span><br><span class="line">    <span class="keyword">const</span> types = [<span class="string">&#x27;main&#x27;</span>, <span class="string">&#x27;modalA&#x27;</span>, <span class="string">&#x27;modalB&#x27;</span>]</span><br><span class="line">    types[type] &amp;&amp; (<span class="built_in">this</span>[types[type]].pageIndex = page) &amp;&amp; <span class="built_in">this</span>.getList(type)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨ç®­å¤´å‡½æ•°å¤„ç†"><a href="#ä½¿ç”¨ç®­å¤´å‡½æ•°å¤„ç†" class="headerlink" title="ä½¿ç”¨ç®­å¤´å‡½æ•°å¤„ç†"></a>ä½¿ç”¨ç®­å¤´å‡½æ•°å¤„ç†</h3><p>å¯¹äºç¬¬ä¸‰ç§åœºæ™¯ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹ç±»åº“ç»„ä»¶çš„æ—¶å€™ï¼Œéœ€è¦ç»™äº‹ä»¶å›è°ƒå¢åŠ é¢å¤–çš„å‚æ•°ï¼Œå¦‚æœé»˜è®¤çš„å›è°ƒå‚æ•°åªæœ‰1ä¸ªé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„é‚£ç§æ–¹å¼ï¼Œä½†æ˜¯å¦‚æœå›è°ƒå‚æ•°æœ‰å¤šä¸ªçš„è¯ï¼Œç”¨ <code>$event</code> å°±ä¸å¥½å¤„ç†äº†ï¼Œå¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚æ¯”å¦‚æ–‡ä»¶ä¸Šä¼ çš„æ—¶å€™ï¼Œæœ‰ä¸ª <code>on-change</code> å±æ€§ï¼Œå½“æ–‡ä»¶å˜åŒ–çš„æ—¶å€™å°±ä¼šè§¦å‘å›è°ƒï¼Œæ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬è¿™æ ·å†™æ˜¯æ²¡é—®é¢˜çš„ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-upload</span> <span class="attr">:on-change</span>=<span class="string">&quot;changeFile&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span>&gt;</span>ä¸Šä¼ <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">changeFile(file, fileList) &#123;&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å¦‚æœä¸€ä¸ªç»„ä»¶é‡Œæœ‰å¤šä¸ªæ–‡ä»¶ä¸Šä¼ ï¼Œè€Œæˆ‘ä»¬åˆä¸æƒ³å†™å¤šä¸ª <code>changeFile</code>ï¼Œé‚£å°±éœ€è¦ä¼ é€’é¢å¤–çš„å‚æ•° <code>type</code> äº† ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-upload</span> <span class="attr">:on-change</span>=<span class="string">&quot;(file, fileList) =&gt; changeFile(&#x27;org&#x27;, file, fileList)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span>&gt;</span>ä¸Šä¼ <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">changeFile(type, file, fileList) &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="3ç§æ·±å…¥watchçš„ç”¨æ³•"><a href="#3ç§æ·±å…¥watchçš„ç”¨æ³•" class="headerlink" title="3ç§æ·±å…¥watchçš„ç”¨æ³•"></a>3ç§æ·±å…¥watchçš„ç”¨æ³•</h2><h3 id="ç«‹å³æ‰§è¡Œ"><a href="#ç«‹å³æ‰§è¡Œ" class="headerlink" title="ç«‹å³æ‰§è¡Œ"></a>ç«‹å³æ‰§è¡Œ</h3><p><code>watch</code> æ˜¯ <code>Vue</code> ä¸­çš„ä¾¦å¬å™¨ï¼Œå¯ä»¥ä¾¦å¬ä¸€ä¸ª <code>Vue</code> å®ä¾‹ä¸Šçš„æ•°æ®ï¼Œå½“æ•°æ®å˜åŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘è¯¥ä¾¦å¬å™¨ã€‚æ‰€ä»¥ä»–çš„åº”ç”¨åœºæ™¯å°±æ˜¯ï¼šå½“æŸä¸ªæ•°æ®å˜åŠ¨åéœ€è¦åšä»€ä¹ˆçš„æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ <code>watch</code> å•¦ã€‚<br>å¯¹äº <code>watch</code>ï¼Œå¹³å¸¸æˆ‘ä»¬å†™å¾—æœ€å¤šçš„ä¼°è®¡æ˜¯å¦‚ä¸‹è¿™ç§å†™æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    list: <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.getMsg()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬å¸Œæœ›ç»„ä»¶åˆå§‹åŒ–çš„æ—¶å€™å°±æ‰§è¡Œä¸€æ¬¡ <code>getMsg</code> æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥åœ¨ <code>mounted</code> é‡Œè°ƒç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mounted() &#123;</span><br><span class="line">    <span class="built_in">this</span>.getMsg()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å®ï¼Œè¿˜æœ‰ä¸€ç§æ›´åŠ ç®€ä¾¿çš„å†™æ³•ï¼Œé€šè¿‡ç»™ <code>watch</code> è®¾ç½® <code>immediate: true</code> ï¼Œå³å¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    list: &#123;</span><br><span class="line">        handler(val) &#123;  <span class="comment">// æ³¨æ„åˆ«å†™é”™æˆ handle</span></span><br><span class="line">            <span class="built_in">this</span>.getMsg()</span><br><span class="line">        &#125;,</span><br><span class="line">        immediate: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ·±åº¦ç›‘å¬"><a href="#æ·±åº¦ç›‘å¬" class="headerlink" title="æ·±åº¦ç›‘å¬"></a>æ·±åº¦ç›‘å¬</h3><p>ä¾¦å¬å™¨å¯¹äºå±æ€§å˜æ›´åä¼šè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡ï¼Œä½†æ˜¯ä»…é™äºè¯¥å±æ€§æœ¬èº«ï¼Œå¦‚æœå˜æ›´çš„æ˜¯å±æ€§çš„å±æ€§ï¼Œåˆ™ä¸ä¼šè§¦å‘ä¾¦å¬å›è°ƒï¼Œå¦‚æœæƒ³è¦å®ç°è¿™ä¸ªåŠŸèƒ½å¯ä»¥ç»™ <code>watch</code> åŠ ä¸Š â€˜deep: trueâ€™ å³å¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    obj: &#123;</span><br><span class="line">        handler(val) &#123; <span class="comment">// do something &#125;,</span></span><br><span class="line">        deep: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">mounted() &#123;</span><br><span class="line">    <span class="built_in">this</span>.obj.name = <span class="string">&#x27;bubuzou&#x27;</span>  <span class="comment">// å°†è§¦å‘ handler</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤šä¸ªhandlers"><a href="#å¤šä¸ªhandlers" class="headerlink" title="å¤šä¸ªhandlers"></a>å¤šä¸ªhandlers</h3><p>å®é™…ä¸Šï¼Œ<code>watch</code> å¯ä»¥è®¾ç½®ä¸ºæ•°ç»„ï¼Œæ”¯æŒç±»å‹ä¸º <code>String</code>ã€<code>Object</code> å’Œ <code>Function</code>ã€‚è§¦å‘åï¼Œå¤šä¸ªå¤„ç†å‡½æ•°éƒ½å°†è¢«è°ƒç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    obj: [</span><br><span class="line">        <span class="string">&#x27;print&#x27;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">            handler: <span class="string">&#x27;print&#x27;</span>,</span><br><span class="line">            deep: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params">val, oldValue</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(val)</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">    print() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.obj)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5ä¸ªå…¶ä»–å¼€å‘å°æŠ€å·§"><a href="#5ä¸ªå…¶ä»–å¼€å‘å°æŠ€å·§" class="headerlink" title="5ä¸ªå…¶ä»–å¼€å‘å°æŠ€å·§"></a>5ä¸ªå…¶ä»–å¼€å‘å°æŠ€å·§</h2><p>æŒæ¡ <code>Vue</code> çš„å¼€å‘å°æŠ€å·§ï¼Œåœ¨ä¸€äº›ç‰¹å®šçš„åœºæ™¯ä¸‹çœŸçš„å¾ˆç®¡ç”¨ï¼Œè¿™é‡Œåˆ—äº†ä¸€äº›å¸¸ç”¨çš„å°æŠ€å·§ã€‚</p><h3 id="å‡½æ•°å¼ç»„ä»¶å®ç°é›¶æ—¶å˜é‡"><a href="#å‡½æ•°å¼ç»„ä»¶å®ç°é›¶æ—¶å˜é‡" class="headerlink" title="å‡½æ•°å¼ç»„ä»¶å®ç°é›¶æ—¶å˜é‡"></a>å‡½æ•°å¼ç»„ä»¶å®ç°é›¶æ—¶å˜é‡</h3><p>æˆ‘ä»¬åœ¨ä½¿ç”¨æ’æ§½çš„æ—¶å€™ï¼ŒçŸ¥é“æœ‰ä¸€ä¸ªå«åšæ’æ§½ <code>prop</code> çš„çŸ¥è¯†ï¼Œä»Šå¤©æˆ‘ä»¬ç”¨ä»–å’Œå‡½æ•°å¼ç»„ä»¶ç»“åˆåœ¨ä¸€å—ï¼Œå®ç°ä¸€ä¸ªé›¶æ—¶å˜é‡çš„ç»„ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tempvar.vue</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    functional: <span class="literal">true</span>,</span><br><span class="line">    render(h, context) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; props,  scopedSlots&#125; = context</span><br><span class="line">        <span class="keyword">return</span> scopedSlots.default &amp;&amp; scopedSlots.default(props || &#123;&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å®šä¹‰å¥½äº†å‡½æ•°å¼ç»„ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨éœ€è¦çš„åœ°æ–¹å¼•å…¥ä¸”ä½¿ç”¨ä»–ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tempvar</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:var1</span>=<span class="string">&quot;`hello $&#123;user.name&#125;`&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:var2</span>=<span class="string">&quot;user.age ? user.age : &#x27;18&#x27;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123;var1, var2&#125;&quot;</span>&gt;</span></span><br><span class="line">       å§“åï¼š &#123;&#123; var1 &#125;&#125;</span><br><span class="line">       å¹´é¾„ï¼š&#123;&#123; var2 &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tempvar</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> tempvar <span class="keyword">from</span> <span class="string">&#x27;@/components/tempvar.vue&#x27;</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line">                user: &#123;</span><br><span class="line"><span class="javascript">                    name: <span class="string">&#x27;bubuzou&#x27;</span>,</span></span><br><span class="line">                    age: 12,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        components: &#123;</span><br><span class="line">            tempvar</span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯èƒ½ç»†å¿ƒçš„å°ä¼™ä¼´å‘ç°äº†ï¼Œè¦æŠŠåå­—å‰åŠ ä¸ª <code>hello</code>ã€é»˜è®¤å¹´é¾„è®¾ç½®ä¸º <code>18</code> ç”¨è®¡ç®—å±æ€§å°±å¯ä»¥äº†å‘€ï¼Ÿä¸ºå•¥è¿˜è¦æé‚£ä¹ˆå¤æ‚ï¼Œä¸“é—¨ç”¨ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶å»å®ç°å‘¢ï¼Ÿå…¶å®è¿™ä¸ªå°æŠ€å·§è¿˜æ˜¯å¾ˆæœ‰å¿…è¦å­˜åœ¨çš„ï¼Œå½“è®¸å¤šç»„ä»¶éƒ½æœ‰è¿™ç§æ•°æ®çš„é‡æ–°è®¡ç®—çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨è¿™ä¸ªæŠ€å·§ï¼Œé‚£ä¹ˆå°±éœ€è¦å†™å¾ˆå¤šå¾ˆå¤šçš„è®¡ç®—å±æ€§ï¼Œè€Œæœ‰äº†å‡½æ•°å¼ç»„ä»¶ <code>tempvar</code> åï¼Œåªéœ€è¦åœ¨ç»„ä»¶é‡Œå¼•å…¥ä»–ï¼Œç„¶åå†™æ’æ§½å°±å¥½äº†ã€‚å°±ç›¸å½“äºæŠŠå†™è®¡ç®—å±æ€§çš„åŠŸå¤«èŠ±åœ¨äº†å†™æ’æ§½ä¸Šäº†ã€‚æ€»è€Œè¨€ä¹‹ï¼Œä¸¤ç§æ–¹å¼éƒ½å¯ä»¥å®ç°ç±»ä¼¼çš„å±æ€§è®¡ç®—åŠŸèƒ½ï¼Œè¯¥æ€ä¹ˆé€‰ï¼Œéšä½ å–œæ¬¢å•¦ã€‚</p><h3 id="è°ƒè¯•templateï¼ˆä¸æ¨èï¼‰"><a href="#è°ƒè¯•templateï¼ˆä¸æ¨èï¼‰" class="headerlink" title="è°ƒè¯•templateï¼ˆä¸æ¨èï¼‰"></a>è°ƒè¯•templateï¼ˆä¸æ¨èï¼‰</h3><p>åœ¨å¼€å‘è°ƒè¯•çš„æ—¶å€™ç»å¸¸ä¼šéœ€è¦é€šè¿‡ <code>console.log</code> æ¥æ‰“å°å‡ºæŸä¸ªæ•°æ®å¯¹è±¡æ¥æŸ¥çœ‹å…¶å†…éƒ¨çš„ç»“æ„æˆ–è€…å­—æ®µå€¼ï¼Œä½†æ˜¯è¿™æ ·åšè‚¯å®šä¸å¿…åœ¨ <code>template</code> é‡Œå°†å…¶è¾“å‡ºæ›´ç›´æ¥ã€‚æ¯”å¦‚æœ‰è¿™æ ·ä¸€ä¸ªæ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">obj: &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou&#x27;</span>,</span><br><span class="line">    age: <span class="number">21</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ¨¡æ¿ä¸­å±•ç¤ºï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; obj &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é¡µé¢æ¸²æŸ“å®Œæˆåä¼šçœ‹åˆ°ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; &quot;name&quot;: &quot;bubuzou&quot;, &quot;age&quot;: 21 &#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºè¿™æ ·çš„æ¸²æŸ“ç»“æœè™½ç„¶æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ª <code>obj</code> æ˜¯å±‚çº§å¾ˆæ·±ä¸”å­—æ®µå¾ˆå¤šçš„æ•°æ®ï¼Œæ˜¾ç¤ºå‡ºæ¥å°±ä¼šä¸€å †æ•°æ®ç ¸åœ¨ä¸€å—ï¼Œä¸æ¯«æ²¡æœ‰é˜…è¯»ä½“éªŒã€‚</p><p>å› æ­¤åŸºäºè¿™ä¸ªèƒŒæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥å°† <code>console.log</code> æŒ‚è½½åœ¨ <code>Vue</code> çš„å®ä¾‹åŸå‹ä¸Šï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line">Vue.prototype.$log = <span class="built_in">window</span>.console.log</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥å¼€å¼€å¿ƒå¿ƒåœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ä»–äº†ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; $log( obj ) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¼šåœ¨æµè§ˆå™¨æ§åˆ¶å°è¾“å‡ºå½“å‰çš„æ•°æ®å¯¹è±¡ï¼Œåœ¨æ˜¾ç¤ºæ•ˆæœä¸Šå’Œ <code>console.log</code> ç›´æ¥æ‰“å°åˆ«æ— äºŒè‡´ã€‚</p><p>ä½†è¯´äº†è¿™ä¹ˆå¤šï¼Œä½¿ç”¨ <code>Vue</code> è¿›è¡Œå¼€å‘è°ƒè¯•è¿˜æ˜¯å¼ºçƒˆæ¨èå®˜æ–¹çš„<a href="https://github.com/vuejs/vue-devtools">vue-devtools</a> å·¥å…·ï¼Œè°ç”¨è°çŸ¥é“ã€‚</p><h3 id="ç›‘å¬å­ç»„ä»¶çš„é’©å­å‡½æ•°"><a href="#ç›‘å¬å­ç»„ä»¶çš„é’©å­å‡½æ•°" class="headerlink" title="ç›‘å¬å­ç»„ä»¶çš„é’©å­å‡½æ•°"></a>ç›‘å¬å­ç»„ä»¶çš„é’©å­å‡½æ•°</h3><p>é€šå¸¸å¦‚æœæˆ‘ä»¬æƒ³åœ¨å­ç»„ä»¶é’©å­å‡½æ•°è§¦å‘çš„æ—¶å€™é€šçŸ¥çˆ¶ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- parent.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child</span> @<span class="attr">mounted</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// child.vue</span></span><br><span class="line"><span class="built_in">this</span>.$emit(<span class="string">&#x27;mounted&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å…¶å®è¿˜æœ‰ä¸€ç§æ›´åŠ ç®€å•çš„å†™æ³•ï¼Œé‚£å°±æ˜¯ä½¿ç”¨ <code>hookEvent</code>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child</span> @<span class="attr">hook:mounted</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é’©å­å‡½æ•°é™¤äº†ä»¥ä¸Šç”¨æ³•ï¼Œè¿˜å¯ä»¥é€šè¿‡åŠ¨æ€æ³¨å†Œåšä¸€äº›åˆ«çš„äº‹æƒ…ï¼Œæ¯”å¦‚ç»„ä»¶é”€æ¯å‰è¿›è¡Œèµ„æºçš„é‡Šæ”¾ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mounted() &#123;</span><br><span class="line">    <span class="keyword">let</span> setIntervalId = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">888</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.$once(<span class="string">&quot;hook:beforeDestroy&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(setIntervalId)</span><br><span class="line">        setIntervalId = <span class="literal">null</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è·¯ç”±å‚æ•°è§£è€¦"><a href="#è·¯ç”±å‚æ•°è§£è€¦" class="headerlink" title="è·¯ç”±å‚æ•°è§£è€¦"></a>è·¯ç”±å‚æ•°è§£è€¦</h3><p>å‚æ•°è§£è€¦ï¼Œå•¥æ„æ€å‘¢ï¼Ÿåˆ«ç€æ€¥ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹æ¯”å¦‚å¯¹äºè¿™ä¹ˆä¸€ä¸²è·¯ç”±ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = [&#123;</span><br><span class="line">    path: <span class="string">&#x27;/home/:type/:id&#x27;</span>,</span><br><span class="line">    name: <span class="string">&#x27;Home&#x27;</span>,</span><br><span class="line">    component: Home,</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure><p>å½“å‰é¡µé¢çš„è·¯å¾„æ˜¯ <code>http://xxx/detail/preview/21?sex=male</code>ï¼Œå¹³æ—¶æˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™æˆ–å¤šæˆ–å°‘çš„ä¼šå†™å‡ºè¿™ç§ä»£ç ï¼Œåœ¨ç»„ä»¶é‡Œä½¿ç”¨ <code>$route</code> ç»™ç»„ä»¶ä¼ å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mounted() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.$route.params.type === <span class="string">&#x27;preview&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.isPreview = <span class="literal">true</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.isPreview = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.id = <span class="built_in">this</span>.$route.params.id</span><br><span class="line">    <span class="built_in">this</span>.sex = <span class="built_in">this</span>.$route.query.sex</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å­å†™æœ¬èº«æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå°±æ˜¯ä¼šä½¿å¾—ç»„ä»¶å’Œè·¯ç”±é«˜åº¦è€¦åˆï¼Œè®©ç»„ä»¶åªèƒ½åœ¨å«æœ‰ç‰¹å®š <code>URL</code> çš„é¡µé¢ä¸­ä½¿ç”¨ï¼Œé™åˆ¶äº†ç»„ä»¶çš„é€šç”¨æ€§ã€‚å…¶å®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>props</code> ä¼ å‚ï¼Œæ¥è§£è€¦è·¯ç”±å‚æ•°ï¼Œå°†ä¸Šé¢çš„è·¯ç”±é…ç½®æ”¹æˆå¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = [&#123;</span><br><span class="line">    path: <span class="string">&#x27;/home/:type/:id&#x27;</span>,</span><br><span class="line">    name: <span class="string">&#x27;Home&#x27;</span>,</span><br><span class="line">    component: Home,</span><br><span class="line">    props: <span class="function">(<span class="params">route</span>) =&gt;</span> (&#123;</span><br><span class="line">        type: route.params.type,</span><br><span class="line">        id: route.params.id,</span><br><span class="line">        sex: route.query.sex,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ç»„ä»¶ <code>props</code> åŠ ä¸Šå‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">props: [<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>]</span><br></pre></td></tr></table></figure><p>ç»„ä»¶é‡Œä½¿ç”¨å‚æ•°çš„æ—¶å€™å°±ä¸éœ€è¦ç”¨ <code>this.$route</code>ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥ <code>this.type</code> å³å¯ã€‚è¿™æ ·ä¸€æ¥ï¼Œè¿™ä¸ªç»„ä»¶å°±å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨äº†ã€‚</p><h3 id="æ·±åº¦ä½œç”¨é€‰æ‹©å™¨"><a href="#æ·±åº¦ä½œç”¨é€‰æ‹©å™¨" class="headerlink" title="æ·±åº¦ä½œç”¨é€‰æ‹©å™¨"></a>æ·±åº¦ä½œç”¨é€‰æ‹©å™¨</h3><p>å½“ç»™ <code>style</code> åŠ ä¸Š <code>scoped</code>ï¼Œé¡µé¢æ¸²æŸ“å®Œæˆåä¼šç»™ <code>html</code> å’Œ <code>css</code> é€‰æ‹©å™¨åŠ ä¸Šå“ˆå¸Œå€¼ç”¨äºè¡¨ç¤ºå”¯ä¸€æ€§ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;home&quot;</span> <span class="attr">data-v-fae5bece</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">data-v-fae5bece</span> <span class="attr">class</span>=<span class="string">&quot;el-button el-button-primary&quot;</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.home</span> <span class="selector-class">.el-button</span><span class="selector-attr">[data-v-fae5bece]</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºåœ¨ <code>style</code> ä¸­è¢«åŠ äº† <code>scoped</code> çš„ç»„ä»¶ï¼Œå…¶æ ·å¼å°†åªèƒ½ä½œç”¨äºç»„ä»¶å†…éƒ¨ï¼Œä¸ä¼šå¯¹å…¶å­ç»„ä»¶é€ æˆå½±å“ã€‚æ¯”å¦‚æœ‰è¿™æ ·ä¸€ä¸ªç»„ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- çˆ¶ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;home&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>çˆ¶æŒ‰é’®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.home</span> <span class="selector-class">.el-button</span> &#123;</span></span><br><span class="line">    font-size: 20px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>å­æŒ‰é’®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å½“é¡µé¢æ¸²æŸ“å‡ºæ¥åï¼Œä¼šæ˜¯å¦‚ä¸‹ç»“æœï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;home&quot;</span> <span class="attr">data-v-fae5bece</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">data-v-fae5bece</span> <span class="attr">class</span>=<span class="string">&quot;el-button el-button-primary&quot;</span>&gt;</span>çˆ¶æŒ‰é’®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span> <span class="attr">data-v-fae5bece</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;el-button el-button-primary&quot;</span>&gt;</span>å­æŒ‰é’®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ ¹æ®ä¸Šé¢çš„ <code>html</code>ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>.home .el-button[data-v-fae5bece]</code> è¿™ä¸ªé€‰æ‹©å™¨ä½œç”¨ä¸åˆ°å­æŒ‰é’®è¿™ä¸ª <code>button</code>ã€‚</p><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦è®©çˆ¶ç»„ä»¶çš„æ ·å¼èƒ½ä½œç”¨åˆ°å­ç»„ä»¶ï¼Œå³ä½¿çˆ¶ç»„ä»¶çš„ <code>style</code> ä¸ŠåŠ äº† <code>scoped</code>ï¼Œé‚£è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°æ·±åº¦ä½œç”¨é€‰æ‹©å™¨ <code>&gt;&gt;&gt;</code>ï¼Œæ¯”å¦‚åœ¨åˆšåˆšçš„ä¾‹å­ä¸Šå¯ä»¥ç»™çˆ¶ç»„ä»¶æ ·å¼åŠ ä¸Šæ·±åº¦ä½œç”¨é€‰æ‹©å™¨ã€‚</p><blockquote><p>æ·±åº¦ä½œç”¨é€‰æ‹©å™¨ä¼šè¢« <code>Vue Loader</code> å¤„ç†ï¼Œä¸”åªèƒ½åœ¨æœ‰é¢„å¤„ç†å™¨çš„åœ°æ–¹ä½¿ç”¨ã€‚ç”±äºæŸäº›é¢„å¤„ç†å™¨æ¯”å¦‚ <code>Sass</code> ä¸èƒ½æ­£ç¡®è§£æ <code>&gt;&gt;&gt;</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒçš„åˆ«åï¼š<code>/deep/</code> æˆ– <code>::v-deep</code> æ¥æ›¿ä»£ã€‚</p></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line"><span class="selector-class">.home</span> &#123;</span><br><span class="line">    /deep/ .el-button &#123;</span><br><span class="line">        <span class="selector-tag">font-size</span>: 20<span class="selector-tag">px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>åŠ ä¸Šæ·±åº¦ä½œç”¨é€‰æ‹©å™¨åï¼Œé€‰æ‹©å™¨ä¼šç”±åŸæ¥çš„ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.home</span> <span class="selector-class">.el-button</span><span class="selector-attr">[data-v-fae5bece]</span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>å˜æˆå¦‚ä¸‹çš„ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.home</span><span class="selector-attr">[data-v-fae5bece]</span> <span class="selector-class">.el-button</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><ul><li><a href="https://juejin.im/post/6844903686926254087">vueç¯‡ä¹‹äº‹ä»¶æ€»çº¿ï¼ˆEventBusï¼‰</a></li><li>ã€ŠVueå¼€å‘å®æˆ˜ã€‹</li></ul><h2 id="æ„Ÿè°¢é˜…è¯»"><a href="#æ„Ÿè°¢é˜…è¯»" class="headerlink" title="æ„Ÿè°¢é˜…è¯»"></a>æ„Ÿè°¢é˜…è¯»</h2><p>å¦‚æœæœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œç»™æœ¬æ–‡ç‚¹ä¸ªåœ¨çœ‹å§</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202009/gzh.png" alt="å¤§æµ·æˆ‘æ¥äº†"></p>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç¨‹åºå‡çº§WePY2è¸©å‘è®°</title>
      <link href="/2020/08/06/wepy2/"/>
      <url>/2020/08/06/wepy2/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘æœ‰ä¸ªå°ç¨‹åºé¡¹ç›®éœ€è¦è¿­ä»£ï¼Œä½†æ˜¯è¿­ä»£ä»»åŠ¡ä¸å¤šï¼Œæ—¶é—´æ¯”è¾ƒå……è£•ã€‚è€Œè¿™ä¸ªå°ç¨‹åºæœ€æ—©æ˜¯åœ¨18å¹´çš„æ—¶å€™å¼€å‘çš„ï¼Œç”¨çš„å¼€å‘æ¡†æ¶æ˜¯ <code>WePY</code> çš„ <code>1.7.2</code> ç‰ˆæœ¬ï¼Œå»å¹´ä¹Ÿå°±æ˜¯ <code>19</code> å¹´çš„æ—¶å€™ <code>WePY</code> æ¡†æ¶è¿›è¡Œäº†å‡çº§ï¼Œåˆ°äº† <code>2.0</code> ç‰ˆæœ¬ã€‚å‡çº§ä¹‹åçš„ <code>WePY</code>ï¼Œç”¨ <a href="https://wepyjs.github.io/wepy-docs/2.x/#/"><code>WePY</code></a> å®˜æ–¹æ–‡æ¡£çš„è¯æ¥è¯´ï¼šé€šè¿‡ä¼˜åŒ–ç»†èŠ‚ï¼Œå¼•å…¥ <code>Promise</code>ã€<code>Async Functions</code> ç­‰è®©å¼€å‘å°ç¨‹åºé¡¹ç›®å˜å¾—æ›´åŠ ç®€å•ï¼Œé«˜æ•ˆã€‚åŸºäºè¿™äº›èƒŒæ™¯ï¼Œæˆ‘å’Œå°ä¼™ä¼´ä¸€æ‹å³åˆï¼Œå†³å®šå¯¹æˆ‘ä»¬çš„é¡¹ç›®è¿›è¡Œæ¡†æ¶å‡çº§ï¼Œä½“éªŒä¸‹åˆ°åº• <code>WePY2</code> èƒ½ç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆã€‚</p><p>æœ¬æ–‡å°†ä»¥é¡¹ç›®æ”¹åŠ¨ä¸ºå‡ºå‘ç‚¹ï¼ŒåŸºäºå½“å‰è¿™ä¸ªé¡¹ç›®çš„ç»“æ„å’Œç¼–ç æ–¹å¼æ¥è€ƒè™‘åˆ°åº•å‡çº§ <code>WePY2</code> åï¼Œå“ªé‡Œéœ€è¦æ”¹ï¼Œæ€ä¹ˆæ”¹ä»¥åŠæœ‰å“ªäº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œé€šè¿‡å¯¹æ¯” <code>2</code> ä¸ªç‰ˆæœ¬çš„å†™æ³•å·®å¼‚è¿™ä¸ªæ€è·¯æ¥å†™ï¼Œä¸ä¼šå»å¤ªè¾ƒçœŸ <code>WePY2</code> ç›¸å¯¹äº <code>WePY1</code> å®ç°æˆ–åŸç†ä¸Šçš„åŒºåˆ«ã€‚ä¸‹é¢æˆ‘å°†ä¸€æ¡ä¸€æ¡çš„åˆ—å‡ºæ¥éœ€è¦æ”¹åŠ¨çš„ç‚¹ã€‚</p><blockquote><p>æœ¬ç¯‡æ–‡ç« è®°å½•çš„æ˜¯æˆ‘å’Œå°ä¼™ä¼´è¿™æ¬¡å‡çº§æ¡†æ¶é‡åˆ°çš„éœ€è¦æ”¹åŠ¨çš„åœ°æ–¹å’Œå‘ï¼Œæ‰€ä½¿ç”¨çš„æ˜¯ <code>wepy</code> çš„ <code>2.1.0</code> ç‰ˆæœ¬ï¼Œåç»­å¦‚æœç‰ˆæœ¬å‡çº§åï¼Œæœ¬ç¯‡è®°å½•åˆ°çš„å‘å¦‚æœå·²ç»è¢«ä¿®å¤äº†ï¼Œè¯·è‡ªè¡Œå¿½ç•¥æœ¬æ–‡æ‰€è¿°çš„é—®é¢˜ã€‚å¦å¤–ä¸‹æ–‡ä¸­æ‰€è¯´åˆ°çš„ <code>2.x</code> ç‰ˆæœ¬éƒ½æ˜¯æŒ‡ <code>wepy_v2.1.0</code>ã€‚</p></blockquote><a id="more"></a><h2 id="åˆå§‹åŒ–ä¸€ä¸ªWePY2çš„demo"><a href="#åˆå§‹åŒ–ä¸€ä¸ªWePY2çš„demo" class="headerlink" title="åˆå§‹åŒ–ä¸€ä¸ªWePY2çš„demo"></a>åˆå§‹åŒ–ä¸€ä¸ªWePY2çš„demo</h2><p>ç”±äºæœ¬åœ°è¿˜æœ‰å…¶ä»–é¡¹ç›®ç”¨çš„æ˜¯ <code>WePY_v1.7.2</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½æŠŠ <code>WePY2</code> çš„ <code>CLI</code> å·¥å…·å®‰è£…åœ¨å…¨å±€ç¯å¢ƒä¸­ï¼Œåªèƒ½å®‰è£…åœ¨å½“å‰é¡¹ç›®ä¸­ã€‚å®˜æ–¹æ¨èæ˜¯ç›´æ¥ç”¨ <code>1.7.x</code> çš„ <code>CLI</code> å»åˆå§‹åŒ– <code>2.0.x</code> çš„é¡¹ç›®:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wepy init standard#2.0.x zzodr</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±èƒ½å¤Ÿåœ¨æœ¬åœ°åˆå§‹åŒ–ä¸€ä¸ª <code>wepy2</code> çš„é¡¹ç›®æ¨¡æ¿ï¼Œä½†æ˜¯ <code>@wepy/core</code> æ˜¯ <code>2.0.0-alpha.16</code> ç‰ˆæœ¬çš„ï¼Œå°†å®ƒæ›´æ–°åˆ°æœ€æ–°çš„ <code>2.1.0</code> ç‰ˆæœ¬ï¼Œè¿™é‡Œä¹Ÿä¸€èµ·æ›´æ–°ä¸‹æ•´ä¸ªæ—§é¡¹ç›®å’Œæ–°æ¨¡æ¿æ‰€ç”¨åˆ°çš„ä¾èµ–ï¼Œä¸‹é¢ç›´æ¥è´´å‡ºæ¥ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;@wepy/core&quot;</span>: <span class="string">&quot;^v2.1.0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;@wepy/use-intercept&quot;</span>: <span class="string">&quot;^2.1.0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;@wepy/use-promisify&quot;</span>: <span class="string">&quot;^2.1.0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;@wepy/x&quot;</span>: <span class="string">&quot;^2.0.2&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;miniprogram-slide-view&quot;</span>: <span class="string">&quot;0.0.3&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;@babel/core&quot;</span>: <span class="string">&quot;^7.1.0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;@babel/preset-env&quot;</span>: <span class="string">&quot;^7.1.0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;@wepy/babel-plugin-import-regenerator&quot;</span>: <span class="string">&quot;0.0.2&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;@wepy/cli&quot;</span>: <span class="string">&quot;^2.1.0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;@wepy/compiler-babel&quot;</span>: <span class="string">&quot;^2.0.1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;@wepy/compiler-sass&quot;</span>: <span class="string">&quot;^2.1.0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;@wepy/plugin-define&quot;</span>: <span class="string">&quot;^2.1.0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;babel-eslint&quot;</span>: <span class="string">&quot;^7.2.1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;cross-env&quot;</span>: <span class="string">&quot;^5.1.3&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;eslint&quot;</span>: <span class="string">&quot;^3.18.0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;eslint-config-standard&quot;</span>: <span class="string">&quot;^7.1.0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;eslint-friendly-formatter&quot;</span>: <span class="string">&quot;^2.0.7&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;eslint-plugin-html&quot;</span>: <span class="string">&quot;^2.0.1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;eslint-plugin-promise&quot;</span>: <span class="string">&quot;^3.5.0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;eslint-plugin-standard&quot;</span>: <span class="string">&quot;^2.0.1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;wepy-eslint&quot;</span>: <span class="string">&quot;^1.5.3&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æ“ä½œä¸»è¦æ˜¯åˆ é™¤æ¨¡æ¿é‡Œçš„ä»£ç ï¼Œç„¶åæŠŠé¡¹ç›®çš„ç»“æ„å’Œä»£ç æ¬è¿‡å»ã€‚</p><h2 id="wpyæ–‡ä»¶ä»£ç ç»“æ„è°ƒæ•´"><a href="#wpyæ–‡ä»¶ä»£ç ç»“æ„è°ƒæ•´" class="headerlink" title="wpyæ–‡ä»¶ä»£ç ç»“æ„è°ƒæ•´"></a>wpyæ–‡ä»¶ä»£ç ç»“æ„è°ƒæ•´</h2><p><code>WePy</code> å•æ–‡ä»¶ç»„ä»¶ä¸»è¦ç”± <code>&lt;script&gt;</code>ã€<code>&lt;template&gt;</code>ã€<code>&lt;style&gt;</code>ã€<code>&lt;config&gt;</code> å››éƒ¨åˆ†ç»„æˆï¼ˆä¹ŸåŒ…æ‹¬å°ç¨‹åº <code>&lt;wxs&gt;</code> æ ‡ç­¾ï¼‰ã€‚æ‰€ä»¥éœ€è¦æŠŠ <code>WePY 1.7.2</code> ä¸­å®šä¹‰åœ¨ <code>&lt;script&gt;</code> ä¸­çš„ <code>config</code> é…ç½®éœ€è¦ç‹¬ç«‹åˆ°å¤–å±‚çš„ <code>&lt;config&gt;</code> ä¸­ã€‚<br><code>1.7.2</code> å†™æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Home</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line">        config = &#123;</span><br><span class="line"><span class="javascript">            navigationBarTitleText: <span class="string">&#x27;é¦–é¡µ&#x27;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>2.x</code> å†™æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">config</span>&gt;</span></span><br><span class="line">&#123;</span><br><span class="line">    navigationBarTitleText: &#x27;é¦–é¡µ&#x27;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ç¨‹åº-é¡µé¢-ç»„ä»¶æ³¨å†Œæ–¹å¼è°ƒæ•´"><a href="#ç¨‹åº-é¡µé¢-ç»„ä»¶æ³¨å†Œæ–¹å¼è°ƒæ•´" class="headerlink" title="ç¨‹åº/é¡µé¢/ç»„ä»¶æ³¨å†Œæ–¹å¼è°ƒæ•´"></a>ç¨‹åº/é¡µé¢/ç»„ä»¶æ³¨å†Œæ–¹å¼è°ƒæ•´</h2><p>æ³¨å†Œæ–¹å¼å°†ä¸å†ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼ï¼Œè€Œæ˜¯æ”¹æˆç›´æ¥è°ƒç”¨å¯¹åº”çš„å®ä¾‹æ–¹æ³•ã€‚<br><code>1.7.2</code> å†™æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">APP</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">app</span> </span>&#123;&#125;  <span class="comment">// æ³¨å†Œç¨‹åº</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">HOME</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;&#125;  <span class="comment">// æ³¨å†Œé¡µé¢</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">LIST</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">component</span> </span>&#123;&#125;  <span class="comment">// æ³¨å†Œç»„ä»¶</span></span><br></pre></td></tr></table></figure><p><code>2.x</code> å†™æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wepy.app(&#123;&#125;)  <span class="comment">// æ³¨å†Œç¨‹åº</span></span><br><span class="line">wepy.page(&#123;&#125;)  <span class="comment">// æ³¨å†Œé¡µé¢</span></span><br><span class="line">wepy.component(&#123;&#125;)  <span class="comment">// æ³¨å†Œç»„ä»¶</span></span><br></pre></td></tr></table></figure><h2 id="ä»£ç ç»“æ„ç”±ç±»ç»“æ„å˜æˆå¯¹è±¡ç»“æ„"><a href="#ä»£ç ç»“æ„ç”±ç±»ç»“æ„å˜æˆå¯¹è±¡ç»“æ„" class="headerlink" title="ä»£ç ç»“æ„ç”±ç±»ç»“æ„å˜æˆå¯¹è±¡ç»“æ„"></a>ä»£ç ç»“æ„ç”±ç±»ç»“æ„å˜æˆå¯¹è±¡ç»“æ„</h2><p>ç”±äºæ³¨å†Œæ–¹å¼çš„æ”¹å˜ï¼Œé‚£ä¹ˆè‡ªç„¶çš„ä»£ç ç»“æ„ä¹Ÿè¦æœ‰æ‰€è°ƒæ•´ã€‚<br><code>1.7.2</code> å†™æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">HOME</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span><br><span class="line">    data = &#123;&#125;</span><br><span class="line">    methods = &#123;&#125;</span><br><span class="line">    onLoad() &#123;&#125;</span><br><span class="line">    onShow() &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>2.x</code> å†™æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wepy.page(&#123;</span><br><span class="line">    data: &#123;&#125;,</span><br><span class="line">    methods: &#123;&#125;,</span><br><span class="line">    onLoad() &#123;&#125;,</span><br><span class="line">    onShow() &#123;&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»…ä»…åªæ˜¯ä»¥é¡µé¢åšä¸ºä¾‹å­ï¼Œ<code>wepy.app()</code> å’Œ <code>wepy.component()</code> ä¹Ÿè¦å¯¹åº”è°ƒæ•´ã€‚</p><h2 id="è‡ªå®šä¹‰æ–¹æ³•å’Œç»„ä»¶äº‹ä»¶å¤„ç†å‡½æ•°éœ€è¦ç§»åˆ°-methods-é‡Œ"><a href="#è‡ªå®šä¹‰æ–¹æ³•å’Œç»„ä»¶äº‹ä»¶å¤„ç†å‡½æ•°éœ€è¦ç§»åˆ°-methods-é‡Œ" class="headerlink" title="è‡ªå®šä¹‰æ–¹æ³•å’Œç»„ä»¶äº‹ä»¶å¤„ç†å‡½æ•°éœ€è¦ç§»åˆ° methods é‡Œ"></a>è‡ªå®šä¹‰æ–¹æ³•å’Œç»„ä»¶äº‹ä»¶å¤„ç†å‡½æ•°éœ€è¦ç§»åˆ° methods é‡Œ</h2><p>åœ¨ <code>WePY 1.7.2</code> ä¸­æ³¨å†Œçš„é¡µé¢æˆ–è€…ç»„ä»¶å‡½æ•°æœ‰è¿™ä¹ˆå‡ ç§ç±»å‹ï¼š</p><ul><li>ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæ¯”å¦‚ <code>onLoad</code>ã€<code>onShow</code> ç­‰ï¼›</li><li><code>wxml</code> äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå³åœ¨ <code>wxml</code> ä¸­ç»‘å®šçš„äº‹ä»¶ï¼Œè¿™ç±»å‡½æ•°éœ€è¦å®šä¹‰åœ¨ <code>methods</code>ï¼Œæ¯”å¦‚ï¼š<code>bindtap</code>ã€<code>bindchange</code> ç­‰ï¼›</li><li>ç»„ä»¶é—´äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå“åº”ç»„ä»¶ä¹‹é—´é€šè¿‡ <code>$broadcast</code>ã€<code>$emit</code>ã€<code>$invoke</code> æ‰€ä¼ é€’çš„äº‹ä»¶å‡½æ•°ï¼Œè¿™ç±»å‡½æ•°éœ€è¦å®šä¹‰åœ¨ <code>events</code> å¯¹è±¡é‡Œï¼›</li><li>è‡ªå®šä¹‰å‡½æ•°ï¼Œå³ç”¨äºè¢«å…¶ä»–å‡½æ•°ç›´æ¥è°ƒç”¨çš„å‡½æ•°ï¼Œéœ€è¦å®šä¹‰åœ¨å’Œ <code>methods</code> åŒçº§çš„ä½ç½®ã€‚</li></ul><p>è€Œåœ¨ <code>WePY 2</code> ä¸­éœ€è¦å°†ç»„ä»¶å¤„ç†å‡½æ•°å’Œè‡ªå®šä¹‰å‡½æ•°éƒ½æ”¾åˆ° <code>methods</code> é‡Œã€‚ä¸‹é¢å‡è®¾ <code>HOME</code> é¡µé¢æœ‰ä¸€ä¸ªå­ç»„ä»¶ <code>child</code>ï¼Œä¸”å­ç»„ä»¶é‡Œä¼šæ‰§è¡Œè¿™å¥ <code>this.$emit(&#39;updateList)</code>ï¼ŒåŸºäºè¿™ä¸ªèƒŒæ™¯çœ‹ä¸‹ <code>2</code> ä¸ªç‰ˆæœ¬ä¸‹çš„å†™æ³•å·®å¼‚ï¼š</p><p><code>1.7.2</code> å†™æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">bindtap</span>=<span class="string">&quot;tapBox&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">HOME</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line">    data = &#123;&#125;</span><br><span class="line"><span class="javascript">    onLoad() &#123;&#125;  <span class="comment">// ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span></span></span><br><span class="line"><span class="javascript">    onShow() &#123;&#125;  <span class="comment">// ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span></span></span><br><span class="line">    events = &#123;</span><br><span class="line"><span class="javascript">        updateList:<span class="function">() =&gt;</span> &#123;&#125;  <span class="comment">// ç»„ä»¶é—´äº‹ä»¶å¤„ç†å‡½æ•°</span></span></span><br><span class="line">    &#125;</span><br><span class="line">    methods = &#123;</span><br><span class="line"><span class="javascript">        tapBox() &#123;  <span class="comment">// wxmläº‹ä»¶å¤„ç†å‡½æ•°</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.getMsg()  </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    getMsg() &#123;&#125;  <span class="comment">// è‡ªå®šä¹‰å‡½æ•°</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>2.x</code> å†™æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> @<span class="attr">tap</span>=<span class="string">&quot;tapBox&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">wepy.page(&#123;</span><br><span class="line">    data: &#123;&#125;,</span><br><span class="line"><span class="javascript">    onLoad() &#123;&#125;,  <span class="comment">// ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span></span></span><br><span class="line"><span class="javascript">    onShow() &#123;&#125;,  <span class="comment">// ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span></span></span><br><span class="line">    methods: &#123;</span><br><span class="line"><span class="javascript">        tapBox() &#123;  <span class="comment">// wxmläº‹ä»¶å¤„ç†å‡½æ•°</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.getMsg()  </span></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        updateList() &#123;&#125;,  <span class="comment">// ç»„ä»¶é—´äº‹ä»¶å¤„ç†å‡½æ•°</span></span></span><br><span class="line"><span class="javascript">        getMsg() &#123;&#125;,  <span class="comment">// è‡ªå®šä¹‰å‡½æ•°</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ç»„ä»¶å¼•å…¥æ–¹å¼å˜æ›´"><a href="#ç»„ä»¶å¼•å…¥æ–¹å¼å˜æ›´" class="headerlink" title="ç»„ä»¶å¼•å…¥æ–¹å¼å˜æ›´"></a>ç»„ä»¶å¼•å…¥æ–¹å¼å˜æ›´</h2><p>åœ¨ <code>2.x</code> ç‰ˆæœ¬ä¸­ç»„ä»¶å¼•å…¥ä¸å†é€šè¿‡ <code>import</code> è¿›è¡Œå¯¼å…¥ï¼Œè€Œæ˜¯ç›´æ¥å®šä¹‰åœ¨é¡µé¢çš„é…ç½® <code>&lt;config&gt;</code> ä¸­ã€‚<br><code>1.7.2</code> å†™æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Child <span class="keyword">from</span> <span class="string">&#x27;./components/child.wpy&#x27;</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">HOME</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line">    components = &#123;</span><br><span class="line">        child: Child</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>2.x</code> å†™æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">wepy.page(&#123;&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">config</span>&gt;</span></span><br><span class="line">&#123;</span><br><span class="line">    usingComponents: &#123;</span><br><span class="line">        &#x27;child&#x27;: &#x27;./components/child.wpy&#x27;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">config</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œ<code>2.x</code> ä¸­å·²ç»å†ä¸æ”¯æŒåœ¨ <code>app.wpy</code> é‡Œå®šä¹‰å…¨å±€ç»„ä»¶ï¼Œè€Œ <code>1.7.2</code> ä¸­æ˜¯å¯ä»¥çš„ã€‚</p><h2 id="ç”Ÿå‘½å‘¨æœŸå‡½æ•°è°ƒæ•´"><a href="#ç”Ÿå‘½å‘¨æœŸå‡½æ•°è°ƒæ•´" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸå‡½æ•°è°ƒæ•´"></a>ç”Ÿå‘½å‘¨æœŸå‡½æ•°è°ƒæ•´</h2><p>åœ¨ <code>2.x</code> ä¸­ç”Ÿå‘½å‘¨æœŸå‡½æ•°åŸºæœ¬å’ŒåŸç”Ÿä¿æŒä¸€è‡´ï¼Œå’Œ <code>1.7.2</code> ç›¸æ¯”ï¼Œåªæ˜¯éœ€è¦æŠŠç»„ä»¶ä¸­çš„ <code>onLoad</code> æ”¹æˆäº† <code>ready</code> å³å¯ï¼Œå…¶ä»–æ— éœ€å˜åŠ¨ã€‚</p><table><thead><tr><th align="center">çº§åˆ«</th><th align="center">1.7.2</th><th align="center">2.x</th></tr></thead><tbody><tr><td align="center">app</td><td align="center">onLaunch</td><td align="center">onLaunch</td></tr><tr><td align="center">app</td><td align="center">onShow</td><td align="center">onShow</td></tr><tr><td align="center">page</td><td align="center">onLoad</td><td align="center">onLoad</td></tr><tr><td align="center">page</td><td align="center">onShow</td><td align="center">onShow</td></tr><tr><td align="center">page</td><td align="center">onReady</td><td align="center">onReady</td></tr><tr><td align="center">component</td><td align="center">-</td><td align="center">created</td></tr><tr><td align="center">component</td><td align="center">-</td><td align="center">attached</td></tr><tr><td align="center">component</td><td align="center">onLoad</td><td align="center">ready</td></tr></tbody></table><p><code>2.x</code> ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåºï¼š</p><p><code>app onLaunch</code> -&gt; <code>app onShow</code> -&gt; <code>component created</code> -&gt; <code>component attached</code> -&gt; <code>page onLoad</code> -&gt; <code>page onShow</code> -&gt; <code>component ready</code> -&gt; <code>page onReady</code> -&gt; <code>page onUnload</code> -&gt; <code>component detached</code></p><blockquote><p><code>page onHide</code> åœ¨å½“å‰é¡µé¢é€šè¿‡ <code>wx.navigateTo</code> æ‰“å¼€æ–°é¡µé¢çš„æ—¶å€™ä¼šæ‰§è¡Œï¼Œè€Œå¦‚æœæ˜¯åœ¨å½“å‰é¡µé¢ç‚¹å‡»è¿”å›ä¸Šä¸€ä¸ªé¡µé¢æˆ–è€… <code>wx.redirectTo</code> å¹¶ä¸ä¼šæ‰§è¡Œã€‚</p></blockquote><h2 id="ä¸å†æ”¯æŒè¯·æ±‚æ‹¦æˆªå™¨ï¼ˆå‘ï¼‰"><a href="#ä¸å†æ”¯æŒè¯·æ±‚æ‹¦æˆªå™¨ï¼ˆå‘ï¼‰" class="headerlink" title="ä¸å†æ”¯æŒè¯·æ±‚æ‹¦æˆªå™¨ï¼ˆå‘ï¼‰"></a>ä¸å†æ”¯æŒè¯·æ±‚æ‹¦æˆªå™¨ï¼ˆå‘ï¼‰</h2><p>åœ¨ <code>1.7.2</code> ä¸­å¯ä»¥åœ¨ <code>wepy.app</code> çš„æ„é€ å‡½æ•°é‡Œé€šè¿‡é…ç½®æ‹¦æˆªå™¨å¯ä»¥å¯¹è¯·æ±‚è¿›è¡Œæ‹¦æˆªï¼Œè¯·æ±‚è¢«æ‹¦æˆªåå¯ä»¥åŠ ä¸Šæ›´å¤šçš„è¯·æ±‚å‚æ•°ä»¥åŠè¯·æ±‚å“åº”åå¯ä»¥è¿›è¡Œç»Ÿä¸€çš„é”™è¯¯å¤„ç†ï¼ŒåŠŸèƒ½è¿˜æ˜¯æŒºå¥½ç”¨çš„ã€‚ä½†æ˜¯åœ¨ <code>2.x</code> ä¸­è¿™ä¸ªåŠŸèƒ½è‡³å°‘ä»æ–‡æ¡£ä¸Šæ˜¯æ²¡çœ‹åˆ°ï¼Œè™½ç„¶æºç é‡Œæä¾›äº†ä¸€ä¸ª <a href="https://github.com/Tencent/wepy/tree/master/packages/use-intercept">use-intercept</a>æ‹¦æˆªå™¨çš„åŒ…ï¼Œä½†æ˜¯ç»è¿‡æˆ‘å‡ ç•ªå°è¯•ä¹‹åè¿˜æ˜¯æŠ¥é”™ï¼Œæ‰€ä»¥å°±æ‰“ç®—å¼ƒç”¨æ‹¦æˆªå™¨äº†ï¼Œç›´æ¥åœ¨è¯·æ±‚é‡Œè¿›è¡Œå‚æ•°å¢åŠ å’Œé”™è¯¯å¤„ç†ã€‚<br><code>request.js</code> è¿™é‡Œè´´ä¸€ä»½å¤§æ¦‚çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wepy <span class="keyword">from</span> <span class="string">&quot;@wepy/core&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; HOST &#125; <span class="keyword">from</span> <span class="string">&quot;./constants&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">url, data, handler = toast, header = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¤´å‚æ•°æ·»åŠ </span></span><br><span class="line">    header[<span class="string">&quot;Content-Type&quot;</span>] = <span class="string">&quot;application/json&quot;</span>;</span><br><span class="line">    header[<span class="string">&quot;cType&quot;</span>] = <span class="string">&quot;WECHAT&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> wepy.wx.request(&#123;  <span class="comment">// è¿™é‡Œ wepy.wx.request è¿™ç§å†™æ³•ï¼Œéœ€è¦åœ¨app.wpyé‡Œé…ç½®promisifyï¼Œ</span></span><br><span class="line">        method: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">        data: data || &#123;&#125;,</span><br><span class="line">        header,</span><br><span class="line">        url: <span class="string">`<span class="subst">$&#123;HOST&#125;</span><span class="subst">$&#123;url&#125;</span>`</span>,</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// è¯·æ±‚æˆåŠŸå¤„ç†ä»£ç æ”¾è¿™å„¿</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(data)</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// é”™è¯¯å¤„ç†ä»£ç æ”¾è¿™å„¿</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>wepy.wx.request</code> è¿™ç§å†™æ³•éœ€è¦åœ¨ <code>app.wpy</code> é‡Œé…ç½® <code>promisify</code>ï¼Œå¯ä»¥å‚è€ƒè¿™é‡Œ <a href="https://github.com/Tencent/wepy/tree/master/packages/use-promisify">use-promisify</a></p><h2 id="æ ‡ç­¾å±æ€§çš„å€¼å¿…é¡»è¢«åŒå¼•å·åŒ…è£¹"><a href="#æ ‡ç­¾å±æ€§çš„å€¼å¿…é¡»è¢«åŒå¼•å·åŒ…è£¹" class="headerlink" title="æ ‡ç­¾å±æ€§çš„å€¼å¿…é¡»è¢«åŒå¼•å·åŒ…è£¹"></a>æ ‡ç­¾å±æ€§çš„å€¼å¿…é¡»è¢«åŒå¼•å·åŒ…è£¹</h2><p>åœ¨ <code>1.7.2</code> ä¸­å¯¹å•å¼•å·å’ŒåŒå¼•å·æ²¡æœ‰å¼ºåˆ¶è¦æ±‚ï¼Œä½†æ˜¯åœ¨ <code>2.x</code> ä¸­å¿…é¡»æ˜¯åŒå¼•å·ï¼Œä¸ç„¶ç¼–è¯‘ä¼šæŠ¥é”™ã€‚<br><code>1.7.2</code> å†™æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span> <span class="attr">bindtap</span>=<span class="string">&#x27;change&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>2.x</code> å†™æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;view&gt;</span><br><span class="line">       &lt;view class&#x3D;&quot;title&quot; bindtap&#x3D;&quot;change&quot;&gt;&lt;&#x2F;view&gt;</span><br><span class="line">    &lt;&#x2F;view&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure><h2 id="è°ƒç”¨åŸç”Ÿäº‹ä»¶éœ€è¦ä¼ å…¥å‚æ•°-wx"><a href="#è°ƒç”¨åŸç”Ÿäº‹ä»¶éœ€è¦ä¼ å…¥å‚æ•°-wx" class="headerlink" title="è°ƒç”¨åŸç”Ÿäº‹ä»¶éœ€è¦ä¼ å…¥å‚æ•°$wx"></a>è°ƒç”¨åŸç”Ÿäº‹ä»¶éœ€è¦ä¼ å…¥å‚æ•°$wx</h2><p>å°ç¨‹åºåŸç”Ÿäº‹ä»¶ä¼šä¼ é€’ä¸€ä¸ª event å‚æ•°ã€‚è€Œ <code>WePY</code> çš„äº‹ä»¶åˆ†å‘å™¨åœ¨å¤„ç†äº‹ä»¶æ—¶ä¼šæœ‰ä¸€ä¸ª <code>$event</code> å‚æ•°ã€‚ <code>$event</code> å‚æ•°æ˜¯å¯¹ <code>event</code> è¿›è¡Œäº†ä¸€å±‚åŒ…è£…ï¼Œç›®åœ°æ˜¯ä¸ºäº†æ— ä¾µå…¥åœ°å¯¹é½ <code>Web Event</code> æ ‡å‡†å±æ€§ã€‚è€Œå…¶ä¸­ <code>$event.$wx === event</code>ã€‚ å› æ­¤ï¼Œ<code>WePY</code> ä¸­å“åº”äº‹ä»¶è·å¾—çš„äº‹ä»¶å‚æ•°å‡æ˜¯æŒ‡ <code>$event</code>ã€‚å¦‚æœæƒ³æ‹¿åˆ°åŸç”Ÿäº‹ä»¶å‚æ•°ï¼Œè¯·ä½¿ç”¨ <code>$event.$wx</code>ã€‚<br><code>1.7.2</code> å†™æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">bindinput</span>=<span class="string">&quot;setInput&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123;name&#125;&#125;&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">HOME</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line">    data = &#123;</span><br><span class="line"><span class="javascript">        name: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line">    &#125;</span><br><span class="line">    methods = &#123;</span><br><span class="line">        setInput(e) &#123;</span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.name = e.detail.value</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>2.x</code> å†™æ³•ï¼Œåªéœ€è¦å°† <code>bindinput=&quot;setInput&quot;</code> æ”¹æˆ <code>@input=&quot;setInput($wx)&quot;</code> å³å¯ã€‚</p><h2 id="æ¨¡æ¿è¯­æ³•ä¿®æ”¹"><a href="#æ¨¡æ¿è¯­æ³•ä¿®æ”¹" class="headerlink" title="æ¨¡æ¿è¯­æ³•ä¿®æ”¹"></a>æ¨¡æ¿è¯­æ³•ä¿®æ”¹</h2><p><code>2.x</code> çš„æ¨¡æ¿è¯­æ³•ç»§æ‰¿äº† <code>WXML</code> çš„åŸºæœ¬æ¨¡æ¿è¯­æ³•ï¼Œå¹¶æ”¯æŒå¤§éƒ¨åˆ† <code>Vue</code> æ¨¡æ¿è¯­æ³•ã€‚<br>å¯¹äºæ ‡ç­¾ï¼š<code>2.x</code> æ”¯æŒç»å¤§éƒ¨åˆ†çš„ <code>HTML</code> æ ‡ç­¾ï¼Œç»è¿‡ç¼–è¯‘åä¼šè½¬æˆæ ‡å‡†çš„ <code>WXML</code> æ¨¡æ¿è¯­æ³•ã€‚ä½†æ˜¯å¯¹äº <code>1.7.2</code> ä¸­çš„æœ‰ä¸€ä¸ªæ ‡ç­¾ <code>&lt;repeat&gt;</code> ä¸å†æ”¯æŒï¼Œéœ€è¦å°†å…¶æ›¿æ¢æˆ <code>&lt;view&gt;</code> å¹¶ä¸”ç”¨ <code>v-for</code> è¿›è¡Œå¾ªç¯æ¸²æŸ“ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„æ¨¡æ¿è¯­æ³•å¯¹äº <code>2</code> ä¸ªç‰ˆæœ¬ä¹‹é—´å†™æ³•çš„å¯¹æ¯”ï¼š<br><code>1.7.2</code> å†™æ³•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å±æ€§ç»‘å®š --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">id</span>=<span class="string">&quot;&#123;&#123; id &#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- æ•°æ®ç»‘å®š --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- äº‹ä»¶ç»‘å®š --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">bindtap</span>=<span class="string">&quot;change(&#123;&#123; index &#125;&#125;)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- classç»‘å®š --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;change &#123;&#123;hasData ? &#x27;has-data&#x27; : &#x27;&#x27; &#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- styleç»‘å®š --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">&quot;&#123;&#123; &#x27;color:&#x27; + color + &#x27;;&#x27; + &#x27;font-size:&#x27; + fontSize + &#x27;;&#x27; &#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- æ¡ä»¶åˆ¤æ–­ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123; flag1 &#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123; flag2 &#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- æ˜¾ç¤ºåˆ¤æ–­ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">hidden</span>=<span class="string">&quot;&#123;&#123; !isShow &#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- åˆ—è¡¨æ¸²æŸ“ï¼Œé»˜è®¤æ˜¯ï¼šitemã€index --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; array &#125;&#125;&quot;</span> <span class="attr">wx:for-index</span>=<span class="string">&quot;idx&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;itemName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>2.x</code> å†™æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å±æ€§ç»‘å®š --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">:id</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- æ•°æ®ç»‘å®š --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- äº‹ä»¶ç»‘å®š --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> @<span class="attr">tap</span>=<span class="string">&quot;change( index )&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- classç»‘å®š --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;change&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; &#x27;has-data&#x27;: hasData &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- styleç»‘å®š --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;&#x27;color&#x27;: color, &#x27;font-size&#x27;: fontSize &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- æ¡ä»¶åˆ¤æ–­ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">v-if</span>=<span class="string">&quot;flag1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">v-else-if</span>=<span class="string">&quot;flag2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">v-else</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- æ˜¾ç¤ºåˆ¤æ–­ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- åˆ—è¡¨æ¸²æŸ“ï¼Œé»˜è®¤æ˜¯ï¼šitemã€index --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in array&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯¹äº <code>v-for</code> å¾ªç¯åˆ—è¡¨çš„æ—¶å€™è¿™é‡Œæœ‰ä¸€ä¸ªï¼ˆå‘ï¼‰ä¸å¾—ä¸æä¸€ä¸‹ï¼Œ<a href="https://github.com/Tencent/wepy/issues/2673#issue-673257402">github issues</a>ç›´æ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">v-for</span>=<span class="string">&quot;item in array&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; index &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> @<span class="attr">tap</span>=<span class="string">&quot;tapItem(index)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯¹äºä¸Šé¢çš„ä»£ç ï¼Œ<code>&lt;view&gt;&#123;&#123; index &#125;&#125;&lt;/view&gt;</code> å¯ä»¥æ­£å¸¸æ˜¾ç¤ºç´¢å¼•å€¼ <code>index</code>ï¼Œä½†æ˜¯ <code>tapItem</code> ä¼ çš„å‚æ•°å´æ˜¯ <code>undefined</code>ï¼Œè¿™æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ˜¾ç¤ºçš„å£°æ˜ç´¢å¼• <code>v-for=&quot;(item, index) in array&quot;</code> å³å¯ã€‚</p><h2 id="è¡¨å•åŒå‘ç»‘å®šè°ƒæ•´"><a href="#è¡¨å•åŒå‘ç»‘å®šè°ƒæ•´" class="headerlink" title="è¡¨å•åŒå‘ç»‘å®šè°ƒæ•´"></a>è¡¨å•åŒå‘ç»‘å®šè°ƒæ•´</h2><p><code>2.x</code> ä¸­ç›´æ¥ç”¨ <code>v-model</code> è¿›è¡Œè¡¨å•ç»‘å®šï¼Œè€Œä¸éœ€è¦å†å®šä¹‰ä¸€ä¸ªå‡½æ•°å¯¹å…¶è¿›è¡Œèµ‹å€¼æ“ä½œã€‚<br><code>1.7.2</code> å†™æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; name &#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;setInput&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">HOME</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line">    data = &#123;</span><br><span class="line"><span class="javascript">        name: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line">    &#125;</span><br><span class="line">    methods = &#123;</span><br><span class="line">        bindtap(e) &#123;</span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.name = e.detail.value</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>2.x</code> å†™æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">wepy.page(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="javascript">        name: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="å…¨å±€æ•°æ®å±æ€§è·å–æ–¹å¼è°ƒæ•´"><a href="#å…¨å±€æ•°æ®å±æ€§è·å–æ–¹å¼è°ƒæ•´" class="headerlink" title="å…¨å±€æ•°æ®å±æ€§è·å–æ–¹å¼è°ƒæ•´"></a>å…¨å±€æ•°æ®å±æ€§è·å–æ–¹å¼è°ƒæ•´</h2><p>æˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦åœ¨ <code>app.wpy</code> é‡Œå®šä¹‰å…¨å±€æ•°æ®å±æ€§ <code>globalData</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">APP</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">app</span> </span>&#123;</span><br><span class="line">    globalData = &#123;</span><br><span class="line">        isBack: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>2.x</code> ä¸­å®šä¹‰æ–¹å¼æ²¡å˜ï¼Œä½†æ˜¯è·å–æ–¹å¼æœ‰æ‰€è°ƒæ•´ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.7.2 è·å–æ–¹å¼</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.$parent.globalData.isBack)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.x è·å–æ–¹å¼</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.$app.$options.globalData.isBack)</span><br></pre></td></tr></table></figure><h2 id="å…¨å±€æ ·å¼å¯¹ç»„ä»¶æ— æ•ˆ"><a href="#å…¨å±€æ ·å¼å¯¹ç»„ä»¶æ— æ•ˆ" class="headerlink" title="å…¨å±€æ ·å¼å¯¹ç»„ä»¶æ— æ•ˆ"></a>å…¨å±€æ ·å¼å¯¹ç»„ä»¶æ— æ•ˆ</h2><p><code>2.x</code> ä¸­å¯¹ç»„ä»¶çš„å®ç°æ–¹å¼ä¿ç•™äº†å¾ˆå¤šåŸç”Ÿå°ç¨‹åºçš„ç‰¹æ€§ï¼Œæ¯”å¦‚è¿™ä¸€æ¡ï¼Œ<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html">ç»„ä»¶æ ·å¼</a> ä¸­æ˜ç¡®è¯´æ˜ï¼šé™¤ç»§æ‰¿æ ·å¼å¤–ï¼Œ <code>app.wxss</code> ä¸­çš„æ ·å¼ã€ç»„ä»¶æ‰€åœ¨é¡µé¢çš„çš„æ ·å¼å¯¹è‡ªå®šä¹‰ç»„ä»¶æ— æ•ˆï¼ˆé™¤éæ›´æ”¹ç»„ä»¶æ ·å¼éš”ç¦»é€‰é¡¹ï¼‰ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡æ›´æ”¹ç»„ä»¶æ ·å¼éš”ç¦»é€‰é¡¹ä½¿å¾—ç»„ä»¶å¯ä»¥è¢«å…¨å±€æ ·å¼ä½œç”¨åˆ°ï¼Œä½†æœ‰æ—¶å€™ä¹Ÿä¼šå¸¦æ¥å¼Šç«¯ï¼Œæ¯”å¦‚åœ¨æ ‡ç­¾çš„å±æ€§ <code>class</code> å‰é¢åŠ ä¸Š <code>~</code>ï¼Œå¯ä»¥ä½¿ç»„ä»¶è·å–å…¨å±€æ ·å¼ï¼Œä½†æ˜¯è¿™æ ·ä¸€æ¥ä¹Ÿå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å®šä¹‰åœ¨ç»„ä»¶é‡Œçš„è¯¥ <code>class</code> æ ·å¼ä¼šå¤±æ•ˆğŸ˜­ã€‚è¿™æ ·çš„å‡çº§çœŸçš„è®©å†™æ ·å¼å¾ˆéš¾å—ï¼Œæ‰€ä»¥ä¸ºäº†è®©æ ·å¼å†™å¾—å°½é‡æ–¹ä¾¿ç®€å•ï¼Œæˆ‘è¿˜æ˜¯è€è€å®å®çš„æŠŠç»„ä»¶çš„æ ·å¼å°±å®šä¹‰åœ¨ç»„ä»¶é‡Œï¼Œä¸ä»å…¨å±€æ‹¿æ ·å¼äº†ã€‚</p><h2 id="ç»„ä»¶é€šä¿¡ä¸å†æ”¯æŒ-broadcast"><a href="#ç»„ä»¶é€šä¿¡ä¸å†æ”¯æŒ-broadcast" class="headerlink" title="ç»„ä»¶é€šä¿¡ä¸å†æ”¯æŒ$broadcast"></a>ç»„ä»¶é€šä¿¡ä¸å†æ”¯æŒ$broadcast</h2><p>çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’æ•°æ®å¯ä»¥é€šè¿‡è®¾ç½®é™æ€æˆ–è€…åŠ¨æ€çš„ <code>prop</code> å±æ€§æˆ–è€…é€šè¿‡å¹¿æ’­ <code>$broadcast</code> æ¥è®©æ‰€æœ‰å­ç»„ä»¶éƒ½æ”¶åˆ°çˆ¶ç»„ä»¶çš„ä¿¡æ¯ï¼Œè€Œå­ç»„ä»¶ç»™çˆ¶ç»„ä»¶é€šä¿¡å¯ä»¥é€šè¿‡åœ¨çˆ¶çº§è‡ªå®šä¹‰äº‹ä»¶ï¼Œåœ¨å­ç»„ä»¶ä¸­é€šè¿‡ <code>$emit</code> æ¥é€šä¿¡ã€‚ä½†æ˜¯åœ¨ <code>2.x</code> ä¸­ä¸å†æ”¯æŒçˆ¶çº§ç»™å­ç»„ä»¶è¿›è¡Œäº‹ä»¶å¹¿æ’­äº†ï¼Œè€Œæ˜¯å¯ä»¥é€šè¿‡ç»™å­ç»„ä»¶åŠ ä¸Š <code>ref</code> å±æ€§åï¼Œé€šè¿‡ <code>this.$refs</code> æ¥ç›´æ¥æ“ä½œå­ç»„ä»¶å‡½æ•°æ¥è¾¾æˆé€šä¿¡çš„ç›®çš„ï¼Œå¦‚ä¸‹ä»£ç ï¼š<br><code>parent.wpy</code>: </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">ref</span>=<span class="string">&quot;child&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">wepy.page(&#123;</span><br><span class="line">    onLoad() &#123;</span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$refs.child.getList()</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>child.wpy</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">wepy.component(&#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        getList() &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="ç»„ä»¶propä¸å†æ”¯æŒåŒå‘ç»‘å®š"><a href="#ç»„ä»¶propä¸å†æ”¯æŒåŒå‘ç»‘å®š" class="headerlink" title="ç»„ä»¶propä¸å†æ”¯æŒåŒå‘ç»‘å®š"></a>ç»„ä»¶propä¸å†æ”¯æŒåŒå‘ç»‘å®š</h2><p>åœ¨ <code>1.7.2</code> ä¸­å¯ä»¥é€šè¿‡å¯ä»¥é€šè¿‡è®¾ç½® <code>prop</code> ç»™å­ç»„ä»¶ä¼ å‚ï¼Œå¦‚æœè®¾ç½®çš„æ—¶å€™åŠ ä¸Š <code>.sync</code> é‚£ä¹ˆå½“çˆ¶ç»„ä»¶å‚æ•°æ›´æ–°çš„æ—¶å€™ï¼Œä¼ é€’ç»™å­ç»„ä»¶çš„ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°ï¼Œè€Œå¦‚æœåœ¨å­ç»„ä»¶çš„ <code>prop</code> é‡ŒåŠ ä¸Š <code>twoWay: true</code> åˆ™å­ç»„ä»¶æ•°æ®å¯ä»¥ç»‘å®šåˆ°çˆ¶ç»„ä»¶ã€‚ä»è€Œå®ç°ç»„ä»¶æ•°æ®çš„åŒå‘ç»‘å®šã€‚åŠŸèƒ½è¿˜æ˜¯æŒºå¥½ç”¨çš„ï¼Œä½†é—æ†¾çš„æ˜¯åœ¨ <code>2.x</code> ä¸­å·²ç»ä¸å†æ”¯æŒé€šè¿‡ <code>twoWay: true</code> çš„æ–¹å¼ä»å­ç»„ä»¶ç»‘å®šæ•°æ®åˆ°çˆ¶ç»„ä»¶ï¼Œçˆ¶åˆ°å­æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ä¸å†éœ€è¦è®¾ç½® <code>sync</code>ã€‚é‚£å­ç»„ä»¶éœ€è¦æ›´æ–°çˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œåªèƒ½é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶ï¼Œç„¶ååœ¨å­ç»„ä»¶é€šè¿‡ <code>$emit</code> è¿›è¡Œæ›´æ–°æ•°æ®äº†ã€‚<br><code>1.7.2</code> å†™æ³•ï¼š<br>çˆ¶é¡µé¢ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">:title.sync</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tempalte</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export default class CHILD extends wepy.component &#123;</span><br><span class="line">    props = &#123;</span><br><span class="line">        title: &#123;</span><br><span class="line">            type: String,</span><br><span class="line">            default: &#x27;&#x27;,</span><br><span class="line">            twoWay: true</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>2.x</code> å†™æ³•ï¼š<br>çˆ¶é¡µé¢ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">:title</span>=<span class="string">&quot;title&quot;</span> @<span class="attr">changeTitle</span>=<span class="string">&quot;changeTitle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tempalte</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">HOME</span> <span class="keyword">extends</span> <span class="title">wepy</span>.<span class="title">page</span> </span>&#123;</span></span><br><span class="line">        data = &#123;</span><br><span class="line"><span class="javascript">            title: <span class="string">&#x27;æœ€å¼€å§‹çš„æ ‡é¢˜&#x27;</span>,</span></span><br><span class="line">        &#125;</span><br><span class="line">        events = &#123;</span><br><span class="line">            changeTitle(val) &#123;</span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.title = val</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">wepy.page(&#123;</span><br><span class="line">    props: &#123;</span><br><span class="line">        title: &#123;</span><br><span class="line">            type: String,</span><br><span class="line">            default: &#x27;&#x27;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    onLoad()&#123;</span><br><span class="line">        this.$emit(&#x27;changeTitle&#x27;, &#x27;æ”¹å˜ä¹‹åçš„æ ‡é¢˜&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure><h2 id="ç»„ä»¶æ’æ§½slotä»£ç æ’å…¥åå±‚çº§é”™ä¹±é—®é¢˜ï¼ˆå‘ï¼‰"><a href="#ç»„ä»¶æ’æ§½slotä»£ç æ’å…¥åå±‚çº§é”™ä¹±é—®é¢˜ï¼ˆå‘ï¼‰" class="headerlink" title="ç»„ä»¶æ’æ§½slotä»£ç æ’å…¥åå±‚çº§é”™ä¹±é—®é¢˜ï¼ˆå‘ï¼‰"></a>ç»„ä»¶æ’æ§½slotä»£ç æ’å…¥åå±‚çº§é”™ä¹±é—®é¢˜ï¼ˆå‘ï¼‰</h2><p>è¿™ä¸ªé—®é¢˜å·²ç»æåˆ° <a href="https://github.com/Tencent/wepy/issues/2649#issue-655560396">github issues</a> ä¸­ï¼Œä¸”å·²ç»è¢«ä½œè€…æ ‡è®°ä¸º <code>bug</code>ã€‚<br>åŸå§‹ä»£ç ï¼š<br><code>parent.wpy</code> çˆ¶é¡µé¢ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>parent<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span>child view<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>child.wpy</code> å­ç»„ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span>child<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœŸæœ›çš„ç¼–è¯‘åï¼ˆæ­£ç¡®ï¼‰çš„ <code>template</code> æ˜¯ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>parent<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span>child<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span>child view<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è€Œå®é™… <code>2.x</code> ç¼–è¯‘åçš„ <code>template</code> æ˜¯ä¼šå°†å¯¹åº”çš„å†…å®¹æ’å…¥åˆ°å­ç»„ä»¶ä¸æ ¹å…ƒç´ å¹¶åˆ—é‚£çº§ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>parent<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span>child<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>child view<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é’ˆå¯¹è€é¡¹ç›®é‡Œç”¨åˆ° <code>slot</code> çš„åœ°æ–¹ï¼Œæˆ‘åªèƒ½æ”¹å†™ä»£ç æ¥é¿å¼€è¿™ä¸ªå‘äº†ã€‚</p><h2 id="èµ„æºå¼•å…¥è°ƒæ•´"><a href="#èµ„æºå¼•å…¥è°ƒæ•´" class="headerlink" title="èµ„æºå¼•å…¥è°ƒæ•´"></a>èµ„æºå¼•å…¥è°ƒæ•´</h2><p>èµ„æºå¼•å…¥æ–¹å¼è°ƒæ•´ä¸»è¦æ˜¯ä»‹ç»ç»„ä»¶å¼•å…¥å’Œå›¾ç‰‡å¼•å…¥ä¸¤ç§ã€‚é¦–å…ˆæ¥çœ‹ç»„ä»¶å¼•å…¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;config&gt;</span><br><span class="line">&#123;</span><br><span class="line">  usingComponents: &#123;</span><br><span class="line">    <span class="string">&#x27;load-more&#x27;</span>: <span class="string">&#x27;/components/loadMore&#x27;</span>,  <span class="comment">// ç»å¯¹è·¯å¾„ </span></span><br><span class="line">    <span class="string">&#x27;btn&#x27;</span>: <span class="string">&#x27;../btn&#x27;</span>,  <span class="comment">// ç›¸å¯¹è·¯å¾„</span></span><br><span class="line">    <span class="string">&#x27;list&#x27;</span>: <span class="string">&#x27;~@/components/list&#x27;</span>,  <span class="comment">// é€šè¿‡wepy.config.jsé…ç½®åˆ«å@æŒ‡å‘srcï¼Œå®é™…ä¸Šä¹Ÿæ˜¯ç»å¯¹è·¯å¾„</span></span><br><span class="line">    <span class="string">&#x27;van-icon&#x27;</span>: <span class="string">&#x27;module:van-icon&#x27;</span>,  <span class="comment">// æ¨¡å—å¼•å…¥</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/config&gt;</span><br></pre></td></tr></table></figure><p>å¯¹äºå›¾ç‰‡å¼•å…¥ï¼Œå­˜åœ¨ä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯é™æ€çš„ï¼Œç¨‹åºåœ¨ç¼–è¯‘çš„æ—¶å€™å°±çŸ¥é“éœ€è¦æŠŠå“ªäº›å›¾ç‰‡åŠ è½½å‡ºæ¥ï¼Œå¦ä¸€ç§æ˜¯åŠ¨æ€çš„ï¼Œåªæœ‰åœ¨ç¨‹åºæ‰§è¡Œçš„æ—¶å€™æ‰çŸ¥é“è¦åŠ è½½å“ªäº›å›¾ç‰‡ã€‚å¯¹äºç¬¬ä¸€ç§æ–¹å¼ï¼Œé€šè¿‡ç›¸å¯¹è·¯å¾„ã€ç»å¯¹è·¯å¾„æˆ–è€… <code>@</code> éƒ½å¯ä»¥å¼•å…¥åˆ°å›¾ç‰‡ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../bg.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/images/icon.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;@/images/nodata.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯¹äºç¬¬äºŒç§æ–¹å¼ï¼Œéœ€è¦å°†åŠ¨æ€çš„å›¾ç‰‡æ”¾ç½®åœ¨æŸä¸ªå›ºå®šçš„ä½ç½®ï¼Œæ¯”å¦‚ <code>/src/images/static</code>ï¼Œç„¶åå† <code>wepy.config.js</code> é‡Œé…ç½® <code>static: [&#39;/src/images/static&#39;]</code> è¿™æ ·åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šæŠŠè¿™ä¸ªè·¯å¾„ä¸‹çš„æ–‡ä»¶éƒ½æ‹·è´åˆ°è¾“å‡ºåçš„ç›®å½•ï¼Œä»è€Œèƒ½å¤Ÿå‡†ç¡®å¼•ç”¨è¿™äº›åŠ¨æ€å›¾ç‰‡ã€‚<br><code>wepy.config.js</code> é…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="keyword">static</span>: [<span class="string">&#x27;src/images/static&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¡µé¢ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;&#x27;../images/static/&#x27; + fileType + &#x27;.png&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;imgSrc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">    wepy.page(&#123;</span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="javascript">            imgSrc: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line">        &#125;,</span><br><span class="line">        onLoad() &#123;</span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.imgSrc = <span class="string">&#x27;/images/static/icon.png&#x27;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é™æ€å›¾ç‰‡ç‰¹æ®Šå¤„ç†ï¼šå•ç‹¬æ”¾åˆ°ä¸€ä¸ªç›®å½•é‡Œï¼Œç„¶åå†WePY.config.jsé‡Œé…ç½®static</p><h2 id="scssé‡Œå¦‚æœå¼•å…¥-wxssæ–‡ä»¶ä¼šç›´æ¥ç»ˆæ­¢ç¼–è¯‘è¿›ç¨‹"><a href="#scssé‡Œå¦‚æœå¼•å…¥-wxssæ–‡ä»¶ä¼šç›´æ¥ç»ˆæ­¢ç¼–è¯‘è¿›ç¨‹" class="headerlink" title="scssé‡Œå¦‚æœå¼•å…¥.wxssæ–‡ä»¶ä¼šç›´æ¥ç»ˆæ­¢ç¼–è¯‘è¿›ç¨‹"></a>scssé‡Œå¦‚æœå¼•å…¥.wxssæ–‡ä»¶ä¼šç›´æ¥ç»ˆæ­¢ç¼–è¯‘è¿›ç¨‹</h2><p>ä¸‹é¢çš„ä»£ç æ˜¯ä¸€ä¸ªé¡µé¢çš„ <code>scss</code> æ ·å¼é‡Œï¼Œå¼•å…¥äº† <code>wxss</code> æ–‡ä»¶ï¼Œæœ€ç»ˆä¼šå¯¼è‡´ç¼–è¯‘è¿›ç¨‹ç»ˆæ­¢ã€‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;scss&quot; type=&quot;text/scss&quot;&gt;</span><br><span class="line">    <span class="keyword">@import</span> <span class="string">&quot;./btn.scss&quot;</span>;</span><br><span class="line">    <span class="keyword">@import</span> <span class="string">&quot;./styles/common.wxss&quot;</span>;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>è§£å†³åŠæ³•ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;scss&quot; type=&quot;text/scss&quot;&gt;</span><br><span class="line">    <span class="keyword">@import</span> <span class="string">&quot;./btn.scss&quot;</span>;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;style lang=&quot;wxss&quot; type=&quot;text/wxss&quot;&gt;</span><br><span class="line">    <span class="keyword">@import</span> <span class="string">&quot;./styles/common.wxss&quot;</span>;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="scssæ ·å¼é‡Œå­˜åœ¨ç‰¹æ®Šå­—ç¬¦ä¼šå¯¼è‡´ç¼–è¯‘æŠ¥é”™ï¼ˆå‘ï¼‰"><a href="#scssæ ·å¼é‡Œå­˜åœ¨ç‰¹æ®Šå­—ç¬¦ä¼šå¯¼è‡´ç¼–è¯‘æŠ¥é”™ï¼ˆå‘ï¼‰" class="headerlink" title="scssæ ·å¼é‡Œå­˜åœ¨ç‰¹æ®Šå­—ç¬¦ä¼šå¯¼è‡´ç¼–è¯‘æŠ¥é”™ï¼ˆå‘ï¼‰"></a>scssæ ·å¼é‡Œå­˜åœ¨ç‰¹æ®Šå­—ç¬¦ä¼šå¯¼è‡´ç¼–è¯‘æŠ¥é”™ï¼ˆå‘ï¼‰</h2><p>è¿™é‡Œçš„ç‰¹æ®Šå­—ç¬¦å…¶å®ä¹Ÿæ˜¯æ­£å¸¸çš„éœ€æ±‚ï¼Œæ¯”å¦‚å¼•å…¥äº†å­—ä½“å›¾æ ‡ï¼Œé‚£å¯èƒ½ä¼šæœ‰è¿™ç§æ ·å¼ <code>content: &#39;\6499&#39;</code>, ç„¶åå› ä¸ºæœ‰åæ–œæ ä¼šç›´æ¥å¯¼è‡´æŠ¥é”™ç¼–è¯‘é”™è¯¯ã€‚è§£å†³æ€è·¯æ˜¯æŠŠè¿™ç§å¸¦æœ‰ç‰¹æ®Šå­—ç¬¦çš„æ ·å¼æ”¾åˆ° <code>wxss</code> é‡Œï¼Œç„¶åé€šè¿‡å¦å¤–ä¸€ä¸ª <code>style</code> å¼•å…¥è¿›æ¥ï¼Œç¼–è¯‘å™¨è¿›è¡Œç¼–è¯‘çš„æ—¶å€™ä¼šå¯¹ <code>scss</code> æ ·å¼è¿›è¡Œç¼–è¯‘å¤„ç†ï¼Œä½†æ˜¯å¯¹äº <code>wxss</code> ä¼šç›´æ¥æ‹·è´åˆ°è¾“å…¥ç›®å½•ï¼Œè€Œä¸è¿›è¡Œç¼–è¯‘å¤„ç†ï¼Œæ‰€ä»¥èƒ½ç»•è¿‡è¿™ä¸ªå‘ã€‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;scss&quot; type=&quot;text/scss&quot;&gt;</span><br><span class="line">    <span class="keyword">@import</span> <span class="string">&quot;./btn.scss&quot;</span>;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;style lang=&quot;wxss&quot; type=&quot;text/wxss&quot;&gt;</span><br><span class="line">    <span class="selector-class">.icon-success</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">&#x27;\e8921&#x27;</span>;</span><br><span class="line">        <span class="attribute">color</span>: green;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®ç»‘å®šæœºåˆ¶è°ƒæ•´"><a href="#æ•°æ®ç»‘å®šæœºåˆ¶è°ƒæ•´" class="headerlink" title="æ•°æ®ç»‘å®šæœºåˆ¶è°ƒæ•´"></a>æ•°æ®ç»‘å®šæœºåˆ¶è°ƒæ•´</h2><p><code>1.7.2</code> ä¸­ç”¨è„æ£€æŸ¥è¿›è¡Œæ•°æ®ç»‘å®šï¼Œé€šè¿‡ <code>$apply()</code> æ–¹æ³•ä½¿å¾—æ•°æ®èƒ½å¤ŸåŠæ—¶æ›´æ–°ï¼Œé¡µé¢é‡æ–°æ¸²æŸ“ã€‚åœ¨ <code>2.x</code> ä¸­ä½¿ç”¨äº† <code>Vue Observer</code> å®ç°æ•°æ®ç»‘å®šï¼Œå‘Šåˆ« <code>$apply()</code>ï¼Œä½†æ˜¯é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼ŒæŸä¸ªæ•°ç»„é¡¹çš„æŸä¸ªå±æ€§æ›´æ–°åï¼Œæ•°ç»„è™½ç„¶æ˜¯æ›´æ–°äº†ï¼Œä½†æ˜¯ä¸èƒ½å¤Ÿè§¦å‘é¡µé¢è¿›è¡Œé‡æ–°æ¸²æŸ“ï¼Œå³ä½¿ä½¿ç”¨ <code>splice</code> ä¹Ÿä¸è¡Œã€‚ä¸è¿‡å¯ä»¥é€šè¿‡æµ…æ‹·è´ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œé‡æ–°èµ‹å€¼ï¼Œä»è€Œè§¦å‘é¡µé¢é‡æ–°æ¸²æŸ“ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">wepy.page(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">        list: [&#123;</span><br><span class="line">            name: <span class="string">&#x27;aaa&#x27;</span>,</span><br><span class="line">            hasBorder: <span class="literal">true</span>,</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            name: <span class="string">&#x27;bbb&#x27;</span>,</span><br><span class="line">            hasBorder: <span class="literal">false</span>,</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        handleClick() &#123;</span><br><span class="line">            <span class="built_in">this</span>.list[<span class="number">1</span>].hasBorder = <span class="literal">true</span>  <span class="comment">// ä¸ä¼šé‡æ–°æ¸²æŸ“é¡µé¢</span></span><br><span class="line">            <span class="built_in">this</span>.list.splice(<span class="number">1</span>, <span class="number">1</span>, &#123;  <span class="comment">// ä¹Ÿä¸ä¼šé‡æ–°æ¸²æŸ“é¡µé¢</span></span><br><span class="line">                name: <span class="string">&#x27;bbb&#x27;</span>,</span><br><span class="line">                hasBorder: <span class="literal">true</span>,</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="built_in">this</span>.list = [...this.list]  <span class="comment">// æµ…æ‹·è´ï¼Œä½¿å¾—this.listçš„å¼•ç”¨åœ°å€å˜åŒ–äº†ï¼Œä½¿å¾—é¡µé¢é‡æ–°æ¸²æŸ“</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°ç¨‹åºã€wepy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScriptä¸­çš„æ•°æ®ç±»å‹</title>
      <link href="/2020/07/29/js-datatype/"/>
      <url>/2020/07/29/js-datatype/</url>
      
        <content type="html"><![CDATA[<h2 id="JavaScriptä¸­æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿ"><a href="#JavaScriptä¸­æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿ" class="headerlink" title="JavaScriptä¸­æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿ"></a>JavaScriptä¸­æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿ</h2><p>è®¡ç®—æœºä¸–ç•Œä¸­å®šä¹‰çš„æ•°æ®ç±»å‹å…¶å®å°±æ˜¯ä¸ºäº†æè¿°ç°å®ä¸–ç•Œä¸­å­˜åœ¨çš„äº‹å®è€Œå®šä¹‰çš„ã€‚æ¯”å¦‚æˆ‘ä»¬ç”¨äººæ¥ä¸¾ä¾‹ï¼š</p><ol><li><p>æœ‰æ²¡æœ‰äººåœ¨æˆ¿é—´é‡Œï¼Ÿè¿™é‡Œçš„æœ‰å’Œæ²¡æœ‰å°±æ˜¯æ˜¯æˆ–è€…éçš„æ¦‚å¿µï¼Œåœ¨ <code>JS</code> ä¸­å¯¹åº” <code>Boolean</code> ç±»å‹ï¼Œ<code>true</code> è¡¨ç¤ºæ˜¯ï¼Œ<code>false</code> è¡¨ç¤ºéï¼›</p></li><li><p>æœ‰å‡ ä¸ªäººåœ¨æˆ¿é—´é‡Œï¼Ÿè¿™é‡Œçš„å‡ ä¸ªè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªé‡çº§æ¦‚å¿µï¼Œåœ¨ <code>JS</code> ä¸­å¯¹åº” <code>Number</code> ç±»å‹ï¼ŒåŒ…å«æ•´æ•°å’Œæµ®ç‚¹æ•°ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„å€¼ï¼Œæ¯”å¦‚ï¼š<code>-Infinity</code> è¡¨ç¤ºè´Ÿæ— ç©·å¤§ã€<code>+Infinity</code> è¡¨ç¤ºæ­£æ— ç©·å¤§ã€<code>NaN</code>     è¡¨ç¤ºä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼›</p></li><li><p>æˆ¿é—´é‡Œçš„è¿™äº›äººéƒ½æ˜¯æˆ‘çš„æœ‹å‹ã€‚è¿™æ˜¯ä¸€å¥é™ˆè¿°è¯­å¥ï¼Œè¿™ç§æ–‡æœ¬ç±»çš„ä¿¡æ¯å°†ä¼šä»¥å­—ç¬¦ä¸²å½¢å¼è¿›è¡Œå­˜å‚¨ï¼Œåœ¨ <code>JS</code> ä¸­å¯¹åº” <code>String</code> ç±»å‹ï¼›</p></li><li><p>æˆ¿é—´é‡Œæ²¡æœ‰äººã€‚è¿™é‡Œçš„æ²¡æœ‰ä»£è¡¨æ— å’Œç©ºçš„æ¦‚å¿µï¼Œåœ¨ <code>JS</code> ä¸­ <code>null</code> å’Œ <code>undefined</code> éƒ½å¯ä»¥è¡¨ç¤ºè¿™ä¸ªæ„æ€ï¼›</p></li><li><p>ç°å®ä¸–ç•Œä¸­æ‰€æœ‰äººéƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œè¿™åœ¨ <code>JS</code> ä¸­å¯¹åº” <code>Symbol</code> ç±»å‹ï¼Œè¡¨ç¤ºå”¯ä¸€ä¸”ä¸å¯æ”¹å˜ï¼›</p></li><li><p><code>Number</code> æ‰€è¡¨ç¤ºçš„æ•´æ•°æ˜¯æœ‰èŒƒå›´çš„ï¼Œè¶…å‡ºèŒƒå›´çš„æ•°æ®å°±æ²¡æ³•ç”¨ <code>Number</code> è¡¨ç¤ºäº†ï¼Œäºæ˜¯ <code>ES10</code> ä¸­æå‡ºäº†ä¸€ç§æ–°çš„æ•°æ®ç±»å‹ <code>BigInt</code>ï¼Œèƒ½è¡¨ç¤ºä»»ä½•ä½æ•°çš„æ•´æ•°ï¼›</p></li><li><p>ä»¥ä¸Šæåˆ°çš„ <code>Boolean</code>ã€<code>Number</code>ã€<code>String</code>ã€<code>null</code>ã€<code>undefined</code>ã€<code>Symbol</code> å’Œ <code>BigInt</code> ç­‰7ç§ç±»å‹éƒ½æ˜¯ <code>JavaScript</code> ä¸­çš„åŸå§‹ç±»å‹ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯éåŸå§‹ç±»å‹å«åšå¯¹è±¡ç±»å‹ï¼›æ¯”å¦‚ï¼šä¸€ä¸ªäººæ˜¯å¯¹è±¡ï¼Œè¿™ä¸ªäººæœ‰åå­—ã€æ€§åˆ«ã€å¹´é¾„ç­‰ï¼›</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou&#x27;</span>,</span><br><span class="line">    sex: <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">    age: <span class="number">26</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><a id="more"></a><h2 id="ä¸ºä»€ä¹ˆè¦åŒºåˆ†åŸå§‹ç±»å‹å’Œå¯¹è±¡ç±»å‹ï¼Ÿä»–ä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦åŒºåˆ†åŸå§‹ç±»å‹å’Œå¯¹è±¡ç±»å‹ï¼Ÿä»–ä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åŒºåˆ†åŸå§‹ç±»å‹å’Œå¯¹è±¡ç±»å‹ï¼Ÿä»–ä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦åŒºåˆ†åŸå§‹ç±»å‹å’Œå¯¹è±¡ç±»å‹ï¼Ÿä»–ä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><h3 id="åŸå§‹ç±»å‹çš„ä¸å¯å˜æ€§"><a href="#åŸå§‹ç±»å‹çš„ä¸å¯å˜æ€§" class="headerlink" title="åŸå§‹ç±»å‹çš„ä¸å¯å˜æ€§"></a>åŸå§‹ç±»å‹çš„ä¸å¯å˜æ€§</h3><p>åœ¨å›ç­”è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å˜é‡åœ¨å†…å­˜ä¸­æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name1 = <span class="string">&#x27;bubuzou&#x27;</span></span><br><span class="line"><span class="keyword">let</span> name2 = name1.concat(<span class="string">&#x27;.com&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(name1)  <span class="comment">// &#x27;bubuzou&#x27;</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œä¸Šé¢è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬å‘ç°å˜é‡ <code>name1</code> çš„å€¼è¿˜æ˜¯ä¸å˜ï¼Œä¾ç„¶æ˜¯ <code>bubuzou</code>ã€‚è¿™å°±è¯´æ˜äº†å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§ã€‚ä½†æ˜¯ä½ çœ‹äº†ä¸‹é¢çš„è¿™æ®µä»£ç ï¼Œä½ å°±ä¼šäº§ç”Ÿç–‘é—®äº†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name1 = <span class="string">&#x27;bubuzou&#x27;</span></span><br><span class="line">name1 += <span class="string">&#x27;.com&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(name1)  <span class="comment">// &#x27;bubuzou.com&#x27;</span></span><br></pre></td></tr></table></figure><p>ä½ è¯´å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œé‚£ç°åœ¨ä¸æ˜¯å˜äº†å˜›ï¼Ÿ<br>å…¶å®è¿™åªæ˜¯å˜é‡çš„å€¼å˜äº†ï¼Œä½†æ˜¯å­˜åœ¨å†…å­˜ä¸­çš„å­—ç¬¦ä¸²ä¾ç„¶ä¸å˜ã€‚è¿™å°±æ¶‰åŠåˆ°å˜é‡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨äº†ã€‚<br>åœ¨ <code>JavaScript</code> ä¸­ï¼Œå˜é‡åœ¨å†…å­˜ä¸­æœ‰2ç§å­˜å‚¨æ–¹å¼ï¼šå­˜åœ¨æ ˆä¸­å’Œå­˜åœ¨å †ä¸­ã€‚é‚£ä¹ˆæ ˆå†…å­˜å’Œå †å†…å­˜æœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿ</p><p>æ ˆå†…å­˜ï¼š</p><ul><li>é¡ºåºå­˜å‚¨ç»“æ„ï¼Œç‰¹ç‚¹æ˜¯å…ˆè¿›åå‡ºã€‚å°±åƒä¸€ä¸ªå…µä¹’çƒç›’å­ä¸€æ ·ï¼Œå…µä¹’çƒä»å¤–é¢ä¸€ä¸ªä¸ªçš„æ”¾å…¥ç›’å­é‡Œï¼Œæœ€å…ˆå–å‡ºæ¥çš„ä¸€å®šæ˜¯æœ€åæ”¾å…¥ç›’å­çš„é‚£ä¸ªã€‚</li><li>å­˜å‚¨ç©ºé—´å›ºå®š</li><li>å¯ä»¥ç›´æ¥æ“ä½œå…¶ä¿å­˜çš„å€¼ï¼Œæ‰§è¡Œæ•ˆç‡é«˜</li></ul><p>å †å†…å­˜ï¼š</p><ul><li>æ— åºçš„å­˜å‚¨ç»“æ„</li><li>å­˜å‚¨ç©ºé—´å¯ä»¥åŠ¨æ€å˜åŒ–</li><li>æ— æ³•ç›´æ¥æ“ä½œå…¶å†…éƒ¨çš„å­˜å‚¨ï¼Œéœ€è¦é€šè¿‡å¼•ç”¨åœ°å€æ“ä½œ</li></ul><p>äº†è§£å®Œå˜é‡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼æœ‰2ç§ï¼Œé‚£æˆ‘ä»¬ç»§ç»­ä»¥ä¸Šé¢é‚£ä¸²ä»£ç ä¸ºä¾‹ï¼Œç”»å‡ºå˜é‡çš„å­˜å‚¨ç»“æ„å›¾ï¼š<br><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202007/jsdatatype01.png" alt="js_datatype_01-w548"><br>ç„¶åæˆ‘ä»¬å¯ä»¥æè¿°ä¸‹å½“è®¡ç®—æœºæ‰§è¡Œè¿™æ®µä»£ç æ—¶å€™çš„å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿé¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªå˜é‡ <code>name1</code> å¹¶ä¸”ç»™å…¶èµ‹å€¼ <code>bubuzou</code> è¿™ä¸ªæ—¶å€™å°±ä¼šåœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€å—ç©ºé—´ç”¨æ¥å­˜å‚¨å­—ç¬¦ä¸² <code>bubuzou</code>ï¼Œç„¶åå˜é‡æŒ‡å‘äº†è¿™ä¸ªå†…å­˜ç©ºé—´ã€‚ç„¶åå†æ‰§è¡Œç¬¬äºŒè¡Œä»£ç  <code>let name2 = name1.concat(&#39;.com&#39;)</code> è¿™é‡Œçš„æ‹¼æ¥æ“ä½œå…¶å®æ˜¯äº§ç”Ÿäº†ä¸€ä¸ªæ–°å­—ç¬¦ä¸² <code>bubuzou.com</code>ï¼Œæ‰€ä»¥åˆä¼šä¸ºè¿™ä¸ªæ–°å­—ç¬¦ä¸²åˆ›å»ºä¸€å—æ–°å†…å­˜ï¼Œå¹¶ä¸”æŠŠå®šä¹‰çš„å˜é‡ <code>name2</code> æŒ‡å‘è¿™ä¸ªå†…å­˜åœ°å€ã€‚ æ‰€ä»¥æˆ‘ä»¬çœ‹åˆ°å…¶å®æ•´ä¸ªæ“ä½œ <code>bubuzou</code> è¿™ä¸ªå­—ç¬¦ä¸²æ‰€åœ¨çš„å†…å­˜å…¶å®æ˜¯æ²¡æœ‰å˜åŒ–çš„ï¼Œå³ä½¿åœ¨ç¬¬äºŒæ®µä»£ç ä¸­æ‰§è¡Œäº† <code>name1 += &#39;.com&#39;</code> æ“ä½œï¼Œå…¶å®ä¹Ÿåªæ˜¯å˜é‡ <code>name1</code> æŒ‡å‘äº†æ–°çš„å­—ç¬¦ä¸² <code>bubuzou.com</code> è€Œå·²ï¼Œæ—§çš„å­—ç¬¦ä¸² <code>bubuzou</code> ä¾ç„¶å­˜åœ¨å†…å­˜ä¸­ï¼Œä¸è¿‡ä¸€æ®µæ—¶é—´åç”±äºè¯¥å­—ç¬¦ä¸²æ²¡æœ‰è¢«å˜é‡æ‰€å¼•ç”¨ï¼Œæ‰€ä»¥ä¼šè¢«å½“æˆåƒåœ¾è¿›è¡Œå›æ”¶ï¼Œä»è€Œé‡Šæ”¾æ‰è¯¥å—å†…å­˜ç©ºé—´ã€‚</p><p>ä»è€Œæˆ‘ä»¬å¾—å‡ºç»“è®ºï¼šåŸå§‹ç±»å‹çš„å€¼éƒ½æ˜¯å›ºå®šçš„ï¼Œè€Œå¯¹è±¡ç±»å‹åˆ™æ˜¯ç”±åŸå§‹ç±»å‹çš„é”®å€¼å¯¹ç»„åˆæˆä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼›ä»–ä»¬åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ï¼ŒåŸå§‹ç±»å‹çš„å€¼ç›´æ¥å­˜åœ¨æ ˆå†…å­˜ä¸­ï¼Œè€Œå¯¹è±¡ç±»å‹çš„å®é™…å€¼æ˜¯å­˜åœ¨å †å†…å­˜ä¸­çš„ï¼Œåœ¨æ ˆå†…å­˜ä¸­ä¿å­˜äº†ä¸€ä»½å¼•ç”¨åœ°å€ï¼Œè¿™ä¸ªåœ°å€æŒ‡å‘å †å†…å­˜ä¸­çš„å®é™…å€¼ï¼Œæ‰€ä»¥å¯¹è±¡ç±»å‹åˆä¹ æƒ¯è¢«å«åšå¼•ç”¨ç±»å‹ã€‚</p><blockquote><p>æƒ³ä¸€ä¸ªé—®é¢˜ä¸ºä»€ä¹ˆå¼•ç”¨ç±»å‹çš„å€¼è¦å­˜å‚¨åˆ°å †å†…å­˜ä¸­ï¼Ÿèƒ½ä¸èƒ½å­˜åˆ°æ ˆå†…å­˜ä¸­å‘¢ï¼Ÿç­”æ¡ˆä¸€ï¼šå› ä¸ºå¼•ç”¨ç±»å‹å¤§å°ä¸å›ºå®šï¼Œè€Œæ ˆçš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œå †ç©ºé—´çš„å¤§å°æ˜¯å¯ä»¥åŠ¨æ€å˜åŒ–çš„ï¼Œæ‰€ä»¥å¼•ç”¨ç±»å‹çš„å€¼é€‚åˆå­˜åœ¨å †ä¸­ï¼›ç­”æ¡ˆäºŒï¼šåœ¨ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦é¢‘ç¹çš„åˆ‡æ¢æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ—¶å€™ï¼Œå¦‚æœæŠŠå¼•ç”¨ç±»å‹çš„å€¼å­˜åˆ°æ ˆä¸­ï¼Œå°†ä¼šé€ æˆéå¸¸å¤§çš„å†…å­˜å¼€é”€ã€‚</p></blockquote><h3 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="headerlink" title="æ¯”è¾ƒ"></a>æ¯”è¾ƒ</h3><p>å½“æˆ‘ä»¬å¯¹ä¸¤ä¸ªå˜é‡è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œä¸åŒç±»å‹çš„å˜é‡æ˜¯æœ‰ä¸åŒè¡¨ç°çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str1 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="keyword">let</span> str2 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log( str1 === str2 ) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person1 = &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person2 = &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log( person1 === person2 )  <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å®šä¹‰äº†2ä¸ªå­—ç¬¦ä¸²å˜é‡å’Œ2ä¸ªå¯¹è±¡å˜é‡ï¼Œä»–ä»¬éƒ½é•¿ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯å­—ç¬¦ä¸²å˜é‡ä¼šç›¸ç­‰ï¼Œå¯¹è±¡å˜é‡å´ä¸ç›¸ç­‰ã€‚è¿™æ˜¯å› ä¸ºåœ¨ <code>JavaScript</code> ä¸­ï¼ŒåŸå‹ç±»å‹è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™æ¯”è¾ƒçš„æ˜¯å­˜åœ¨æ ˆä¸­çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼›è€Œå¼•ç”¨ç±»å‹è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œæ˜¯æ¯”è¾ƒæ ˆå†…å­˜ä¸­çš„å¼•ç”¨åœ°å€æ˜¯å¦ç›¸ç­‰ã€‚<br>å¦‚ä¸Šå‡ ä¸ªå˜é‡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ¨¡å‹å¦‚å›¾æ‰€ç¤ºï¼š<br><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202007/jsdatatype02.png" alt="js_datatype_02"></p><h3 id="å¤åˆ¶"><a href="#å¤åˆ¶" class="headerlink" title="å¤åˆ¶"></a>å¤åˆ¶</h3><p>å˜é‡è¿›è¡Œå¤åˆ¶çš„æ—¶å€™ï¼ŒåŸå§‹ç±»å‹å’Œå¼•ç”¨ç±»å‹å˜é‡ä¹Ÿæ˜¯æœ‰åŒºåˆ«çš„ï¼Œæ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str1 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="keyword">let</span> str2 = str1</span><br><span class="line">str2 = <span class="string">&#x27;world&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log( str1 ) <span class="comment">// &#x27;hello&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202007/jsdatatype03.png" alt="js_datatype_02"></p><ol><li><code>let str1 = &#39;hello&#39;</code>: å¤åˆ¶å‰ï¼Œå®šä¹‰äº†ä¸€ä¸ªå˜é‡ <code>str1</code>ï¼Œå¹¶ä¸”ç»™å…¶èµ‹å€¼ <code>hello</code>ï¼Œè¿™ä¸ªæ—¶å€™ <code>hello</code> è¿™ä¸ªå­—ç¬¦ä¸²å°±ä¼šåœ¨æ ˆå†…å­˜ä¸­è¢«åˆ†é…ä¸€å—ç©ºé—´è¿›è¡Œå­˜å‚¨ï¼Œç„¶åå˜é‡ <code>str1</code> ä¼šæŒ‡å‘è¿™ä¸ªå†…å­˜åœ°å€ï¼›</li><li><code>let str2 = str1</code>ï¼šå¤åˆ¶åï¼ŒæŠŠ <code>str1</code> çš„å€¼èµ‹å€¼ç»™ <code>str2</code>ï¼Œè¿™ä¸ªæ—¶å€™ä¼šåœ¨æ ˆä¸­æ–°å¼€è¾Ÿä¸€å—ç©ºé—´ç”¨æ¥å­˜å‚¨ <code>str2</code> çš„å€¼ï¼›</li><li><code>str2 = &#39;world&#39;</code>ï¼šç»™ <code>str2</code> èµ‹å€¼äº†ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸² <code>world</code>ï¼Œé‚£ä¹ˆå°†æ–°å»ºä¸€å—å†…å­˜ç”¨æ¥å­˜å‚¨ <code>world</code>ï¼ŒåŒæ—¶ <code>str2</code> åŸæ¥çš„å€¼ <code>hello</code> çš„å†…å­˜ç©ºé—´å› ä¸ºæ²¡æœ‰å˜é‡æ‰€å¼•ç”¨ï¼Œæ‰€ä»¥ä¸€æ®µæ—¶é—´åå»ºè¢«å½“æˆåƒåœ¾å›æ”¶ï¼›</li><li><code>console.log( str1 )</code>ï¼šå› ä¸º <code>str1</code> å’Œ <code>str2</code> çš„æ ˆå†…å­˜åœ°å€æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥å³ä½¿ <code>str2</code> çš„å€¼è¢«æ”¹å˜ï¼Œä¹Ÿä¸ä¼šå½±å“åˆ° <code>str1</code>ã€‚</li></ol><p>ç„¶åæˆ‘ä»¬ç»§ç»­å¾€ä¸‹ï¼Œçœ‹ä¸‹å¼•ç”¨ç±»å‹çš„å¤åˆ¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let person1 &#x3D; &#123;</span><br><span class="line">    name: &#39;bubuzou&#39;,</span><br><span class="line">    age: 20</span><br><span class="line">&#125;</span><br><span class="line">let person2 &#x3D; person1</span><br><span class="line">person2.name &#x3D; &#39;bubuzou.com&#39;</span><br><span class="line">console.log( person1.name)  &#x2F;&#x2F; &#39;bubuzou.com&#39;</span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202007/jsdatatype04.png" alt="js_datatype_02"><br>åŸå§‹ç±»å‹è¿›è¡Œå¤åˆ¶çš„æ—¶å€™æ˜¯å˜é‡çš„å€¼è¿›è¡Œé‡æ–°èµ‹å€¼ï¼Œè€Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼šå¼•ç”¨ç±»å‹è¿›è¡Œå¤åˆ¶çš„æ—¶å€™æ˜¯æŠŠå˜é‡æ‰€æŒ‡å‘çš„å¼•ç”¨åœ°å€è¿›è¡Œèµ‹å€¼ç»™æ–°çš„å˜é‡ï¼Œæ‰€ä»¥å¤åˆ¶å <code>person1</code> å’Œ <code>person2</code> éƒ½æŒ‡å‘å †å†…å­˜ä¸­çš„åŒä¸€ä¸ªå€¼ï¼Œæ‰€ä»¥å½“æ”¹å˜ <code>person2.name</code> çš„æ—¶å€™ï¼Œ <code>person1.name</code> ä¹Ÿä¼šè¢«æ”¹å˜å°±æ˜¯è¿™ä¸ªåŸå› ã€‚</p><h3 id="å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’"><a href="#å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’" class="headerlink" title="å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’"></a>å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’</h3><p>å…ˆè¯´ä¸€ä¸‹ç»“è®ºï¼Œåœ¨ <code>JavaScript</code> ä¸­ï¼Œæ‰€æœ‰å‡½æ•°çš„å‚æ•°ä¼ é€’éƒ½æ˜¯æŒ‰å€¼è¿›è¡Œä¼ é€’çš„ã€‚çœ‹å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;bubuzou&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeName</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    name = <span class="string">&#x27;bubuzou.com&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">changeName(name)</span><br><span class="line"><span class="built_in">console</span>.log( name )  <span class="comment">// &#x27;bubuzou&#x27;</span></span><br></pre></td></tr></table></figure><p>å®šä¹‰äº†ä¸€ä¸ªå˜é‡ <code>name</code>ï¼Œå¹¶èµ‹å€¼ä¸º <code>bubuzou</code>ï¼Œå‡½æ•°è°ƒç”¨çš„æ—¶å€™ä¼ å…¥ <code>name</code>ï¼Œè¿™ä¸ªæ—¶å€™ä¼šåœ¨å‡½æ•°å†…éƒ¨åˆ›å»ºä¸€ä¸ªå±€éƒ¨å˜é‡ <code>name</code> å¹¶ä¸”æŠŠå…¨å±€å˜é‡çš„å€¼ <code>bubuzou</code> ä¼ é€’ç»™ä»–ï¼Œè¿™ä¸ªæ“ä½œå…¶å®æ˜¯åœ¨å†…å­˜é‡Œæ–°å»ºäº†ä¸€å—ç©ºé—´ç”¨æ¥å­˜æ”¾å±€éƒ¨å˜é‡çš„å€¼ï¼Œç„¶ååˆæŠŠå±€éƒ¨å˜é‡çš„å€¼æ”¹æˆäº† <code>bubuzou.com</code>ï¼Œè¿™ä¸ªæ—¶å€™å…¶å®å†…å­˜ä¸­ä¼šæœ‰3å—åœ°å€ç©ºé—´åˆ†åˆ«ç”¨æ¥å­˜æ”¾å…¨å±€å˜é‡çš„å€¼ <code>bubuzou</code>ã€å±€éƒ¨å˜é‡åŸæ¥çš„å€¼ <code>bubuzou</code>ã€å’Œå±€éƒ¨å˜é‡æ–°çš„å€¼ <code>bubuzou.com</code>ï¼›ä¸€æ—¦å‡½æ•°è°ƒç”¨ç»“æŸï¼Œå±€éƒ¨å˜é‡å°†è¢«é”€æ¯ï¼Œä¸€æ®µæ—¶é—´åç”±äºå±€éƒ¨å˜é‡æ–°æ—§å€¼æ²¡æœ‰å˜é‡å¼•ç”¨ï¼Œé‚£è¿™ä¸¤å—ç©ºé—´å°†è¢«å›æ”¶é‡Šæ”¾ï¼›æ‰€ä»¥è¿™ä¸ªæ—¶å€™å…¨å±€ <code>name</code> çš„å€¼ä¾ç„¶æ˜¯ <code>bubuzou</code>ã€‚</p><p>å†æ¥çœ‹çœ‹å¼•ç”¨ç±»å‹çš„ä¼ å‚ï¼Œä¼šä¸ä¼šæœ‰æ‰€ä¸åŒå‘¢ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changePerosn</span>(<span class="params">person</span>) </span>&#123;</span><br><span class="line">    person.name = <span class="string">&#x27;bubuzou.com&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">changePerosn( person )</span><br><span class="line"><span class="built_in">console</span>.log( person.name )  <span class="comment">// &#x27;bubuzou.com&#x27;</span></span><br></pre></td></tr></table></figure><p>å¼•ç”¨ç±»å‹è¿›è¡Œå‡½æ•°ä¼ å‚çš„æ—¶å€™ï¼Œä¼šæŠŠå¼•ç”¨åœ°å€å¤åˆ¶ç»™å±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥å…¨å±€çš„ <code>person</code> å’Œå‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡ <code>person</code> æ˜¯æŒ‡å‘åŒä¸€ä¸ªå †åœ°å€çš„ï¼Œæ‰€ä»¥ä¸€æ—¦ä¸€æ–¹æ”¹å˜ï¼Œå¦ä¸€æ–¹ä¹Ÿå°†è¢«æ”¹å˜ï¼Œæ‰€ä»¥è‡³æ­¤æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥ä¸‹ç»“è®ºè¯´ï¼šå½“å‡½æ•°è¿›è¡Œä¼ å‚çš„æ—¶å€™å¦‚æœå‚æ•°æ˜¯å¼•ç”¨ç±»å‹é‚£ä¹ˆå°±æ˜¯å¼•ç”¨ä¼ é€’å˜›ï¼Ÿ</p><p>å°†ä¸Šé¢çš„ä¾‹å­æ”¹é€ ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changePerosn</span>(<span class="params">person</span>) </span>&#123;</span><br><span class="line">    person.name = <span class="string">&#x27;bubuzou.com&#x27;</span></span><br><span class="line">    person = &#123;</span><br><span class="line">        name: <span class="string">&#x27;hello world&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">changePerosn( person )  </span><br><span class="line"><span class="built_in">console</span>.log( person.name )  <span class="comment">// &#x27;bubuzou.com&#x27;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœ <code>person</code> æ˜¯å¼•ç”¨ä¼ é€’çš„è¯ï¼Œé‚£å°±ä¼šè‡ªåŠ¨æŒ‡å‘å€¼è¢«æ”¹ä¸º <code>hello world</code> çš„æ–°å¯¹è±¡ï¼›äº‹å®ä¸Šå…¨å±€å˜é‡ <code>person</code> çš„å¼•ç”¨åœ°å€è‡ªå§‹è‡³ç»ˆéƒ½æ²¡æœ‰æ”¹å˜ï¼Œå€’æ˜¯å±€éƒ¨å˜é‡ <code>person</code> çš„å¼•ç”¨åœ°å€å‘ç”Ÿäº†æ”¹å˜ã€‚</p><h2 id="null-å’Œ-undefined-å‚»å‚»åˆ†ä¸æ¸…ï¼Ÿ"><a href="#null-å’Œ-undefined-å‚»å‚»åˆ†ä¸æ¸…ï¼Ÿ" class="headerlink" title="null å’Œ undefined å‚»å‚»åˆ†ä¸æ¸…ï¼Ÿ"></a>null å’Œ undefined å‚»å‚»åˆ†ä¸æ¸…ï¼Ÿ</h2><p><code>null</code> åœ¨ <code>JavaScript</code> ä¸­è‡ªæˆä¸€ç§åŸå§‹ç±»å‹ï¼Œåªæœ‰ä¸€ä¸ªå€¼ <code>null</code>ï¼Œè¡¨ç¤ºæ— ã€ç©ºã€å€¼æœªçŸ¥ç­‰ç‰¹æ®Šå€¼ã€‚å¯ä»¥ç›´æ¥ç»™ä¸€ä¸ªå˜é‡èµ‹å€¼ä¸º <code>null</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="literal">null</span></span><br></pre></td></tr></table></figure><p><code>undefined</code> å’Œ <code>null</code> ä¸€æ ·ä¹Ÿæ˜¯è‡ªæˆä¸€ç§åŸå§‹ç±»å‹ï¼Œè¡¨ç¤ºå®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯æ²¡æœ‰èµ‹å€¼ï¼Œåˆ™è¿™ä¸ªå˜é‡çš„å€¼å°±æ˜¯ <code>undefined</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s</span><br><span class="line"><span class="built_in">console</span>.log( s)  <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶å¯ä»¥ç»™å˜é‡ç›´æ¥èµ‹å€¼ä¸º <code>undefined</code> ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯åŸåˆ™ä¸Šå¦‚æœä¸€ä¸ªå˜é‡å€¼æœªå®šï¼Œæˆ–è€…è¡¨ç¤ºç©ºï¼Œåˆ™ç›´æ¥èµ‹å€¼ä¸º <code>null</code> æ¯”è¾ƒåˆé€‚ï¼Œä¸å»ºè®®ç»™å˜é‡èµ‹å€¼ <code>undefined</code>ã€‚<br><code>null</code> å’Œ <code>undefined</code> åœ¨è¿›è¡Œé€»è¾‘åˆ¤æ–­çš„æ—¶å€™éƒ½æ˜¯ä¼šè¿”å› <code>false</code> çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="literal">null</span>, b</span><br><span class="line"><span class="built_in">console</span>.log( a ? <span class="string">&#x27;a&#x27;</span> : b ? <span class="string">&#x27;b&#x27;</span> : <span class="string">&#x27;c&#x27;</span>) <span class="comment">// &#x27;c&#x27;</span></span><br></pre></td></tr></table></figure><p><code>null</code> åœ¨è½¬æˆæ•°å­—ç±»å‹çš„æ—¶å€™ä¼šå˜æˆ <code>0</code>ï¼Œè€Œ <code>undefined</code> ä¼šå˜æˆ <code>NaN</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="literal">null</span>, b</span><br><span class="line"><span class="built_in">console</span>.log( +<span class="literal">null</span> )  <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log( + b )  <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure><h2 id="è®¤è¯†æ–°çš„åŸå§‹ç±»å‹-Symbol"><a href="#è®¤è¯†æ–°çš„åŸå§‹ç±»å‹-Symbol" class="headerlink" title="è®¤è¯†æ–°çš„åŸå§‹ç±»å‹ Symbol"></a>è®¤è¯†æ–°çš„åŸå§‹ç±»å‹ Symbol</h2><p><code>Symbol</code> å€¼è¡¨ç¤ºå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œæ˜¯ <code>ES6</code> ä¸­æ–°å¼•è¿›çš„ä¸€ç§åŸå§‹ç±»å‹ã€‚å¯ä»¥é€šè¿‡ <code>Symbol()</code> æ¥åˆ›å»ºä¸€ä¸ªé‡è¦çš„å€¼ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥æè¿°å€¼ï¼›å…¶å”¯ä¸€æ€§ä½“ç°åœ¨å³ä½¿æ˜¯ä¼ å…¥ä¸€æ ·çš„æè¿°ï¼Œä»–ä»¬ä¸¤è€…ä¹‹é—´ä¹Ÿæ˜¯ä¸ä¼šç›¸ç­‰çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="built_in">Symbol</span>(<span class="string">&#x27;bubuzou&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> b = <span class="built_in">Symbol</span>(<span class="string">&#x27;bubuzou&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log( a === b )  <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="å…¨å±€çš„-Symbol"><a href="#å…¨å±€çš„-Symbol" class="headerlink" title="å…¨å±€çš„ Symbol"></a>å…¨å±€çš„ Symbol</h3><p>é‚£è¿˜æ˜¯ä¸æ˜¯ä»»æ„2ä¸ªæè¿°ä¸€æ ·çš„ <code>Symbol</code> éƒ½æ˜¯ä¸ç›¸ç­‰çš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚å¯ä»¥é€šè¿‡ <code>Symbol.for()</code> æ¥æŸ¥æ‰¾æˆ–æ–°å»ºä¸€ä¸ª <code>Symbol</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="built_in">Symbol</span>.for(<span class="string">&#x27;bubuzou&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> b = <span class="built_in">Symbol</span>.for(<span class="string">&#x27;bubuzou&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log( a === b )  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>Symbol.for()</code> å¯ä»¥åœ¨æ ¹æ®ä¼ å…¥çš„æè¿°åœ¨å…¨å±€èŒƒå›´å†…è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æ‰¾åˆ°åˆ™æ–°å»ºä¸€ä¸ª <code>Symbol</code>ï¼Œå¹¶ä¸”è¿”å›ï¼›æ‰€ä»¥å½“æ‰§è¡Œç¬¬äºŒè¡Œä»£ç  <code>Symbol.for(&#39;bubuzou&#39;)</code> çš„æ—¶å€™ï¼Œå°±ä¼šæ‰¾åˆ°å…¨å±€çš„é‚£ä¸ªæè¿°ä¸º <code>bubuzou</code> çš„ <code>Symbol</code>ï¼Œæ‰€ä»¥è¿™é‡Œ  <code>a</code> å’Œ <code>b</code> æ˜¯ä¼šç»å¯¹ç›¸ç­‰çš„ã€‚</p><p>å±…ç„¶å¯ä»¥é€šè¿‡æè¿°æ‰¾åˆ° <code>Symbol</code>ï¼Œ é‚£æ˜¯å¦å¯ä»¥é€šè¿‡ <code>Symbol</code> æ¥æ‰¾åˆ°æè¿°å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä½†æ˜¯å¿…é¡»æ˜¯å…¨å±€çš„ <code>Symbol</code>ï¼Œå¦‚æœæ²¡æ‰¾åˆ°åˆ™ä¼šè¿”å› <code>undefined</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="built_in">Symbol</span>.for(<span class="string">&#x27;bubuzou&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> desc = <span class="built_in">Symbol</span>.keyFor( a )</span><br><span class="line"><span class="built_in">console</span>.log( desc )  <span class="comment">// &#x27;bubuzou&#x27;</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å¯¹äºä»»ä½•ä¸€ä¸ª <code>Symbol</code> éƒ½æœ‰ä¸€ä¸ªå±æ€§ <code>description</code>ï¼Œè¡¨ç¤ºè¿™ä¸ª <code>Symbol</code> çš„æè¿°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="built_in">Symbol</span>(<span class="string">&#x27;bubuzou&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log( a.description )  <span class="comment">// &#x27;bubuzou&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="Symbol-ä½œä¸ºå¯¹è±¡å±æ€§"><a href="#Symbol-ä½œä¸ºå¯¹è±¡å±æ€§" class="headerlink" title="Symbol ä½œä¸ºå¯¹è±¡å±æ€§"></a>Symbol ä½œä¸ºå¯¹è±¡å±æ€§</h3><p>æˆ‘ä»¬çŸ¥é“å¯¹è±¡çš„å±æ€§é”®å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä¸èƒ½æ˜¯ <code>Number</code> æˆ–è€… <code>Boolean</code>ï¼›<code>Symbol</code> è¢«è®¾è®¡å‡ºæ¥å…¶å®æœ€å¤§çš„åˆè¡·å°±æ˜¯ç”¨äºå¯¹è±¡çš„å±æ€§é”®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = <span class="built_in">Symbol</span>(<span class="string">&#x27;20&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou&#x27;</span>,</span><br><span class="line">    [age]: <span class="string">&#x27;20&#x27;</span>,  <span class="comment">// åœ¨å¯¹è±¡å­—é¢é‡ä¸­ä½¿ç”¨ `Symbol` çš„æ—¶å€™éœ€è¦ä½¿ç”¨ä¸­æ‹¬å·åŒ…èµ·æ¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç»™ <code>person</code> å®šä¹‰äº†ä¸€ä¸ª <code>Symbol</code> ä½œä¸ºå±æ€§é”®çš„å±æ€§ï¼Œè¿™ä¸ªç›¸æ¯”äºç”¨å­—ç¬¦ä¸²ä½œä¸ºå±æ€§é”®æœ‰å•¥å¥½å¤„å‘¢ï¼Ÿæœ€æ˜æ˜¾çš„å¥½å¤„å°±æ˜¯å¦‚æœè¿™ä¸ª <code>person</code> å¯¹è±¡æ˜¯å¤šä¸ªå¼€å‘è€…è¿›è¡Œå¼€å‘ç»´æŠ¤ï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“å†ç»™ <code>person</code> æ·»åŠ å±æ€§çš„æ—¶å€™å‡ºç°åŒåçš„ï¼Œå¦‚æœæ˜¯ç”¨å­—ç¬¦ä¸²ä½œä¸ºå±æ€§é”®é‚£è‚¯å®šæ˜¯å†²çªäº†ï¼Œä½†æ˜¯å¦‚æœç”¨ <code>Symbol</code> ä½œä¸ºå±æ€§é”®ï¼Œå°±ä¸ä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜äº†ï¼Œå› ä¸ºå®ƒæ˜¯å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥å¯ä»¥ä½¿å¯¹è±¡çš„å±æ€§å—åˆ°ä¿æŠ¤ï¼Œä¸ä¼šè¢«æ„å¤–çš„è®¿é—®æˆ–è€…é‡å†™ã€‚</p><p>æ³¨æ„ä¸€ç‚¹ï¼Œå¦‚æœç”¨ <code>Symbol</code> ä½œä¸ºå¯¹è±¡çš„å±æ€§é”®çš„æ—¶å€™ï¼Œ<code>for in</code> ã€<code>Object.getOwnPropertyNames</code>ã€æˆ– <code>Object.keys()</code> è¿™é‡Œå¾ªç¯æ˜¯æ— æ³•è·å– <code>Symbol</code> å±æ€§é”®çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ <code>Object.getOwnPropertySymbols()</code> æ¥è·å–ï¼›åœ¨ä¸Šé¢çš„ä»£ç åŸºç¡€ä¸Šï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> o <span class="keyword">in</span> person) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log( o ) <span class="comment">// &#x27;name&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log (<span class="built_in">Object</span>.keys( person )) <span class="comment">// [&#x27;name&#x27;]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyNames( person ))  <span class="comment">// [&#x27;name&#x27;]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertySymbols( person ))  <span class="comment">// [Symbol(20)]</span></span><br></pre></td></tr></table></figure><h2 id="ä½ å¯èƒ½ä¸çŸ¥é“çš„-Number-ç±»å‹"><a href="#ä½ å¯èƒ½ä¸çŸ¥é“çš„-Number-ç±»å‹" class="headerlink" title="ä½ å¯èƒ½ä¸çŸ¥é“çš„ Number ç±»å‹"></a>ä½ å¯èƒ½ä¸çŸ¥é“çš„ Number ç±»å‹</h2><p><code>JavaScript</code> ä¸­çš„æ•°å­—æ¶‰åŠåˆ°äº†ä¸¤ç§ç±»å‹ï¼šä¸€ç§æ˜¯ <code>Number</code> ç±»å‹ï¼Œä»¥ <code>64</code> ä½çš„æ ¼å¼ <code>IEEE-754</code> å­˜å‚¨ï¼Œä¹Ÿè¢«ç§°ä¸ºåŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œå°±æ˜¯æˆ‘ä»¬å¹³å¸¸ä½¿ç”¨çš„æ•°å­—ï¼Œå…¶èŒƒå›´æ˜¯ $2^{52}$ åˆ° -$2^{52}$ï¼›ç¬¬äºŒç§ç±»å‹æ˜¯ <code>BigInt</code>ï¼Œèƒ½å¤Ÿè¡¨ç¤ºä»»æ„é•¿åº¦çš„æ•´æ•°ï¼ŒåŒ…æ‹¬è¶…å‡º $2^{52}$ åˆ° -$2^{52}$ è¿™ä¸ªèŒƒå›´å¤–çš„æ•°ã€‚è¿™é‡Œæˆ‘ä»¬åªä»‹ç» <code>Number</code> æ•°å­—ã€‚</p><h3 id="å¸¸è§„æ•°å­—å’Œç‰¹æ®Šæ•°å­—"><a href="#å¸¸è§„æ•°å­—å’Œç‰¹æ®Šæ•°å­—" class="headerlink" title="å¸¸è§„æ•°å­—å’Œç‰¹æ®Šæ•°å­—"></a>å¸¸è§„æ•°å­—å’Œç‰¹æ®Šæ•°å­—</h3><p>å¯¹äºä¸€ä¸ªå¸¸è§„çš„æ•°å­—ï¼Œæˆ‘ä»¬ç›´æ¥å†™å³å¯ï¼Œæ¯”å¦‚:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = <span class="number">20</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿˜æœ‰ä¸€ç§ä½æ•°ç‰¹åˆ«å¤šçš„æ•°å­—æˆ‘ä»¬ä¹ æƒ¯ç”¨ç§‘å­¦è®¡æ•°æ³•çš„è¡¨ç¤ºæ–¹æ³•æ¥å†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> billion = <span class="number">1000000000</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">1e9</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä¸¤ç§å†™æ³•æ˜¯ä¸€ä¸ªæ„æ€ï¼Œ <code>1e9</code> è¡¨ç¤º 1 x $10^9$ï¼›å¦‚æœæ˜¯ <code>1e-3</code> è¡¨ç¤º 1 / $10^3$ = 0.001ã€‚<br>åœ¨ <code>JavaScript</code> ä¸­ä¹Ÿå¯ä»¥ç”¨æ•°å­—è¡¨ç¤ºä¸åŒçš„è¿›åˆ¶ï¼Œæ¯”å¦‚ï¼šåè¿›åˆ¶ä¸­çš„ <code>10</code> åœ¨ äºŒã€å…«å’Œåå…­è¿›åˆ¶ä¸­å¯ä»¥åˆ†åˆ«è¡¨ç¤ºæˆ <code>0b1010</code>ã€<code>0o12</code> å’Œ <code>0xa</code>ï¼›å…¶ä¸­çš„ <code>0b</code> æ˜¯äºŒè¿›åˆ¶å‰ç¼€ï¼Œ<code>0o</code> æ˜¯å…«è¿›åˆ¶å‰ç¼€ï¼Œè€Œ <code>ox</code> æ˜¯åå…­è¿›åˆ¶çš„å‰ç¼€ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ <code>toString(base)</code> æ–¹æ³•æ¥è¿›è¡Œè¿›åˆ¶ä¹‹é—´çš„è½¬æ¢ï¼Œ <code>base</code> æ˜¯è¿›åˆ¶çš„åŸºæ•°ï¼Œè¡¨ç¤ºå‡ è¿›åˆ¶ï¼Œé»˜è®¤æ˜¯ <code>10</code> è¿›åˆ¶çš„ï¼Œä¼šè¿”å›ä¸€ä¸ªè½¬æ¢æ•°å€¼çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚æ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">10</span></span><br><span class="line"><span class="built_in">console</span>.log( num.toString( <span class="number">2</span> ))  <span class="comment">// &#x27;1010&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log( num.toString( <span class="number">8</span> ))  <span class="comment">// &#x27;12&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log( num.toString( <span class="number">16</span> ))  <span class="comment">// &#x27;a&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ•°å­—ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨æ–¹æ³•ï¼Œ<code>10..toString( 2 )</code> è¿™é‡Œçš„  2ä¸ª <code>.</code> å·ä¸æ˜¯å†™é”™äº†ï¼Œè€Œæ˜¯å¿…é¡»æ˜¯2ä¸ªï¼Œå¦åˆ™ä¼šæŠ¥ <code>SyntaxError</code> é”™è¯¯ã€‚ç¬¬ä¸€ä¸ªç‚¹è¡¨ç¤ºå°æ•°ç‚¹ï¼Œç¬¬äºŒä¸ªæ‰æ˜¯è°ƒç”¨æ–¹æ³•ã€‚ç‚¹ç¬¦å·é¦–å…ˆä¼šè¢«è®¤ä¸ºæ˜¯æ•°å­—å¸¸é‡çš„ä¸€éƒ¨åˆ†ï¼Œå…¶æ¬¡å†è¢«è®¤ä¸ºæ˜¯å±æ€§è®¿é—®ç¬¦ï¼Œå¦‚æœåªå†™ä¸€ä¸ªç‚¹çš„è¯ï¼Œè®¡ç®—æœºæ— æ³•çŸ¥é“è¿™ä¸ªæ˜¯è¡¨ç¤ºä¸€ä¸ªå°æ•°å‘¢è¿˜æ˜¯å»è°ƒç”¨å‡½æ•°ã€‚æ•°å­—ç›´æ¥è°ƒç”¨å‡½æ•°è¿˜å¯ä»¥æœ‰ä»¥ä¸‹å‡ ç§å†™æ³•ï¼š</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">10</span>).toString(<span class="number">2</span>)  <span class="comment">// å°†10ç”¨æ‹¬å·åŒ…èµ·æ¥</span></span><br><span class="line"><span class="number">10.0</span>.toString(<span class="number">2</span>)  <span class="comment">// å°†10å†™æˆ10.0çš„å½¢å¼</span></span><br><span class="line"><span class="number">10</span> .toString(<span class="number">2</span>)   <span class="comment">// ç©ºæ ¼åŠ ä¸Šç‚¹ç¬¦å·è°ƒç”¨</span></span><br></pre></td></tr></table></figure><p><code>Number</code> ç±»å‹é™¤äº†å¸¸è§„æ•°å­—ä¹‹å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ç‰¹æ®Šçš„æ•°å­—ï¼š</p><ul><li><p><code>NaN</code>ï¼šè¡¨ç¤ºä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œé€šå¸¸æ˜¯ç”±ä¸åˆç†çš„è®¡ç®—å¯¼è‡´çš„ç»“æœï¼Œæ¯”å¦‚æ•°å­—é™¤ä»¥å­—ç¬¦ä¸² <code>1 / &#39;a&#39;</code>;<br><code>NaN</code> å’Œä»»ä½•æ•°è¿›è¡Œæ¯”è¾ƒéƒ½æ˜¯è¿”å› <code>false</code>ï¼ŒåŒ…æ‹¬ä»–è‡ªå·±ï¼š <code>NaN == NaN</code> ä¼šè¿”å› <code>false</code>;<br>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯ <code>NaN</code> å‘¢ï¼Ÿæœ‰å››ç§æ–¹æ³•ï¼š</p><p>  æ–¹æ³•ä¸€ï¼šé€šè¿‡ <code>isNaN()</code> å‡½æ•°ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šå¯¹ä¼ å…¥çš„å­—ç¬¦ä¸²ä¹Ÿè¿”å› <code>true</code>ï¼Œæ‰€ä»¥åˆ¤æ–­ä¸å‡†ç¡®ï¼Œä¸æ¨èä½¿ç”¨ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">isNaN</span>( <span class="number">1</span> / <span class="string">&#x27;a&#x27;</span>)<span class="string">`  // true</span></span><br><span class="line"><span class="string">isNaN( &#x27;a&#x27; )  // true</span></span><br></pre></td></tr></table></figure><p>  æ–¹æ³•äºŒï¼šé€šè¿‡ <code>Number.isNaN()</code>ï¼Œæ¨èä½¿ç”¨ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>.isNaN( <span class="number">1</span> / <span class="string">&#x27;a&#x27;</span>)<span class="string">`  // true</span></span><br><span class="line"><span class="string">Number.isNaN( &#x27;a&#x27; )  // false</span></span><br></pre></td></tr></table></figure><p>  æ–¹æ³•ä¸‰ï¼šé€šè¿‡ <code>Object.is(a, isNaN)</code>:</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is( <span class="number">0</span>/<span class="string">&#x27;a&#x27;</span>, <span class="literal">NaN</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is( <span class="string">&#x27;a&#x27;</span>, <span class="literal">NaN</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>  æ–¹æ³•å››ï¼šé€šè¿‡åˆ¤æ–­ <code>n !== n</code>ï¼Œè¿”å› <code>true</code>ï¼Œ åˆ™ <code>n</code> æ˜¯ <code>NaN</code> :</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="number">1</span>/<span class="string">&#x27;a&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log( s !== s )  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p><code>+Infinity</code>ï¼šè¡¨ç¤ºæ­£æ— ç©·å¤§ï¼Œæ¯”å¦‚ <code>1/0</code> è®¡ç®—çš„ç»“æœ, <code>-Infinity</code> è¡¨ç¤ºè´Ÿæ— ç©·å¤§ï¼Œæ¯”å¦‚ <code>-1/0</code> çš„ç»“æœã€‚</p></li><li><p><code>+0</code> å’Œ <code>-0</code>ï¼Œ<code>JavaScript</code> ä¸­çš„æ•°å­—éƒ½æœ‰æ­£è´Ÿä¹‹åˆ†ï¼ŒåŒ…æ‹¬é›¶ä¹Ÿæ˜¯è¿™æ ·ï¼Œä»–ä»¬ä¼šç»å¯¹ç›¸ç­‰ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log( +<span class="number">0</span> === <span class="number">-0</span> )  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="ä¸ºä»€ä¹ˆ-0-1-0-2-ä¸ç­‰äº-0-3"><a href="#ä¸ºä»€ä¹ˆ-0-1-0-2-ä¸ç­‰äº-0-3" class="headerlink" title="ä¸ºä»€ä¹ˆ 0.1 + 0.2 ä¸ç­‰äº 0.3"></a>ä¸ºä»€ä¹ˆ 0.1 + 0.2 ä¸ç­‰äº 0.3</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log( <span class="number">0.1</span> + <span class="number">0.2</span> == <span class="number">0.3</span> )  <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>æœ‰æ²¡æœ‰æƒ³è¿‡ä¸ºä»€ä¹ˆä¸Šé¢çš„ä¼šä¸ç›¸ç­‰ï¼Ÿå› ä¸ºæ•°å­—åœ¨ <code>JavaScript</code> å†…éƒ¨æ˜¯ç”¨äºŒè¿›åˆ¶è¿›è¡Œå­˜å‚¨çš„ï¼Œå…¶éµå¾ª <code>IEEE 754</code> æ ‡å‡†çš„ï¼Œç”¨ <code>64</code> ä½æ¥å­˜å‚¨ä¸€ä¸ªæ•°å­—ï¼Œ<code>64</code> ä½åˆè¢«åˆ†éš”æˆ <code>1</code>ã€<code>11</code> å’Œ <code>52</code> ä½æ¥åˆ†åˆ«è¡¨ç¤ºç¬¦å·ä½ã€æŒ‡æ•°ä½å’Œå°¾æ•°ä½ã€‚<br><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/202007/jsdatatype05.png" alt="js_datatype_05"><br>æ¯”å¦‚åè¿›åˆ¶çš„ <code>0.1</code> è½¬æˆäºŒè¿›åˆ¶åæ˜¯å¤šå°‘ï¼Ÿæˆ‘ä»¬æ‰‹åŠ¨è®¡ç®—ä¸€ä¸‹ï¼Œåè¿›åˆ¶å°æ•°è½¬äºŒè¿›åˆ¶å°æ•°çš„è§„åˆ™æ˜¯â€œä¹˜2å–æ•´ï¼Œé¡ºåºæ’åˆ—â€ï¼Œå…·ä½“åšæ³•æ˜¯ï¼šç”¨2ä¹˜åè¿›åˆ¶å°æ•°ï¼Œå¯ä»¥å¾—åˆ°ç§¯ï¼Œå°†ç§¯çš„æ•´æ•°éƒ¨åˆ†å–å‡ºï¼Œå†ç”¨2ä¹˜ä½™ä¸‹çš„å°æ•° éƒ¨åˆ†ï¼Œåˆå¾—åˆ°ä¸€ä¸ªç§¯ï¼Œå†å°†ç§¯çš„æ•´æ•°éƒ¨åˆ†å–å‡ºï¼Œå¦‚æ­¤è¿›è¡Œï¼Œç›´åˆ°ç§¯ä¸­çš„å°æ•°éƒ¨åˆ†ä¸ºé›¶ï¼Œæˆ–è€…è¾¾åˆ°æ‰€è¦æ±‚çš„ç²¾åº¦ä¸ºæ­¢ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0.1 * 2 &#x3D; 0.2  &#x2F;&#x2F; ç¬¬1æ­¥ï¼šæ•´æ•°ä¸º0ï¼Œå°æ•°0.2</span><br><span class="line">0.2 * 2 &#x3D; 0.4  &#x2F;&#x2F; ç¬¬2æ­¥ï¼šæ•´æ•°ä¸º0ï¼Œå°æ•°0.4</span><br><span class="line">0.4 * 2 &#x3D; 0.8  &#x2F;&#x2F; ç¬¬3æ­¥ï¼šæ•´æ•°ä¸º0ï¼Œå°æ•°0.8</span><br><span class="line">0.8 * 2 &#x3D; 1.6  &#x2F;&#x2F; ç¬¬4æ­¥ï¼šæ•´æ•°ä¸º1ï¼Œå°æ•°0.6</span><br><span class="line">0.6 * 2 &#x3D; 1.2  &#x2F;&#x2F; ç¬¬5æ­¥ï¼šæ•´æ•°ä¸º1ï¼Œå°æ•°0.2</span><br><span class="line">0.2 * 2 &#x3D; 0.4  &#x2F;&#x2F; ç¬¬6æ­¥ï¼šæ•´æ•°ä¸º0ï¼Œå°æ•°0.4</span><br><span class="line">0.4 * 2 &#x3D; 0.8  &#x2F;&#x2F; ç¬¬7æ­¥ï¼šæ•´æ•°ä¸º0ï¼Œå°æ•°0.8</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿™æ ·ä¾æ¬¡è®¡ç®—ä¸‹å»ä¹‹åå‘ç°å¾—åˆ°æ•´æ•°çš„é¡ºåºæ’åˆ—æ˜¯ <code>0001100110011001100....</code> æ— é™å¾ªç¯ï¼Œæ‰€ä»¥ç†è®ºä¸Šåè¿›åˆ¶çš„ <code>0.1</code> è½¬æˆäºŒè¿›åˆ¶åä¼šæ˜¯ä¸€ä¸ªæ— é™å°æ•° <code>0.0001100110011001100...</code>ï¼Œç”¨ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºåå°†æ˜¯ <code>1.100110011001100...</code> x $2^{-4}$ ï¼Œä½†æ˜¯ç”±äº <code>IEEE 754</code> æ ‡å‡†è§„å®šäº†ä¸€ä¸ªæ•°å­—çš„å­˜å‚¨ä½æ•°åªèƒ½æ˜¯ <code>64</code> ä½ï¼Œæœ‰æ•ˆä½æ•°æ˜¯ <code>52</code> ä½ï¼Œæ‰€ä»¥å°†ä¼šå¯¹ <code>1100110011001100....</code> è¿™ä¸ªæ— é™æ•°å­—è¿›è¡Œèˆå…¥æ€»å…± <code>52</code> ä½ä½œä¸ºæœ‰æ•ˆä½ï¼Œç„¶åäºŒè¿›åˆ¶çš„æœ«å°¾å–èˆè§„åˆ™æ˜¯çœ‹åä¸€ä½æ•°å¦‚æœæ˜¯ <code>1</code> åˆ™è¿›ä½ï¼Œå¦‚æœæ˜¯ <code>0</code> åˆ™ç›´æ¥èˆå»ã€‚é‚£ä¹ˆç”±äº <code>1100110011001100....</code> è¿™ä¸²æ•°å­—çš„ç¬¬ <code>53</code> ä½åˆšå¥½æ˜¯ <code>1</code> ï¼Œæ‰€ä»¥æœ€ç»ˆçš„ä¼šå¾—åˆ°çš„æ•°å­—æ˜¯ <code>1100110011001100110011001100110011001100110011001101</code>ï¼Œå³<br><code>1.100110011001100110011001100110011001100110011001101</code> x $2^{-4}$ã€‚<br>åè¿›åˆ¶è½¬äºŒè¿›åˆ¶ä¹Ÿå¯ä»¥ç”¨ <code>toString</code> æ¥è¿›è¡Œè½¬åŒ–:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log( <span class="number">0.1</span>.toString(<span class="number">2</span>) )  <span class="comment">// &#x27;0.0001100110011001100110011001100110011001100110011001101&#x27;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å‘ç°åè¿›åˆ¶çš„ <code>0.1</code> åœ¨è½¬åŒ–æˆäºŒè¿›åˆ¶å°æ•°çš„æ—¶å€™å‘ç”Ÿäº†ç²¾åº¦çš„ä¸¢å¤±ï¼Œç”±äºè¿›ä½ï¼Œå®ƒæ¯”çœŸå®çš„å€¼æ›´å¤§äº†ã€‚è€Œ <code>0.2</code> å…¶å®ä¹Ÿæœ‰è¿™æ ·çš„é—®é¢˜ï¼Œä¹Ÿä¼šå‘ç”Ÿç²¾åº¦çš„ä¸¢å¤±ï¼Œæ‰€ä»¥å®é™…ä¸Š <code>0.1 + 0.2</code> ä¸ä¼šç­‰äº <code>0.3</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log( <span class="number">0.1</span> + <span class="number">0.2</span> )  <span class="comment">// 0.30000000000000004</span></span><br></pre></td></tr></table></figure><p>é‚£æ˜¯ä¸æ˜¯æ²¡åŠæ³•åˆ¤æ–­ä¸¤ä¸ªå°æ•°æ˜¯å¦ç›¸ç­‰äº†å‘¢ï¼Ÿç­”æ¡ˆè‚¯å®šæ˜¯å¦å®šçš„ï¼Œæƒ³è¦åˆ¤æ–­2ä¸ªå°æ•° <code>n1</code> å’Œ <code>n2</code> æ˜¯å¦ç›¸ç­‰å¯ä»¥å¦‚ä¸‹æ“ä½œï¼š</p><ul><li><p>æ–¹æ³•ä¸€ï¼šä¸¤å°æ•°ä¹‹å·®çš„ç»å¯¹å€¼å¦‚æœæ¯” <code>Number.EPSILON</code> è¿˜å°ï¼Œé‚£ä¹ˆè¯´æ˜ä¸¤æ•°æ˜¯ç›¸ç­‰çš„ã€‚</p><p>  <code>Number.EPSILON</code> æ˜¯ <code>ES6</code> ä¸­çš„è¯¯å·®ç²¾åº¦ï¼Œå®é™…å€¼å¯ä»¥è®¤ä¸ºç­‰äº $2^{-52}$ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ( <span class="built_in">Math</span>.abs( n1 - n2 ) &lt; <span class="built_in">Number</span>.EPSILON ) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">&#x27;n1 å’Œ n2 ç›¸ç­‰&#x27;</span> )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ–¹æ³•äºŒï¼šé€šè¿‡ <code>toFixed(n)</code> å¯¹ç»“æœè¿›è¡Œèˆå…¥ï¼Œ<code>toFixed()</code> å°†ä¼šè¿”å›å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ ä¸€å…ƒåŠ  <code>+</code> å°†å…¶è½¬æˆæ•°å­—ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sum = <span class="number">0.1</span> + <span class="number">0.2</span></span><br><span class="line"><span class="built_in">console</span>.log( +sum.toFixed(<span class="number">2</span>) === <span class="number">0.3</span> )  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="æ•°å€¼çš„è½¬åŒ–"><a href="#æ•°å€¼çš„è½¬åŒ–" class="headerlink" title="æ•°å€¼çš„è½¬åŒ–"></a>æ•°å€¼çš„è½¬åŒ–</h3><p>å¯¹æ•°å­—è¿›è¡Œæ“ä½œçš„æ—¶å€™å°†å¸¸å¸¸é‡åˆ°æ•°å€¼çš„èˆå…¥å’Œå­—ç¬¦ä¸²è½¬æ•°å­—çš„é—®é¢˜ï¼Œè¿™é‡Œæˆ‘ä»¬å·©å›ºä¸‹åŸºç¡€ã€‚å…ˆæ¥çœ‹èˆå…¥çš„ï¼š</p><ul><li><p><code>Math.floor()</code>ï¼Œå‘ä¸‹èˆå…¥ï¼Œå¾—åˆ°ä¸€ä¸ªæ•´æ•°:</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.floor(<span class="number">2.2</span>)  <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">Math</span>.floor(<span class="number">2.8</span>)  <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></li><li><p><code>Math.ceil()</code>ï¼Œå‘ä¸Šèˆå…¥ï¼Œå¾—åˆ°ä¸€ä¸ªæ•´æ•°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.ceil(<span class="number">2.2</span>)  <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">Math</span>.ceil(<span class="number">2.8</span>)  <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></li><li><p><code>Math.round()</code>ï¼Œå¯¹ç¬¬ä¸€ä½å°æ•°è¿›è¡Œå››èˆäº”å…¥ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.round(<span class="number">2.26</span>)  <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">Math</span>.round(<span class="number">2.46</span>)  <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">Math</span>.round(<span class="number">2.50</span>)  <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></li><li><p><code>Number.prototype.toFixed(n)</code>ï¼Œå’Œ <code>Math.round()</code> ä¸€æ ·ä¼šè¿›è¡Œå››èˆäº”å…¥ï¼Œå°†æ•°å­—èˆå…¥åˆ°å°æ•°ç‚¹å <code>n</code> ä½ï¼Œå¹¶ä¸”ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">12.</span>.toFixed(<span class="number">2</span>)  <span class="comment">// &#x27;12.00&#x27;</span></span><br><span class="line"><span class="number">12.14</span>.toFixed(<span class="number">1</span>)  <span class="comment">// &#x27;12.1&#x27;</span></span><br><span class="line"><span class="number">12.15</span>.toFixed(<span class="number">1</span>)  <span class="comment">// &#x27;12.2&#x27;</span></span><br></pre></td></tr></table></figure><p>  ä¸ºä»€ä¹ˆ <code>6.35.toFixed(1)</code> ä¼šç­‰äº <code>6.3</code> ï¼Ÿå› ä¸º <code>6.35</code> å…¶å®æ˜¯ä¸€ä¸ªæ— é™å°æ•°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6.35</span>.toFixed(<span class="number">20</span>)  <span class="comment">// &quot;6.34999999999999964473&quot;</span></span><br></pre></td></tr></table></figure><p>  æ‰€ä»¥åœ¨ <code>6.35.toFixed(1)</code> æ±‚å€¼çš„æ—¶å€™ä¼šå¾—åˆ° <code>6.3</code>ã€‚</p></li></ul><p>å†æ¥çœ‹çœ‹å­—ç¬¦ä¸²è½¬æ•°å­—çš„æƒ…å†µï¼š</p><ul><li><p><code>Number(n)</code> æˆ– <code>+n</code>ï¼Œç›´æ¥å°† <code>n</code> è¿›è¡Œä¸¥æ ¼è½¬åŒ–ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>(<span class="string">&#x27; &#x27;</span>)  <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log( +<span class="string">&#x27;&#x27;</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">&#x27;010&#x27;</span>)  <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log( +<span class="string">&#x27;010&#x27;</span> )  <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">&#x27;12a&#x27;</span>)  <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">console</span>.log( +<span class="string">&#x27;12a&#x27;</span> )  <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure></li><li><p><code>parseInt()</code>ï¼Œéä¸¥æ ¼è½¬åŒ–ï¼Œä»å·¦åˆ°å³è§£æå­—ç¬¦ä¸²ï¼Œé‡åˆ°éæ•°å­—å°±åœæ­¢è§£æï¼Œå¹¶ä¸”æŠŠè§£æçš„æ•°å­—è¿”å›ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;12a&#x27;</span>)  <span class="comment">// 12</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;a12&#x27;</span>)  <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;&#x27;</span>)  <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;0xA&#x27;</span>)  <span class="comment">// 10ï¼Œ0xå¼€å¤´çš„å°†ä¼šè¢«å½“æˆåå…­è¿›åˆ¶æ•°</span></span><br></pre></td></tr></table></figure><p>  <code>parseInt()</code> é»˜è®¤æ˜¯ç”¨åè¿›åˆ¶å»è§£æå­—ç¬¦ä¸²çš„ï¼Œå…¶å®ä»–æ˜¯æ”¯æŒä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°çš„ï¼Œè¡¨ç¤ºè¦ä»¥å¤šå°‘è¿›åˆ¶çš„    åŸºæ•°å»è§£æç¬¬ä¸€ä¸ªå‚æ•°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;1010&#x27;</span>, <span class="number">2</span>)  <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;ff&#x27;</span>, <span class="number">16</span>)  <span class="comment">// 255</span></span><br></pre></td></tr></table></figure></li></ul><p>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯æ•´æ•°ï¼Ÿä»‹ç»ä¸¤ç§æ–¹æ³•ï¼š</p><ul><li><p>æ–¹æ³•ä¸€ï¼šé€šè¿‡ <code>Number.isInteger()</code>:</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>.isInteger(<span class="number">12.0</span>)  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isInteger(<span class="number">12.2</span>)  <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p>æ–¹æ³•äºŒï¼š<code>typeof num == &#39;number&#39; &amp;&amp; num % 1 == 0</code></p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isInteger</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> num == <span class="string">&#x27;number&#x27;</span> &amp;&amp; num % <span class="number">1</span> == <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="å¼•ç”¨ç±»å‹"><a href="#å¼•ç”¨ç±»å‹" class="headerlink" title="å¼•ç”¨ç±»å‹"></a>å¼•ç”¨ç±»å‹</h2><p>é™¤äº†åŸå§‹ç±»å‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„ç±»å‹ï¼šå¼•ç”¨ç±»å‹ã€‚é«˜ç¨‹é‡Œè¿™æ ·æè¿°ä»–ï¼šå¼•ç”¨ç±»å‹æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œ ç”¨äºå°†æ•°æ®å’ŒåŠŸèƒ½ç»„ç»‡åœ¨ä¸€èµ·ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çœ‹åˆ°æœ€å¤šçš„å¼•ç”¨ç±»å‹å°±æ˜¯ <code>Object</code>ï¼Œåˆ›å»ºä¸€ä¸ª <code>Object</code> æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><p>æ–¹å¼ä¸€ï¼šé€šè¿‡ <code>new</code> æ“ä½œç¬¦ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">person.name = <span class="string">&#x27;bubuzou&#x27;</span></span><br><span class="line">person.age = <span class="number">20</span></span><br></pre></td></tr></table></figure></li><li><p>æ–¹å¼äºŒï¼šé€šè¿‡å¯¹è±¡å­—é¢é‡ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€å–œæ¬¢ç”¨çš„æ–¹å¼ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou&#x27;</span>,</span><br><span class="line">    age: <span class="number">20</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="å†…ç½®çš„å¼•ç”¨ç±»å‹"><a href="#å†…ç½®çš„å¼•ç”¨ç±»å‹" class="headerlink" title="å†…ç½®çš„å¼•ç”¨ç±»å‹"></a>å†…ç½®çš„å¼•ç”¨ç±»å‹</h3><p>é™¤äº† <code>Object</code> å¤–ï¼Œåœ¨ <code>JavaScript</code> ä¸­è¿˜æœ‰åˆ«çš„å†…ç½®çš„å¼•ç”¨ç±»å‹ï¼Œæ¯”å¦‚ï¼š</p><ul><li><code>Array</code> æ•°ç»„</li><li><code>Date</code> æ—¥æœŸ</li><li><code>RegExp</code> æ­£åˆ™è¡¨è¾¾å¼</li><li><code>Function</code> å‡½æ•°</li></ul><p>ä»–ä»¬çš„åŸå‹é“¾çš„é¡¶ç«¯éƒ½ä¼šæŒ‡å‘ <code>Object</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line"><span class="built_in">console</span>.log( d.__proto__.__proto__.constructor )  <span class="comment">// Æ’ Object() &#123; [native code] &#125;</span></span><br></pre></td></tr></table></figure><h3 id="åŒ…è£…ç±»å‹"><a href="#åŒ…è£…ç±»å‹" class="headerlink" title="åŒ…è£…ç±»å‹"></a>åŒ…è£…ç±»å‹</h3><p>å…ˆæ¥çœ‹ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆåŸå§‹ç±»å‹çš„å˜é‡æ²¡æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯å´èƒ½å¤Ÿè°ƒç”¨æ–¹æ³•å‘¢ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;bubuzou&#x27;</span></span><br><span class="line">str.substring(<span class="number">0</span>, <span class="number">3</span>)  <span class="comment">// &#x27;bub&#x27;</span></span><br></pre></td></tr></table></figure><p>å› ä¸º <code>JavaScript</code> ä¸ºäº†æ›´å¥½åœ°æ“ä½œåŸå§‹ç±»å‹ï¼Œè®¾è®¡å‡ºäº†å‡ ä¸ªå¯¹åº”çš„åŒ…è£…ç±»å‹ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯ï¼š</p><ul><li><code>Boolean</code></li><li><code>Number</code></li><li><code>String</code></li></ul><p>ä¸Šé¢é‚£ä¸²ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å…¶å®æ˜¯è¿™æ ·çš„ï¼š</p><ol><li>åˆ›å»º String ç±»å‹çš„ä¸€ä¸ªå®ä¾‹;</li><li>åœ¨å®ä¾‹ä¸Šè°ƒç”¨æŒ‡å®šçš„æ–¹æ³•;</li><li>é”€æ¯è¿™ä¸ªå®ä¾‹</li></ol><p>ç”¨ä»£ç ä½“ç°ä¸€ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&#x27;bubuzou&#x27;</span>)</span><br><span class="line">str.substring(<span class="number">0</span>, <span class="number">3</span>)</span><br><span class="line">str = <span class="literal">null</span></span><br></pre></td></tr></table></figure><p>åŸå§‹ç±»å‹è°ƒç”¨å‡½æ•°å…¶å®å°±æ˜¯è‡ªåŠ¨è¿›è¡Œäº†è£…ç®±æ“ä½œï¼Œå°†åŸå§‹ç±»å‹è½¬æˆäº†åŒ…è£…ç±»å‹ï¼Œç„¶åå…¶å®åŸå§‹ç±»å‹å’ŒåŒ…è£…ç±»å‹æ˜¯æœ‰æœ¬è´¨åŒºåˆ«çš„ï¼ŒåŸå§‹ç±»å‹æ˜¯åŸå§‹å€¼ï¼Œè€ŒåŒ…è£…ç±»å‹æ˜¯å¯¹è±¡å®ä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str1 = <span class="string">&#x27;bubuzou&#x27;</span></span><br><span class="line"><span class="keyword">let</span> str2 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&#x27;bubuzou&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log( str1 === str2 )  <span class="comment">// fasle</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="keyword">typeof</span> str1 )  <span class="comment">// &#x27;string&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="keyword">typeof</span> str2 )  <span class="comment">// &#x27;object&#x27;</span></span><br></pre></td></tr></table></figure><p>å±…ç„¶æœ‰è£…ç®±æ“ä½œï¼Œé‚£è‚¯å®šä¹Ÿæœ‰æ‹†ç®±æ“ä½œï¼Œæ‰€è°“çš„æ‹†ç®±å°±æ˜¯åŒ…è£…ç±»å‹è½¬æˆåŸå§‹ç±»å‹çš„è¿‡ç¨‹ï¼Œåˆå« <code>ToPromitive</code>ï¼Œæ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    toString: <span class="function">() =&gt;</span> &#123; <span class="keyword">return</span> <span class="string">&#x27;bubuzou&#x27;</span> &#125;,</span><br><span class="line">    valueOf: <span class="function">() =&gt;</span> &#123; <span class="keyword">return</span> <span class="number">20</span> &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log( +obj )  <span class="comment">// 20</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">`<span class="subst">$&#123;obj&#125;</span>`</span> )  <span class="comment">// &#x27;bubuzou&#x27;</span></span><br></pre></td></tr></table></figure><p>åœ¨æ‹†ç®±æ“ä½œçš„æ—¶å€™ï¼Œé»˜è®¤ä¼šå°è¯•è°ƒç”¨åŒ…è£…ç±»å‹çš„ <code>toString()</code> å’Œ <code>valueOf()</code> æ–¹æ³•ï¼Œå¯¹äºä¸åŒçš„ <code>hint</code> è°ƒç”¨é¡ºåºä¼šæœ‰æ‰€åŒºåˆ«ï¼Œå¦‚æœ <code>hint</code> æ˜¯ <code>string</code> åˆ™ä¼˜å…ˆè°ƒç”¨ <code>toString()</code>ï¼Œå¦åˆ™çš„è¯ï¼Œåˆ™ä¼˜å…ˆè°ƒç”¨ <code>valueOf()</code>ã€‚<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ª <code>Object</code> å¯¹è±¡å…·æœ‰ <code>toString()</code> å’Œ <code>valueOf()</code> æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log( obj.toString() )  <span class="comment">// &#x27;[object Object]&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log( obj.valueOf() )  <span class="comment">// &#123;&#125;ï¼ŒvalueOfä¼šè¿”å›å¯¹è±¡æœ¬èº«</span></span><br></pre></td></tr></table></figure><h2 id="ç±»å‹è£…æ¢"><a href="#ç±»å‹è£…æ¢" class="headerlink" title="ç±»å‹è£…æ¢"></a>ç±»å‹è£…æ¢</h2><p><code>Javascript</code> æ˜¯å¼±ç±»å‹çš„è¯­éŸ³ï¼Œæ‰€ä»¥å¯¹å˜é‡è¿›è¡Œæ“ä½œçš„æ—¶å€™ç»å¸¸ä¼šå‘ç”Ÿç±»å‹çš„è½¬æ¢ï¼Œå°¤å…¶æ˜¯éšå¼ç±»å‹è½¬æ¢ï¼Œå¯èƒ½ä¼šè®©ä»£ç æ‰§è¡Œç»“æœå‡ºä¹æ„æ–™ä¹‹å¤–ï¼Œæ¯”å¦‚å¦‚ä¸‹çš„ä»£ç ä½ èƒ½ç†è§£å…¶æ‰§è¡Œç»“æœå˜›ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[] + &#123;&#125;  <span class="comment">// &#x27;[object Object]&#x27;</span></span><br><span class="line">&#123;&#125; + []  <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><h3 id="ç±»å‹è½¬æ¢è§„åˆ™"><a href="#ç±»å‹è½¬æ¢è§„åˆ™" class="headerlink" title="ç±»å‹è½¬æ¢è§„åˆ™"></a>ç±»å‹è½¬æ¢è§„åˆ™</h3><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦çŸ¥é“ç±»å‹è½¬æ¢çš„è§„åˆ™ï¼Œä»¥ä¸‹æ•´ç†å‡ºä¸€ä¸ªè¡¨æ ¼ï¼Œåˆ—å‡ºäº†å¸¸è§å€¼å’Œç±»å‹ä»¥åŠè½¬æ¢ä¹‹åçš„ç»“æœï¼Œä»…ä¾›å‚è€ƒã€‚</p><table><thead><tr><th align="center">è½¬æ¢å‰çš„å€¼</th><th align="center">è½¬æ¢å‰ç±»å‹</th><th align="center">toBoolean</th><th align="center">toNumber</th><th align="center">toString</th></tr></thead><tbody><tr><td align="center">true</td><td align="center">Boolean</td><td align="center">-</td><td align="center">1</td><td align="center">â€œtrueâ€</td></tr><tr><td align="center">false</td><td align="center">Boolean</td><td align="center">-</td><td align="center">0</td><td align="center">â€œfalseâ€</td></tr><tr><td align="center">null</td><td align="center">Null</td><td align="center">false</td><td align="center">0</td><td align="center">â€œnullâ€</td></tr><tr><td align="center">undefined</td><td align="center">Undefined</td><td align="center">false</td><td align="center">NaN</td><td align="center">â€œundefinedâ€</td></tr><tr><td align="center">123</td><td align="center">Number</td><td align="center">true</td><td align="center">-</td><td align="center">â€œ123â€</td></tr><tr><td align="center">Infinity</td><td align="center">Number</td><td align="center">true</td><td align="center">-</td><td align="center">â€œInfinityâ€</td></tr><tr><td align="center">0</td><td align="center">Number</td><td align="center">false</td><td align="center">-</td><td align="center">â€œ0â€</td></tr><tr><td align="center">NaN</td><td align="center">Number</td><td align="center">false</td><td align="center">-</td><td align="center">â€œNaNâ€</td></tr><tr><td align="center">â€œâ€</td><td align="center">String</td><td align="center">false</td><td align="center">0</td><td align="center">-</td></tr><tr><td align="center">â€œ â€œ</td><td align="center">String</td><td align="center">true</td><td align="center">0</td><td align="center">-</td></tr><tr><td align="center">â€œ0â€</td><td align="center">String</td><td align="center">true</td><td align="center">0</td><td align="center">-</td></tr><tr><td align="center">â€œ123â€</td><td align="center">String</td><td align="center">true</td><td align="center">123</td><td align="center">-</td></tr><tr><td align="center">â€œ123abcâ€</td><td align="center">String</td><td align="center">true</td><td align="center">NaN</td><td align="center">-</td></tr><tr><td align="center">Symbol()</td><td align="center">Symbol</td><td align="center">true</td><td align="center">TypeError</td><td align="center">TypeError</td></tr><tr><td align="center">{}</td><td align="center">Object</td><td align="center">true</td><td align="center">NaN</td><td align="center">â€œ[object Object]â€</td></tr><tr><td align="center">[]</td><td align="center">Object</td><td align="center">true</td><td align="center">0</td><td align="center">â€œâ€</td></tr><tr><td align="center">[â€œ0â€]</td><td align="center">Object</td><td align="center">true</td><td align="center">0</td><td align="center">â€œ0â€</td></tr><tr><td align="center">[â€œ0â€, â€œaâ€]</td><td align="center">Object</td><td align="center">true</td><td align="center">NaN</td><td align="center">â€œ0,aâ€</td></tr><tr><td align="center">[â€œ0â€, undefined, â€œaâ€]</td><td align="center">Object</td><td align="center">true</td><td align="center">Nan</td><td align="center">â€œ0,,aâ€</td></tr></tbody></table><h3 id="æ˜¾ç¤ºç±»å‹è½¬æ¢"><a href="#æ˜¾ç¤ºç±»å‹è½¬æ¢" class="headerlink" title="æ˜¾ç¤ºç±»å‹è½¬æ¢"></a>æ˜¾ç¤ºç±»å‹è½¬æ¢</h3><p>æˆ‘ä»¬å¹³æ—¶å†™ä»£ç çš„æ—¶å€™åº”è¯¥å°½é‡è®©å†™å‡ºæ¥çš„ä»£ç é€šä¿—æ˜“æ‡‚ï¼Œè®©åˆ«äººèƒ½é˜…è¯»åçŸ¥é“ä½ æ˜¯è¦åšä»€ä¹ˆï¼Œæ‰€ä»¥åœ¨å¯¹ç±»å‹è¿›è¡Œåˆ¤æ–­çš„æ—¶å€™åº”è¯¥å°½é‡æ˜¾ç¤ºçš„å¤„ç†ã€‚<br>æ¯”å¦‚å°†å­—ç¬¦ä¸²è½¬æˆæ•°å­—ï¼Œå¯ä»¥è¿™æ ·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>( <span class="string">&#x27;21&#x27;</span> )  <span class="comment">// 21</span></span><br><span class="line"><span class="built_in">Number</span>( <span class="string">&#x27;21.8&#x27;</span> )  <span class="comment">// 21.8</span></span><br><span class="line">+<span class="string">&#x27;21&#x27;</span>  <span class="comment">// 21 </span></span><br></pre></td></tr></table></figure><p>å°†æ•°å­—æ˜¾ç¤ºè½¬æˆå­—ç¬¦ä¸²å¯ä»¥è¿™æ ·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>(<span class="number">21</span>)  <span class="comment">// &#x27;21&#x27;</span></span><br><span class="line"><span class="number">21.</span>.toString()  <span class="comment">// &#x27;21&#x27;</span></span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºè½¬æˆå¸ƒå°”ç±»å‹å¯ä»¥è¿™æ ·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Boolean</span>(<span class="string">&#x27;21&#x27;</span>)  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Boolean</span>( <span class="literal">undefined</span> )  <span class="comment">// false</span></span><br><span class="line">!!<span class="literal">NaN</span>  <span class="comment">// false</span></span><br><span class="line">!!<span class="string">&#x27;21&#x27;</span>  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>é™¤äº†ä»¥ä¸Šä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…³äºç±»å‹è½¬æ¢çš„å†·é—¨æ“ä½œï¼Œæœ‰æ—¶å€™ä¹ŸæŒºç®¡ç”¨çš„ï¼š<br>ç›´æ¥ç”¨ä¸€å…ƒåŠ æ“ä½œç¬¦è·å–å½“å‰æ—¶é—´çš„æ¯«ç§’æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+<span class="keyword">new</span> <span class="built_in">Date</span>()  <span class="comment">// 1595517982686</span></span><br></pre></td></tr></table></figure><p>ç”¨ <code>~</code> é…åˆ <code>indexOf()</code> å°†æ“ä½œç»“æœç›´æ¥è½¬æˆå¸ƒå°”ç±»å‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;bubuzou.com&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (~str.indexOf(<span class="string">&#x27;.com&#x27;</span>)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">&#x27;strå¦‚æœåŒ…å«äº†.comå­—ç¬¦ä¸²ï¼Œåˆ™ä¼šæ‰“å°è¿™å¥è¯&#x27;</span> )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>~~</code> å¯¹å­—ç¬¦æˆ–æ•°å­—æˆªå–æ•´æ•°ï¼Œå’Œ <code>Math.floor()</code> æœ‰ç¨è®¸ä¸åŒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~~<span class="number">21.1</span>  <span class="comment">// 21</span></span><br><span class="line">~~<span class="number">-21.9</span>  <span class="comment">// -21</span></span><br><span class="line">~~<span class="string">&#x27;1.2a&#x27;</span>  <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Math</span>.floor( <span class="number">21.1</span> )  <span class="comment">// 21</span></span><br><span class="line"><span class="built_in">Math</span>.floor( <span class="number">-21.9</span> )  <span class="comment">// -22</span></span><br></pre></td></tr></table></figure><h3 id="éšå¼ç±»å‹è½¬æ¢"><a href="#éšå¼ç±»å‹è½¬æ¢" class="headerlink" title="éšå¼ç±»å‹è½¬æ¢"></a>éšå¼ç±»å‹è½¬æ¢</h3><p>éšå¼ç±»å‹è½¬æ¢å‘ç”Ÿåœ¨ <code>JavaScript</code> çš„è¿è¡Œæ—¶ï¼Œé€šå¸¸æ˜¯ç”±æŸäº›æ“ä½œç¬¦æˆ–è¯­å¥å¼•èµ·çš„ï¼Œæœ‰ä¸‹é¢è¿™å‡ ç§æƒ…å†µï¼š</p><ul><li><p>éšå¼è½¬æˆå¸ƒå°”ç±»å‹ï¼š</p><ol><li><p><code>if (..)</code>è¯­å¥ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼ã€‚</p></li><li><p><code>for ( .. ; .. ; .. )</code>è¯­å¥ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼(ç¬¬äºŒä¸ª)ã€‚</p></li><li><p><code>while (..)</code> å’Œ <code>do..while(..)</code> å¾ªç¯ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼ã€‚</p></li><li><p><code>? :</code>ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼ã€‚</p></li><li><p>é€»è¾‘è¿ç®—ç¬¦ <code>||</code> (é€»è¾‘æˆ–)å’Œ <code>&amp;&amp;</code> (é€»è¾‘ä¸)å·¦è¾¹çš„æ“ä½œæ•°(ä½œä¸ºæ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="number">42</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">42</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> (<span class="string">&#x27;bubuzou&#x27;</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;bubuzou&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> c = <span class="literal">null</span> ? <span class="string">&#x27;å­˜åœ¨&#x27;</span> : <span class="string">&#x27;ä¸å­˜åœ¨&#x27;</span>  <span class="comment">// &#x27;ä¸å­˜åœ¨&#x27;</span></span><br></pre></td></tr></table></figure><p>ä¸Šä¾‹ä¸­çš„éå¸ƒå°”å€¼ä¼šè¢«éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºå¸ƒå°”å€¼ä»¥ä¾¿æ‰§è¡Œæ¡ä»¶åˆ¤æ–­ã€‚<br>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ <code>||</code> å’Œ <code>&amp;&amp;</code> æ“ä½œç¬¦ã€‚<code>||</code> çš„æ“ä½œè¿‡ç¨‹æ˜¯åªæœ‰å½“å·¦è¾¹çš„å€¼è¿”å› <code>false</code> çš„æ—¶å€™æ‰ä¼šå¯¹å³è¾¹è¿›è¡Œæ±‚å€¼ä¸”å°†å®ƒä½œä¸ºæœ€åç»“æœè¿”å›ï¼Œç±»ä¼¼ <code>a ? a : b</code> è¿™ç§æ•ˆæœ:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="string">&#x27;a&#x27;</span> || <span class="string">&#x27;b&#x27;</span>  <span class="comment">// &#x27;a&#x27;</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="string">&#x27;&#x27;</span> || <span class="string">&#x27;c&#x27;</span>  <span class="comment">// &#x27;c&#x27;</span></span><br></pre></td></tr></table></figure><p>è€Œ <code>&amp;&amp;</code> çš„æ“ä½œè¿‡ç¨‹æ˜¯åªæœ‰å½“å·¦è¾¹çš„å€¼è¿”å› <code>true</code> çš„æ—¶å€™æ‰å¯¹å³è¾¹è¿›è¡Œæ±‚å€¼ä¸”å°†å³è¾¹çš„å€¼ä½œä¸ºç»“æœè¿”å›ï¼Œç±»ä¼¼ <code>a ? b : a</code> è¿™ç§æ•ˆæœï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="string">&#x27;a&#x27;</span> &amp;&amp; <span class="string">&#x27;b&#x27;</span>  <span class="comment">// &#x27;b&#x27;</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="string">&#x27;&#x27;</span> &amp;&amp; <span class="string">&#x27;c&#x27;</span>  <span class="comment">// &#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li></ol></li><li><p>æ•°å­¦æ“ä½œç¬¦ <code>- * /</code> ä¼šå¯¹éæ•°å­—ç±»å‹çš„ä¼šä¼˜å…ˆè½¬æˆæ•°å­—ç±»å‹ï¼Œä½†æ˜¯å¯¹ <code>+</code> æ“ä½œç¬¦ä¼šæ¯”è¾ƒç‰¹æ®Šï¼š</p><ol><li>å½“ä¸€ä¾§ä¸º <code>String</code> ç±»å‹ï¼Œè¢«è¯†åˆ«ä¸ºå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¹¶ä¼šä¼˜å…ˆå°†å¦ä¸€ä¾§è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚</li><li>å½“ä¸€ä¾§ä¸º <code>Number</code> ç±»å‹ï¼Œå¦ä¸€ä¾§ä¸ºåŸå§‹ç±»å‹ï¼Œåˆ™å°†åŸå§‹ç±»å‹è½¬æ¢ä¸º <code>Number</code> ç±»å‹ã€‚</li><li>å½“ä¸€ä¾§ä¸º <code>Number</code> ç±»å‹ï¼Œå¦ä¸€ä¾§ä¸ºå¼•ç”¨ç±»å‹ï¼Œå°†å¼•ç”¨ç±»å‹å’Œ <code>Number</code> ç±»å‹è½¬æ¢æˆå­—ç¬¦ä¸²åæ‹¼æ¥ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">42</span> + <span class="string">&#x27;bubuzou&#x27;</span>  <span class="comment">// &#x27;42bubuzou&#x27;</span></span><br><span class="line"><span class="number">42</span> + <span class="literal">null</span>  <span class="comment">// 42</span></span><br><span class="line"><span class="number">42</span> + <span class="literal">true</span>  <span class="comment">// 43</span></span><br><span class="line"><span class="number">42</span> + []  <span class="comment">// &#x27;42&#x27;</span></span><br><span class="line"><span class="number">42</span> + &#123;&#125;  <span class="comment">// &#x27;42[object Object]&#x27;</span></span><br></pre></td></tr></table></figure></li></ol></li><li><p>å®½æ¾ç›¸ç­‰å’Œä¸¥æ ¼ç›¸ç­‰<br>  å®½æ¾ç›¸ç­‰ï¼ˆ<code>==</code>ï¼‰å’Œä¸¥æ ¼ç›¸ç­‰ï¼ˆ<code>===</code>ï¼‰åœ¨é¢è¯•çš„æ—¶å€™ç»å¸¸ä¼šè¢«é—®åˆ°ï¼Œè€Œå›ç­”ä¸€èˆ¬æ˜¯ <code>==</code> æ˜¯åˆ¤æ–­å€¼æ˜¯å¦ç›¸ç­‰ï¼Œè€Œ <code>===</code> é™¤äº†åˆ¤æ–­å€¼ä¼šä¸ä¼šç›¸ç­‰ä¹‹å¤–è¿˜ä¼šåˆ¤æ–­ç±»å‹æ˜¯å¦ç›¸ç­‰ï¼Œè¿™ä¸ªç­”æ¡ˆä¸å®Œå…¨æ­£ç¡®ï¼Œæ›´å¥½çš„å›ç­”æ˜¯ï¼š<code>==</code> åœ¨æ¯”è¾ƒè¿‡ç¨‹ä¸­å…è®¸å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢ï¼Œè€Œ <code>===</code> ä¸ä¼šã€‚ é‚£ <code>==</code> æ˜¯æ€ä¹ˆè¿›è¡Œç±»å‹è½¬æ¢çš„å‘¢ï¼Ÿ</p><ol><li><p>æ•°å­—å’Œå­—ç¬¦ä¸²æ¯”ï¼Œå­—ç¬¦ä¸²å°†è½¬æˆæ•°å­—è¿›è¡Œæ¯”è¾ƒï¼š</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">20</span> == <span class="string">&#x27;20&#x27;</span>  <span class="comment">// true</span></span><br><span class="line"><span class="number">20</span> === <span class="string">&#x27;20&#x27;</span>  <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ«çš„ç±»å‹å’Œå¸ƒå°”ç±»å‹æ¯”è¾ƒï¼Œå¸ƒå°”ç±»å‹å°†é¦–å…ˆè½¬æˆæ•°å­—è¿›è¡Œæ¯”è¾ƒï¼Œ<code>true</code> è½¬æˆæ•°å­— <code>1</code>, <code>false</code> è½¬æˆæ•°å­— <code>0</code>ï¼Œæ³¨æ„è¿™ä¸ªæ˜¯éå¸¸å®¹æ˜“å‡ºé”™çš„ä¸€ä¸ªç‚¹ï¼š</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;bubuzou&#x27;</span> == <span class="literal">true</span>  <span class="comment">// false</span></span><br><span class="line"><span class="string">&#x27;0&#x27;</span> == <span class="literal">false</span>  <span class="comment">// true</span></span><br><span class="line"><span class="literal">null</span> == <span class="literal">false</span>  <span class="comment">// false,</span></span><br><span class="line"><span class="literal">undefined</span> == <span class="literal">false</span>  <span class="comment">// false</span></span><br><span class="line">[] == <span class="literal">true</span>  <span class="comment">// false</span></span><br><span class="line">[<span class="string">&#x27;1&#x27;</span>]  == <span class="literal">true</span>  <span class="comment">// true </span></span><br></pre></td></tr></table></figure><p> æ‰€ä»¥å†™ä»£ç è¿›è¡Œåˆ¤æ–­çš„æ—¶å€™ä¸€å®šä¸è¦å†™æˆ <code>x == true</code> æˆ– <code>x == false</code> è¿™ç§ï¼Œè€Œåº”è¯¥ç›´æ¥ <code>if (x)</code> åˆ¤æ–­ã€‚</p></li><li><p><code>null</code> å’Œ <code>undefined</code>: <code>null == undefined</code> æ¯”è¾ƒç»“æœæ˜¯ <code>true</code>ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œ<code>null</code>ã€<code>undefined</code> å’Œå…¶ä»–ä»»ä½•ç»“æœçš„æ¯”è¾ƒå€¼éƒ½ä¸º <code>false</code>ã€‚å¯ä»¥è®¤ä¸ºåœ¨ <code>==</code> çš„æƒ…å†µä¸‹ï¼Œ<code>null</code> å’Œ <code>undefined</code> å¯ä»¥ç›¸äº’çš„è¿›è¡Œéšå¼ç±»å‹è½¬æ¢ã€‚</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span> <span class="comment">// true</span></span><br><span class="line"><span class="literal">null</span> == <span class="string">&#x27;&#x27;</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">null</span> == <span class="number">0</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">null</span> == <span class="literal">false</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">undefined</span> == <span class="string">&#x27;&#x27;</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">undefined</span> == <span class="number">0</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">undefined</span> == <span class="literal">false</span> <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li><li><p>åŸå§‹ç±»å‹å’Œå¼•ç”¨ç±»å‹æ¯”è¾ƒï¼Œå¼•ç”¨ç±»å‹ä¼šé¦–å…ˆè¿›è¡Œ <code>ToPromitive</code> è½¬æˆåŸå§‹ç±»å‹ç„¶åè¿›è¡Œæ¯”è¾ƒï¼Œè§„åˆ™å‚è€ƒä¸Šé¢ä»‹ç»çš„æ‹†ç®±æ“ä½œï¼š</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;42&#x27;</span>  == [<span class="number">42</span>]  <span class="comment">// true</span></span><br><span class="line"><span class="string">&#x27;1,2,3&#x27;</span>  == [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]  <span class="comment">// true</span></span><br><span class="line"><span class="string">&#x27;[object Object]&#x27;</span> == &#123;&#125;  <span class="comment">// true</span></span><br><span class="line"><span class="number">0</span> == [<span class="literal">undefined</span>]  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li><li><p>ç‰¹æ®Šçš„å€¼ </p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">NaN</span> == <span class="literal">NaN</span>  <span class="comment">// false</span></span><br><span class="line">+<span class="number">0</span> == <span class="number">-0</span>  <span class="comment">// true</span></span><br><span class="line">[] == ![]  <span class="comment">// trueï¼Œ![]çš„ä¼˜å…ˆçº§æ¯”==é«˜ï¼Œæ‰€ä»¥![]å…ˆè½¬æˆå¸ƒå°”å€¼å˜æˆfalseï¼›å³å˜æˆ[] == falseï¼Œfalseå†è½¬æˆæ•°å­—0ï¼Œ[]è½¬æˆæ•°å­—0ï¼Œæ‰€ä»¥[] == ![]</span></span><br><span class="line"><span class="number">0</span> == <span class="string">&#x27;\n&#x27;</span>  <span class="comment">// true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol></li></ul><h2 id="ç±»å‹æ£€æµ‹"><a href="#ç±»å‹æ£€æµ‹" class="headerlink" title="ç±»å‹æ£€æµ‹"></a>ç±»å‹æ£€æµ‹</h2><h3 id="ç”¨typeofæ£€æµ‹åŸå§‹ç±»å‹"><a href="#ç”¨typeofæ£€æµ‹åŸå§‹ç±»å‹" class="headerlink" title="ç”¨typeofæ£€æµ‹åŸå§‹ç±»å‹"></a>ç”¨typeofæ£€æµ‹åŸå§‹ç±»å‹</h3><p><code>JavaScript</code> ä¸­æœ‰ <code>null</code>ã€<code>undefined</code>ã€<code>boolean</code>ã€<code>number</code>ã€<code>string</code>ã€<code>Symbol</code> ç­‰å…­ç§åŸå§‹ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <code>typeof</code> æ¥åˆ¤æ–­å€¼æ˜¯ä»€ä¹ˆåŸå§‹ç±»å‹çš„ï¼Œä¼šè¿”å›ç±»å‹çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span> <span class="comment">// &#x27;undefined&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span>  <span class="comment">// &#x27;boolean&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">42</span>  <span class="comment">// &#x27;number&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">&quot;42&quot;</span>  <span class="comment">// &#x27;string&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Symbol</span>()  <span class="comment">// &#x27;symbol&#x27;</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯åŸå§‹ç±»å‹ä¸­æœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œ<code>typeof null</code> ä¼šå¾—åˆ° â€˜objectâ€™ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨ <code>typeof</code> å¯¹åŸå§‹å€¼è¿›è¡Œç±»å‹åˆ¤æ–­çš„æ—¶å€™ä¸èƒ½å¾—åˆ°ä¸€ä¸ªå‡†ç¡®çš„ç­”æ¡ˆï¼Œé‚£å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯ä¸æ˜¯ <code>null</code> ç±»å‹çš„å‘¢ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o = <span class="literal">null</span></span><br><span class="line">!o &amp;&amp; <span class="keyword">typeof</span> o === <span class="string">&#x27;object&#x27;</span> <span class="comment">// ç”¨äºåˆ¤æ–­ o æ˜¯å¦æ˜¯ null ç±»å‹</span></span><br></pre></td></tr></table></figure><blockquote><p><code>undefined</code> å’Œ <code>undeclared</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå‰è€…æ˜¯è¡¨ç¤ºåœ¨ä½œç”¨åŸŸä¸­å®šä¹‰äº†ä½†æ˜¯æ²¡æœ‰èµ‹å€¼çš„å˜é‡ï¼Œè€Œåè€…æ˜¯è¡¨ç¤ºåœ¨ä½œç”¨åŸŸä¸­æ²¡æœ‰å®šä¹‰çš„å˜é‡ï¼›åˆ†åˆ«è¡¨ç¤º <code>undefined</code> æœªå®šä¹‰ã€<code>undeclared</code> æœªå£°æ˜ã€‚</p></blockquote><p><code>typeof</code> èƒ½å¤Ÿå¯¹åŸå§‹ç±»å‹è¿›è¡Œåˆ¤æ–­ï¼Œé‚£æ˜¯å¦ä¹Ÿèƒ½åˆ¤æ–­å¼•ç”¨ç±»å‹å‘¢ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> []  <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125;  <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Date</span>()  <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">RegExp</span>()  <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Function</span>()  <span class="comment">// &#x27;function&#x27;</span></span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„ç»“æœæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™æ ·ä¸€ä¸ªç»“è®ºï¼š <code>typeof</code> å¯¹å¼•ç”¨ç±»å‹åˆ¤æ–­çš„æ—¶å€™åªæœ‰ <code>function</code> ç±»å‹å¯ä»¥æ­£ç¡®åˆ¤æ–­ï¼Œå…¶ä»–éƒ½æ— æ³•æ­£ç¡®åˆ¤æ–­å…·ä½“æ˜¯ä»€ä¹ˆå¼•ç”¨ç±»å‹ã€‚</p><h3 id="ç”¨instanceofæ£€æµ‹å¼•ç”¨ç±»å‹"><a href="#ç”¨instanceofæ£€æµ‹å¼•ç”¨ç±»å‹" class="headerlink" title="ç”¨instanceofæ£€æµ‹å¼•ç”¨ç±»å‹"></a>ç”¨instanceofæ£€æµ‹å¼•ç”¨ç±»å‹</h3><p>æˆ‘ä»¬çŸ¥é“ <code>typeof</code> åªèƒ½å¯¹éƒ¨åˆ†åŸå§‹ç±»å‹è¿›è¡Œæ£€æµ‹ï¼Œå¯¹å¼•ç”¨ç±»å‹æ¯«æ— åŠæ³•ã€‚<code>JavaScript</code> æä¾›äº†ä¸€ä¸ªæ“ä½œç¬¦ <code>instanceof</code>ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ä»–æ˜¯å¦èƒ½æ£€æµ‹å¼•ç”¨ç±»å‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[] <span class="keyword">instanceof</span> <span class="built_in">Array</span>  <span class="comment">// true</span></span><br><span class="line">[] <span class="keyword">instanceof</span> <span class="built_in">Object</span>  <span class="comment">// true </span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å‘ç°æ•°ç»„å³æ˜¯ <code>Array</code> çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯ <code>Object</code> çš„å®ä¾‹ï¼Œå› ä¸ºæ‰€ä»¥å¼•ç”¨ç±»å‹åŸå‹é“¾çš„ç»ˆç‚¹éƒ½æ˜¯ <code>Object</code>ï¼Œæ‰€ä»¥ <code>Array</code> è‡ªç„¶æ˜¯ <code>Object</code> çš„å®ä¾‹ã€‚é‚£ä¹ˆæˆ‘ä»¬å¾—å‡ºç»“è®ºï¼š<code>instanceof</code> ç”¨äºæ£€æµ‹å¼•ç”¨ç±»å‹å¥½åƒä¹Ÿä¸æ˜¯å¾ˆé è°±çš„é€‰æ‹©ã€‚</p><h3 id="ç”¨toStringè¿›è¡Œç±»å‹æ£€æµ‹"><a href="#ç”¨toStringè¿›è¡Œç±»å‹æ£€æµ‹" class="headerlink" title="ç”¨toStringè¿›è¡Œç±»å‹æ£€æµ‹"></a>ç”¨toStringè¿›è¡Œç±»å‹æ£€æµ‹</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Object.prototype.toString.call()</code> æ¥æ£€æµ‹ä»»ä½•å˜é‡å€¼çš„ç±»å‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">true</span>)  <span class="comment">// &#x27;[object Boolean]&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">undefined</span>)  <span class="comment">// &#x27;[object Undefined]&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">null</span>)  <span class="comment">// &#x27;[object Null]&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="number">20</span>)  <span class="comment">// &#x27;[object Number]&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="string">&#x27;bubuzou&#x27;</span>)  <span class="comment">// &#x27;[object String]&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">Symbol</span>())  <span class="comment">// &#x27;[object Symbol]&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call([])  <span class="comment">// &#x27;[object Array]&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(&#123;&#125;)  <span class="comment">// &#x27;[object Object]&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)  <span class="comment">// &#x27;[object Function]&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> <span class="built_in">Date</span>())  <span class="comment">// &#x27;[object Date]&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> <span class="built_in">RegExp</span>())  <span class="comment">// &#x27;[object RegExp]&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">JSON</span>)  <span class="comment">// &#x27;[object JSON]&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(MATH)  <span class="comment">// &#x27;[object MATH]&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">window</span>)  <span class="comment">// &#x27;[object RegExp]&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><ul><li><a href="https://juejin.im/post/5cec1bcff265da1b8f1aa08f">ã€JS è¿›é˜¶ã€‘ä½ çœŸçš„æŒæ¡å˜é‡å’Œç±»å‹äº†å—</a></li><li><a href="https://book.douban.com/subject/26854244/">ä½ ä¸çŸ¥é“çš„JSä¸­å·-ç¬¬å››ç« </a></li><li><a href="https://juejin.im/post/5d116a9df265da1bb47d717b">JSä¸­çš„æ ˆå†…å­˜å †å†…å­˜</a></li><li><a href="https://en.wikipedia.org/wiki/IEEE_754">IEEE 754</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨nvmæ¥ç®¡ç†Nodeç‰ˆæœ¬</title>
      <link href="/2020/03/26/nvm/"/>
      <url>/2020/03/26/nvm/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½¿ç”¨nvmæ¥ç®¡ç†Nodeç‰ˆæœ¬"><a href="#ä½¿ç”¨nvmæ¥ç®¡ç†Nodeç‰ˆæœ¬" class="headerlink" title="ä½¿ç”¨nvmæ¥ç®¡ç†Nodeç‰ˆæœ¬"></a>ä½¿ç”¨nvmæ¥ç®¡ç†Nodeç‰ˆæœ¬</h2><p><code>nvm</code> æ˜¯ <code>Node.js</code> çš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œå¯ä»¥åˆ›å»ºä¸åŒç‰ˆæœ¬ <code>Node</code> çš„éš”ç¦»ç¯å¢ƒï¼Œä»è€Œé¿å…ä¸åŒç‰ˆæœ¬åŒ…ä¹‹é—´çš„å¹²æ‰°ã€‚<a href="https://github.com/nvm-sh/nvm">å®˜æ–¹ github</a></p><h3 id="å¸è½½å…¨å±€å®‰è£…çš„Node"><a href="#å¸è½½å…¨å±€å®‰è£…çš„Node" class="headerlink" title="å¸è½½å…¨å±€å®‰è£…çš„Node"></a>å¸è½½å…¨å±€å®‰è£…çš„Node</h3><p>æœ€è¿‘åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œå‘ç°ç¼–è¯‘é€Ÿåº¦ç‰¹åˆ«æ…¢ï¼Œè€Œå‡çº§ <code>Node</code> ç‰ˆæœ¬ä¹‹åé€Ÿåº¦ä¼šæ˜æ˜¾æå‡ã€‚æ‰€ä»¥è¿™æ‰æœ‰ä½¿ç”¨ <code>nvm</code> æ¥ç®¡ç† <code>Node</code> çš„æ•…äº‹ã€‚</p><p>ç›®å‰æœ¬åœ°å…¨å±€å®‰è£…çš„ <code>Node</code> ç‰ˆæœ¬æ˜¯ <code>9.11.1</code>ï¼Œ è¿™ä¸ªç‰ˆæœ¬è¿˜æ˜¯18å¹´4æœˆå·¦å³æ›´æ–°çš„ï¼Œæ˜¯ç›¸å½“çš„è·Ÿä¸ä¸ŠèŠ‚å¥äº†ã€‚<a href="https://nodejs.org/zh-cn/download/releases/">è¿™é‡Œå¯ä»¥æŸ¥çœ‹ Node å†å²ç‰ˆæœ¬</a>ã€‚</p><p>å®‰è£… <code>nvm</code> ä¹‹å‰æœ€å¥½æ˜¯å°†ç°æœ‰çš„å…¨å±€ <code>Node</code> è¿›è¡Œå¸è½½ï¼Œå¦åˆ™ä¼šå‘ç”Ÿå†²çªã€‚</p><a id="more"></a><ol><li><p>ç»ˆç«¯ä¸‹æŸ¥çœ‹ <code>Node</code> çš„å…¨å±€å®‰è£…ç›®å½•ï¼š</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ccp:~ ccp$ which node</span><br><span class="line">&#x2F;usr&#x2F;local&#x2F;bin&#x2F;node</span><br></pre></td></tr></table></figure></li><li><p><code>Mac</code> ç¯å¢ƒä¸‹å…¨å±€çš„ <code>Node</code> ä¼šè¢«å®‰è£…åœ¨ <code>/usr/local/bin/</code> ç›®å½•ä¸‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦æ‰“å¼€è¿™ä¸ªç›®å½•ï¼›</p></li><li><p>æ‰“å¼€è®¿è¾¾ï¼Œç„¶åæŒ‰ä¸‹å¿«æ·é”® <code>â‡§ + âŒ˜ + G</code>ï¼Œè¾“å…¥ä¸Šé¢çš„ç›®å½•ï¼Œå³å¯æ‰“å¼€å¯¹åº”çš„ç›®å½•ï¼›</p></li><li><p>æ¥ä¸‹æ¥ä¾æ¬¡æ£€æŸ¥å¹¶ä¸”åˆ é™¤è¿™äº›ç›®å½•ä¸‹çš„ <code>node</code> å’Œ <code>node_modules</code> ç›¸å…³æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼š</p><ul><li><code>/usr/local/lib</code></li><li><code>/usr/local/include</code></li></ul></li><li><p>æ‰“å¼€ <code>/usr/local/bin</code> å¹¶åˆ é™¤ <code>node</code> å¯æ‰§è¡Œæ–‡ä»¶;</p></li><li><p>å¦‚æœä½ æ˜¯ä½¿ç”¨çš„ <code>brew install node</code> å®‰è£…çš„ <code>Node</code>ï¼Œé‚£ä¹ˆä½ è¿˜éœ€è¦åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ <code>brew uninstall node</code> å‘½ä»¤æ¥å¸è½½ã€‚</p></li></ol><p>è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½è¿˜éœ€è¦åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä¸€äº›æŒ‡ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo rm &#x2F;usr&#x2F;local&#x2F;bin&#x2F;npm</span><br><span class="line">sudo rm &#x2F;usr&#x2F;local&#x2F;share&#x2F;man&#x2F;man1&#x2F;node.1</span><br><span class="line">sudo rm &#x2F;usr&#x2F;local&#x2F;lib&#x2F;dtrace&#x2F;node.d</span><br><span class="line">sudo rm -rf ~&#x2F;.npm</span><br><span class="line">sudo rm -rf ~&#x2F;.node-gyp</span><br><span class="line">sudo rm &#x2F;opt&#x2F;local&#x2F;bin&#x2F;node</span><br><span class="line">sudo rm &#x2F;opt&#x2F;local&#x2F;include&#x2F;node</span><br><span class="line">sudo rm -rf &#x2F;opt&#x2F;local&#x2F;lib&#x2F;node_modules</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œå…¨å±€å®‰è£…çš„ <code>Node</code> æ‰ç®—å¸è½½å¹²å‡€ã€‚</p><h3 id="å®‰è£…nvm"><a href="#å®‰è£…nvm" class="headerlink" title="å®‰è£…nvm"></a>å®‰è£…nvm</h3><ol><li><p>åœ¨ç»ˆç«¯é‡Œæ‰§è¡Œå¦‚ä¸‹è„šæœ¬ï¼š</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;nvm-sh&#x2F;nvm&#x2F;v0.35.3&#x2F;install.sh | bash</span><br></pre></td></tr></table></figure><p> ç„¶ååœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤ <code>command -v nvm</code>ï¼Œå¦‚æœæ˜¾ç¤º <code>nvm</code> åˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸï¼›å¦åˆ™å¦‚æœæ˜¾ç¤º <code>nvm: command not found</code>ï¼Œåˆ™éœ€è¦åšå¦‚ä¸‹æ“ä½œï¼š</p></li><li><p>åœ¨ <code>.nvm</code> åŒçº§ç›®å½•ä¸‹åˆ›å»º <code>.bash_profile</code> æ–‡ä»¶ï¼Œç»ˆç«¯é”®å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch ~&#x2F;.bash_profile</span><br></pre></td></tr></table></figure></li><li><p>æŠŠä»¥ä¸‹ä»£ç è´´åˆ°ä¸Šé¢çš„æ–‡ä»¶ä¸­ï¼š</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export NVM_DIR&#x3D;~&#x2F;.nvm</span><br><span class="line">source ~&#x2F;.nvm&#x2F;nvm.sh</span><br></pre></td></tr></table></figure></li></ol><p><code>nvm</code> å®‰è£…åï¼Œå¯ä»¥ç”¨ <code>nvm ls</code> æ¥æŸ¥çœ‹ï¼Œå¦‚æœä¼šæ˜¾ç¤ºå®‰è£…çš„ <code>Node</code> ç‰ˆæœ¬åˆ—è¡¨ï¼Œåˆ™æ˜¾ç¤ºå®‰è£…æˆåŠŸã€‚æœ‰äº† <code>nvm</code> åï¼Œåœ¨ç”¨ <code>npm install xxx -g</code> è¿›è¡Œå…¨å±€å®‰è£…çš„æ—¶å€™ä¼šæŠŠåŒ…å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ <code>Node</code> ä¸‹ï¼Œå¦‚æœæ˜¯ <code>Mac</code> åˆ™ç›®å½• <code>user/.nvm/versions/node/v12.16.1/bin</code> ä¸‹å¯ä»¥çœ‹åˆ°å¯¹åº”çš„å…¨å±€å‘½ä»¤ã€‚</p><h3 id="nvmå¸¸ç”¨å‘½ä»¤"><a href="#nvmå¸¸ç”¨å‘½ä»¤" class="headerlink" title="nvmå¸¸ç”¨å‘½ä»¤"></a>nvmå¸¸ç”¨å‘½ä»¤</h3><ul><li><code>nvm ls-remote</code>  æŸ¥çœ‹ <code>Node</code> è¿œç¨‹ç‰ˆæœ¬åº“</li><li><code>nvm install node</code>  å°†å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ <code>Node</code></li><li><code>nvm install v12.7.0</code>  å°†å®‰è£… <code>12.7.0</code> ç‰ˆæœ¬çš„ <code>Node</code></li><li><code>nvm uninstall v12.7.0</code>  å¸è½½ <code>12.7.0</code> ç‰ˆæœ¬çš„ <code>Node</code></li><li><code>nvm ls</code>  æŸ¥çœ‹å·²ç»å®‰è£…çš„ <code>Node</code> ç‰ˆæœ¬</li><li><code>nvm use v12.7.0</code> åˆ‡æ¢ <code>12.7.0</code> ä¸ºå½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬</li><li><code>nvm alias default v12.7.0</code> å°† <code>12.7.0</code> è®¾ç½®ä¸º <code>Node</code> çš„é»˜è®¤ç‰ˆæœ¬</li><li><code>nvm which v12.7.0</code> æŸ¥çœ‹ <code>12.7.0</code> ç‰ˆæœ¬çš„ <code>Node</code> çš„å®‰è£…ç›®å½•ï¼Œæ¯”å¦‚ï¼š<code>/Users/ccp/.nvm/versions/node/v12.7.0/bin/node</code></li><li><code>nvm --help</code>  æŸ¥çœ‹æ›´å¤šå‘½ä»¤ç”¨æ³•</li></ul><h3 id="å…¶ä»–ç›¸å…³å‘½ä»¤"><a href="#å…¶ä»–ç›¸å…³å‘½ä»¤" class="headerlink" title="å…¶ä»–ç›¸å…³å‘½ä»¤"></a>å…¶ä»–ç›¸å…³å‘½ä»¤</h3><ul><li><code>command -v nvm</code>  æŸ¥çœ‹ <code>nvm</code> æ˜¯å¦å®‰è£…æˆåŠŸ</li><li><code>node -v</code> æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ <code>Node</code> ç‰ˆæœ¬</li><li><code>which node</code>  æŸ¥çœ‹å½“å‰ <code>Node</code> çš„å®‰è£…ç›®å½•</li></ul><h3 id="å…¶ä»–é—®é¢˜"><a href="#å…¶ä»–é—®é¢˜" class="headerlink" title="å…¶ä»–é—®é¢˜"></a>å…¶ä»–é—®é¢˜</h3><ol><li>ç”±äº <code>Node</code> ç‰ˆæœ¬çš„å‡çº§ï¼Œæ‰€ä»¥å½“ç¼–è¯‘é¡¹ç›®çš„æ—¶å€™å¯èƒ½ä¼šæŠ¥ä¾èµ–åŒ…çš„é”™è¯¯ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å‡çº§ä¾èµ–åŒ…ï¼Œå°†é¡¹ç›®çš„ <code>node_modules</code> ç›®å½•åˆ äº†ï¼Œé‡æ–°æ‰§è¡Œ <code>npm install</code>ã€‚</li><li>å‡çº§ <code>Node</code> åï¼Œç”±äºå†…å­˜ <code>2048M</code> çš„é™åˆ¶ï¼Œç¼–è¯‘é¡¹ç›®çš„æ—¶å€™å¾ˆæœ‰å¯èƒ½ä¼šæŠ¥ <code>JS stack trace</code> å†…å­˜æº¢å‡ºçš„é”™è¯¯ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ç”¨ <a href="https://www.npmjs.com/package/increase-memory-limit"><code>increase-memory-limit</code></a> æ¥è§£å†³ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> webç»¼åˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue-Test-Utils + Jest å•å…ƒæµ‹è¯•å…¥é—¨ä¸å®è·µ</title>
      <link href="/2019/10/24/Vue-Test-Utils+Jest/"/>
      <url>/2019/10/24/Vue-Test-Utils+Jest/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p><a href="https://vue-test-utils.vuejs.org/zh/"><code>Vue-Test-Utils</code></a> æ˜¯ <code>Vue.js</code> å®˜æ–¹çš„å•å…ƒæµ‹è¯•å®ç”¨å·¥å…·åº“ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—çš„ <code>API</code> æ¥ä½¿å¾—æˆ‘ä»¬å¯ä»¥å¾ˆä¾¿æ·çš„å»å†™ <code>Vue</code> åº”ç”¨ä¸­çš„å•å…ƒæµ‹è¯•ã€‚</p><p>ä¸»æµçš„å•å…ƒæµ‹è¯•è¿è¡Œå™¨æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ <a href="https://jestjs.io/docs/zh-Hans/getting-started"><code>Jest</code></a>ã€<a href="https://mochajs.org/"><code>Mocha</code></a> å’Œ <code>Karma</code> ç­‰ï¼Œè¿™å‡ ä¸ªåœ¨ <code>Vue-Test-Utils</code> æ–‡æ¡£é‡Œéƒ½æœ‰å¯¹åº”çš„æ•™ç¨‹ï¼Œè¿™é‡Œæˆ‘ä»¬åªä»‹ç» <code>Vue-Test-Utils + Jest</code> ç»“åˆçš„ç¤ºä¾‹ã€‚</p><blockquote><p>Jest æ˜¯ä¸€ä¸ªç”± Facebook å¼€å‘çš„æµ‹è¯•æ¡†æ¶ã€‚Vue å¯¹å…¶è¿›è¡Œæè¿°ï¼šæ˜¯åŠŸèƒ½æœ€å…¨çš„æµ‹è¯•è¿è¡Œå™¨ã€‚å®ƒæ‰€éœ€çš„é…ç½®æ˜¯æœ€å°‘çš„ï¼Œé»˜è®¤å®‰è£…äº† JSDOMï¼Œå†…ç½®æ–­è¨€ä¸”å‘½ä»¤è¡Œçš„ç”¨æˆ·ä½“éªŒéå¸¸å¥½ã€‚ä¸è¿‡ä½ éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿå°†å•æ–‡ä»¶ç»„ä»¶å¯¼å…¥åˆ°æµ‹è¯•ä¸­çš„é¢„å¤„ç†å™¨ã€‚æˆ‘ä»¬å·²ç»åˆ›å»ºäº† vue-jest é¢„å¤„ç†å™¨æ¥å¤„ç†æœ€å¸¸è§çš„å•æ–‡ä»¶ç»„ä»¶ç‰¹æ€§ï¼Œä½†ä»ä¸æ˜¯ vue-loader 100% çš„åŠŸèƒ½ã€‚</p></blockquote><a id="more"></a><h2 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h2><p>é€šè¿‡è„šæ‰‹æ¶ <code>vue-cli</code> æ¥æ–°å»ºé¡¹ç›®çš„æ—¶å€™ï¼Œå¦‚æœé€‰æ‹©äº† <code>Unit Testing</code> å•å…ƒæµ‹è¯•ä¸”é€‰æ‹©çš„æ˜¯ <code>Jest</code> ä½œä¸ºæµ‹è¯•è¿è¡Œå™¨ï¼Œé‚£ä¹ˆåœ¨é¡¹ç›®åˆ›å»ºå¥½åï¼Œå°±ä¼šè‡ªåŠ¨é…ç½®å¥½å•å…ƒæµ‹è¯•éœ€è¦çš„ç¯å¢ƒï¼Œç›´æ¥èƒ½ç”¨ <code>Vue-Test-Utils</code> å’Œ <code>Jest</code> çš„ <code>API</code> æ¥å†™æµ‹è¯•ç”¨ä¾‹äº†ã€‚</p><p>ä½†æ˜¯æ–°å»ºé¡¹ç›®ä¹‹åˆæ²¡æœ‰é€‰æ‹©å•å…ƒæµ‹è¯•åŠŸèƒ½ï¼Œéœ€è¦åé¢å»æ·»åŠ çš„è¯ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼š</p><p>ç¬¬ä¸€ç§é…ç½®ï¼š</p><p>ç›´æ¥åœ¨é¡¹ç›®ä¸­æ·»åŠ ä¸€ä¸ª <a href="https://github.com/vuejs/vue-docs-zh-cn/tree/master/vue-cli-plugin-unit-jest"><code>unit-jest</code></a> æ’ä»¶ï¼Œä¼šè‡ªåŠ¨å°†éœ€è¦çš„ä¾èµ–å®‰è£…é…ç½®å¥½ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue add @vue&#x2F;unit-jest</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§é…ç½®ï¼š</p><p>è¿™ç§é…ç½®ä¼šéº»çƒ¦ä¸€ç‚¹ï¼Œä¸‹é¢æ˜¯å…·ä½“çš„æ“ä½œæ­¥éª¤ã€‚</p><h3 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h3><ul><li><p>å®‰è£… <code>Jest</code> å’Œ <code>Vue Test Utils</code></p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev jest @vue&#x2F;test-utils</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£… <code>babel-jest</code> ã€ <code>vue-jest</code> å’Œ <code>7.0.0-bridge.0</code> ç‰ˆæœ¬çš„ <code>babel-core</code></p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev babel-jest vue-jest babel-core@7.0.0-bridge.0</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£… <code>jest-serializer-vue</code></p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev jest-serializer-vue</span><br></pre></td></tr></table></figure></li></ul><h3 id="é…ç½®-Jest"><a href="#é…ç½®-Jest" class="headerlink" title="é…ç½® Jest"></a>é…ç½® <code>Jest</code></h3><p><code>Jest</code> çš„é…ç½®å¯ä»¥åœ¨ <code>package.json</code> é‡Œé…ç½®ï¼›ä¹Ÿå¯ä»¥æ–°å»ºä¸€ä¸ªæ–‡ä»¶ <code>jest.config.js</code>ï¼Œ æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•å³å¯ã€‚è¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯é…ç½®åœ¨ <code>jest.config.js</code> ä¸­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    moduleFileExtensions: [</span><br><span class="line">        <span class="string">&#x27;js&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    transform: &#123;</span><br><span class="line">        <span class="string">&#x27;^.+\\.vue$&#x27;</span>: <span class="string">&#x27;&lt;rootDir&gt;/node_modules/vue-jest&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;^.+\\.js$&#x27;</span>: <span class="string">&#x27;&lt;rootDir&gt;/node_modules/babel-jest&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    moduleNameMapper: &#123;</span><br><span class="line">        <span class="string">&#x27;^@/(.*)$&#x27;</span>: <span class="string">&#x27;&lt;rootDir&gt;/src/$1&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    snapshotSerializers: [</span><br><span class="line">        <span class="string">&#x27;jest-serializer-vue&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    testMatch: [<span class="string">&#x27;**/__tests__/**/*.spec.js&#x27;</span>],</span><br><span class="line">    transformIgnorePatterns: [<span class="string">&#x27;&lt;rootDir&gt;/node_modules/&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å„é…ç½®é¡¹è¯´æ˜ï¼š</p><ul><li><code>moduleFileExtensions</code> å‘Šè¯‰ <code>Jest</code> éœ€è¦åŒ¹é…çš„æ–‡ä»¶åç¼€</li><li><code>transform</code> åŒ¹é…åˆ° <code>.vue</code> æ–‡ä»¶çš„æ—¶å€™ç”¨ <code>vue-jest</code> å¤„ç†ï¼Œ åŒ¹é…åˆ° <code>.js</code> æ–‡ä»¶çš„æ—¶å€™ç”¨ <code>babel-jest</code> å¤„ç†</li><li><code>moduleNameMapper</code> å¤„ç† <code>webpack</code> çš„åˆ«åï¼Œæ¯”å¦‚ï¼šå°† <code>@</code> è¡¨ç¤º <code>/src</code> ç›®å½•</li><li><code>snapshotSerializers</code> å°†ä¿å­˜çš„å¿«ç…§æµ‹è¯•ç»“æœè¿›è¡Œåºåˆ—åŒ–ï¼Œä½¿å¾—å…¶æ›´ç¾è§‚ </li><li><code>testMatch</code> åŒ¹é…å“ªäº›æ–‡ä»¶è¿›è¡Œæµ‹è¯•</li><li><code>transformIgnorePatterns</code> ä¸è¿›è¡ŒåŒ¹é…çš„ç›®å½•</li></ul><h3 id="é…ç½®-package-json"><a href="#é…ç½®-package-json" class="headerlink" title="é…ç½® package.json"></a>é…ç½® <code>package.json</code></h3><p>å†™ä¸€ä¸ªæ‰§è¡Œæµ‹è¯•çš„å‘½ä»¤è„šæœ¬ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;script&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;jest&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹"><a href="#ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹" class="headerlink" title="ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹"></a>ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹</h2><p>ä¸ºäº†ä¿è¯ç¯å¢ƒçš„ä¸€è‡´æ€§ï¼Œæˆ‘ä»¬ä»åˆ›å»ºé¡¹ç›®å¼€å§‹ä¸€æ­¥ä¸€æ­¥æ¼”ç¤ºæ“ä½œæ­¥éª¤ã€‚</p><h3 id="ç”¨-vue-cli-åˆ›å»ºä¸€ä¸ªé¡¹ç›®"><a href="#ç”¨-vue-cli-åˆ›å»ºä¸€ä¸ªé¡¹ç›®" class="headerlink" title="ç”¨ vue-cli åˆ›å»ºä¸€ä¸ªé¡¹ç›®"></a>ç”¨ <code>vue-cli</code> åˆ›å»ºä¸€ä¸ªé¡¹ç›®</h3><p>å½“å‰æˆ‘ç”¨åˆ°çš„æ˜¯ <code>3.10.0</code> ç‰ˆæœ¬çš„ <code>vue-cli</code>ã€‚å¼€å§‹åˆ›å»ºé¡¹ç›®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create first-vue-jest</span><br></pre></td></tr></table></figure><p>é€‰æ‹© <code>Manually select features</code> è¿›è¡Œæ‰‹åŠ¨é€‰æ‹©åŠŸèƒ½é…ç½®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Vue CLI v3.10.0</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚  Update available: 4.0.4  â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">? Please pick a preset:</span><br><span class="line">  VUE-CLI3 (vue-router, node-sass, babel, eslint)</span><br><span class="line">  default (babel, eslint)</span><br><span class="line">â¯ Manually select features</span><br></pre></td></tr></table></figure><p>å‹¾é€‰ <code>Babel</code>ã€<code>Unit Testing</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">? Check the features needed for your project:</span><br><span class="line"> â—‰ Babel</span><br><span class="line"> â—¯ TypeScript</span><br><span class="line"> â—¯ Progressive Web App (PWA) Support</span><br><span class="line"> â—¯ Router</span><br><span class="line"> â—¯ Vuex</span><br><span class="line"> â—¯ CSS Pre-processors</span><br><span class="line"> â—¯ Linter &#x2F; Formatter</span><br><span class="line"> â—‰ Unit Testing</span><br><span class="line"> â—¯ E2E Testing</span><br></pre></td></tr></table></figure><p>é€‰æ‹© <code>Jest</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">? Pick a unit testing solution:</span><br><span class="line">  Mocha + Chai</span><br><span class="line">â¯ Jest</span><br></pre></td></tr></table></figure><p>é€‰æ‹© <code>In dedicated config files</code> å°†å„é…ç½®ä¿¡æ¯é…ç½®åœ¨å¯¹åº”çš„ <code>config</code> æ–‡ä»¶é‡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">? Where do you prefer placing config for Babel, PostCSS, ESLint, etc.? (Use arrow keys)</span><br><span class="line">â¯ In dedicated config files</span><br><span class="line">  In package.json</span><br></pre></td></tr></table></figure><p>è¾“å…¥nï¼Œä¸ä¿å­˜é¢„è®¾ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">? Save this as a preset for future projects? (y&#x2F;N) n</span><br></pre></td></tr></table></figure><p>é¡¹ç›®åˆ›å»ºå®Œæˆåï¼Œéƒ¨åˆ†æ–‡ä»¶çš„é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š</p><p><code>babel.config.js</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    presets: [</span><br><span class="line">        <span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>jest.config.js</code>ï¼Œ è¿™ä¸ªæ–‡ä»¶çš„é…ç½®é»˜è®¤æ˜¯é¢„è®¾æ’ä»¶çš„ï¼Œå¯ä»¥æŒ‰å®é™…éœ€æ±‚æ”¹æˆä¸Šé¢æåˆ°çš„é…ç½® <code>Jest</code> é‡Œçš„é…ç½®ä¸€æ ·ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    preset: <span class="string">&#x27;@vue/cli-plugin-unit-jest&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>package.json</code>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;first-vue-jest&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;0.1.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;private&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;serve&quot;</span>: <span class="string">&quot;vue-cli-service serve&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;vue-cli-service build&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;test:unit&quot;</span>: <span class="string">&quot;vue-cli-service test:unit&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;core-js&quot;</span>: <span class="string">&quot;^3.1.2&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;vue&quot;</span>: <span class="string">&quot;^2.6.10&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;@vue/cli-plugin-babel&quot;</span>: <span class="string">&quot;^4.0.0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;@vue/cli-plugin-unit-jest&quot;</span>: <span class="string">&quot;^4.0.0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;@vue/cli-service&quot;</span>: <span class="string">&quot;^4.0.0&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;@vue/test-utils&quot;</span>: <span class="string">&quot;1.0.0-beta.29&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;vue-template-compiler&quot;</span>: <span class="string">&quot;^2.6.10&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‰§è¡Œæµ‹è¯•å‘½ä»¤"><a href="#æ‰§è¡Œæµ‹è¯•å‘½ä»¤" class="headerlink" title="æ‰§è¡Œæµ‹è¯•å‘½ä»¤"></a>æ‰§è¡Œæµ‹è¯•å‘½ä»¤</h3><p>ç”¨ä¸Šé¢çš„æ­¥éª¤åˆ›å»ºçš„é¡¹ç›®å®Œæˆé¡¹ç›®åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>package.json</code> çš„ <code>scripts</code> é¡¹ä¸­çœ‹åˆ°æœ‰ä¸ª <code>test:unit</code> ï¼Œæ‰§è¡Œå®ƒï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd first-vue-jest</span><br><span class="line">npm run test:unit</span><br></pre></td></tr></table></figure><p>ç„¶åç»ˆç«¯é‡Œä¼šçœ‹åˆ°è¾“å‡ºç»“æœï¼Œ<code>PASS</code> è¡¨ç¤ºæµ‹è¯•ç”¨ä¾‹é€šè¿‡äº†ï¼Œè¿™ä¸ªæ˜¯å®˜æ–¹æä¾›å•å…ƒæµ‹è¯•ä¾‹å­ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å†™ç‚¹è‡ªå·±çš„ä¸œè¥¿ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/2019/vue_jest_01.png" alt="first-vue-jest-result"></p><h2 id="å®ç°ä¸€ä¸ªToDoList"><a href="#å®ç°ä¸€ä¸ªToDoList" class="headerlink" title="å®ç°ä¸€ä¸ªToDoList"></a>å®ç°ä¸€ä¸ªToDoList</h2><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/2019/vue_jest_02.png" alt="to-do-list"></p><p>çœ‹ä¸Šé¢çš„åŸå‹å›¾ï¼Œæœ‰è¿™ä¹ˆå‡ ç‚¹æ˜ç¡®çš„éœ€æ±‚ï¼š</p><ul><li>åœ¨å¤´éƒ¨å³ä¾§è¾“å…¥æ¡†è¾“å…¥è¦åšçš„äº‹æƒ…ï¼Œæ•²å›è½¦åï¼Œå†…å®¹è·‘åˆ°å¾…å®Œæˆåˆ—è¡¨é‡Œï¼ŒåŒæ—¶æ¸…ç©ºè¾“å…¥æ¡†</li><li>è¾“å…¥æ¡†ä¸ºç©ºçš„æ—¶å€™æ•²å›è½¦ï¼Œä¸åšä»»ä½•å˜åŒ–</li><li>å¾…å®Œæˆåˆ—è¡¨æ”¯æŒç¼–è¾‘åŠŸèƒ½ï¼Œå·²å®Œæˆåˆ—è¡¨ä¸èƒ½è¿›è¡Œç¼–è¾‘</li><li>æ¯ä¸ªåˆ—è¡¨é¡¹çš„å³ä¾§éƒ½æœ‰åˆ é™¤æŒ‰é’®ï¼Œç”¨ <code>-</code> å·è¡¨ç¤ºï¼Œç‚¹å‡»ååˆ é™¤è¯¥é¡¹</li><li>å¾…å®Œæˆåˆ—è¡¨æœ‰æ ‡è®°ä¸ºå·²å®Œæˆçš„æŒ‰é’®ï¼Œç”¨ <code>âˆš</code> å·è¡¨ç¤ºï¼Œç‚¹å‡»åå½“å‰é¡¹ç§»åŠ¨åˆ°å·²å®Œæˆåˆ—è¡¨</li><li>å·²å®Œæˆåˆ—è¡¨æœ‰æ ‡è®°ä¸ºæœªå®Œæˆçš„æŒ‰é’®ï¼Œç”¨ <code>x</code> å·è¡¨ç¤ºï¼Œç‚¹å‡»åå½“å‰é¡¹ç§»åŠ¨åˆ°æœªå®Œæˆåˆ—è¡¨</li><li>åˆ—è¡¨åºå·ä»1å¼€å§‹é€’å¢</li><li>å½“å¾…å®Œæˆåˆ—è¡¨ä¸ºç©ºçš„æ—¶å€™ï¼Œä¸æ˜¾ç¤ºå¾…å®Œæˆå­—æ ·</li><li>å½“å·²å®Œæˆåˆ—è¡¨ä¸ºç©ºçš„æ—¶å€™ï¼Œä¸æ˜¾ç¤ºå·²å®Œæˆå­—æ ·</li></ul><h3 id="å…ˆæŠŠä¸Šé¢çš„é¡µé¢å†™å¥½"><a href="#å…ˆæŠŠä¸Šé¢çš„é¡µé¢å†™å¥½" class="headerlink" title="å…ˆæŠŠä¸Šé¢çš„é¡µé¢å†™å¥½"></a>å…ˆæŠŠä¸Šé¢çš„é¡µé¢å†™å¥½</h3><p>å†™é¡µé¢ä¹‹å‰å…ˆæŠŠåˆ›å»ºé¡¹ç›®çš„æ—¶å€™ç”Ÿæˆçš„ <code>HelloWorld.vue</code> å’Œå¯¹åº”çš„æµ‹è¯•æ–‡ä»¶ <code>example.spec.js</code> åˆ é™¤ï¼›åŒæ—¶ä¿®æ”¹ <code>App.vue</code> æ–‡ä»¶ï¼Œå¼•å…¥ <code>ToDoList</code> ç»„ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ToDoList</span>&gt;</span><span class="tag">&lt;/<span class="name">ToDoList</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> ToDoList <span class="keyword">from</span> <span class="string">&#x27;./components/ToDoList&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    components: &#123;</span><br><span class="line">        ToDoList</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ <code>src/compoents</code> ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ <code>ToDoList.vue</code>ï¼Œæ ·å¼è¾ƒå¤šå°±ä¸è´´å‡ºæ¥äº†ï¼Œå…·ä½“å¯ä»¥å»çœ‹<a href="https://github.com/Bulandent/first-vue-jest.git">æœ¬é¡¹ç›®æºç </a>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;todolist&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h5</span>&gt;</span>ToDoList<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;to-do-text&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">v-model</span>=<span class="string">&quot;toDoText&quot;</span> </span></span><br><span class="line"><span class="tag">                @<span class="attr">keyup.enter</span>=<span class="string">&quot;enterText&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥è®¡åˆ’è¦åšçš„äº‹æƒ…&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span> <span class="attr">v-show</span>=<span class="string">&quot;toDoList.length &gt; 0&quot;</span>&gt;</span>å¾…å®Œæˆ<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;wait-to-do&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in toDoList&quot;</span> <span class="attr">:keys</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;&#123;index + 1&#125;&#125;<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">&quot;item&quot;</span> @<span class="attr">blur</span>=<span class="string">&quot;setValue(index, $event)&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;move&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;removeToComplete(item, index)&quot;</span>&gt;</span>âˆš<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;del&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;deleteWait(index)&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span> <span class="attr">v-show</span>=<span class="string">&quot;completedList.length &gt; 0&quot;</span>&gt;</span>å·²å®Œæˆ<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;has-completed&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in completedList&quot;</span> <span class="attr">:keys</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;&#123;index + 1&#125;&#125;<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">&quot;item&quot;</span> <span class="attr">disabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;move&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;removeToWait(item, index)&quot;</span>&gt;</span>x<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;del&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;deleteComplete(index)&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            toDoText: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            toDoList: [],</span><br><span class="line">            completedList: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        setValue(index, e) &#123;</span><br><span class="line">            <span class="built_in">this</span>.toDoList.splice(index, <span class="number">1</span>, e.target.value)</span><br><span class="line">        &#125;,</span><br><span class="line">        removeToComplete(item, index) &#123;</span><br><span class="line">            <span class="built_in">this</span>.completedList.splice(<span class="built_in">this</span>.completedList.length, <span class="number">0</span>, item)</span><br><span class="line">            <span class="built_in">this</span>.toDoList.splice(index, <span class="number">1</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        removeToWait(item, index) &#123;</span><br><span class="line">            <span class="built_in">this</span>.toDoList.splice(<span class="built_in">this</span>.toDoList.length, <span class="number">0</span>, item)</span><br><span class="line">            <span class="built_in">this</span>.completedList.splice(index, <span class="number">1</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        enterText() &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.toDoText.trim().length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="built_in">this</span>.toDoList.splice(<span class="built_in">this</span>.toDoList.length, <span class="number">0</span>, <span class="built_in">this</span>.toDoText)</span><br><span class="line">                <span class="built_in">this</span>.toDoText = <span class="string">&#x27;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        deleteWait(index) &#123;</span><br><span class="line">            <span class="built_in">this</span>.toDoList.splice(index, <span class="number">1</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        deleteComplete(index) &#123;</span><br><span class="line">            <span class="built_in">this</span>.completedList.splice(index, <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>é¡µé¢å†™å®Œï¼ŒåŸå‹ä¸Šçš„éœ€æ±‚ä¹Ÿå¤§æ¦‚å¼€å‘å®Œæˆï¼Œé¡µé¢å¤§æ¦‚é•¿å¦‚ä¸‹æ ·å­ï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/2019/vue_jest_03.png"></p><h3 id="ä¿®æ”¹ç›®å½•é…ç½®"><a href="#ä¿®æ”¹ç›®å½•é…ç½®" class="headerlink" title="ä¿®æ”¹ç›®å½•é…ç½®"></a>ä¿®æ”¹ç›®å½•é…ç½®</h3><p>æ¥ä¸‹æ¥å°±æ˜¯å¼€å§‹ç¼–å†™å•å…ƒæµ‹è¯•æ–‡ä»¶äº†ï¼Œå†™ä¹‹å‰æˆ‘ä»¬å…ˆæŠŠæµ‹è¯•æ–‡ä»¶ç›®å½•ä¿®æ”¹ä¸‹ä¸º <code>__tests__</code>ï¼ŒåŒæ—¶ä¿®æ”¹ <code>jest.config.js</code> ä¸ºå¦‚ä¸‹é…ç½®ï¼Œæ³¨æ„å…¶ä¸­çš„ <code>testMatch</code> å·²ç»ä¿®æ”¹ä¸ºåŒ¹é… <code>__tests__</code> ç›®å½•ä¸‹çš„æ‰€æœ‰ <code>.js</code> æ–‡ä»¶äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    moduleFileExtensions: [</span><br><span class="line">        <span class="string">&#x27;js&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    transform: &#123;</span><br><span class="line">        <span class="string">&#x27;^.+\\.vue$&#x27;</span>: <span class="string">&#x27;&lt;rootDir&gt;/node_modules/vue-jest&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;^.+\\.js$&#x27;</span>: <span class="string">&#x27;&lt;rootDir&gt;/node_modules/babel-jest&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    moduleNameMapper: &#123;</span><br><span class="line">        <span class="string">&#x27;^@/(.*)$&#x27;</span>: <span class="string">&#x27;&lt;rootDir&gt;/src/$1&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    snapshotSerializers: [</span><br><span class="line">        <span class="string">&#x27;jest-serializer-vue&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    testMatch: [<span class="string">&#x27;**/__tests__/**/*.spec.js&#x27;</span>],</span><br><span class="line">    transformIgnorePatterns: [<span class="string">&#x27;&lt;rootDir&gt;/node_modules/&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™æµ‹è¯•æ–‡ä»¶"><a href="#ç¼–å†™æµ‹è¯•æ–‡ä»¶" class="headerlink" title="ç¼–å†™æµ‹è¯•æ–‡ä»¶"></a>ç¼–å†™æµ‹è¯•æ–‡ä»¶</h3><p>åœ¨ <code>__tests__/unit/</code> ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ <code>todolist.spec.js</code>ï¼Œæˆ‘ä»¬çº¦å®šæµ‹è¯•æŸä¸ª <code>vue</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒçš„å•å…ƒæµ‹è¯•æ–‡ä»¶ä¹ æƒ¯å‘½åæˆ <code>*.spec.js</code> æˆ– <code>*.test.js</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallowMount &#125; <span class="keyword">from</span> <span class="string">&#x27;@vue/test-utils&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ToDoList <span class="keyword">from</span> <span class="string">&#x27;@/components/ToDoList&#x27;</span></span><br><span class="line"></span><br><span class="line">describe(<span class="string">&#x27;test ToDoList&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    it(<span class="string">&#x27;è¾“å…¥æ¡†åˆå§‹å€¼ä¸ºç©ºå­—ç¬¦ä¸²&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> wrapper = shallowMount(ToDoList)</span><br><span class="line">        expect(wrapper.vm.toDoText).toBe(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸ªæµ‹è¯•æ–‡ä»¶ç®€è¦è¯´æ˜ï¼š</p><ul><li><code>shallowMount</code> å°†ä¼šåˆ›å»ºä¸€ä¸ªåŒ…å«è¢«æŒ‚è½½å’Œæ¸²æŸ“çš„ <code>Vue</code> ç»„ä»¶çš„ <code>Wrapper</code>ï¼Œåªå­˜æ ¹å½“å‰ç»„ä»¶ï¼Œä¸åŒ…å«å­ç»„ä»¶ã€‚</li><li><code>describe(name, fn)</code> è¿™è¾¹æ˜¯å®šä¹‰ä¸€ä¸ªæµ‹è¯•å¥—ä»¶ï¼Œ<code>test ToDoList</code> æ˜¯æµ‹è¯•å¥—ä»¶çš„åå­—ï¼Œ<code>fn</code> æ˜¯å…·ä½“çš„å¯æ‰§è¡Œçš„å‡½æ•°</li><li><code>it(name, fn)</code> æ˜¯ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œ<code>è¾“å…¥æ¡†åˆå§‹å€¼ä¸ºç©ºå­—ç¬¦ä¸²</code> æ˜¯æµ‹è¯•ç”¨ä¾‹çš„åå­—ï¼Œ<code>fn</code> æ˜¯å…·ä½“çš„å¯æ‰§è¡Œå‡½æ•°ï¼›ä¸€ä¸ªæµ‹è¯•å¥—ä»¶é‡Œå¯ä»¥ä¿æŠ¤å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚</li><li><code>expect</code> æ˜¯ <code>Jest</code> å†…ç½®çš„æ–­è¨€é£æ ¼ï¼Œä¸šç•Œè¿˜å­˜åœ¨åˆ«çš„æ–­è¨€é£æ ¼æ¯”å¦‚ <code>Should</code>ã€<code>Assert</code> ç­‰ã€‚</li><li><code>toBe</code> æ˜¯ <code>Jest</code> æä¾›çš„æ–­è¨€æ–¹æ³•ï¼Œ æ›´å¤šçš„å¯ä»¥åˆ°<a href="https://jestjs.io/docs/zh-Hans/expect"><code>Jest Expect</code></a> æŸ¥çœ‹å…·ä½“ç”¨æ³•ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">&#x27;å¾…å®Œæˆåˆ—è¡¨åˆå§‹å€¼åº”è¯¥ä¸ºç©ºæ•°ç»„&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = shallowMount(ToDoList)</span><br><span class="line">    expect(wrapper.vm.toDoList.length).toBe(<span class="number">0</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">it(<span class="string">&#x27;å·²å®Œæˆåˆ—è¡¨åˆå§‹å€¼åº”è¯¥ä¸ºç©ºæ•°ç»„&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = shallowMount(ToDoList)</span><br><span class="line">    expect(wrapper.vm.completedList).toEqual([])</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¾…å®Œæˆå’Œå·²å®Œæˆåˆ—è¡¨ï¼Œå±…ç„¶æ˜¯åˆ—è¡¨ï¼Œæ‰€ä»¥å­˜æ”¾æ•°æ®çš„å­—æ®µå¿…é¡»æ˜¯ <code>Array</code> ç±»å‹ï¼Œç©ºåˆ—è¡¨å°±æ˜¯ç©ºæ•°ç»„ã€‚å¦‚æœç¬¬äºŒä¸ªæµ‹è¯•ç”¨ä¾‹æ”¹æˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expect(wrapper.vm.completedList).toBe([])</span><br></pre></td></tr></table></figure><p>å°†ä¼šæŠ¥é”™ï¼Œå› ä¸º <code>toBe</code> æ–¹æ³•å†…éƒ¨æ˜¯è°ƒç”¨ <code>Object.is(value1, value2)</code> æ¥æ¯”è¾ƒ2ä¸ªå€¼æ˜¯å¦ç›¸ç­‰çš„ï¼Œå’Œ <code>==</code> æˆ– <code>===</code> çš„åˆ¤æ–­é€»è¾‘ä¸ä¸€æ ·ã€‚æ˜¾ç„¶ <code>Object.is([], [])</code> ä¼šè¿”å› <code>false</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">&#x27;è¾“å…¥æ¡†å€¼å˜åŒ–çš„æ—¶å€™ï¼ŒtoDoTextåº”è¯¥è·Ÿç€å˜åŒ–&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = shallowMount(ToDoList)</span><br><span class="line">    wrapper.find(<span class="string">&#x27;.to-do-text&#x27;</span>).setValue(<span class="string">&#x27;æ™šä¸Šè¦é™ªå¦ˆå¦ˆé€›è¶…å¸‚&#x27;</span>)</span><br><span class="line">    expect(wrapper.vm.toDoText).toBe(<span class="string">&#x27;æ™šä¸Šè¦é™ªå¦ˆå¦ˆé€›è¶…å¸‚&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">it(<span class="string">&#x27;è¾“å…¥æ¡†æ²¡æœ‰å€¼ï¼Œæ•²å…¥å›è½¦çš„æ—¶å€™ï¼Œæ— å˜åŒ–&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = shallowMount(ToDoList)</span><br><span class="line">    <span class="keyword">const</span> length = wrapper.vm.toDoList.length</span><br><span class="line">    <span class="keyword">const</span> input = wrapper.find(<span class="string">&#x27;.to-do-text&#x27;</span>)</span><br><span class="line">    input.setValue(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    input.trigger(<span class="string">&#x27;keyup.enter&#x27;</span>)</span><br><span class="line">    expect(wrapper.vm.toDoList.length).toBe(length)</span><br><span class="line">&#125;)</span><br><span class="line">it(<span class="string">&#x27;è¾“å…¥æ¡†æœ‰å€¼ï¼Œæ•²å…¥å›è½¦çš„æ—¶å€™ï¼Œå¾…å®Œæˆåˆ—è¡¨å°†æ–°å¢ä¸€æ¡æ•°æ®ï¼ŒåŒæ—¶æ¸…ç©ºè¾“å…¥æ¡†&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = shallowMount(ToDoList)</span><br><span class="line">    <span class="keyword">const</span> length = wrapper.vm.toDoList.length</span><br><span class="line">    <span class="keyword">const</span> input = wrapper.find(<span class="string">&#x27;.to-do-text&#x27;</span>)</span><br><span class="line">    input.setValue(<span class="string">&#x27;æ™šä¸Šå»åƒå¤§é¤&#x27;</span>)</span><br><span class="line">    input.trigger(<span class="string">&#x27;keyup.enter&#x27;</span>)</span><br><span class="line">    expect(wrapper.vm.toDoList.length).toBe(length + <span class="number">1</span>)</span><br><span class="line">    expect(wrapper.vm.toDoText).toBe(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li><code>setValue</code> å¯ä»¥è®¾ç½®ä¸€ä¸ªæ–‡æœ¬æ§ä»¶çš„å€¼å¹¶æ›´æ–° <code>v-model</code> ç»‘å®šçš„æ•°æ®ã€‚</li><li><code>.to-do-text</code> æ˜¯ä¸€ä¸ª <code>CSS</code> é€‰æ‹©å™¨ï¼›<code>Vue-Test-Utils</code> æä¾›äº† <code>find</code> æ–¹æ³•æ¥é€šè¿‡æŸ¥æ‰¾é€‰æ‹©å™¨ï¼Œæ¥è¿”å›ä¸€ä¸ª <code>Wrapper</code>ï¼›é€‰æ‹©å™¨å¯ä»¥æ˜¯ <code>CSS</code> é€‰æ‹©å™¨ã€å¯ä»¥æ˜¯ <code>Vue</code> ç»„ä»¶ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«äº†ç»„ä»¶çš„ <code>name</code> æˆ– <code>ref</code> å±æ€§ï¼Œæ¯”å¦‚å¯ä»¥è¿™æ ·ç”¨ï¼š<code>wrapper.find(&#123; name: &#39;my-button&#39; &#125;)</code></li><li><code>wrapper.vm</code> æ˜¯ä¸€ä¸ª <code>Vue</code> å®ä¾‹ï¼Œåªæœ‰ <code>Vue</code> ç»„ä»¶çš„åŒ…è£¹å™¨æ‰æœ‰ <code>vm</code> è¿™ä¸ªå±æ€§ï¼›é€šè¿‡ <code>wrapper.vm</code> å¯ä»¥è®¿é—®æ‰€æœ‰ <a href="https://vuejs.org/v2/api/#Instance-Properties"><code>Vue</code> å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•</a>ã€‚æ¯”å¦‚ï¼š<code>wrapper.vm.$data</code>ã€<code>wrapper.vm.$nextTick()</code>ã€‚</li><li><code>trigger</code> æ–¹æ³•å¯ä»¥ç”¨æ¥è§¦å‘ä¸€ä¸ª <code>DOM</code> äº‹ä»¶ï¼Œè¿™é‡Œè§¦å‘çš„äº‹ä»¶éƒ½æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥ä¸å¿…å°†æ–­è¨€æ”¾åˆ° <code>$nextTick()</code> é‡Œå»æ‰§è¡Œï¼›åŒæ—¶æ”¯æŒä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œå½“æ•è·åˆ°äº‹ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥è·å–åˆ°ä¼ å…¥å¯¹è±¡çš„å±æ€§ã€‚å¯ä»¥è¿™æ ·å†™ï¼š<code>wrapper.trigger(&#39;click&#39;, &#123;name: &quot;bubuzou.com&quot;&#125;)</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">&#x27;å¾…å®Œæˆåˆ—è¡¨æ”¯æŒç¼–è¾‘åŠŸèƒ½ï¼Œç¼–è¾‘åæ›´æ–°toDoListæ•°ç»„&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = shallowMount(ToDoList)</span><br><span class="line">    wrapper.setData(&#123;<span class="attr">toDoList</span>: [<span class="string">&#x27;è·‘æ­¥åŠå°æ—¶&#x27;</span>]&#125;)</span><br><span class="line">    wrapper.find(<span class="string">&#x27;.wait-to-do li&#x27;</span>).find(<span class="string">&#x27;input&#x27;</span>).setValue(<span class="string">&#x27;ç»•ç€å…¬å›­è·‘3åœˆ&#x27;</span>) </span><br><span class="line">    wrapper.find(<span class="string">&#x27;.wait-to-do li&#x27;</span>).find(<span class="string">&#x27;input&#x27;</span>).trigger(<span class="string">&#x27;blur&#x27;</span>) </span><br><span class="line">    expect(wrapper.vm.toDoList[<span class="number">0</span>]).toBe(<span class="string">&#x27;ç»•ç€å…¬å›­è·‘3åœˆ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å…ˆç”¨ <code>setData</code> ç»™ <code>toDoList</code> è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼ï¼Œä½¿å…¶æ¸²æŸ“å‡ºä¸€ä¸ªåˆ—è¡¨é¡¹ï¼›ç„¶åæ‰¾åˆ°è¿™ä¸ªåˆ—è¡¨é¡¹ï¼Œç”¨ <code>setValue</code> ç»™å…¶è®¾ç½®å€¼ï¼Œæ¨¡æ‹Ÿäº†ç¼–è¾‘ï¼›åˆ—è¡¨é¡¹çš„è¾“å…¥æ¡†æ˜¯ç”¨ <code>:value=&quot;item&quot;</code> ç»‘å®šçš„ <code>value</code>, æ‰€ä»¥ <code>setValue</code> æ— æ³•è§¦å‘æ›´æ–°ï¼›åªèƒ½é€šè¿‡ <code>trigger</code> æ¥è§¦å‘æ›´æ–° <code>toDoList</code> çš„å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">&#x27;å¾…å®Œæˆåˆ—è¡¨ç‚¹å‡»åˆ é™¤ï¼ŒåŒæ—¶æ›´æ–°toDoListæ•°ç»„&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = shallowMount(ToDoList)</span><br><span class="line">    wrapper.setData(&#123;<span class="attr">toDoList</span>: [<span class="string">&#x27;ç¡å‰çœ‹ä¸€å°æ—¶ä¹¦&#x27;</span>]&#125;)</span><br><span class="line">    expect(wrapper.vm.toDoList.length).toBe(<span class="number">1</span>)</span><br><span class="line">    wrapper.find(<span class="string">&#x27;.wait-to-do li&#x27;</span>).find(<span class="string">&#x27;.del&#x27;</span>).trigger(<span class="string">&#x27;click&#x27;</span>)</span><br><span class="line">    expect(wrapper.vm.toDoList.length).toBe(<span class="number">0</span>)</span><br><span class="line">&#125;)</span><br><span class="line">it(<span class="string">&#x27;ç‚¹å‡»å¾…å®Œæˆåˆ—è¡¨ä¸­æŸé¡¹çš„å·²å®ŒæˆæŒ‰é’®ï¼Œæ•°æ®å¯¹åº”æ›´æ–°&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = shallowMount(ToDoList)</span><br><span class="line">    wrapper.setData(&#123;<span class="attr">toDoList</span>: [<span class="string">&#x27;ä¸­åˆé¥­ååƒä¸€ä¸ªè‹¹æœ&#x27;</span>]&#125;)</span><br><span class="line">    expect(wrapper.vm.toDoList.length).toBe(<span class="number">1</span>)</span><br><span class="line">    expect(wrapper.vm.completedList.length).toBe(<span class="number">0</span>)</span><br><span class="line">    wrapper.find(<span class="string">&#x27;.wait-to-do li&#x27;</span>).find(<span class="string">&#x27;.move&#x27;</span>).trigger(<span class="string">&#x27;click&#x27;</span>)</span><br><span class="line">    expect(wrapper.vm.toDoList.length).toBe(<span class="number">0</span>)</span><br><span class="line">    expect(wrapper.vm.completedList.length).toBe(<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br><span class="line">it(<span class="string">&#x27;ç‚¹å‡»å·²å®Œæˆåˆ—è¡¨ä¸­æŸé¡¹çš„æœªå®ŒæˆæŒ‰é’®ï¼Œæ•°æ®å¯¹åº”æ›´æ–°&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = shallowMount(ToDoList)</span><br><span class="line">    wrapper.setData(&#123;<span class="attr">completedList</span>: [<span class="string">&#x27;å”±äº†ä¸€é¦–æ­Œ&#x27;</span>]&#125;)</span><br><span class="line">    expect(wrapper.vm.toDoList.length).toBe(<span class="number">0</span>)</span><br><span class="line">    expect(wrapper.vm.completedList.length).toBe(<span class="number">1</span>)</span><br><span class="line">    wrapper.find(<span class="string">&#x27;.has-completed li&#x27;</span>).find(<span class="string">&#x27;.move&#x27;</span>).trigger(<span class="string">&#x27;click&#x27;</span>)</span><br><span class="line">    expect(wrapper.vm.toDoList.length).toBe(<span class="number">1</span>)</span><br><span class="line">    expect(wrapper.vm.completedList.length).toBe(<span class="number">0</span>)</span><br><span class="line">&#125;)</span><br><span class="line">it(<span class="string">&#x27;åˆ—è¡¨åºå·ä»1å¼€å§‹é€’å¢&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = shallowMount(ToDoList)</span><br><span class="line">    wrapper.setData(&#123;<span class="attr">toDoList</span>: [<span class="string">&#x27;æ—©ä¸Šåšä½œä¸š&#x27;</span>, <span class="string">&#x27;ä¸‹åˆå»é€›è¡—&#x27;</span>]&#125;)</span><br><span class="line">    expect(wrapper.vm.toDoList.length).toBe(<span class="number">2</span>)</span><br><span class="line">    expect(wrapper.find(<span class="string">&#x27;.wait-to-do&#x27;</span>).html()).toMatch(<span class="string">&#x27;&lt;i&gt;1&lt;/i&gt;&#x27;</span>)</span><br><span class="line">    expect(wrapper.find(<span class="string">&#x27;.wait-to-do&#x27;</span>).html()).toMatch(<span class="string">&#x27;&lt;i&gt;2&lt;/i&gt;&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">it(<span class="string">&#x27;å½“å¾…å®Œæˆåˆ—è¡¨ä¸ºç©ºçš„æ—¶å€™ï¼Œä¸æ˜¾ç¤ºå¾…å®Œæˆå­—æ ·&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = shallowMount(ToDoList)</span><br><span class="line">    wrapper.setData(&#123;<span class="attr">toDoList</span>: []&#125;)</span><br><span class="line">    expect(wrapper.find(<span class="string">&#x27;h4&#x27;</span>).isVisible()).toBeFalsy()</span><br><span class="line">    wrapper.setData(&#123;<span class="attr">toDoList</span>: [<span class="string">&#x27;æ˜å¤©å»çˆ¬åŒ—å±±&#x27;</span>]&#125;)</span><br><span class="line">    expect(wrapper.find(<span class="string">&#x27;h4&#x27;</span>).isVisible()).toBeTruthy()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­å¯ä»¥å†™å¤šä¸ª <code>expect</code> ä»¥ä¿è¯æ–­è¨€çš„å‡†ç¡®æ€§ã€‚</p><h3 id="å¼‚æ­¥æµ‹è¯•"><a href="#å¼‚æ­¥æµ‹è¯•" class="headerlink" title="å¼‚æ­¥æµ‹è¯•"></a>å¼‚æ­¥æµ‹è¯•</h3><p>æœ€åæˆ‘ä»¬ä¸ºäº†æ¨¡æ‹Ÿå¼‚æ­¥æµ‹è¯•ï¼Œæ‰€ä»¥åŠ ä¸€ä¸ªéœ€æ±‚ï¼Œå³é¡µé¢åŠ è½½çš„æ—¶å€™ä¼šå»è¯·æ±‚è¿œç¨‹å¾…å®Œæˆåˆ—è¡¨çš„æ•°æ®ã€‚<br>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º <code>__mocks__</code> ç›®å½•ï¼ŒåŒæ—¶æ–°å»º <code>axios.js</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> toToList = &#123;</span><br><span class="line">    success: <span class="literal">true</span>,</span><br><span class="line">    data: [<span class="string">&#x27;ä¸Šåˆå»å›¾ä¹¦é¦†çœ‹ä¹¦&#x27;</span>, <span class="string">&#x27;ä¸‹å»å‡ºå»é€›è¡—&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> get = <span class="function">(<span class="params">url</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (url === <span class="string">&#x27;toToList.json&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (toToList.success) &#123;</span><br><span class="line">                resolve(toToList)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                reject(<span class="keyword">new</span> <span class="built_in">Error</span>())</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>ToDoList.vue</code>ï¼Œå¯¼å…¥ <code>axios</code> å’Œå¢åŠ  <code>mounted</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> axios <span class="keyword">from</span> <span class="string">&#x27;../../__mocks__/axios&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    mounted () &#123;</span><br><span class="line">        axios.get(<span class="string">&#x27;toToList.json&#x27;</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.toDoList = res.data</span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç”¨ä¾‹ç¼–å†™ä¸ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">it(<span class="string">&#x27;å½“é¡µé¢æŒ‚è½½çš„æ—¶å€™å»è¯·æ±‚æ•°æ®ï¼Œè¯·æ±‚æˆåŠŸååº”è¯¥ä¼šè¿”å›2æ¡æ•°æ®&#x27;</span>, <span class="function">(<span class="params">done</span>) =&gt;</span> &#123;</span><br><span class="line">    wrapper.vm.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        expect(wrapper.vm.toDoList.length).toBe(<span class="number">2</span>)</span><br><span class="line">        done()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¯¹äºå¼‚æ­¥çš„ä»£ç ï¼Œå†™æ–­è¨€çš„æ—¶å€™éœ€è¦æ”¾åœ¨ <code>wrapper.vm.$nextTick()</code> é‡Œï¼Œä¸”æ‰‹åŠ¨è°ƒç”¨ <code>done()</code>ã€‚</p><h3 id="é…ç½®æµ‹è¯•è¦†ç›–ç‡"><a href="#é…ç½®æµ‹è¯•è¦†ç›–ç‡" class="headerlink" title="é…ç½®æµ‹è¯•è¦†ç›–ç‡"></a>é…ç½®æµ‹è¯•è¦†ç›–ç‡</h3><p>æµ‹è¯•ç”¨ä¾‹å†™äº†éƒ¨åˆ†ï¼Œå¦‚æœæˆ‘ä»¬çœ‹ä¸‹è¦†ç›–ç‡å¦‚ä½•ï¼Œå°±éœ€è¦è¦é…ç½®æµ‹è¯•è¦†ç›–ç‡ã€‚åœ¨ <code>jest.config.js</code> é‡Œæ–°å¢é…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">collectCoverage: <span class="literal">true</span>,</span><br><span class="line">collectCoverageFrom: [<span class="string">&quot;**/*.&#123;js,vue&#125;&quot;</span>, <span class="string">&quot;!**/node_modules/**&quot;</span>],</span><br></pre></td></tr></table></figure><p>åœ¨ <code>package.json</code> çš„ <code>scripts</code> ä¸­æ–°å¢ä¸€æ¡é…ç½®:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;test:cov&quot;: &quot;vue-cli-service test:unit --coverage&quot;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬åœ¨ç»ˆç«¯è¿è¡Œï¼š <code>npm run test:cov</code>ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/2019/vue_jest_04.png" alt="test:cov1"></p><p>è¿è¡Œæµ‹è¯•è¦†ç›–ç‡å‘½ååä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆ <code>coverage</code> ç›®å½•ï¼Œæµè§ˆå™¨æ‰“å¼€é‡Œé¢çš„ <code>index.html</code> ï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/2019/vue_jest_05.png" alt="test:cov2"></p>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jest </tag>
            
            <tag> vue-test-utils </tag>
            
            <tag> å•å…ƒæµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitå¸¸ç”¨æ“ä½œï¼Œä¸€æ–‡æ‰“å°½</title>
      <link href="/2019/09/24/git-all-actions/"/>
      <url>/2019/09/24/git-all-actions/</url>
      
        <content type="html"><![CDATA[<p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/2019/git_all_01.png" alt="git_flow"></p><h2 id="åˆ›å»ºç‰ˆæœ¬åº“"><a href="#åˆ›å»ºç‰ˆæœ¬åº“" class="headerlink" title="åˆ›å»ºç‰ˆæœ¬åº“"></a>åˆ›å»ºç‰ˆæœ¬åº“</h2><ul><li><code>git clone url</code>  å…‹éš†è¿œç¨‹ç‰ˆæœ¬åº“</li><li><code>git init</code>  åˆå§‹åŒ–æœ¬åœ°ç‰ˆæœ¬åº“</li></ul><a id="more"></a><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><ul><li><code>git config --global user.name &#39;chengcp&#39;</code>  é…ç½®<code>global</code>çº§åˆ«çš„ç”¨æˆ·å</li><li><code>git config --global user.email &#39;1326895569@qq.com&#39;</code>  é…ç½®<code>global</code>çº§åˆ«çš„é‚®ç®±</li><li><code>git config --global -l</code>  æŸ¥çœ‹<code>global</code>çº§åˆ«çš„é…ç½®åˆ—è¡¨</li><li><code>git config --global --unset user.name</code>  åˆ é™¤ç”¨æˆ·å</li><li><code>git config --global alias.last &#39;log -1 HEAD&#39;</code>  é…ç½®<code>last</code>åˆ«åï¼Œä½¿ç”¨<code>git last</code>å°†æ˜¾ç¤ºæœ€è¿‘çš„ä¸€æ¬¡æäº¤è®°å½•</li></ul><h2 id="æ·»åŠ å’Œåˆ é™¤æ–‡ä»¶"><a href="#æ·»åŠ å’Œåˆ é™¤æ–‡ä»¶" class="headerlink" title="æ·»åŠ å’Œåˆ é™¤æ–‡ä»¶"></a>æ·»åŠ å’Œåˆ é™¤æ–‡ä»¶</h2><ul><li><code>git add file1 file2</code>  æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒº</li><li><code>git add dir</code>  æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒº</li><li><code>git add .</code>  æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº</li><li><code>git mv oldname newname</code>  å¯¹ä¸€ä¸ªå·²ç»è¿½è¸ªè¿‡çš„æ–‡ä»¶è¿›è¡Œæ”¹åï¼ŒåŒæ—¶åŠ å…¥æš‚å­˜åŒº</li><li><code>git rm file1 file2</code>  åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼ŒåŒæ—¶å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº  </li><li><code>git rm --cached file</code>  åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒºï¼›<code>tracked</code>å˜æˆ<code>untracked</code></li></ul><h2 id="æäº¤"><a href="#æäº¤" class="headerlink" title="æäº¤"></a>æäº¤</h2><ul><li><code>git commit file1 file 2 -m message</code>  æäº¤æš‚å­˜åŒºæŒ‡å®šæ–‡ä»¶åˆ°æœ¬åœ°ä»“åº“</li><li><code>git commit -m message</code>  æäº¤æš‚å­˜åŒºæ‰€æœ‰æ–‡ä»¶åˆ°æœ¬åœ°ä»“åº“</li><li><code>git commit -a -m message</code>  è‡ªåŠ¨æš‚å­˜æ‰€æœ‰å·²ç»è¿½è¸ªè¿‡çš„æ–‡ä»¶ï¼Œä¸”æäº¤åˆ°æœ¬åœ°ä»“åº“   </li><li><code>git commit --amend -m message</code>  ä½¿ç”¨ä¸€æ¬¡æ–°çš„æäº¤ï¼Œæ›¿ä»£ä¸Šæ¬¡æäº¤</li></ul><h2 id="åˆ†æ”¯"><a href="#åˆ†æ”¯" class="headerlink" title="åˆ†æ”¯"></a>åˆ†æ”¯</h2><ul><li><code>git branch</code>  æŸ¥çœ‹æ‰€æœ‰æœ¬åœ°åˆ†æ”¯</li><li><code>git branch â€“r</code>  æŸ¥çœ‹æ‰€æœ‰è¿œç¨‹åˆ†æ”¯</li><li><code>git branch â€“a</code>  æŸ¥çœ‹æ‰€æœ‰è¿œç¨‹å’Œæœ¬åœ°åˆ†æ”¯</li><li><code>git branch â€“v</code>  æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰åˆ†æ”¯æœ€æ–°ä¸€æ¬¡æäº¤ä¿¡æ¯</li><li><code>git branch [branch]</code>  æ–°å»ºåˆ†æ”¯   </li><li><code>git checkout â€“b [branch]</code>  æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶ä¸”åˆ‡æ¢è¿‡å»</li><li><code>git branch [branch] [commit]</code>  åŸºäºæŸæ¬¡æäº¤ï¼Œå»ºç«‹ä¸€ä¸ªåˆ†æ”¯</li><li><code>git branch --track [branch] [remote-branch]</code>  å»ºç«‹ä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶ä¸”ä¸è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»</li><li><code>git branch --set-upstream [branch] [remote-branch]</code>  åœ¨ç°æœ‰çš„æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯ä¹‹é—´å»ºç«‹è¿½è¸ªå…³ç³»</li><li><code>git branch â€“m [old-branch] [new-branch]</code>  é‡å‘½ååˆ†æ”¯</li><li><code>git merge [branch]</code>  æŠŠæŒ‡å®šåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</li><li><code>git chery-pick [commit] [commit]</code>  é€‰æ‹©æäº¤ï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯</li><li><code>git branch â€“d [branch]</code>  åˆ é™¤æœ¬åœ°åˆ†æ”¯</li><li><code>git push origin â€“d [branch]</code>  åˆ é™¤è¿œç¨‹åˆ†æ”¯</li><li><code>git checkout [branch]</code>  åˆ‡æ¢åˆ†æ”¯</li><li><code>git checkout -</code>  åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªæœ€è¿‘ä½¿ç”¨è¿‡çš„åˆ†æ”¯</li></ul><h2 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h2><ul><li><code>git tag</code>  åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾</li><li><code>git show [tag]</code>  æŸ¥çœ‹æŒ‡å®šæ ‡ç­¾ä¿¡æ¯</li><li><code>git tag [tag]</code>  ç»™æœ€è¿‘ä¸€æ¬¡æäº¤æ‰“ä¸€ä¸ªæ ‡ç­¾</li><li><code>git tag [tag] [commit]</code>  åœ¨æŸæ¬¡æäº¤ä¸Šæ‰“ä¸€ä¸ªæ ‡ç­¾</li><li><code>git tag â€“d [tag]</code>  åˆ é™¤æœ¬åœ°æŒ‡å®šæ ‡ç­¾</li><li><code>git push origin â€“d tag [tag]</code>  åˆ é™¤è¿œç¨‹çš„æ ‡ç­¾</li><li><code>git push origin [tag]</code>  æ¨é€æŒ‡å®šæ ‡ç­¾</li><li><code>git push origin --tags</code>  æ¨é€æ‰€æœ‰æ ‡ç­¾</li></ul><h2 id="æŸ¥çœ‹ä¿¡æ¯"><a href="#æŸ¥çœ‹ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ä¿¡æ¯"></a>æŸ¥çœ‹ä¿¡æ¯</h2><ul><li><code>git status</code>  æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€</li><li><code>git help [command]</code>  è·å–å¸®åŠ©æ–‡æ¡£</li><li><code>git [command] --help</code>  è·å–å¸®åŠ©æ–‡æ¡£</li><li><code>git log</code>  æŸ¥çœ‹å½“å‰åˆ†æ”¯çš„æäº¤è®°å½•</li><li><code>git log â€“all</code>  æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯çš„æäº¤è®°å½•</li><li><code>git log -5 --oneline --graph</code>   æŸ¥çœ‹æœ€è¿‘5æ¬¡æäº¤è®°å½•ï¼Œä»¥å•è¡Œã€æ ‘çŠ¶å›¾å½¢å¼æ˜¾ç¤º</li><li><code>git reflog</code>  æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰å˜æ›´è®°å½•</li><li><code>git diff</code>  æŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å·®å¼‚</li><li><code>git diff -- file</code>  æŸä¸ªæ–‡ä»¶åœ¨å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å·®å¼‚</li><li><code>git diff HEAD</code>   å·¥ä½œåŒºå’Œæœ€æ–°ä¸€æ¬¡æäº¤çš„å·®å¼‚</li><li><code>git diff --cached</code>  æš‚å­˜åŒºå’ŒHEADçš„å·®å¼‚</li><li><code>git diff branch_a branch_b â€“ file</code>  æŸæ–‡ä»¶åœ¨ä¸¤ä¸ªåˆ†æ”¯é—´çš„å·®å¼‚</li></ul><h2 id="è¿œç¨‹æ“ä½œ"><a href="#è¿œç¨‹æ“ä½œ" class="headerlink" title="è¿œç¨‹æ“ä½œ"></a>è¿œç¨‹æ“ä½œ</h2><ul><li><code>git remote -v</code>  æŸ¥çœ‹æ‰€æœ‰è¿œç¨‹ä»“åº“</li><li><code>git ls-remote origin</code>  æŸ¥çœ‹è¿œç¨‹ä»“åº“å¼•ç”¨åˆ—è¡¨</li><li><code>git remote show origin</code>  æŸ¥çœ‹è¿œç¨‹ä»“åº“ä¿¡æ¯</li><li><code>git fetch origin</code>  æ‹‰å–è¿œç¨‹ä»“åº“æœ€æ–°æäº¤</li><li><code>git pull origin master</code>  æ‹‰å–è¿œç¨‹<code>master</code>ï¼Œå¹¶ä¸”åˆå¹¶åˆ°æœ¬åœ°å½“å‰åˆ†æ”¯</li><li><code>git remote add  upstream url</code>  æ·»åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“ï¼Œå‘½åä¸º<code>upstream</code></li><li><code>git push origin master</code>  æ¨é€åˆ°è¿œç¨‹<code>origin</code>çš„<code>master</code>åˆ†æ”¯</li><li><code>git push origin --all</code>  æ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</li><li><code>git remote prune origin</code>  åˆ é™¤è¿œç¨‹ä»“åº“ä¸­ä¸å­˜åœ¨çš„åˆ†æ”¯</li></ul><h2 id="æ’¤é”€"><a href="#æ’¤é”€" class="headerlink" title="æ’¤é”€"></a>æ’¤é”€</h2><ul><li><code>git reset --soft HEAD</code>  å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬ï¼Œä¿ç•™å·¥ä½œåŒºå’Œæš‚å­˜åŒº</li><li><code>git reset --mixed HEAD</code>  å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬ï¼Œä¿ç•™å·¥ä½œåŒºï¼Œæ¸…ç©ºæš‚å­˜åŒºï¼›<code>--mixed</code>æ˜¯é»˜è®¤å‚æ•°ï¼Œå³ç­‰åŒäº<code>git reset HEAD</code></li><li><code>git reset --hard HEAD</code>  å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬ï¼Œæ¸…ç©ºå·¥ä½œåŒºå’Œæš‚å­˜åŒº</li><li><code>git reset HEAD -- file</code>  æ¸…ç©ºæš‚å­˜åŒºä¸­æŸä¸ªæ–‡ä»¶çš„ä¿®æ”¹</li><li><code>git checkout -- file</code>  æ£€å‡ºæš‚å­˜åŒºçš„æ–‡ä»¶åˆ°å·¥ä½œç›®å½• </li><li><code>git checkout .</code>  æ£€å‡ºæš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œç›®å½•</li><li><code>git revert HEAD~ 2</code>  å›æ»šåˆ°2ä¸ªç¥–å…ˆæäº¤çš„ç‰ˆæœ¬ï¼ŒåŒæ—¶äº§ç”Ÿæ–°çš„æäº¤è®°å½•</li><li><code>git revert --continue</code>  å†²çªè§£å†³ï¼Œä¸”æŠŠä¿®æ”¹æäº¤åˆ°æš‚å­˜åŒºåæ‰§è¡Œå›æ»šï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„æäº¤</li><li><code>git revert â€“abort</code>  å–æ¶ˆå›æ»šï¼Œå›åˆ°ä¹‹å‰çš„çŠ¶æ€</li></ul><h2 id="å‚¨è—"><a href="#å‚¨è—" class="headerlink" title="å‚¨è—"></a>å‚¨è—</h2><ul><li><code>git stash</code>  å°†å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å˜æ›´ä¿å­˜åˆ°å‚¨è—å †æ ˆä¸­ï¼ŒåŒæ—¶å·¥ä½œåŒºå’Œæš‚å­˜åŒºæ¢å¤åˆ°<code>HEAD</code>ä¸€æ ·</li><li><code>git stash list</code>  æŸ¥çœ‹å‚¨è—åˆ—è¡¨</li><li><code>git stash pop</code>  åº”ç”¨æœ€è¿‘çš„ä¸€æ¬¡å‚¨è—ï¼Œå¹¶ä¸”ä»å‚¨è—æ ˆä¸­ç§»é™¤è¯¥æ¡è®°å½•</li><li><code>git stash apply stash@&#123;0&#125;</code>  åº”ç”¨æœ€è¿‘çš„ä¸€æ¬¡å‚¨è—ï¼Œä¸ç§»é™¤è®°å½•ï¼›ç­‰åŒäº <code>git stash apply</code></li><li><code>git stash pop --index</code>  åº”ç”¨æœ€è¿‘ä¸€æ¬¡å‚¨è—ï¼Œ<code>--index</code>è¡¨ç¤ºæš‚å­˜åŒºçš„å˜æ›´ä¹Ÿä¼šæ›´æ–°ï¼Œå¦åˆ™åªæ›´æ–°å·¥ä½œåŒºå˜æ›´</li><li><code>git stash drop  stash@&#123;0&#125;</code>  ç§»é™¤å‚¨è—è®°å½•</li></ul>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue-quill-editoræ’å…¥å›¾ç‰‡è·¯å¾„å¤ªé•¿é—®é¢˜è§£å†³</title>
      <link href="/2019/07/26/vue-quill-editor/"/>
      <url>/2019/07/26/vue-quill-editor/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åšé¡¹ç›®çš„æ—¶å€™æœ‰ä¸€ä¸ªå‘å¸ƒæ–°é—»çš„éœ€æ±‚ï¼Œæ–°é—»ç¼–è¾‘çš„æ—¶å€™è¦æ±‚èƒ½å‘å¸ƒå¸¦æ ¼å¼çš„æ–‡æœ¬å†…å®¹å’Œèƒ½å±•ç¤ºæ”¯æŒå›¾ç‰‡ã€‚<br>ç”±äºé¡¹ç›®æ˜¯ç”¨vueå¼€å‘çš„ï¼Œæ‰€ä»¥æ‰¾ç¼–è¾‘å™¨çš„æ—¶å€™é€‰äº† <code>vue-quill-editor</code> ã€‚ç¼–è¾‘å™¨é•¿å¦‚ä¸‹çš„æ ·å­ï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/2019/quill_01.png" alt="quill_01"></p><a id="more"></a><h2 id="ç°åœ¨çš„é—®é¢˜"><a href="#ç°åœ¨çš„é—®é¢˜" class="headerlink" title="ç°åœ¨çš„é—®é¢˜"></a>ç°åœ¨çš„é—®é¢˜</h2><p>ä½†æ˜¯è¿™ä¸ªç¼–è¾‘å™¨ä¼šæŠŠæ’å…¥çš„å›¾ç‰‡ä¼šè½¬æˆ <code>base64</code> ä½çš„ç¼–ç ï¼Œä½¿å¾—ç¼–è¾‘å™¨å†…å®¹ä¿å­˜è¿›æ•°æ®åº“çš„æ—¶å€™ä¼šè¶…å‡ºé™åˆ¶é•¿åº¦ï¼Œä»è€ŒæŠ¥é”™ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/2019/quill_02.png" alt="quill_01"></p><h2 id="ä»é—®é¢˜æ¥æºç€æ‰‹"><a href="#ä»é—®é¢˜æ¥æºç€æ‰‹" class="headerlink" title="ä»é—®é¢˜æ¥æºç€æ‰‹"></a>ä»é—®é¢˜æ¥æºç€æ‰‹</h2><p>é¦–å…ˆè¦æ˜ç™½å¯¼è‡´è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ <code>vue-quill-editor</code> ç¼–è¾‘å™¨é»˜è®¤æŠŠä¸Šä¼ çš„å›¾ç‰‡ç»™è½¬æˆ <code>base64</code> ç¼–ç ï¼Œé‚£æ˜¯ä¸æ˜¯æœ‰è¿™ä¹ˆä¸€ä¸ªé…ç½®å‚æ•°å¯ä»¥è®¾ç½®ä¸Šä¼ åå›¾ç‰‡çš„æ ¼å¼å‘¢ï¼Ÿç»è¿‡ä¸€ç•ªæ–‡æ¡£çš„æŸ¥æ‰¾ï¼Œè²Œä¼¼æ˜¯æ²¡æœ‰ã€‚ä½†æ˜¯æä¾›äº†ä¸€ä¸ª <code>handlers</code> å¯ä»¥è‡ªå®šä¹‰å›¾ç‰‡ä¸Šä¼ çš„æ–¹å¼ï¼Œé‚£å°±ä»è¿™é‡Œä¸‹æ–‡ç« ã€‚å¤§æ¦‚æ„æ€æ˜¯ç‚¹å‡»è¿™ä¸ªå›¾ç‰‡æŒ‰é’®çš„æ—¶å€™ï¼Œä¼šå‡ºå‘ä¸€ä¸ªå›è°ƒï¼Œå¯ä»¥åœ¨å›è°ƒé‡Œè§¦å‘è‡ªå·±çš„æ–‡ä»¶ä¸Šä¼ å¼€å…³ã€‚è¿™é‡Œæˆ‘ç”¨çš„æ–‡ä»¶ä¸Šä¼ æ˜¯ <code>element-ui</code> çš„ <code>el-upload</code>ã€‚</p><h2 id="å®‰è£…vue-quill-editor"><a href="#å®‰è£…vue-quill-editor" class="headerlink" title="å®‰è£…vue-quill-editor"></a>å®‰è£…<code>vue-quill-editor</code></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-quill-editor --save</span><br></pre></td></tr></table></figure><h2 id="é…ç½®vue-quill-editor"><a href="#é…ç½®vue-quill-editor" class="headerlink" title="é…ç½®vue-quill-editor"></a>é…ç½®<code>vue-quill-editor</code></h2><p>é…ç½® <code>html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">quill-editor</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-model</span>=<span class="string">&quot;ruleForm.content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">&quot;myQuillEditor&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:options</span>=<span class="string">&quot;editorOption&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;ql-editor&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:class</span>=<span class="string">&quot;operationType.includes(&#x27;check&#x27;) ? &#x27;disabled&#x27; : &#x27;&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:disabled</span>=<span class="string">&quot;operationType.includes(&#x27;check&#x27;)&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">quill-editor</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯¼å…¥<code>vue-quill-editor</code> ä¸”è®¾ç½®<code>components</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; quillEditor &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-quill-editor&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">        quillEditor</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¾ç½®<code>options</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">editorOption:&#123;</span><br><span class="line">    modules: &#123;</span><br><span class="line">        toolbar: &#123;</span><br><span class="line">            container: [</span><br><span class="line">                [<span class="string">&#x27;bold&#x27;</span>, <span class="string">&#x27;italic&#x27;</span>, <span class="string">&#x27;underline&#x27;</span>, <span class="string">&#x27;strike&#x27;</span>],</span><br><span class="line">                [<span class="string">&#x27;blockquote&#x27;</span>, <span class="string">&#x27;code-block&#x27;</span>],</span><br><span class="line">                [&#123; <span class="string">&#x27;list&#x27;</span>: <span class="string">&#x27;ordered&#x27;</span> &#125;, &#123; <span class="string">&#x27;list&#x27;</span>: <span class="string">&#x27;bullet&#x27;</span> &#125;],</span><br><span class="line">                [&#123; <span class="string">&#x27;script&#x27;</span>: <span class="string">&#x27;sub&#x27;</span> &#125;, &#123; <span class="string">&#x27;script&#x27;</span>: <span class="string">&#x27;super&#x27;</span> &#125;],</span><br><span class="line">                [&#123; <span class="string">&#x27;indent&#x27;</span>: <span class="string">&#x27;-1&#x27;</span> &#125;, &#123; <span class="string">&#x27;indent&#x27;</span>: <span class="string">&#x27;+1&#x27;</span> &#125;],</span><br><span class="line">                [&#123; <span class="string">&#x27;size&#x27;</span>: [<span class="string">&#x27;small&#x27;</span>, <span class="literal">false</span>, <span class="string">&#x27;large&#x27;</span>, <span class="string">&#x27;huge&#x27;</span>] &#125;],</span><br><span class="line">                [&#123; <span class="string">&#x27;header&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="literal">false</span>] &#125;],</span><br><span class="line">                [&#123; <span class="string">&#x27;color&#x27;</span>: [] &#125;, &#123; <span class="string">&#x27;background&#x27;</span>: [] &#125;],</span><br><span class="line">                [&#123; <span class="string">&#x27;align&#x27;</span>: [] &#125;],</span><br><span class="line">                [<span class="string">&#x27;clean&#x27;</span>],</span><br><span class="line">                [<span class="string">&#x27;link&#x27;</span>, <span class="string">&#x27;image&#x27;</span>]</span><br><span class="line">            ],</span><br><span class="line">            handlers: &#123;</span><br><span class="line">                image: <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (value) &#123;</span><br><span class="line">                        <span class="comment">// è§¦å‘element-uiçš„æ–‡ä»¶ä¸Šä¼ </span></span><br><span class="line">                        <span class="built_in">document</span>.querySelector(<span class="string">&quot;.avatar-uploader input&quot;</span>).click();</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="built_in">this</span>.quill.format(<span class="string">&quot;image&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    placeholder: <span class="string">&#x27;è¯·è¾“å…¥&#x27;</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>å¼•å…¥ç›¸å…³<code>style</code>ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;~quill/dist/quill.core.css&#x27;</span>;</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;~quill/dist/quill.snow.css&#x27;</span>;</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&#x27;~quill/dist/quill.bubble.css&#x27;</span>;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="é…ç½®el-upload"><a href="#é…ç½®el-upload" class="headerlink" title="é…ç½®el-upload"></a>é…ç½®<code>el-upload</code></h2><p><code>template</code>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">&quot;quillUploader&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:action</span>=<span class="string">&quot;serverUrl&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:show-file-list</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:auto-upload</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:on-change</span>=<span class="string">&quot;onChangeQuill&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:before-upload</span>=<span class="string">&quot;beforeUpload&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:limit</span>=<span class="string">&quot;20&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:multiple</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:accept</span>=<span class="string">&quot;acceptFile&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>onChange</code>çš„æ—¶å€™æ‰§è¡Œæ–‡ä»¶ä¸Šä¼ ï¼Œè¿™é‡Œçš„æ–‡ä»¶ä¸Šä¼ ç”¨çš„æ˜¯è…¾è®¯çš„å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œ<code>cosUtils</code>å°è£…äº†ä¸€äº›å¯¹è±¡å­˜å‚¨çš„ä¸€äº›å·¥å…·æ–¹æ³•ï¼Œä½ ä»¬å¯ä»¥è‡ªè¡Œæ›¿æ¢æˆè‡ªå·±åç«¯çš„ä¸Šä¼ æ¥å£ã€‚ä¸‹é¢è¿™æ®µä»£ç çš„å¤§æ¦‚æ„æ€æ˜¯æ–‡ä»¶ä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨æœåŠ¡å™¨æˆåŠŸä¹‹åï¼Œæ‹¿åˆ°å…·ä½“çš„å›¾ç‰‡åœ°å€ï¼Œæ’å…¥åˆ°ç¼–è¾‘å™¨å…‰æ ‡æ‰€åœ¨çš„ä½ç½®ï¼Œè¿™ä¸ªæ—¶å€™å›¾ç‰‡å°±æ˜¾ç¤ºå‡ºæ¥äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">onChangeQuill(file, fileList) &#123; </span><br><span class="line">    <span class="keyword">let</span> fileName = file.uid + file.name</span><br><span class="line">    cosUtils.putObject(fileName, file.raw, <span class="string">&#x27;operate/&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;  <span class="comment">// æ–°é—»å›¾ç‰‡å­˜åˆ°operate/ç›®å½•ä¸‹</span></span><br><span class="line">        <span class="built_in">console</span>.log(err || data)</span><br><span class="line">        <span class="keyword">if</span> (!err) &#123; </span><br><span class="line">            <span class="keyword">let</span> quill = <span class="built_in">this</span>.$refs.myQuillEditor.quill</span><br><span class="line">            <span class="keyword">let</span> length = quill.getSelection().index</span><br><span class="line">            <span class="comment">// å›¾ç‰‡ä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨åçš„å…·ä½“åœ°å€</span></span><br><span class="line">            <span class="keyword">let</span> imgSrc =  <span class="string">`https://huzhouhuanzi-xxxxxxx.cos.ap-shanghai.myqcloud.com/operate/<span class="subst">$&#123;fileName&#125;</span>`</span></span><br><span class="line">            quill.insertEmbed(length, <span class="string">&quot;image&quot;</span>, imgSrc)</span><br><span class="line">            <span class="comment">// è°ƒæ•´å…‰æ ‡åˆ°æœ€å</span></span><br><span class="line">            quill.setSelection(length + <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒ </tag>
            
            <tag> upload </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç¨‹åºæ ¹æ®æ‰“åŒ…å‘½ä»¤åŒºåˆ†ä¸åŒç¯å¢ƒçš„API</title>
      <link href="/2019/06/27/wepy-plugins-preprocess/"/>
      <url>/2019/06/27/wepy-plugins-preprocess/</url>
      
        <content type="html"><![CDATA[<p>ä¸€èˆ¬æ¥è®²é¡¹ç›®éƒ½ä¼šæœ‰å¼€å‘ç‰ˆã€æµ‹è¯•ç‰ˆå’Œç”Ÿäº§ç‰ˆè¿™ä¸‰ä¸ªç‰ˆæœ¬ï¼Œä¸åŒç‰ˆæœ¬å¯¹åº”ä¸åŒçš„APIåŸŸåï¼Œæ¯”å¦‚å¯èƒ½ä¼šæ˜¯è¿™æ ·å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HOST_DEV = <span class="string">&#x27;https://dev-bubuzouapi.com/&#x27;</span>  <span class="comment">// å¼€å‘ç¯å¢ƒAPI</span></span><br><span class="line"><span class="keyword">const</span> HOST_TEST = <span class="string">&#x27;https://test-bubuzouapi.com/&#x27;</span>  <span class="comment">// æµ‹è¯•ç¯å¢ƒAPI</span></span><br><span class="line"><span class="keyword">const</span> HOST = <span class="string">&#x27;https://bubuzouapi.com/&#x27;</span>  <span class="comment">// ç”Ÿäº§ç¯å¢ƒAPI</span></span><br></pre></td></tr></table></figure><p>å‰ç«¯é¡¹ç›®é‡Œè¦å¦‚ä½•åŒºåˆ†ç”¨ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªAPIå‘¢ï¼Ÿæ¯”è¾ƒç¬¨çš„æ–¹æ³•æ˜¯ï¼Œæ¯”å¦‚è¿™æ¬¡æˆ‘è¦æ‰“ä¸€ä¸ªæµ‹è¯•ç¯å¢ƒç»™æµ‹è¯•ç”¨ï¼Œé‚£æˆ‘å¿…é¡»æ‰‹åŠ¨çš„æŠŠ <code>HOST_TEST</code> è¿™ä¸ªå˜é‡çš„å€¼è®¾ç½®åˆ°è¯·æ±‚çš„ <code>url</code> é‡Œã€‚å¦‚æœä¸‹æ¬¡éœ€è¦æ‰“å…¶ä»–ç¯å¢ƒçš„åŒ…ï¼Œé‚£æˆ‘å°±éœ€è¦å†æ¬¡æ‰‹åŠ¨æ›´æ”¹ <code>url</code> ä¸ºåˆ«çš„å€¼ï¼Œè¿™æ ·æ˜¾å¾—å¾ˆä¸æ–¹ä¾¿ã€‚</p><a id="more"></a><h2 id="wepy-plugin-preprocess"><a href="#wepy-plugin-preprocess" class="headerlink" title="wepy-plugin-preprocess"></a>wepy-plugin-preprocess</h2><p>å¦‚æœä½ çš„å°ç¨‹åºç”¨çš„æ˜¯ <code>wepy</code> æ¡†æ¶æ¥æ„å»ºçš„è¯ï¼Œä½ å¯ä»¥ç”¨ <code>wepy-plugin-preprocess</code> <a href="https://www.npmjs.com/package/wepy-plugin-preprocess">è¿™ä¸ªæ’ä»¶</a>æ¥å¯¹ <code>js</code> è¿›è¡Œä¸€ä¸ªé¢„å¤„ç†ï¼Œå¯ä»¥ä½¿å¾—æ¯æ¬¡è®¾ç½®åˆ°è¯·æ±‚é‡Œçš„ <code>url</code> çš„å€¼æ˜¯æ ¹æ®æ‰“åŒ…å‘½ä»¤æ¥çš„ã€‚</p><p><code>wepy-plugin-preprocess</code> æ˜¯ä¾èµ–äº <code>preprocess</code> è¿™ä¸ªåŒ…çš„ï¼Œè¿™ä¸ªåŒ…é‡Œå®šä¹‰äº†ä¸€äº›ç”¨äºé¢„å¤„ç†çš„æŒ‡ä»¤ï¼Œæ¯”å¦‚ <code>@if VAR=&#39;value&#39;</code>ã€<code>@ifdef VAR</code>ã€<code>@include</code> è¿™ç§ï¼Œæƒ³è¦äº†è§£æ›´å¤šç”¨æ³•ï¼Œ<a href="https://www.npmjs.com/package/preprocess">è¯·ç‚¹å‡»è¿™é‡Œã€‚</a></p><p>å®‰è£…æ’ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install wepy-plugin-preprocess --save-dev</span><br></pre></td></tr></table></figure><h2 id="é…ç½®wepy-config-jsæ–‡ä»¶"><a href="#é…ç½®wepy-config-jsæ–‡ä»¶" class="headerlink" title="é…ç½®wepy.config.jsæ–‡ä»¶"></a>é…ç½®wepy.config.jsæ–‡ä»¶</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ENV = process.env.NODE_ENV</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    plugins: &#123;</span><br><span class="line">        preprocess: &#123;</span><br><span class="line">            filter: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            context: &#123; ENV &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®package-jsonæ–‡ä»¶"><a href="#è®¾ç½®package-jsonæ–‡ä»¶" class="headerlink" title="è®¾ç½®package.jsonæ–‡ä»¶"></a>è®¾ç½®package.jsonæ–‡ä»¶</h2><p>æƒ³è¦åŒºåˆ†ä¸åŒçš„ç¯å¢ƒï¼Œå°±éœ€è¦é…ç½®å‡ ä¸ªä¸åŒç¯å¢ƒçš„æ‰“åŒ…å‘½ä»¤ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;dev&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=dev wepy build --watch&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=test wepy build --no-cache&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;prod&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=prod wepy build --no-cache&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®šä¹‰å¸¸é‡æ–‡ä»¶"><a href="#å®šä¹‰å¸¸é‡æ–‡ä»¶" class="headerlink" title="å®šä¹‰å¸¸é‡æ–‡ä»¶"></a>å®šä¹‰å¸¸é‡æ–‡ä»¶</h2><p>å¸¸é‡æ–‡ä»¶é‡Œå¯ä»¥å®šä¹‰ä¸€äº›é¡¹ç›®é‡Œç”¨åˆ°çš„å¸¸é‡ï¼Œæ¯”å¦‚è¿™é‡Œä¼šå®šä¹‰ <code>API</code> åŸŸåã€‚ç„¶åæŠŠå¸¸é‡å¯¼å‡ºå»ï¼Œéœ€è¦ç”¨çš„åœ°æ–¹å†å¯¼å…¥å³å¯ä½¿ç”¨è¿™äº›å¸¸é‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* @if ENV=&#x27;dev&#x27; **</span></span><br><span class="line"><span class="comment">const HOST = exports.HOST =  &#x27;https://dev-bubuzouapi.com/&#x27;  // å¼€å‘ç¯å¢ƒAPI</span></span><br><span class="line"><span class="comment">const HOST_SOCKET = exports.HOST_SOCKET = &#x27;wss://dev-bubuzouapi.com/&#x27;  // å¼€å‘ç¯å¢ƒsocket</span></span><br><span class="line"><span class="comment">/* @endif */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* @if ENV=&#x27;test&#x27; **</span></span><br><span class="line"><span class="comment">const HOST = exports.HOST = &#x27;https://test-bubuzouapi.com/&#x27;  // æµ‹è¯•ç¯å¢ƒAPI</span></span><br><span class="line"><span class="comment">const HOST_SOCKET = exports.HOST_SOCKET = &#x27;wss://test-bubuzouapi.com/&#x27; // æµ‹è¯•ç¯å¢ƒsocket</span></span><br><span class="line"><span class="comment">/* @endif */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* @if ENV=&#x27;prod&#x27; **</span></span><br><span class="line"><span class="comment">const HOST = exports.HOST = &#x27;https://bubuzouapi.com/&#x27;  // ç”Ÿäº§ç¯å¢ƒAPI</span></span><br><span class="line"><span class="comment">const HOST_SOCKET = exports.HOST_SOCKET = &#x27;wss://bubuzouapi.com/&#x27;  // ç”Ÿäº§ç¯å¢ƒsocket</span></span><br><span class="line"><span class="comment">/* @endif */</span></span><br></pre></td></tr></table></figure><h2 id="é€šè¿‡å‘½ä»¤åˆ‡æ¢apiåŸŸå"><a href="#é€šè¿‡å‘½ä»¤åˆ‡æ¢apiåŸŸå" class="headerlink" title="é€šè¿‡å‘½ä»¤åˆ‡æ¢apiåŸŸå"></a>é€šè¿‡å‘½ä»¤åˆ‡æ¢apiåŸŸå</h2><p>åˆ‡æ¢æˆå¼€å‘ç¯å¢ƒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev  <span class="comment">// ç¼–è¯‘å®Œæˆåè¯·æ±‚çš„åŸŸåå°±æ˜¯&#x27;https://dev-bubuzouapi.com/&#x27;</span></span><br></pre></td></tr></table></figure><p>åˆ‡æ¢æˆæµ‹è¯•ç¯å¢ƒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run test</span><br></pre></td></tr></table></figure><p>åˆ‡æ¢æˆç”Ÿäº§ç¯å¢ƒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run prod</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>element-uiæ–‡ä»¶ä¸Šä¼ ä¸€æ¬¡è¯·æ±‚ä¸Šä¼ å¤šä¸ªæ–‡ä»¶</title>
      <link href="/2019/03/26/once-request-to-upload-multiple-files/"/>
      <url>/2019/03/26/once-request-to-upload-multiple-files/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨åšé¡¹ç›®çš„æ—¶å€™æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦å¯¼å…¥wordæ–‡æ¡£ï¼Œå¹¶ä¸”éœ€è¦æ”¯æŒå¤šé€‰ã€‚<code>element-ui</code> çš„ <code>upload</code> ç»„ä»¶æ”¯æŒå¤šé€‰æ–‡ä»¶ï¼Œåªéœ€è¦é…ç½®å‚æ•° <code>multiple</code> ä¸º <code>true</code> å³å¯ã€‚ä½†æ˜¯è¿™ä¸ªç»„ä»¶é»˜è®¤ä¼šå°†å¤šé€‰çš„æ–‡ä»¶åˆ†å¤šæ¬¡è¿›è¡Œä¸Šä¼ ï¼Œäºæ˜¯å°±ä¼šå­˜åœ¨å¤šæ¬¡çš„ä¸Šä¼ è¯·æ±‚ï¼Œç”±äºåå°çš„æ¥å£è¦æ±‚æ˜¯ä¸€æ¬¡è¯·æ±‚èƒ½å¤Ÿä¸Šä¼ å¤šä¸ªæ–‡ä»¶ï¼Œä¸”æˆ‘ä»¬ä¹ŸçŸ¥é“è¯·æ±‚å¤šäº†ä¼šå¯¹æœåŠ¡å™¨é€ æˆæ›´å¤§çš„å‹åŠ›ï¼Œå› è€ŒåŸºäºå¤šç§åŸå› ï¼Œè¿™ä¸ª <code>upload</code> çš„ä¸Šä¼ è¡Œä¸ºå¾—è¿›è¡Œæ”¹é€ ä¸€ç•ªã€‚</p><a id="more"></a><h2 id="å…ˆæ¥çœ‹ä¸‹æ”¹é€ å‰åçš„ç»“æœ"><a href="#å…ˆæ¥çœ‹ä¸‹æ”¹é€ å‰åçš„ç»“æœ" class="headerlink" title="å…ˆæ¥çœ‹ä¸‹æ”¹é€ å‰åçš„ç»“æœ"></a>å…ˆæ¥çœ‹ä¸‹æ”¹é€ å‰åçš„ç»“æœ</h2><p>æ”¹é€ å‰çš„ç»“æœï¼šåŒæ—¶ä¸Šä¼ 2ä¸ªæ–‡ä»¶ï¼Œä¼šå‘å‡º2æ¬¡å¯¹æ¥å£çš„è¯·æ±‚ï¼Œæ¯æ¬¡è¯·æ±‚é‡ŒåŒ…å«äº†ä¸€ä¸ªæ–‡ä»¶ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/2019/upload_result_before.png" alt="upload_result_after"></p><p>æ”¹é€ åçš„ç»“æœï¼šåŒæ—¶ä¸Šä¼ 2ä¸ªæ–‡ä»¶ï¼Œä¼šå‘å‡ºä¸€æ¬¡æ¥å£è¯·æ±‚ï¼Œæ¥å£å…¥å‚é‡ŒåŒ…å«2ä¸ªæ–‡ä»¶ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/2019/upload_result_after.png" alt="upload_result_after"></p><h2 id="æ–¹æ³•ä¸€ï¼šé€šè¿‡é…ç½®file-listï¼ˆæ¨èä½¿ç”¨ï¼‰"><a href="#æ–¹æ³•ä¸€ï¼šé€šè¿‡é…ç½®file-listï¼ˆæ¨èä½¿ç”¨ï¼‰" class="headerlink" title="æ–¹æ³•ä¸€ï¼šé€šè¿‡é…ç½®file-listï¼ˆæ¨èä½¿ç”¨ï¼‰"></a>æ–¹æ³•ä¸€ï¼šé€šè¿‡é…ç½®file-listï¼ˆæ¨èä½¿ç”¨ï¼‰</h2><p>htmléƒ¨åˆ†ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;upload-demo list-uploadbtn&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">&quot;upload&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:action</span>=<span class="string">&quot;curBastUrl&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:auto-upload</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:on-remove</span>=<span class="string">&quot;updataRemove&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:before-upload</span>=<span class="string">&quot;beforeUpload&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:on-change</span>=<span class="string">&quot;updatachange&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:file-list</span>=<span class="string">&quot;fileList&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:multiple</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span>&gt;</span>ç‚¹å‡»ä¸Šä¼ <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;submitUpload&quot;</span>&gt;</span>ç¡® å®š<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jséƒ¨åˆ†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">submitUpload() &#123;  <span class="comment">// å¯¼å…¥</span></span><br><span class="line">    <span class="keyword">let</span> formData = <span class="keyword">new</span> FormData();  <span class="comment">//  ç”¨FormDataå­˜æ”¾ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">this</span>.fileList.forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123; </span><br><span class="line">        formData.append(<span class="string">&#x27;file&#x27;</span>, file.raw)        </span><br><span class="line">    &#125;) </span><br><span class="line">    ã€€ã€€    </span><br><span class="line">    formData.append(<span class="string">&#x27;categoryDirectory&#x27;</span>, <span class="built_in">this</span>.filedata.categoryDirectory)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// importCaseæ˜¯ä¸Šä¼ æ¥å£</span></span><br><span class="line">    importCase(formData).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123; </span><br><span class="line">        <span class="comment">//æ‰‹åŠ¨ä¸Šä¼ æ— æ³•è§¦å‘æˆåŠŸæˆ–å¤±è´¥çš„é’©å­å‡½æ•°ï¼Œå› æ­¤è¿™é‡Œæ‰‹åŠ¨è°ƒç”¨ </span></span><br><span class="line">    ã€€ã€€<span class="built_in">this</span>.updataSuccess(res.data) </span><br><span class="line">    &#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    ã€€ã€€ </span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³é”®ä»£ç è¯´æ˜ï¼š</p><ul><li><code>auto-upload</code> è®¾ç½®ä¸º <code>false</code> ç”¨äºå…³é—­ç»„ä»¶çš„è‡ªåŠ¨ä¸Šä¼ ï¼›</li><li><code>file-list</code> é…ç½®ä¸€ä¸ªæ•°ç»„ç”¨äºæ¥æ”¶ä¸Šä¼ çš„æ–‡ä»¶åˆ—è¡¨ï¼›</li><li><code>multiple</code> è®¾ç½®ä¸º <code>true</code> è¡¨ç¤ºæ”¯æŒå¤šé€‰æ–‡ä»¶ï¼›</li><li><code>action</code> é…ç½®ä¸ºå®Œæ•´çš„ä¸Šä¼ æ¥å£urlï¼Œä¸é…ç½®ä¼šæŠ¥é”™</li><li>ä¸ç”¨é…ç½® <code>data</code>ã€<code>on-success</code>ã€<code>on-error</code>ç­‰å‚æ•°ï¼Œå› ä¸ºæ‰‹åŠ¨ä¸Šä¼ ä¸ä¼šç”¨åˆ°è¿™äº›é…ç½®ä¿¡æ¯ï¼›</li><li>æœ€åé€šè¿‡ç‚¹å‡»æŒ‰é’®æ‰‹åŠ¨è°ƒç”¨ä¸Šä¼ å‡½æ•°     <code>submitUpload</code> ï¼Œåˆ›å»ºä¸€ä¸ª <code>FormData</code> æŠŠ <code>fileList </code> çš„æ–‡ä»¶å­˜è¿›å»ã€‚</li></ul><h2 id="æ–¹æ³•äºŒï¼šé€šè¿‡é…ç½®http-request"><a href="#æ–¹æ³•äºŒï¼šé€šè¿‡é…ç½®http-request" class="headerlink" title="æ–¹æ³•äºŒï¼šé€šè¿‡é…ç½®http-request"></a>æ–¹æ³•äºŒï¼šé€šè¿‡é…ç½®http-request</h2><p>htmléƒ¨åˆ†ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;upload-demo list-uploadbtn&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">&quot;upload&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:action</span>=<span class="string">&quot;curBastUrl&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:auto-upload</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:http-request</span>=<span class="string">&quot;uploadFile&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:on-remove</span>=<span class="string">&quot;updataRemove&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:before-upload</span>=<span class="string">&quot;beforeUpload&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:on-change</span>=<span class="string">&quot;updatachange&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:multiple</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span>&gt;</span>ç‚¹å‡»ä¸Šä¼ <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;submitUpload&quot;</span>&gt;</span>ç¡® å®š<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jséƒ¨åˆ†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">submitUpload() &#123;  <span class="comment">// å¯¼å…¥</span></span><br><span class="line">    <span class="keyword">let</span> tempData =  <span class="built_in">this</span>.filedata</span><br><span class="line">    <span class="built_in">this</span>.filedata = <span class="keyword">new</span> FormData()  <span class="comment">//  ç”¨FormDataå­˜æ”¾ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">this</span>.$refs.upload.submit()  <span class="comment">// ä¼šå¾ªç¯è°ƒç”¨uploadFileæ–¹æ³•ï¼Œå¤šä¸ªæ–‡ä»¶è°ƒç”¨å¤šæ¬¡</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.filedata.append(<span class="string">&#x27;categoryDirectory&#x27;</span>, tempData.categoryDirectory)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// importCaseæ˜¯ä¸Šä¼ æ¥å£</span></span><br><span class="line">    importCase(<span class="built_in">this</span>.filedata).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123; </span><br><span class="line">    <span class="comment">//æ‰‹åŠ¨ä¸Šä¼ æ— æ³•è§¦å‘æˆåŠŸæˆ–å¤±è´¥çš„é’©å­å‡½æ•°ï¼Œå› æ­¤è¿™é‡Œæ‰‹åŠ¨è°ƒç”¨ </span></span><br><span class="line">    ã€€ã€€<span class="built_in">this</span>.updataSuccess(res.data) </span><br><span class="line">    &#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    ã€€ã€€ </span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">uploadFile(file) &#123;</span><br><span class="line">    <span class="built_in">this</span>.filedata.append(<span class="string">&#x27;file&#x27;</span>, file.file)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³é”®ä»£ç è¯´æ˜ï¼š</p><ul><li><code>http-request</code> è‡ªå®šä¹‰ä¸Šä¼ æ–¹æ³•ï¼›</li><li>æœ€åé€šè¿‡ç‚¹å‡»æŒ‰é’®æ‰‹åŠ¨è°ƒç”¨ä¸Šä¼ å‡½æ•°     <code>submitUpload</code> ï¼Œåˆ›å»ºä¸€ä¸ª <code>FormData</code>, è°ƒç”¨ <code>upload</code> ç»„ä»¶çš„ <code>submit</code> æ–¹æ³•çš„æ—¶å€™ä¼šå¾ªç¯è°ƒç”¨ <code>http-request</code> é…ç½®çš„æ–¹æ³•ï¼Œä»è€Œå¾€ <code>FormData </code> é‡Œå­˜æ”¾æ–‡ä»¶ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> upload </tag>
            
            <tag> vue </tag>
            
            <tag> element-ui </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSä¸­ç±»æ•°ç»„çš„éå†ä»¥åŠæ€§èƒ½æ¢ç©¶</title>
      <link href="/2017/08/28/traverse-of-array-like/"/>
      <url>/2017/08/28/traverse-of-array-like/</url>
      
        <content type="html"><![CDATA[<h2 id="ç±»æ•°ç»„"><a href="#ç±»æ•°ç»„" class="headerlink" title="ç±»æ•°ç»„"></a>ç±»æ•°ç»„</h2><p>åœ¨ <code>JS</code> ä¸­æˆ‘ä»¬éƒ½çŸ¥é“æœ‰ä¸€ç§æ•°æ®ç±»å‹å«æ•°ç»„ï¼Œå¹³å¸¸ä¹Ÿç”¨å¾—å¾ˆå¤šï¼Œè¿™é‡Œçœ‹åˆ°<a href="http://bubuzou.com/2016/11/js-array/">æ•°ç»„</a>çš„ä»‹ç»ã€‚ä½†ä»€ä¹ˆæ˜¯ç±»æ•°ç»„å‘¢ï¼Ÿ<br>åœ¨ <code>JS</code> ä¸­å­˜åœ¨ä¸€äº›å¯¹è±¡ï¼Œå®ƒä»¬éƒ½å¸¦æœ‰ <code>length</code> å±æ€§ï¼Œå´åˆä¸å…·å¤‡æ•°ç»„çš„é‚£äº›æ–¹æ³•ï¼Œè¿™äº›å¯¹è±¡æˆ‘ä»¬å®ƒå«åšç±»æ•°ç»„ã€‚é‚£ä¹ˆç±»æ•°ç»„æœ‰å“ªäº›å‘¢ï¼Ÿ</p><ul><li><p><code>jQuery</code>å¯¹è±¡</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> aList = $(<span class="string">&#x27;.tagcloud&#x27;</span>).find(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log( aList.length );  <span class="comment">// &gt;= 0</span></span><br></pre></td></tr></table></figure><p>  å¦‚ä¸Šé€šè¿‡jQueryè·å–çš„å…ƒç´ é›†åˆå°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ç±»æ•°ç»„ã€‚</p></li></ul><a id="more"></a><ul><li><p><code>NodeList</code></p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> h2s = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;h2&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log( h2s.constructor );  <span class="comment">// Æ’ NodeList() &#123; [native code] &#125;</span></span><br></pre></td></tr></table></figure><p>  <code>NodeList</code>æ˜¯èŠ‚ç‚¹é›†åˆï¼Œæ—¢åŒ…æ‹¬äº†å…ƒç´ èŠ‚ç‚¹ä¹ŸåŒ…å«äº†æ–‡æœ¬èŠ‚ç‚¹ï¼Œæ¯”å¦‚<code>node.childNodes</code>ä¹Ÿæ˜¯ä¸€ä¸ª <code>NodeList</code>.</p></li><li><p><code>HTMLCollection</code></p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> h4s = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;h4&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log( h4s <span class="keyword">instanceof</span> HTMLCollection );  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>  <code>HTMLCollection</code> æ˜¯å…ƒç´ é›†åˆï¼Œ<a href="http://www.w3school.com.cn/xmldom/dom_htmlcollection.asp">æ›´å¤šè¯¦ç»†ä¿¡æ¯å¯ä»¥çœ‹è¿™é‡Œ</a></p></li></ul><p>ç±»æ•°ç»„è™½ç„¶æ²¡æœ‰æ•°ç»„çš„é‚£äº›æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ <code>call</code> æ–¹æ³•å°†å…¶è½¬æˆæ•°ç»„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> h2s = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;h2&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log( h2s.constructor );  <span class="comment">// Æ’ NodeList() &#123; [native code] &#125;</span></span><br><span class="line"><span class="keyword">var</span> temp = <span class="built_in">Array</span>.prototype.slice.call(h2s, <span class="literal">null</span>);</span><br><span class="line"><span class="built_in">console</span>.log( temp <span class="keyword">instanceof</span> <span class="built_in">Array</span> );  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="éå†ç±»æ•°ç»„"><a href="#éå†ç±»æ•°ç»„" class="headerlink" title="éå†ç±»æ•°ç»„"></a>éå†ç±»æ•°ç»„</h2><p>æ•°ç»„æˆ–è€…ç±»æ•°ç»„çš„éå†æ–¹å¼å¾ˆå¤šï¼Œä¸‹é¢æˆ‘ä»¬ä¸€ä¸€æ¥ä»‹ç»ã€‚</p><ul><li><p>æ™®é€š <code>for</code> å¾ªç¯</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++ ) &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  æœ€æ™®é€šä¹Ÿæ˜¯æœ€ç»å…¸çš„ <code>for</code> å¾ªç¯ï¼Œå¤§å¤šæ•°å¼€å‘éƒ½å–œæ¬¢ç”¨çš„æ–¹å¼ã€‚</p></li><li><p>ä¼˜åŒ–ç‰ˆ <code>for</code> å¾ªç¯</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, l = arr.length; i &lt; l; i++ ) &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  ä¼˜åŒ–åçš„<code>for</code>å¾ªç¯ï¼ŒæŠŠæ•°ç»„é•¿åº¦çš„å–å€¼æ”¾åˆ°äº†å®šä¹‰å˜é‡çš„æ—¶å€™ï¼Œé¿å…äº†æ¯æ¬¡åˆ¤æ–­éƒ½è¦å»å–æ•°ç»„é•¿åº¦ï¼Œä»è€ŒèŠ‚çº¦äº†ä¸€å®šæ—¶é—´ã€‚</p></li><li><p>å¼±åŒ–ç‰ˆ<code>for</code>å¾ªç¯</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>; arr[i] != <span class="literal">null</span>; i++ ) &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  è¿™ç§å¾ªç¯æ–¹å¼å’Œä¸Šé¢ä¸¤ç§éƒ½å·®ä¸äº†å¤šå°‘ï¼Œåªä¸è¿‡æ˜¯æ²¡æœ‰ä½¿ç”¨<code>length</code>åˆ¤æ–­ï¼Œè€Œä½¿ç”¨å˜é‡æœ¬èº«åˆ¤æ–­ã€‚</p></li><li><p><code>forEach</code>å¾ªç¯</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params"> item </span>) </span>&#123;</span><br><span class="line">   </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>  JSæ•°ç»„è‡ªå¸¦çš„éå†æ–¹æ³•ã€‚</p></li><li><p>æ–°ç‰ˆ<code>forEach</code></p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.forEach.call(arr, <span class="function"><span class="keyword">function</span>(<span class="params"> ele </span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>  å€Ÿç”¨äº†åŸå‹çš„<code>call</code>æ–¹æ³•æ¥éå†ç±»æ•°ç»„ã€‚</p></li><li><p><code>for in</code>å¾ªç¯</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> temp <span class="keyword">in</span> arr ) &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>for ofå¾ªç¯</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( <span class="keyword">let</span> v <span class="keyword">of</span> arr ) &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  <code>ES6</code>ä¸­æ–°æå‡ºçš„ä¸€ç§å¾ªç¯æ–¹å¼ã€‚</p></li><li><p><code>map</code>å¾ªç¯</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">e, i</span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>whileå¾ªç¯</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> flag = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> ( flag++ &lt; arr.length ) &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€§èƒ½æµ‹è¯•"><a href="#æ€§èƒ½æµ‹è¯•" class="headerlink" title="æ€§èƒ½æµ‹è¯•"></a>æ€§èƒ½æµ‹è¯•</h2><p>è¿™é‡Œæµ‹è¯•é‡Œä¸»è¦æ˜¯é€šè¿‡æ§åˆ¶å¤–å¾ªç¯æ¬¡æ•°ã€æ•°ç»„çš„é•¿åº¦å’Œå¾ªç¯ä½“çš„å¤æ‚åº¦æ¥è¾¾åˆ°æ¨¡æ‹Ÿæ€§èƒ½æµ‹è¯•çš„ç›®çš„ã€‚<br><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201708/array_like_01.png" alt="array_like_01"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¸å¿ƒä»£ç </span></span><br><span class="line"><span class="keyword">var</span> t4 = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> j = <span class="number">0</span>; j &lt; count; j++ ) &#123;  <span class="comment">// å¤–å¾ªç¯</span></span><br><span class="line">    arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params"> cha </span>) </span>&#123;  <span class="comment">// å†…å¾ªç¯</span></span><br><span class="line">        contextFn( cha );  <span class="comment">// å¾ªç¯ä½“</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log( <span class="keyword">new</span> <span class="built_in">Date</span>().getTime() - t4) );</span><br></pre></td></tr></table></figure><p>å†…å¾ªç¯é‡Œæ˜¯åˆ†åˆ«æ›¿æ¢åˆ°ä¸åŒçš„éå†æ–¹å¼ï¼Œé€šè¿‡è®¾ç½®å¾ªç¯æ¬¡æ•°å’Œæ•°ç»„é•¿åº¦æ¥æµ‹è¯•äº†ä¸€äº›æ•°æ®ï¼Œä¹Ÿå¯ä»¥æ¥<a href="http://bubuzou.com/demos/201708/traverse-of-array-like.html">è¿™é‡Œçœ‹demo</a></p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201708/array_like_02.png" alt="array_like_02"></p><p>ä»ä¸Šé¢çš„æµ‹è¯•ç»“æœå¤§è‡´å¯ä»¥çœ‹å‡ºé€Ÿåº¦æœ€å¿«çš„éå†æ–¹å¼åº”è¯¥æ˜¯ä¼˜åŒ–åçš„ <code>for</code> å¾ªç¯äº†ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/background_01.png" alt="younghzçš„Markdownåº“"></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> æ€§èƒ½ä¼˜åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‰¯å¥½çš„CSSç¼–ç ä¹ æƒ¯</title>
      <link href="/2017/07/18/css-coding-standards/"/>
      <url>/2017/07/18/css-coding-standards/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ä¸ª <code>css</code> æ–‡ä»¶çš„æ ¸å¿ƒå†…å®¹æ˜¯ç”±è®¸è®¸å¤šå¤šçš„ <code>css</code> è§„åˆ™ç»„æˆçš„ï¼Œè€Œæ¯ä¸ªè§„åˆ™åˆåŒ…å«äº†ä¸¤éƒ¨åˆ†ï¼šé€‰æ‹©å™¨å’Œå£°æ˜ï¼›å£°æ˜å—é‡Œå¯èƒ½åˆåŒ…å«å¤šä¸ªå£°æ˜ï¼Œæ¯ä¸ªå£°æ˜åˆæ˜¯ç”±å±æ€§å’Œå€¼ç»„æˆçš„ã€‚è¿™ä¸ªå¤§æ¦‚å°±æ˜¯ <code>css</code> çš„ä»£ç ç»“æ„ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201707/css_coding_standards_01.png" alt="css_rules"></p><p>è¿™ä¹ˆå¤šçš„è§„åˆ™å°±åƒä¸€ä¸ªå°é•‡ä¸Šçš„æˆ¿å­ä¸€æ ·ï¼Œå¦‚æœæˆ¿å­å»ºé€ ä¹‹åˆï¼Œæ¯«æ— è§„åˆ’èƒ¡ä¹±å»ºé€ ï¼Œé‚£ç­‰æˆ¿å­å»ºé€ èµ·æ¥çš„æ—¶å€™ï¼Œä»è¿œè¿œæœ›å»å°±ä¼šéå¸¸åœ°é”™æ‚ä¸å ªï¼Œéš¾ä»¥å…¥ç›®ï¼Œç»™äººçš„å¿ƒé‡ŒåŸ‹ä¸‹äº†éå¸¸ç³Ÿç³•çš„å°è±¡ï¼›åˆå¯èƒ½åæœŸï¼Œç”±äºå‘å±•çš„éœ€è¦ï¼Œè¦ç»™å°é•‡åŠ ä¿®é“è·¯æˆ–è€…æ–°å»ºä¸ªå­¦æ ¡ï¼Œç”±äºæˆ¿å­ä¸æˆ¿å­ä¹‹é—´è¿æ¥å¾—å¾ˆæ··ä¹±ï¼Œæ‰€ä»¥è¿™ç»™åæœŸé‡å»ºé•‡å­çš„äººå¸¦æ¥äº†å¾ˆå¤§çš„å›°éš¾ã€‚</p><p>åŒæ ·ï¼Œåœ¨ <code>css</code> çš„ä¸–ç•Œé‡Œï¼Œä»£ç çš„æ’åˆ—å¸ƒå±€ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ã€‚è‰¯å¥½çš„ä»£ç ä¹¦å†™ä¹ æƒ¯èƒ½å¤Ÿè®©ä»£ç çœ‹èµ·æ¥æ›´åŠ å¹²å‡€ç®€æ´ï¼Œç»™é˜…è¯»è€…ä¸€ç§èµå¿ƒæ‚¦ç›®çš„æ„Ÿè§‰ï¼›å¥½çš„ä»£ç ä¾¿äºå¼€å‘å‘ç°é”™è¯¯ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚æ‰€ä»¥ä½œä¸ºä¸€åå¥½å‰ç«¯ï¼Œå¾ˆæœ‰å¿…è¦å…»æˆä¸€ä¸ªè‰¯å¥½çš„ <code>css</code> ç¼–ç ä¹ æƒ¯ã€‚</p><a id="more"></a><h2 id="æ–‡ä»¶å‘½å"><a href="#æ–‡ä»¶å‘½å" class="headerlink" title="æ–‡ä»¶å‘½å"></a>æ–‡ä»¶å‘½å</h2><p><code>web</code> é¡¹ç›®ä¸­çš„æ‰€æœ‰èµ„æºæ–‡ä»¶åç§°åº”éµå¾ªç›¸åŒçš„å‘½åçº¦å®šã€‚<code>css</code> æ–‡ä»¶ä¹Ÿä¸ä¾‹å¤–ï¼Œæ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;* Not recommended *&#x2F;</span><br><span class="line">MyScript.js</span><br><span class="line">myCamelCaseName.css</span><br><span class="line">i_love_underscores.html</span><br><span class="line">1001-scripts.js</span><br><span class="line">my-file-min.css</span><br><span class="line"> </span><br><span class="line">&#x2F;* Recommended *&#x2F;</span><br><span class="line">my-script.js</span><br><span class="line">my-camel-case-name.css</span><br><span class="line">i-love-underscores.html</span><br><span class="line">thousand-and-one-scripts.js</span><br><span class="line">my-file.min.css</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æ¥è¯´èµ„æºæ–‡ä»¶çš„åå­—ä¹ æƒ¯å¦‚ä¸‹å‘½åï¼š</p><ul><li>ä»¥å­—æ¯å¼€å¤´ï¼Œé¿å…æ•°å­—å¼€å¤´</li><li>å…¨éƒ¨ç”¨å°å†™ï¼Œè¿™æ ·çš„è¯ä¸å®¹æ˜“åœ¨å¼•ç”¨çš„æ—¶å€™å› ä¸ºå¤§å°å†™è€Œå‡ºé”™</li><li>ç”¨-æ¥åˆ†éš”å•è¯ï¼Œè€Œä¸æ˜¯ä¸‹åˆ’çº¿</li><li>å¯¹äºå‹ç¼©è¿‡çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ <code>css</code> æˆ–è€… <code>js</code> æ–‡ä»¶ï¼Œä½¿ç”¨ <code>.min</code> ä»£æ›¿ <code>-min</code></li></ul><h2 id="è®¾ç½®ç¼–ç "><a href="#è®¾ç½®ç¼–ç " class="headerlink" title="è®¾ç½®ç¼–ç "></a>è®¾ç½®ç¼–ç </h2><p>åœ¨ <code>css</code> æ–‡ä»¶çš„æœ€é¡¶éƒ¨è®¾ç½®ç¼–ç æ ¼å¼ä¸º <code>utf-8</code> ï¼Œå¦åˆ™æœ‰å¯èƒ½ä½¿å¾— <code>css</code> æ–‡ä»¶å‡ºç°ä¹±ç ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@charset</span> <span class="string">&quot;utf-8&quot;</span>;</span><br></pre></td></tr></table></figure><h2 id="æ ¼å¼åŒ–"><a href="#æ ¼å¼åŒ–" class="headerlink" title="æ ¼å¼åŒ–"></a>æ ¼å¼åŒ–</h2><p><code>css</code> æ–‡ä»¶é‡ŒåŒ…å«äº†è®¸è®¸å¤šå¤šçš„ <code>css</code> è§„åˆ™ï¼Œè€Œæ¯æ¡ <code>css</code> è§„åˆ™åˆç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯é€‰æ‹©å™¨å’Œå£°æ˜å—ï¼›å£°æ˜å—é‡ŒåŒ…å«äº†å¤šä¸ªå£°æ˜ï¼Œè€Œå£°æ˜åˆæ˜¯å±æ€§å’Œå€¼ç»„æˆçš„ã€‚æ ¼å¼åŒ–é‡Œå°†è¦ä»‹ç»çš„å°±æ˜¯å®ƒä»¬çš„ç»“æ„å’Œæ‘†æ”¾ä½ç½®ï¼ŒåŒ…æ‹¬ç¼©è¿›ã€ç©ºæ ¼ã€æ¢è¡Œä»¥åŠä¸ªåˆ«å£°æ˜çš„ä¹¦å†™ä¹ æƒ¯ç­‰ã€‚</p><h3 id="ç¼©è¿›"><a href="#ç¼©è¿›" class="headerlink" title="ç¼©è¿›"></a>ç¼©è¿›</h3><p><code>css</code> ä»£ç çš„ç¼©è¿›è®©ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œ<code>css</code> ä»£ç ç¼©è¿›éœ€è¦éµå¾ªä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>ä¸€ä¸ªåˆ¶è¡¨ç¬¦( <code>Tab</code> é”®)ç›¸å½“äº4ä¸ªç©ºæ ¼(ç©ºæ ¼é”®)ï¼Œ<code>css</code> çš„ç¼©è¿›å ä½ä¸€èˆ¬æ˜¯ä¸€ä¸ªåˆ¶è¡¨ç¬¦çš„å®½åº¦ã€‚</li><li>ç¼©è¿›å ä½é‡Œä¸è¦æ··æ‚ç€åˆ¶è¡¨ç¬¦å’Œç©ºæ ¼ï¼Œå»ºè®®è®¾ç½®å¥½ç¼–è¾‘å™¨çš„ä¸€ä¸ªåˆ¶è¡¨ç¬¦ç­‰äº4ä¸ªç©ºæ ¼å®½åº¦ã€‚</li><li>å£°æ˜éœ€è¦ç¼©è¿›ï¼›åœ¨ <code>media query</code> é‡Œçš„æ‰€æœ‰ <code>css</code> è§„åˆ™ä¹Ÿéœ€è¦ç¼©è¿›ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">640px</span>) &#123;</span><br><span class="line">    <span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#f8f8f8</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç©ºæ ¼"><a href="#ç©ºæ ¼" class="headerlink" title="ç©ºæ ¼"></a>ç©ºæ ¼</h3><p>åœ¨ <code>css</code> çš„ä¸–ç•Œé‡Œä¸ºäº†è®©ä»£ç çœ‹èµ·æ¥ä¸é‚£ä¹ˆæ‹¥æŒ¤ï¼Œæ‰€ä»¥éœ€è¦åœ¨é€‚å½“çš„åœ°æ–¹ä½¿ç”¨ç©ºæ ¼ï¼š</p><ul><li>é€‰æ‹©å™¨å’Œå£°æ˜å—çš„å·¦å¤§æ‹¬å·{ä¹‹é—´ã€‚</li><li>å£°æ˜ä¸­å±æ€§çš„å†’å·ä¹‹åï¼Œå±æ€§å€¼ä¹‹å‰ã€‚</li><li>å¯¹äºåªæœ‰ä¸€æ¡å£°æ˜çš„å£°æ˜å—ï¼Œå£°æ˜çš„å·¦å³ä¸¤è¾¹ä¸å·¦å³å¤§æ‹¬å·ä¹‹é—´ã€‚</li><li>å¯¹äºä¸€ä¸ªå±æ€§ä¸­æœ‰å¤šä¸ªå±æ€§å€¼ï¼Œä¸”æ”¾åœ¨åŒä¸€è¡Œçš„æ—¶å€™ï¼Œç”¨æ¥åˆ†éš”å„ä¸ªå±æ€§å€¼çš„é€—å·çš„åé¢ã€‚</li><li>å¯¹äºä¸€äº›ç‰¹åˆ«çš„å±æ€§å€¼é‡Œå­˜åœ¨é€—å·åˆ†éš”çš„æƒ…å†µï¼Œæ¯”å¦‚ <code>rgba(248, 248, 248, .5)</code>ï¼Œéœ€è¦åœ¨æ¯ä¸ªé€—å·ååŠ ä¸Šç©ºæ ¼</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.heavy</span> &#123; <span class="attribute">font-weight</span>: <span class="number">700</span>; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Georgia, serif;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">248</span>, <span class="number">248</span>, <span class="number">248</span>, .<span class="number">5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¢è¡Œå’Œç©ºè¡Œ"><a href="#æ¢è¡Œå’Œç©ºè¡Œ" class="headerlink" title="æ¢è¡Œå’Œç©ºè¡Œ"></a>æ¢è¡Œå’Œç©ºè¡Œ</h3><p>æ¢è¡Œå’Œç©ºè¡Œçš„ç›®çš„ä¹Ÿæ˜¯ä¸ºäº† <code>css</code> ä»£ç çš„ç¾è§‚æ€§å’Œç»“æ„æ›´åŠ æ¸…æ™°ï¼š</p><ul><li>æ¯ä¸ª <code>css</code> è§„åˆ™ä¹‹é—´éœ€è¦ä¸€ä¸ªç©ºè¡Œã€‚</li><li>å•è¡Œæ³¨é‡Šçš„å‰é¢éœ€è¦ä¸€ä¸ªç©ºè¡Œã€‚</li><li>ä¸€ä¸ªè§„åˆ™é‡Œå­˜åœ¨å¤šä¸ªé€‰æ‹©å™¨çš„æ—¶å€™ï¼Œæ¯ä¸ªé€‰æ‹©å™¨çš„é€—å·åæ¢è¡Œã€‚</li><li>ä¸€ä¸ªå£°æ˜å—é‡Œæœ‰å¤šä¸ªå£°æ˜çš„æ—¶å€™ï¼Œæ¯æ¡å£°æ˜åéƒ½éœ€è¦æ¢è¡Œï¼›åªæœ‰ä¸€æ¡å£°æ˜çš„æ—¶å€™ï¼Œå£°æ˜å’Œé€‰æ‹©å™¨åŒè¡Œã€‚</li><li>å¯¹äºé€—å·åˆ†éš”ä¸”éå¸¸é•¿çš„å±æ€§å€¼ï¼Œå¯ä»¥è€ƒè™‘æ¢è¡Œå¹¶ä¸”ç¼©è¿›ä¸€ä¸ªåˆ¶è¡¨ç¬¦ã€‚</li><li><code>media query</code> å£°æ˜çš„ç¬¬ä¸€è¡Œç©ºè¡Œï¼Œè¿™æ ·å°±ä¸ä¼šå’Œç¬¬ä¸€æ¡å£°æ˜æ‚åœ¨ä¸€èµ·ï¼Œæ˜¾å¾—æ‹¥æŒ¤ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.modal</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.modal</span> <span class="selector-tag">a</span>,</span><br><span class="line"><span class="selector-class">.modal</span> <span class="selector-tag">span</span> &#123; <span class="attribute">color</span>: <span class="number">#41b883</span>; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* common */</span></span><br><span class="line"><span class="selector-class">.shadow</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>:</span><br><span class="line">        <span class="number">1px</span> <span class="number">1px</span> <span class="number">1px</span> <span class="number">#000</span>,</span><br><span class="line">        <span class="number">2px</span> <span class="number">2px</span> <span class="number">1px</span> <span class="number">1px</span> <span class="number">#ccc</span> inset;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">640px</span>) &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="selector-class">.modal</span> <span class="selector-class">.modal-con</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é€‰æ‹©å™¨"><a href="#é€‰æ‹©å™¨" class="headerlink" title="é€‰æ‹©å™¨"></a>é€‰æ‹©å™¨</h2><p>é€‰æ‹©å™¨è¿™å—ä¸»è¦æ˜¯ä»‹ç»å‘½åã€ä¹¦å†™ä¹ æƒ¯ä»¥åŠä¸ºäº†æ›´é«˜çš„åŒ¹é…æ•ˆç‡è€Œå»ºè®®çš„å†™æ³•ç­‰ã€‚</p><h3 id="IDå’ŒClassçš„å‘½åè§„èŒƒ"><a href="#IDå’ŒClassçš„å‘½åè§„èŒƒ" class="headerlink" title="IDå’ŒClassçš„å‘½åè§„èŒƒ"></a>IDå’ŒClassçš„å‘½åè§„èŒƒ</h3><p><code>ID</code> å’Œ <code>Class</code> çš„ä¸»è¦ä¹ æƒ¯äºå¦‚ä¸‹å‘½åæ–¹å¼ï¼š</p><ul><li><p>å…¨éƒ¨å­—æ¯ç”¨å°å†™ï¼Œé¿å…ä½¿ç”¨é©¼å³°å‘½åæ³•ã€‚</p></li><li><p>ä½¿ç”¨çŸ­æ¨ªçº¿-æ¥ä½œä¸ºè¿æ¥å•è¯ä¹‹é—´çš„å­—ç¬¦ï¼Œé¿å…ä½¿ç”¨ä¸‹åˆ’çº¿_ã€‚</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post-title</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#41b883</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å‘½åå°½å¯èƒ½è¯­ä¹‰åŒ–ï¼Œè®©äººä¸€ç›®äº†ç„¶ã€‚</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Not recommended */</span></span><br><span class="line"><span class="selector-class">.fw-800</span> &#123; <span class="attribute">font-weight</span>: <span class="number">800</span>; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.red</span> &#123; <span class="attribute">color</span>: red; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* Recommended */</span> </span><br><span class="line"><span class="selector-class">.heavy</span> &#123; <span class="attribute">font-weight</span>: <span class="number">800</span>; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.important</span> &#123; <span class="attribute">color</span>: red; &#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="å°½å¯èƒ½é¿å…ä½¿ç”¨IDé€‰æ‹©å™¨"><a href="#å°½å¯èƒ½é¿å…ä½¿ç”¨IDé€‰æ‹©å™¨" class="headerlink" title="å°½å¯èƒ½é¿å…ä½¿ç”¨IDé€‰æ‹©å™¨"></a>å°½å¯èƒ½é¿å…ä½¿ç”¨IDé€‰æ‹©å™¨</h3><p>åœ¨ <code>css</code> çš„ä¸–ç•Œé‡Œä¸å¤ªæ¬¢è¿ <code>ID</code> é€‰æ‹©å™¨ï¼Œå› ä¸º <code>ID</code> æ˜¯ä½œä¸ºæŸä¸ªå…ƒç´ çš„å”¯ä¸€æ ‡è¯†è€Œè®¾å®šçš„ï¼Œä½†æ˜¯å…ƒç´ çš„æ ·å¼æ˜¯å¯ä»¥è¢«é‡å¤å®šä¹‰ï¼Œå±‚å±‚è¦†ç›–çš„ã€‚æ‰€ä»¥å»ºè®®ä¸è¦ä½¿ç”¨ <code>ID</code> é€‰æ‹©å™¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯å¤šç”¨ç±»é€‰æ‹©å™¨ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Not recommended */</span></span><br><span class="line"><span class="selector-id">#article</span> <span class="selector-tag">p</span> &#123; <span class="attribute">line-height</span>: <span class="number">28px</span>; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* Recommended */</span></span><br><span class="line"><span class="selector-class">.article</span> <span class="selector-tag">p</span> &#123; <span class="attribute">line-height</span>: <span class="number">28px</span>; &#125;</span><br></pre></td></tr></table></figure><h3 id="é¿å…ä½¿ç”¨æ ‡ç­¾è¿›è¡ŒåŒé‡é™å®š"><a href="#é¿å…ä½¿ç”¨æ ‡ç­¾è¿›è¡ŒåŒé‡é™å®š" class="headerlink" title="é¿å…ä½¿ç”¨æ ‡ç­¾è¿›è¡ŒåŒé‡é™å®š"></a>é¿å…ä½¿ç”¨æ ‡ç­¾è¿›è¡ŒåŒé‡é™å®š</h3><p>è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿçœ‹äº†ä¸‹é¢çš„ä¾‹å­ä½ å°±çŸ¥é“äº†ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Not recommended */</span></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-class">.desc</span> &#123; <span class="attribute">color</span>: <span class="number">#666</span>; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* Recommended */</span></span><br><span class="line"><span class="selector-class">.desc</span> &#123; <span class="attribute">color</span>: <span class="number">#666</span>; &#125;</span><br></pre></td></tr></table></figure><h3 id="å°½å¯èƒ½çš„ç²¾ç¡®ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦è¶…è¿‡3çº§"><a href="#å°½å¯èƒ½çš„ç²¾ç¡®ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦è¶…è¿‡3çº§" class="headerlink" title="å°½å¯èƒ½çš„ç²¾ç¡®ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦è¶…è¿‡3çº§"></a>å°½å¯èƒ½çš„ç²¾ç¡®ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦è¶…è¿‡3çº§</h3><p><code>css</code> çš„é€‰æ‹©åˆ¤å®šä¹Ÿå­˜åœ¨æ•ˆç‡é—®é¢˜ï¼Œæ‰€ä»¥ä¹¦å†™çš„æ—¶å€™å°½é‡è¦ç²¾ç¡®ï¼›é€‰æ‹©å™¨çš„åµŒå¥—å±‚çº§æœ€å¥½ä¸è¦è¶…è¿‡3çº§ï¼Œå¦åˆ™æ˜¾å¾—å¾ˆå†—é•¿ï¼Œæ•ˆç‡ä¸Šä¹Ÿæœªå¿…æ›´é«˜ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Not recommended */</span></span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-class">.title</span> &#123; <span class="attribute">font-size</span>: <span class="number">2rem</span>; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* Recommended */</span></span><br><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-class">.content-body</span> &gt; <span class="selector-class">.title</span> &#123; <span class="attribute">font-size</span>: <span class="number">2rem</span>; &#125;</span><br></pre></td></tr></table></figure><h3 id="å±æ€§é€‰æ‹©å™¨è®°å¾—ä½¿ç”¨åŒå¼•å·"><a href="#å±æ€§é€‰æ‹©å™¨è®°å¾—ä½¿ç”¨åŒå¼•å·" class="headerlink" title="å±æ€§é€‰æ‹©å™¨è®°å¾—ä½¿ç”¨åŒå¼•å·"></a>å±æ€§é€‰æ‹©å™¨è®°å¾—ä½¿ç”¨åŒå¼•å·</h3><p>å±æ€§é€‰æ‹©å™¨è®°å¾—ä½¿ç”¨åŒå¼•å·ï¼Œé¿å…å•å¼•å·å’Œä¸ç”¨å¼•å·</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Not recommended */</span></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type=text]</span> &#123; <span class="attribute">line-height</span>: <span class="number">1.2</span>; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* Recommended */</span></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&quot;text&quot;</span>]</span> &#123; <span class="attribute">line-height</span>: <span class="number">1.2</span>; &#125;</span><br></pre></td></tr></table></figure><h2 id="å£°æ˜å—"><a href="#å£°æ˜å—" class="headerlink" title="å£°æ˜å—"></a>å£°æ˜å—</h2><p>ä½œä¸º <code>css</code> è§„åˆ™ä¸­çš„ç¬¬äºŒéƒ¨åˆ†ï¼Œå£°æ˜å—ä¸­è‡ªç„¶ä¹Ÿæœ‰è®¸å¤šéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚æ¯”å¦‚å£°æ˜çš„é¡ºåºã€å±æ€§å’Œå€¼çš„å†™æ³•ä»¥åŠä¸€äº›ä¸ªä¾‹ç­‰ã€‚</p><h3 id="å£°æ˜çš„é¡ºåº"><a href="#å£°æ˜çš„é¡ºåº" class="headerlink" title="å£°æ˜çš„é¡ºåº"></a>å£°æ˜çš„é¡ºåº</h3><p>åœ¨ <code>css</code> ä¸­å­˜åœ¨å¥½å‡ ç™¾ä¸ªå±æ€§ï¼Œå¦‚æœéœ€è¦ä¸€ä¸ª <code>css</code> è§„åˆ™é‡Œå‡ ä¹å¯ä»¥å†™æ»¡è¿™äº›å±æ€§ã€‚å¦‚æœè¿™äº›å£°æ˜æ¯«æ— é¡ºåºç« æ³•å¯è¨€ï¼Œé‚£ä¹ˆåœ¨éœ€è¦ä¿®æ”¹çš„æ—¶å€™å°±ä¼šéå¸¸çš„å¤´ç—›äº†ï¼Œä¸€å¤§å—å£°æ˜æ‚åœ¨ä¸€ä¸ªè§„åˆ™é‡Œï¼Œä½ å°±éœ€è¦æ…¢æ…¢åœ°æ‰¾æ…¢æ…¢åœ°çœ‹äº†ã€‚ä½†æ˜¯å¦‚æœä½ çš„å£°æ˜éƒ½æ˜¯æŒ‰ç…§ä¸€å®šçš„é€»è¾‘é¡ºåºæ¥ä¹¦å†™ï¼Œé‚£ä¹ˆå£°æ˜çš„å±‚æ¬¡å°±éå¸¸æ¸…æ™°ã€‚å£°æ˜çš„æ—¶å€™ä¸€èˆ¬æ¯”è¾ƒé‡è¦çš„å±æ€§ä¼šä¼˜å…ˆä¹¦å†™ã€‚</p><ol><li>å¦‚æœåŒ…å«äº† <code>content</code>å±æ€§ï¼Œåˆ™åº”è¯¥æœ€ä¼˜å…ˆä¹¦å†™ï¼Œå³å†™åˆ°å£°æ˜å—çš„æœ€ä¸Šé¢ã€‚</li><li>å®šä½ç›¸å…³çš„å±æ€§ï¼Œæ¯”å¦‚<code>position</code>ã€<code>top</code>ã€<code>left</code>ã€<code>z-index</code>ã€<code>display</code>ã€<code>float</code>ã€<code>visibility</code>å’Œ<code>overflow</code>ã€<code>flex</code>ç­‰ã€‚</li><li>å¸ƒå±€ç›¸å…³çš„å±æ€§ï¼Œæ¯”å¦‚<code>display</code>ã€<code>float</code>ã€<code>visibility</code>ã€<code>overflow</code>ã€<code>flex</code>å’Œ<code>clear</code>ç­‰ã€‚</li><li>ç›’æ¨¡å‹ç›¸å…³çš„å±æ€§ï¼Œæ¯”å¦‚<code>width</code>ã€<code>height</code>ã€<code>margin</code>ã€<code>padding</code>ã€<code>border</code>ä»¥åŠ<code>box-sizing</code>ç­‰ã€‚</li><li>æ–‡æœ¬æ’ç‰ˆå°åˆ·ç›¸å…³çš„å±æ€§ï¼Œæ¯”å¦‚<code>font</code>ã€<code>line-height</code>ã€<code>vertical-align</code>ã€<code>text-align</code>å’Œ<code>white-space</code>ã€<code>text-decoration</code>ç­‰ã€‚</li><li>è§†è§‰æ„Ÿå®˜ä¸Šç›¸å…³çš„å±æ€§ï¼Œæ¯”å¦‚<code>color</code>ã€<code>background</code>ã€<code>list-style</code>ã€<code>transform</code>ã€<code>transition</code>å’Œ<code>animation</code>ç­‰ã€‚</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="comment">/* Positioning */</span></span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* Layout */</span></span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* Box-model */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e5e5e5</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* Typography */</span></span><br><span class="line">    <span class="attribute">font</span>: normal <span class="number">13px</span> <span class="string">&quot;Helvetica Neue&quot;</span>, sans-serif;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/* Visual */</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å°½å¯èƒ½çš„ä½¿ç”¨ç®€å†™å±æ€§"><a href="#å°½å¯èƒ½çš„ä½¿ç”¨ç®€å†™å±æ€§" class="headerlink" title="å°½å¯èƒ½çš„ä½¿ç”¨ç®€å†™å±æ€§"></a>å°½å¯èƒ½çš„ä½¿ç”¨ç®€å†™å±æ€§</h3><p>åœ¨ <code>css</code> ä¸­å­˜åœ¨ä¸€äº›å±æ€§æ˜¯å¯ä»¥æ‹†åˆ†æˆå…¶ä»–ç‹¬ç«‹å±æ€§çš„ï¼Œæ¯”å¦‚<code>background</code>ã€<code>border</code>ã€<code>font</code>ã€<code>list-style</code>ã€<code>margin</code> å’Œ <code>padding</code> ç­‰ã€‚è¿™äº›å±æ€§åœ¨ <code>css</code> é‡Œè¢«ç§°ä¸ºå¤åˆå±æ€§ï¼Œåˆå› ä¸ºä¸€ä¸ªå±æ€§åŒ…å«äº†å¤šä¸ªç‹¬ç«‹å±æ€§ï¼Œæ‰€ä»¥åœ¨ä¹¦å†™çš„æ—¶å€™ä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ï¼Œæ‰€ä»¥åˆå–œæ¬¢ç§°å…¶ä¸ºç®€å†™å±æ€§ï¼Œè¿™é‡Œçš„ç®€å†™ä¹Ÿå¯ä»¥ç†è§£ä¸ºåŠ¨è¯ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Not recommended */</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* Recommended */</span></span><br><span class="line"><span class="selector-class">.box</span> &#123; <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span> <span class="number">0</span>; &#125;</span><br></pre></td></tr></table></figure><h3 id="æ¯æ¡å£°æ˜éƒ½ä»¥åˆ†å·ç»“å°¾"><a href="#æ¯æ¡å£°æ˜éƒ½ä»¥åˆ†å·ç»“å°¾" class="headerlink" title="æ¯æ¡å£°æ˜éƒ½ä»¥åˆ†å·ç»“å°¾"></a>æ¯æ¡å£°æ˜éƒ½ä»¥åˆ†å·ç»“å°¾</h3><p>åœ¨ <code>css</code> é‡Œï¼Œå¦‚æœå£°æ˜ä¸ä»¥åˆ†å·ç»“å°¾æ˜¯ä¼šå‡ºé—®é¢˜çš„ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œé‚£å°±æ˜¯å£°æ˜å—çš„æœ€åä¸€ä¸ªå£°æ˜æ˜¯å¯ä»¥ä¸ç”¨åˆ†å·ç»“å°¾çš„ã€‚ä½†æ˜¯å¦‚æœæ”¹å˜äº†å£°æ˜çš„é¡ºåºæˆ–è€…æ–°å¢äº†å£°æ˜ï¼Œé‚£åŸæ¥çš„é‚£æ¡æ²¡æœ‰å¸¦åˆ†å·çš„å£°æ˜å°±æœ‰å¯èƒ½ä¸æ˜¯æœ€åä¸€æ¡å£°æ˜äº†ï¼Œè‚¯å®šå°±å‡ºé—®é¢˜äº†ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…è¿™ç§ä¸å¿…è¦çš„é”™è¯¯å‘ç”Ÿï¼Œæˆ‘ä»¬è¦ä¹ æƒ¯ç»™æ¯ä¸ªå£°æ˜éƒ½åŠ ä¸Šåˆ†å·ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Not recommended */</span></span><br><span class="line"><span class="selector-class">.post-content</span> <span class="selector-tag">h6</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">1em</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#4e4a4a</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* Recommended */</span></span><br><span class="line"><span class="selector-class">.post-content</span> <span class="selector-tag">h6</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">1em</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#4e4a4a</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŒå¼•å·"><a href="#åŒå¼•å·" class="headerlink" title="åŒå¼•å·"></a>åŒå¼•å·</h3><p>åœ¨ <code>css</code> çš„ä¸–ç•Œé‡Œå¾ˆå¤šåœ°æ–¹æ˜¯å¾ˆæœ‰å¿…è¦ç”¨å¼•å·çš„ï¼Œä¸ºäº†é¿å…æ··æ·†ï¼Œå»ºè®®éœ€è¦å¼•å·çš„åœ°æ–¹éƒ½ä½¿ç”¨åŒå¼•å·ï¼Œè€Œä¸ç”¨å•å¼•å·ã€‚</p><p>å¯¹äº <code>font-family</code> å±æ€§ï¼Œå¦‚æœå±æ€§å€¼æ˜¯å¸¦ç©ºæ ¼çš„è‹±æ–‡æ¯”å¦‚ <code>Helvetica Neue</code> æˆ–è€…æ˜¯ä¸­æ–‡ï¼Œé‚£ä¹ˆå»ºè®®åŠ ä¸ŠåŒå¼•å·ï¼Œæ¯”å¦‚<code>content</code> å±æ€§ã€‚<br>å¯¹äº <code>URI</code> èµ„æºçš„å¼•ç”¨ï¼Œæœ‰ä½¿ç”¨åˆ°<code>url()</code>å¼•å…¥èµ„æºçš„æ—¶å€™ï¼Œä¸ç”¨å¸¦å¼•å·ã€‚æ¯”å¦‚å¼•å…¥èƒŒæ™¯å›¾ç‰‡ã€å­—ä½“å®šä¹‰çš„æ—¶å€™å¼•å…¥å­—ä½“åŒ…ç­‰ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tip</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;!&quot;</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: Dosis, <span class="string">&quot;Source Sans Pro&quot;</span>, <span class="string">&quot;Helvetica Neue&quot;</span>, Arial, sans-serif;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(../img/tip.png) no-repeat center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å°½é‡ä¸è¦ä½¿ç”¨-important"><a href="#å°½é‡ä¸è¦ä½¿ç”¨-important" class="headerlink" title="å°½é‡ä¸è¦ä½¿ç”¨ !important"></a>å°½é‡ä¸è¦ä½¿ç”¨ <code>!important</code></h3><p><code>css</code>è§„åˆ™çš„å®šä¹‰é¡ºåºå¾ˆé‡è¦ï¼ŒåŒå±‚çº§çš„å£°æ˜ï¼Œå®šä¹‰æ–‡ä»¶åé¢çš„ä¼šè¦†ç›–å®šä¹‰åœ¨å‰é¢çš„ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨äº† <code>!important</code> æ¥é™å®šå£°æ˜ï¼Œåˆ™å¯ä»¥å°†ä¼˜å…ˆçº§æå‡åˆ°æœ€é«˜ï¼Œè¿™æ˜¯éå¸¸éœ¸é“çš„è§„åˆ™ã€‚æœ‰æ—¶å€™å› ä¸ºä½¿ç”¨äº† <code>!important</code>ï¼Œä½¿å¾—è„šæœ¬ç¨‹åºæ”¹å˜ä¸äº†æ ·å¼æ¸²æŸ“çš„ç»“æœï¼Œéå¸¸å¯æ¶ã€‚æ‰€ä»¥å»ºè®®ä¸è¦ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ï¼Œå¦‚æœçœŸçš„éœ€è¦æé«˜æŸä¸ªé€‰æ‹©å™¨çš„ä¼˜å…ˆçº§ï¼Œå¯ä»¥é€šè¿‡å¢åŠ æ ·å¼çš„å±‚çº§æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Not recommended */</span></span><br><span class="line"><span class="selector-class">.heavy</span> &#123; <span class="attribute">font-weight</span>: <span class="number">700</span> <span class="meta">!important</span>; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* Recommended */</span></span><br><span class="line"><span class="selector-class">.heavy</span> <span class="selector-tag">p</span>,</span><br><span class="line"><span class="selector-class">.heavy</span> <span class="selector-tag">a</span> &#123; <span class="attribute">font-weight</span>: <span class="number">700</span>; &#125;</span><br></pre></td></tr></table></figure><h3 id="å€¼å’Œå•ä½"><a href="#å€¼å’Œå•ä½" class="headerlink" title="å€¼å’Œå•ä½"></a>å€¼å’Œå•ä½</h3><ul><li><p>æ‰€æœ‰å±æ€§å’Œå€¼å°½é‡éƒ½ç”¨å°å†™ã€‚</p></li><li><p>å±æ€§å€¼ä¸º0çš„æ—¶å€™ï¼Œä¸è¦å¸¦å•ä½ã€‚</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Not recommended */</span></span><br><span class="line"><span class="selector-class">.info-item</span> &#123; <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">10px</span>; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* Recommended */</span></span><br><span class="line"><span class="selector-class">.info-item</span> &#123; <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>; &#125;</span><br></pre></td></tr></table></figure></li><li><p>å½“å¯èƒ½çš„æ—¶å€™å°½é‡ä½¿ç”¨ä¸‰ä½çš„åå…­è¿›åˆ¶è®¡æ•°æ³•ï¼Œæ¯”å¦‚è¡¨ç¤ºé¢œè‰²çš„æ—¶å€™ã€‚</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Not recommended */</span></span><br><span class="line"><span class="selector-class">.pink-color</span> &#123; <span class="attribute">color</span>: <span class="number">#ff33aa</span>; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* Recommended */</span></span><br><span class="line"><span class="selector-class">.pink-color</span> &#123; <span class="attribute">color</span>: <span class="number">#f3a</span>; &#125;</span><br></pre></td></tr></table></figure></li><li><p><code>font-weight</code>ä½¿ç”¨æ•°å€¼åŒ–è¡¨ç¤ºæ–¹æ³•ï¼Œç”¨400ä»£æ›¿ <code>normal</code>ã€700ä»£æ›¿ <code>bold</code>ã€‚</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Not recommended */</span></span><br><span class="line"><span class="selector-class">.heavy</span> &#123; <span class="attribute">font-weight</span>: bold; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* Recommended */</span></span><br><span class="line"><span class="selector-class">.heavy</span> &#123; <span class="attribute">font-weight</span>: <span class="number">700</span>; &#125;</span><br></pre></td></tr></table></figure></li><li><p><code>line-height</code>å°½é‡ä¸è¦å¸¦å•ä½ï¼Œé™¤éå¿…é¡»ç”¨pxæ¥æ ‡å®šã€‚</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Not recommended */</span></span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-tag">p</span> &#123; <span class="attribute">line-height</span>: <span class="number">1.2em</span>; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* Recommended */</span></span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-tag">p</span> &#123; <span class="attribute">line-height</span>: <span class="number">1.2</span>; &#125;</span><br></pre></td></tr></table></figure></li><li><p>å½“å±æ€§å€¼æ˜¯ä»‹äº0åˆ°1ä¹‹é—´çš„å°æ•°æ—¶ï¼Œå¯ä»¥ç›´æ¥æŠŠ0çœç•¥ã€‚</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Not recommended */</span></span><br><span class="line"><span class="selector-class">.pannel</span> &#123; <span class="attribute">opacity</span>: <span class="number">0.8</span>; &#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* Recommended */</span></span><br><span class="line"><span class="selector-class">.pannel</span> &#123; <span class="attribute">opacity</span>: .<span class="number">8</span>; &#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><h3 id="æ–‡ä»¶æˆ–æ¨¡å—æ³¨é‡Š"><a href="#æ–‡ä»¶æˆ–æ¨¡å—æ³¨é‡Š" class="headerlink" title="æ–‡ä»¶æˆ–æ¨¡å—æ³¨é‡Š"></a>æ–‡ä»¶æˆ–æ¨¡å—æ³¨é‡Š</h3><p>æ–‡ä»¶é¡¶éƒ¨ï¼ˆ<code>@charset</code>ä¹‹åï¼‰æœ€å¥½æ˜¯éœ€è¦ä¸€å—æ³¨é‡Šï¼Œå¤§æ¦‚ä»‹ç»çš„æ˜¯è¿™ä¸ªæ–‡ä»¶æ˜¯å…³äºä»€ä¹ˆå†…å®¹çš„ï¼Œä½œè€…æ˜¯è°ï¼Œæœ€åæ›´æ–°æ—¶é—´ç­‰ã€‚å½“ç„¶å¦‚æœä¸€ä¸ª <code>css</code> æ–‡ä»¶éå¸¸å¤§ï¼Œæ¶‰åŠåˆ°å¾ˆå¤šç»„ä»¶æ¨¡å—ç›¸å…³çš„ä»£ç ï¼Œé‚£å¯èƒ½æ¯ä¸ªæ¨¡å—éƒ½éœ€è¦ä¸€ä¸ªæ³¨é‡Šã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @name: bubuzou.css</span></span><br><span class="line"><span class="comment">  * @description: hexo-theme-bubuzouçš„ä¸»é¢˜æ ·å¼</span></span><br><span class="line"><span class="comment">  * @author: typeR(zgrlbq@126.com)</span></span><br><span class="line"><span class="comment">  * @update: 2017-7-21 16:21:02</span></span><br><span class="line"><span class="comment">  */</span></span><br></pre></td></tr></table></figure><h3 id="å•è¡Œæ³¨é‡Š"><a href="#å•è¡Œæ³¨é‡Š" class="headerlink" title="å•è¡Œæ³¨é‡Š"></a>å•è¡Œæ³¨é‡Š</h3><p>æ˜Ÿå·ä¸å†…å®¹ä¹‹é—´å¿…é¡»ä¿ç•™ä¸€ä¸ªç©ºæ ¼ã€‚å¦‚æœæ˜¯å•æ¡å£°æ˜éœ€è¦æ³¨é‡Šï¼Œåˆ™å†™åˆ°å£°æ˜çš„åˆ†å·ååˆ†éš”ä¸€ä¸ªç©ºæ ¼å¼€å§‹æ³¨é‡Šã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* This is a comment about this selector */</span></span><br><span class="line"><span class="selector-class">.another-selector</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>; <span class="comment">/* I should explain why this is so important */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤šè¡Œæ³¨é‡Š"><a href="#å¤šè¡Œæ³¨é‡Š" class="headerlink" title="å¤šè¡Œæ³¨é‡Š"></a>å¤šè¡Œæ³¨é‡Š</h3><p>æ˜Ÿå·è¦ä¸€åˆ—å¯¹é½ï¼Œæ˜Ÿå·ä¸å†…å®¹ä¹‹é—´å¿…é¡»ä¿ç•™ä¸€ä¸ªç©ºæ ¼ã€‚å¤šè¡Œçš„æ³¨é‡Šå’Œè§„åˆ™ä¹‹é—´æœ€å¥½åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œæ‰ä¸ä¼šæ˜¾å¾—é‚£ä¹ˆæ‹¥æŒ¤ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Description of left, whether or not it has media queries, etc.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="selector-class">.left</span> &#123; <span class="attribute">float</span>: left; &#125;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><ul><li><a href="https://github.com/gionkunz/chartist-js/blob/develop/CODINGSTYLE.md">Web Styleguide - Style guide to harmonize HTML, Javascript and CSS / Sass coding style</a></li><li><a href="https://make.wordpress.org/core/handbook/best-practices/coding-standards/css/">CSS Coding Standards</a></li><li><a href="http://codeguide.co/#css-syntax">css-syntax</a></li><li><a href="http://www.cnblogs.com/coco1s/p/7159192.html">CSSæ ·å¼ä¹¦å†™è§„èŒƒ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jpgã€gifã€pngå’Œsvgç”¨äºwebä¸Šï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•é€‰æ‹©æœ€åˆé€‚çš„å›¾åƒæ ¼å¼ï¼Ÿ</title>
      <link href="/2017/06/29/jpeg-gif-png-svg-on-web/"/>
      <url>/2017/06/29/jpeg-gif-png-svg-on-web/</url>
      
        <content type="html"><![CDATA[<p>è¦æ˜¯é—®ä½ ï¼Œä½ çŸ¥é“å½“ä¸‹éƒ½æœ‰å“ªäº›å›¾åƒæ ¼å¼å˜›ï¼Ÿæˆ‘çŒœä½ è‚¯å®šè¯´ä¸å…¨ï¼Œå› ä¸ºç°åœ¨å›¾åƒæ ¼å¼çœŸçš„å¤ªå¤šäº†ï¼Œä½†æ˜¯åº”è¯¥èƒ½è¯´å‡ºè¿™å‡ ä¸ªå¸¸ç”¨çš„æ ¼å¼ï¼š<code>jpg</code>ã€<code>gif</code>ã€<code>png</code>å’Œ<code>svg</code>ã€‚ç„¶åæˆ‘å†é—®ä½ ï¼ŒçŸ¥ä¸çŸ¥é“è¿™å‡ ä¸ªæ ¼å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå„è‡ªçš„é€‚ç”¨åœºæ™¯åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<code>logo</code>åº”è¯¥æ˜¯é€‰æ‹© <code>svg</code> è¿˜æ˜¯ <code>png</code> ï¼Ÿè€Œæˆªå›¾æ˜¯é€‰ <code>jpg</code> è¿˜æ˜¯ <code>png</code> å¥½ï¼Ÿåœ¨ä¸ç”Ÿæˆè¿‡å¤§æ–‡ä»¶çš„å‰æä¸‹ï¼Œæ–‡ä»¶çš„æœ€ä¼˜è´¨é‡æ˜¯å¤šå°‘ï¼Ÿäº†è§£æ¯ä¸ªå›¾åƒæ ¼å¼çš„å·¥ä½œåŸç†ä»¥åŠå®ƒä»¬å„è‡ªçš„åˆ©å¼Šå¯ä»¥å¸®åŠ©å›ç­”è¿™äº›é—®é¢˜ã€‚</p><p>åœ¨è¿‡å»å‡ å¹´ä¸­ï¼Œæ•°å­—åŒ–è®¾è®¡å’Œå‰ç«¯å¼€å‘é‡Œå¤§é‡çš„ç ”ç©¶å’Œæµ‹è¯•å·¥å…·å·²ç»å¸®åŠ©æˆ‘ä»¬ææ¸…æ¥šäº†è¿™äº›é—®é¢˜ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å±•ç¤ºä¸€ä¸‹æ¯ç§æ ¼å¼çš„å·¥ä½œåŸç†ï¼Œå®ƒä»¬å„è‡ªçš„ä¼˜ç‚¹ä»¥åŠåœ¨ç½‘é¡µä½¿ç”¨æ—¶çš„å‹ç¼©ä¸ä¿å­˜æ–¹æ³•ã€‚</p><h2 id="å…ˆæ¥çœ‹å‡ ä¸ªæ¦‚å¿µ"><a href="#å…ˆæ¥çœ‹å‡ ä¸ªæ¦‚å¿µ" class="headerlink" title="å…ˆæ¥çœ‹å‡ ä¸ªæ¦‚å¿µ"></a>å…ˆæ¥çœ‹å‡ ä¸ªæ¦‚å¿µ</h2><ul><li>æœ‰æŸ(<code>Lossless</code>)å’Œæ— æŸ(<code>Lossy</code>)ï¼šä¸€èˆ¬æˆ‘ä»¬èŠåˆ°å›¾ç‰‡çš„æ—¶å€™ç»å¸¸ä¼šå¬åˆ°åˆ«äººæåˆ°æœ‰æŸæˆ–è€…æ— æŸçš„å­—çœ¼ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯æœ‰æŸå’Œæ— æŸå‘¢ï¼Ÿæ— æŸå°±æ˜¯å›¾ç‰‡åœ¨å‹ç¼©ä¿å­˜åè™½ç„¶å ç”¨çš„å­˜å‚¨æ›´å°äº†ï¼Œä½†æ˜¯å›¾åƒçš„å‘ˆç°è´¨é‡ä¾ç„¶å¦‚æ—§ï¼›è€Œæœ‰æŸåˆ™æ˜¯ç›¸åï¼Œå›¾åƒéšç€ä¸€æ¬¡åˆä¸€æ¬¡çš„å‹ç¼©åï¼Œè´¨é‡ä¼šå˜å¾—è¶Šæ¥è¶Šå·®ã€‚</li><li>ç´¢å¼•è‰²(<code>Indexed color</code>)å’Œç›´æ¥è‰²(<code>Direct color</code>)ï¼šæŒ‰ç…§ä¸åŒçš„é¢œè‰²æ·±åº¦å¯ä»¥å°†é¢œè‰²åˆ†ä¸ºç´¢å¼•è‰²å’Œç›´æ¥è‰²ã€‚ç´¢å¼•è‰²å°±æ˜¯å›¾åƒä½œè€…æŒ‡å®šå›¾ç‰‡çš„ç”¨è‰²æ€»å…±ä¸è¶…è¿‡256ç§ï¼›è€Œç›´æ¥è‰²åˆ™æ˜¯å¯¹é¢œè‰²ä½¿ç”¨æ²¡æœ‰é™åˆ¶ï¼Œå¯ä»¥å­˜åœ¨æˆåƒä¸Šä¸‡çš„é¢œè‰²å€¼ã€‚</li><li>å…‰æ …æ ¼å¼(<code>raster</code>)å’ŒçŸ¢é‡æ ¼å¼(<code>vector</code>)ï¼šå›¾åƒæ ¹æ®ä¿¡æ¯çš„è¡¨ç¤ºæ–¹å¼å¯ä»¥åˆ†ä¸ºå…‰æ …å›¾å’ŒçŸ¢é‡å›¾ã€‚å…‰æ …å›¾ä¹Ÿå«ä½œä½å›¾ï¼Œç‚¹é˜µå›¾æˆ–è€…åƒç´ å›¾ï¼Œå›¾çš„æœ€å°å•ä½æ˜¯ç”±ä¸€ä¸ªä¸ªå¸¦é¢œè‰²çš„åƒç´ ç»„åˆè€Œæˆï¼Œåœ¨ <code>Photoshop</code> é‡ŒæŠŠå›¾ç‰‡æ”¾åˆ°æœ€å¤§ï¼Œå°†çœ‹åˆ°è®¸è®¸å¤šå¤šçš„åƒç´ æ–¹å—ï¼Œæ‰€ä»¥å…‰æ …å›¾åœ¨ä¼¸ç¼©çš„æ—¶å€™å›¾åƒå¯èƒ½ä¼šå¤±çœŸï¼›è€ŒçŸ¢é‡å›¾åˆ™æ˜¯ä»¥ç”±ç‚¹ã€çº¿å’Œä¸€äº›å‡ ä½•å›¾å½¢ä¸ºåŸºç¡€ï¼Œé€šè¿‡æ•°å­¦è®¡ç®—æ¥æ’åˆ—ç»„åˆè€Œæˆï¼Œè¿™ç§å›¾åœ¨ä¼¸ç¼©çš„æ—¶å€™èƒ½å®Œå¥½çš„ä¿æŠ¤è´¨é‡ã€‚</li></ul><a id="more"></a><h2 id="JPEG"><a href="#JPEG" class="headerlink" title="JPEG"></a>JPEG</h2><p><code>JEPG</code>ç”±è”åˆå›¾åƒä¸“å®¶å°ç»„ï¼ˆ<code>Joint Photographic Experts Group</code>ï¼‰äº1992å¹´åˆ›å»ºï¼Œå¹¶ä»¥åˆ›å»ºè€…å‘½åã€‚<code>JPEG</code>æ˜¯ä¸€ç§æœ‰æŸå…‰æ …å›¾åƒæ ¼å¼ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡å‹ç¼©ä¿å­˜JPEGæ—¶ï¼Œä¸€äº›ä¿¡æ¯å°†å‘ç”Ÿä¸å¯é€†è½¬åœ°ä¸¢å¤±ï¼›ä¸”å­˜å‚¨çš„é¢œè‰²æ— é™åˆ¶ï¼Œè¿™å°±å¯¹å­˜å‚¨ç…§ç‰‡è¿™ç§é¢œè‰²éå¸¸ä¸°å¯Œå¤æ‚çš„å›¾åƒå°±å¾ˆå‹å¥½äº†ã€‚</p><p>å› ä¸º <code>JPEG</code> å‹ç¼©åœ¨äº®åº¦å’Œè‰²å½©ä¸Šé¢çš„ä¼˜è¶Šæ€§ï¼Œæ‰€ä»¥ <code>JPEG</code> éå¸¸é€‚åˆç”¨äºç…§ç‰‡ã€è‰²å½©æ¢¯åº¦æ˜æ˜¾çš„å›¾åƒæ¯”å¦‚æ¸å˜å’Œé˜´å½±è¿™äº›åœ°æ–¹ã€‚</p><p><code>JPEG</code> çš„å‹ç¼©å¯ä»¥ç”¨ <code>Photoshop</code> é‡Œå­˜å‚¨ä¸º <code>web</code> æ ¼å¼çš„æ—¶å€™å¯ä»¥ç›´æ¥é€‰æ‹©å‹ç¼©å“è´¨ï¼Œä¸€èˆ¬ç”¨äº <code>web</code> çš„ <code>JPG</code> å›¾ç‰‡é€‰æ‹© <code>50%-60%</code> è´¨é‡çš„å³å¯ï¼Œå› ä¸ºå®ƒå…¼é¡¾ä¸é”™çš„å›¾åƒè´¨é‡å’Œè¾ƒå°çš„æ–‡ä»¶å°ºå¯¸ã€‚å¦å¤–ä¹Ÿå¯ä»¥ç”¨åœ¨çº¿å‹ç¼©å·¥å…· <code>TinyJPG</code>ã€‚</p><p>ä¸‹é¢è¿™ä¸ªå›¾ï¼Œæˆ‘ç”¨çš„æ˜¯ <code>50%</code>çš„å“è´¨å‹ç¼©å‡ºæ¥çš„ <code>JPG</code>ï¼Œå¾ˆæ˜æ˜¾è´¨é‡è¦æ¯” <code>GIF</code> çš„è¦å¥½å¾ˆå¤šï¼Œè€Œä¸”æ–‡ä»¶å°ºå¯¸ä¹Ÿå°ä¸å°‘ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201706/webgra_01.png" alt="webgra_01"></p><blockquote><p><code>JPEG</code> å’Œ <code>JPG</code> çš„åŒºåˆ«ï¼š<code>JPEG</code> æ›´å¤šçš„æŒ‡çš„æ˜¯ <code>.jpg</code> å›¾åƒæ ¼å¼çš„ä¸€ç§å‹ç¼©ç®—æ³•ï¼Œè€Œ <code>JPG</code> å°±æ˜¯ä¸€ç§å›¾åƒå­˜å‚¨çš„æ ¼å¼ã€‚</p></blockquote><h2 id="PNG"><a href="#PNG" class="headerlink" title="PNG"></a>PNG</h2><p>å¯ç§»æ¤ç½‘ç»œå›¾å½¢ï¼ˆ<code>Portable Network Graphics</code>ï¼‰ä¹Ÿæ˜¯ä¸€ç§è‡ª1995å¹´ä»¥æ¥å°±ä¸€ç›´å­˜åœ¨çš„å…‰æ …å›¾åƒæ ¼å¼ã€‚å®ƒä¸ <code>JPEG</code> ä¸åŒï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ç§æ— æŸæ ¼å¼ï¼Œå¹¶ä¸”æ˜¯ç›®å‰ç½‘ç»œä¸Šæœ€å¸¸è§çš„æ— æŸæ ¼å¼ã€‚è¿™æ„å‘³ç€ç”±äºå®ƒçš„å‹ç¼©ç®—æ³•ï¼Œå½“æ–‡ä»¶è¢«ä¿å­˜å’Œå‹ç¼©æ—¶ï¼Œä¸ä¼šä¸¢å¤±ä»»ä½•ä¿¡æ¯ã€‚</p><h3 id="PNGæ ¼å¼"><a href="#PNGæ ¼å¼" class="headerlink" title="PNGæ ¼å¼"></a>PNGæ ¼å¼</h3><p><code>PNG</code>å…¶å®å¯ä»¥ç»†åˆ†ä¸ºå¥½å‡ ä¸ªæ ¼å¼çš„ï¼Œæœ‰<code>PNG 8</code>ã€<code>PNG 24</code>å’Œ<code>PNG 32</code>ã€‚é‚£ä¹ˆæ€ä¹ˆåŒºåˆ†ä¸€ä¸ª <code>PNG</code> å›¾ç‰‡æ˜¯ä»€ä¹ˆæ ¼å¼çš„å‘¢ï¼Ÿ</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201706/webgra_02.png" alt="png_24"></p><p>æ‰“å¼€ä¸Šé¢è¿™å¼ å›¾ç‰‡çš„å±æ€§é¢æ¿ï¼Œä»è¯¦ç»†ä¿¡æ¯é‡Œçœ‹åˆ°æœ‰ä¸€ä¸ªå±æ€§å«åšä½æ·±åº¦ï¼Œå®ƒçš„å€¼æ˜¯24ï¼Œé‚£ä¹ˆå°±è¡¨ç¤ºä»–æ˜¯ <code>PNG 24</code> æ ¼å¼çš„å›¾ç‰‡ã€‚åŒæ ·ï¼Œ<code>PNG 8</code> å’Œ <code>PNG 32</code> çš„ä½æ·±åº¦åˆ†åˆ«æ˜¯8å’Œ32ã€‚</p><blockquote><p>ä½æ·±åº¦è¡¨ç¤ºå›¾åƒèƒ½å¤Ÿå­˜å‚¨é¢œè‰²çš„æœ€å¤§æ•°å€¼ã€‚8ä½å°±æ˜¯2çš„8æ¬¡æ–¹ï¼ˆ2^8=256ï¼‰ç§é¢œè‰²ï¼Œæ‰€ä»¥ <code>PNG 8</code> æœ€å¤šåªèƒ½å­˜å‚¨256ç§é¢œè‰²ã€‚<code>PNG 24</code> å’Œ <code>PNG 32</code>åˆå«çœŸå½©è‰²ï¼Œæœ€å¤šå­˜å‚¨2çš„24æ¬¡æ–¹ç§é¢œè‰²ï¼Œå¯ä»¥è¾¾åˆ°äººçœ¼åˆ†è¾¨çš„æé™äº†ï¼›<code>PNG 32</code>ä¸­å‰©ä½™çš„8ä½å­˜å‚¨çš„æ˜¯<code>Alpha</code> é€šé“çš„é€æ˜è‰²ã€‚</p></blockquote><p>ç„¶åå¦‚ä½•ç”Ÿæˆè¿™äº›ä¸åŒæ ¼å¼çš„å›¾ç‰‡å‘¢ï¼Ÿ<br>è‡ªç„¶æ˜¯ç”¨ä¸“ä¸šçš„å›¾åƒå¤„ç†è½¯ä»¶å•¦ï¼Œæ¯”å¦‚å¯ä»¥ç”¨ <code>Photoshop</code> æˆ–è€… <code>Fireworks</code>ã€‚è¿™é‡Œä»¥ <code>Photoshop</code> ä¸ºä¾‹å­ï¼Œæ–‡ä»¶-&gt;å­˜å‚¨ä¸º <code>Web</code> æ‰€ç”¨æ ¼å¼ï¼Œ å¯ä»¥çœ‹åˆ°ä¸‹æ‹‰è¿™é‡Œåªæœ‰ <code>PNG-8</code> å’Œ <code>PNG-24</code>ï¼Œè€Œæ²¡æœ‰ <code>PNG-32</code> å‘¢ï¼Ÿæ˜¯å› ä¸º <code>Photoshop</code>ä¸æ”¯æŒè¿™ä¸ªæ ¼å¼å˜›ï¼Ÿå¹¶ä¸æ˜¯ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201706/webgra_04.png" alt="png_generate"></p><p>åœ¨ <code>Photoshop</code> é‡Œå¯¼å‡º <code>PNG-32</code> æ ¼å¼çš„å›¾ç‰‡æ˜¯é€šè¿‡é€‰æ‹© <code>PNG-24</code>æ ¼å¼ï¼Œå¹¶ä¸”å‹¾é€‰ä¸‹é¢çš„é€æ˜åº¦ï¼Œè¿™æ ·ç”Ÿæˆçš„å›¾ç‰‡ä½æ•°æ‰æ˜¯32ä½çš„ï¼Œå¦‚æœä¸å‹¾é€‰é€æ˜åº¦çš„è¯å°±æ˜¯ <code>PNG-24</code> æ ¼å¼ã€‚ç”±æ­¤çœ‹æ¥ <code>PNG-24</code> æ˜¯ä¸æ”¯æŒé€æ˜çš„ï¼Œ<code>PNG-32</code> æ˜¯æ”¯æŒé€æ˜çš„ã€‚</p><h3 id="PNGé€æ˜åº¦"><a href="#PNGé€æ˜åº¦" class="headerlink" title="PNGé€æ˜åº¦"></a>PNGé€æ˜åº¦</h3><p>ä» <code>Fireworks 8</code>çš„ä¼˜åŒ–é¢æ¿é‡Œå¯ä»¥çœ‹åˆ° <code>PNG</code> æ ¼å¼å­˜åœ¨ä¸‰ç§é€æ˜æ ¼å¼ï¼šä¸é€æ˜ã€ç´¢å¼•é€æ˜å’Œ <code>Alpha</code>é€æ˜ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201706/webgra_05.png" alt="png_transparency"></p><ul><li><p><code>PNG 8</code>é€æ˜åº¦</p><p>  ä»ä¸Šé¢é‚£ä¸ªå›¾é‡Œå¯ä»¥çœ‹å‡º <code>PNG 8</code> æ˜¯æ”¯æŒè¿™ä¸‰ç§ä¸é€æ˜æ ¼å¼çš„ã€‚ä½†æ˜¯ <code>Photoshop</code> åªæ”¯æŒå¯¼å‡ºä¸é€æ˜å’Œç´¢å¼•é€æ˜æ ¼å¼ã€‚åœ¨<code>Photoshop</code> ä¸­å¦‚æœé€‰æ‹© <code>PNG 8</code>ï¼Œä¸”å‹¾é€‰äº†é€æ˜åº¦ï¼Œé‚£ä¹ˆå¯¼å‡ºçš„å›¾ç‰‡å°±æ˜¯ <code>PNG 8</code> ç´¢å¼•é€æ˜ï¼Œå¦åˆ™å°±æ˜¯ <code>PNG 8</code> ä¸é€æ˜ã€‚</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201706/webgra_06.png" alt="png_8_index"></p><p>  ç”¨ <code>Photoshop</code> å’Œ <code>Fireworks 8</code> å¯¼å‡º <code>PNG 8</code> çš„å„ç§æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201706/webgra_03.png" alt="png_8_transparency"></p><p>  æ ¹æ®ä»¥ä¸Šå›¾ç‰‡æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š</p><ul><li><p><code>Photoshop</code> å¯¼å‡ºçš„ <code>PNG 8</code> å›¾ç‰‡éƒ½å¸¦æœ‰é”¯é½¿ã€‚</p></li><li><p><code>PNG 8</code> ç´¢å¼•é€æ˜éƒ½å¸¦æœ‰é”¯é½¿ï¼Œä¸” <code>Fireworks 8</code> å¯¼å‡ºçš„ <code>PNG 8</code>ç´¢å¼•é€æ˜çš„é”¯é½¿æ˜¯ç™½è‰²çš„ã€‚</p><p>å†æ¥çœ‹çœ‹è¿™äº›æ ¼å¼åœ¨ä¸åŒæµè§ˆå™¨ä¸‹çš„è¡¨ç°æƒ…å†µï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201706/webgra_07.png" alt="png_8_Compatibility"></p><p>æ ¹æ®ä»¥ä¸Šå›¾ç‰‡æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š</p></li><li><p><code>PNG 8</code> ç´¢å¼•é€æ˜å’Œ <code>Alpha</code> é€æ˜éƒ½å…¼å®¹<code>IE 6</code>ï¼›ä½†ç¾ä¸­ä¸è¶³çš„æ˜¯ï¼Œ<code>PNG 8Alpha</code>é€æ˜åœ¨ <code>IE 6</code>ä¸‹ä¼šäº§ç”Ÿé”¯é½¿ã€‚</p></li><li><p>å…¶ä»–æ ¼å¼çš„å›¾ç‰‡åœ¨å„ä¸ªæµè§ˆå™¨ä¸‹çš„è¡¨ç°ä¸€è‡´ã€‚</p></li><li><p><code>Fireworks 8</code>å¯¼å‡ºçš„ <code>PNG 8</code>ç´¢å¼•é€æ˜å¸¦æœ‰ç™½è‰²é”¯é½¿ï¼Œä½†æ˜¯å¦‚æœå›¾ç‰‡æ˜¯æ”¾åˆ°ç™½è‰²çš„èƒŒæ™¯çš„å®¹å™¨ä¸‹ï¼Œé‚£ä¹ˆè¿™ä¸ªç™½è‰²é”¯é½¿å°±å®Œå…¨çœ‹ä¸å‡ºæ¥äº†ï¼Œè¡¨ç°å¾—å’Œæ­£å¸¸æ•ˆæœä¸€æ ·ã€‚</p></li></ul></li><li><p><code>PNG 24</code> å’Œ <code>PNG 32</code></p><p>  <code>PNG 24</code> æ˜¯ä¸é€æ˜çš„ï¼›<code>PNG 32</code> æ˜¯æ”¯æŒé€æ˜çš„ï¼Œä¸”æ˜¯ <code>Alpha</code> é€æ˜ã€‚æ¥çœ‹ä¸‹å®ƒä»¬åœ¨ä¸åŒæµè§ˆå™¨ä¸‹çš„è¡¨ç°ï¼š</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201706/webgra_08.png" alt="png_2432_Compatibility"></p><p>  <code>PNG 32</code> å›¾ç‰‡çš„é€æ˜åŒºåŸŸåœ¨ <code>IE 6</code> ä¸‹å°†ä¸å†é€æ˜ï¼Œè€Œæ˜¯é¢œè‰²å€¼ä¸º <code>f0f0f0</code> çš„ç°è‰²å¡«å……ï¼Œåœ¨æ›´é«˜çº§ç‰ˆæœ¬çš„ <code>IE</code> ä¸‹æ˜¯æ­£å¸¸çš„ã€‚<code>PNG 32</code> å›¾ç‰‡ä¸ä¼šæœ‰é”¯é½¿ã€‚</p></li></ul><h3 id="PNGå‹ç¼©"><a href="#PNGå‹ç¼©" class="headerlink" title="PNGå‹ç¼©"></a>PNGå‹ç¼©</h3><p>æœ¬æ–‡å‰é¢æåˆ°äº† <code>JPEG</code> åœ¨ç…§ç‰‡ç‰‡è¿™ç±»é¢œè‰²ä¸°å¯Œçš„å›¾åƒä¸Šçš„ä¼˜ç§€è¡¨ç°ï¼Œæ‰€ä»¥ç°åœ¨å°†å®ƒå’Œ <code>PNG</code> çš„3ç§æ ¼å¼è¿›è¡Œå¯¹æ¯”ã€‚ä¸»è¦æ˜¯å¯¹æ¯”å‹ç¼©å‰åçš„å­˜å‚¨ä½“ç§¯ä»¥åŠè¡¨ç°æ•ˆæœç­‰æ–¹é¢ã€‚ç”¨çš„æ˜¯å…è´¹çš„åœ¨çº¿å‹ç¼©å·¥å…· <a href="https://tinypng.com/">TinyPNG</a>ï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥å‹ç¼© <code>JPEG</code> å’Œ <code>PNG</code> æ ¼å¼ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201706/webgra_09.png" alt="png_jpeg"></p><p>ä»ä¸Šå›¾è¿™ä¸ªå›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸åŒè§’åº¦å¾—å‡ºä¸€äº›ç»“è®ºï¼š</p><ul><li><code>PNG 8</code> æ ¼å¼çš„å›¾ç‰‡é¢œè‰²è¿‡åº¦å¤„ç†å¾—å¾ˆçªå…€ï¼Œèƒ½çœ‹åˆ°å¾ˆæ˜æ˜¾çš„æ³¢æµªè¤¶çš±ï¼Œè¿™å°±æ˜¯å› ä¸ºå®ƒæœ€å¤šåªèƒ½å­˜å‚¨256ç§é¢œè‰²å¯¼è‡´çš„ï¼Œæ‰€ä»¥<code>PNG 8</code>ä¸é€‚åˆç”¨äºå­˜å‚¨é¢œè‰²å¤æ‚çš„å›¾åƒã€‚ç›¸åï¼Œç”±äºå…¶ç›¸å¯¹äº <code>PNG 24</code> æˆ–è€… <code>PNG 32</code> æœ‰å…ˆå¤©çš„å­˜å‚¨ä½“ç§¯å°ä¼˜åŠ¿ï¼Œæ‰€ä»¥å®ƒéå¸¸é€‚åˆåº”ç”¨äºå›¾æ ‡ã€é¢œè‰²ç®€å•çš„æˆ–é€æ˜çš„å›¾åƒä¸Šã€‚</li><li>å¯¹æ¯”100%è´¨é‡çš„ <code>JPG</code>ã€55%è´¨é‡çš„ <code>JPG</code>ã€<code>PNG 24</code> å’Œ <code>PNG 32</code>ï¼Œè‚‰çœ¼ä¸Šçœ‹ä»–ä»¬çš„å›¾åƒè¡¨ç°æ•ˆæœéƒ½å·®ä¸å¤šï¼Œä½†æ˜¯å„è‡ªæ‰€å ç”¨çš„å­˜å‚¨ç©ºé—´å´æ˜¯å·®å¾—æœ‰äº›ç¦»è°±ã€‚å‹ç¼©å‰ï¼Œå½“å±55%è´¨é‡çš„ <code>JPG</code> å ç”¨å­˜å‚¨æœ€å°ï¼›å‹ç¼©åï¼Œ<code>PNG 24</code> å’Œ <code>PNG 32</code> ä¸€æ ·ï¼Œä¼šæ¯”55%è´¨é‡çš„ <code>JPG</code> å°ä¸€äº›ï¼Œä½†æ˜¯ç”±äº <code>PNG 32</code> æ”¯æŒé€æ˜ï¼Œæ‰€ä»¥å¯¹äºé¢œè‰²ä¸°å¯Œçš„å›¾åƒå»ºè®®ç”¨ <code>PNG 32</code> æ ¼å¼å¯¼å‡ºï¼Œç„¶åç”¨å‹ç¼©å·¥å…·å‹ç¼©ä¸€ä¸‹å³å¯ã€‚</li><li>å¯¹æ¯”å‹ç¼©å‰åçš„ <code>PNG 24</code> å’Œ <code>PNG 32</code> ä¸¤è€…çš„å­˜å‚¨ä½“ç§¯ç›¸å·®å·¨å¤§ï¼Œä½†æ˜¯è¡¨ç°æ•ˆæœå´ç›¸å·®æ— å‡ ï¼Œæ‰€ä»¥ç”¨äº <code>web</code> ä¸Šçš„ <code>PNG 24</code> æˆ– <code>PNG 32</code> å›¾åƒä¸€å®šè¦è®°å¾—å‹ç¼©ï¼Œè¿™å¯¹äºå®¢æˆ·ç«¯çš„æ€§èƒ½ä¼˜åŒ–å°†æä¾›éå¸¸å¤§çš„å¸®åŠ©ã€‚</li></ul><h2 id="GIF"><a href="#GIF" class="headerlink" title="GIF"></a>GIF</h2><p>å›¾å½¢äº¤æ¢æ ¼å¼ï¼ˆ<code>Graphics Interchange Format</code>ï¼‰ä¹Ÿæ˜¯ä¸€ç§å…‰æ …æ ¼å¼ï¼Œæœ€å¤šåªèƒ½å­˜å‚¨256ç§é¢œè‰²ï¼Œæ”¯æŒé€æ˜åº¦ï¼Œè€Œä¸”åœ¨ <code>IE 6</code> ä¸‹ä¹Ÿæ”¯æŒå¾—å¾ˆå¥½ï¼Œå”¯ä¸€ç¾ä¸­ä¸è¶³çš„æ˜¯é™¤äº† <code>Fireworks 8</code> å¯¼å‡ºçš„ <code>GIF</code> ä¸é€æ˜æ ¼å¼å¤–ï¼Œæ‰€æœ‰çš„å…¶ä»– <code>GIF</code> æ ¼å¼çš„å›¾ç‰‡éƒ½å­˜åœ¨é”¯é½¿ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201706/webgra_10.png" alt="gif"></p><p>ä½†æ˜¯ <code>GIF</code> ä¹Ÿä¸æ˜¯ä¸€æ— æ˜¯å¤„ï¼Œæœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯æ”¯æŒç®€å•çš„åŠ¨ç”»ã€‚å¦‚ä¸‹é¢ç®€å•çš„äº¤é€šç¯åŠ¨ç”»ï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201706/traffic-light.gif" alt="gif_ani"></p><h2 id="SVG"><a href="#SVG" class="headerlink" title="SVG"></a>SVG</h2><p>å¯ä¼¸ç¼©çŸ¢é‡å›¾å½¢ï¼ˆ<code>Scalable Vector Graphics</code>ï¼‰ï¼Œé¡¾åæ€ä¹‰å®ƒæ˜¯çŸ¢é‡çš„ï¼Œè€Œéå…‰æ …æ ¼å¼ã€‚åŒºåˆ«äºå…‰æ …æ ¼å¼çš„ä¾é åƒç´ ç‚¹æ¥å­˜å‚¨å›¾åƒï¼ŒçŸ¢é‡å›¾æ˜¯é€šè¿‡XMLæ ¼å¼æ¥æ•°æ®åŒ–çš„è®°å½•å›¾åƒçš„ä¿¡æ¯ã€‚æ‰€ä»¥ <code>SVG</code> ç›¸å¯¹äºå…‰æ …æ ¼å¼çš„å›¾åƒå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><ul><li>ä»»æ„ä¼¸ç¼©å›¾åƒï¼Œè€Œä¸ä¼šç ´åå›¾åƒçš„æ¸…æ™°åº¦å’Œç»†èŠ‚ã€‚</li><li>å®Œå…¨æ”¯æŒ <code>DOM</code>ï¼Œä»¥åŠ <code>JavaScript</code> èƒ½å¤Ÿå¾ˆå¥½çš„è®¿é—®åˆ°å®ƒã€‚</li><li>æ€»ä½“æ¥è®²ï¼Œ<code>SVG</code>çš„æ–‡ä»¶ä¼šæ¯” <code>GIF</code> æˆ– <code>JPG</code> çš„ä¼šå°å¾ˆå¤šã€‚</li></ul><p>å°±åƒå…¶å®ƒçŸ¢é‡æ ¼å¼ï¼Œ<code>SVG</code> å›¾ç‰‡èƒ½ä¸ä¸¢å¤±ä»»ä½•ç»†èŠ‚åœ°æ”¾å¤§åˆ°ä»»ä½•å¤§å°ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼ŒåŒä¸€ä¸ªå›¾æ ‡ï¼Œå¯ä»¥ä»¥å¤šç§å°ºå¯¸ä½¿ç”¨ï¼Œå¹¶ä¸”åœ¨ä»»ä½•å±å¹•åˆ†è¾¨ç‡ï¼ˆæ¯”å¦‚ <code>Retina</code> æ˜¾ç¤ºå™¨ï¼‰ä¸­éƒ½å°†çœ‹èµ·æ¥å¾ˆæ¸…æ™°ï¼Œè€Œä¸éœ€è¦å­˜æˆå¤šä¸ªæ–‡ä»¶ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªè¿™ä¸ªå›¾å¯¹æ¯”ï¼Œå³è¾¹çš„æ˜¯çŸ¢é‡å›¾ï¼Œå·¦è¾¹çš„æ˜¯å…¶ä»–æ ¼å¼å›¾ç‰‡ï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201706/webgra_11.png" alt="svg"></p><h2 id="SVGç”¨é€”"><a href="#SVGç”¨é€”" class="headerlink" title="SVGç”¨é€”"></a>SVGç”¨é€”</h2><p><code>SVG</code> åœ¨çº¿æ¡è‰ºæœ¯ï¼Œ<code>LOGO</code>ï¼Œå›¾æ ‡ï¼Œæ’ç”»å’Œæ•°æ®å¯è§†åŒ–æ–¹é¢ç”¨é€”å¹¿æ³›ã€‚ä½†å®ƒä¸é€‚ç”¨äºå†™å®å›¾åƒå’Œæœ‰è®¸å¤šç»†èŠ‚çš„å¤æ‚å›¾ç‰‡ã€‚åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œ<code>SVG</code> å’Œ <code>PNG</code> éƒ½èƒ½å¾ˆå¥½åœ°è¾¾åˆ°åŒä¸€ä¸ªç›®çš„ã€‚å¯¹äºçº¿æ¡è‰ºæœ¯ï¼Œ<code>SVG</code> é€šå¸¸èƒ½ç”Ÿæˆè¾ƒå°çš„æ–‡ä»¶ã€‚ä½†æ˜¯è¿™ä¸æ˜¯å¿…ç„¶çš„ï¼Œå®é™…æƒ…å†µä¼šæ ¹æ®çŸ¢é‡å›¾åƒç©¶ç«Ÿæœ‰å¤šå°‘ä¸ªé”šç‚¹ï¼Œå®ƒç”šè‡³å¯èƒ½ä¼šç”Ÿæˆæ¯”PNGæ›´å¤§çš„æ–‡ä»¶ã€‚ <code>SVG</code> çœŸæ­£å‡ºè‰²çš„åœ°æ–¹æ˜¯æ•°æ®å¯è§†åŒ–ã€‚ç”±äºå¯ä»¥ä½¿ç”¨<code>JavaScript</code> æ¥æ“çºµå’Œåˆ›å»ºçŸ¢é‡åŠ¨ç”»ï¼Œè¯¸å¦‚ <code>D3</code> ä¹‹ç±»çš„åº“æä¾›äº†æ— é™çš„å¯èƒ½æ€§ã€‚<code>LOGO</code>, å›¾æ ‡å’Œæ•°æ®å¯è§†åŒ–æ˜¯ <code>SVG</code> ä½¿ç”¨çš„ä¼˜ç§€èŒƒä¾‹ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201706/webgra_12.png" alt="svg_use"></p><h2 id="SVGå‹ç¼©"><a href="#SVGå‹ç¼©" class="headerlink" title="SVGå‹ç¼©"></a>SVGå‹ç¼©</h2><p>æ¯”è¾ƒå¥½çš„ <code>SVG</code> æ–¹æ³•åº”è¯¥æ˜¯é€šè¿‡æ¸…é™¤ <code>SVG</code> çŸ¢é‡å›¾å½¢ä¸­ä¸å¿…è¦çš„é”šç‚¹ã€å…ƒç´ å’Œå±æ€§æ¥å‡å°‘æ–‡ä»¶å¤§å°ã€‚é”šç‚¹ç»˜åˆ¶äº†çŸ¢é‡å›¾åƒï¼Œå› æ­¤ï¼Œä½ éœ€è¦ç¡®ä¿å·²ç§»é™¤çš„é”šç‚¹ä¸ä¼šå½±å“çŸ¢é‡å›¾å½¢çš„æœ€ç»ˆå½¢çŠ¶ã€‚å¦‚æœæ‚¨ä½¿ç”¨ <code>Adobe Illustrator</code> ç¼–è¾‘ <code>SVG</code>ï¼Œè¯·ç¡®ä¿ä½¿ç”¨å¯¼ -&gt; å¯¼å‡ºä¸ºï¼Œè€Œä¸æ˜¯æ–‡ä»¶ -&gt; å¦å­˜ä¸ºè¿›è¡Œä¿å­˜ï¼Œå› ä¸ºè¿™æ ·æ‰èƒ½ç”Ÿæˆä¸€ä¸ªæœ€å°åŒ–çš„æ–‡ä»¶ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201706/webgra_13.png" alt="svg_compress"> </p><p>æ¸…ç†ä¸å¿…è¦çš„èŠ‚ç‚¹æ˜¯ç¼©å‡ <code>SVG</code> å°ºå¯¸çš„ä¸€ç§é€”å¾„ã€‚<br>å…ƒç´ æ ‡ç­¾æ˜¯åŒ…å«åœ¨ <code>SVG</code> æ–‡ä»¶å†…çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬å¼€å§‹å’Œç»“æŸæ ‡ç­¾ã€‚<br>çŸ¢é‡ç¼–è¾‘è½¯ä»¶ï¼Œå¦‚ <code>Adobe Illustrator</code> å’Œ <code>Sketch</code> å¯èƒ½ä¼šåˆ°å¤„å«æœ‰éå¿…è¦å…ƒç´ å’Œå±æ€§çš„ <code>SVG</code> ã€‚<br><code>SVG</code> å‹ç¼©å™¨å¯ç”¨äºåˆ é™¤è¿™ç§å¤šä½™çš„ä¿¡æ¯ã€‚<code>Compresso</code> å’Œ <code>SVGOMG</code> ç­‰åœ¨çº¿å·¥å…·å¯ä»¥å®Œæˆæ­¤å·¥ä½œã€‚</p><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><ul><li><a href="http://web.jobbole.com/91599/">åœ¨ç½‘é¡µä¸Šä½¿ç”¨JPGã€PNGå’ŒSVGï¼šæ–°æ‰‹æŒ‡å—</a></li><li><a href="http://www.cnblogs.com/PeunZhang/archive/2013/05/30/3050394.html">PNGä½¿ç”¨æŠ€å·§</a></li><li><a href="https://stackoverflow.com/questions/2336522/png-vs-gif-vs-jpeg-vs-svg-when-best-to-use">PNG vs. GIF vs. JPEG vs. SVG - When best to use?</a></li><li><a href="https://www.sitepoint.com/gif-png-jpg-which-one-to-use/">JPG vs PNG vs GIF vs SVG â€“ What is the Difference?</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> webç»¼åˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> svg </tag>
            
            <tag> å›¾åƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSSè‡ªå®šä¹‰å±æ€§</title>
      <link href="/2017/05/04/css-custom-property/"/>
      <url>/2017/05/04/css-custom-property/</url>
      
        <content type="html"><![CDATA[<p><code>CSS</code> è‡ªå®šä¹‰å±æ€§ï¼Œå¾ˆå¤šäººåˆæŠŠå®ƒç§°ä¹‹ä¸º <code>CSS</code> å˜é‡ï¼Œæ˜¯ç”±ç”¨æˆ·è‡ªå·±å®šä¹‰çš„ç”¨æ¥æŒ‡å®š <code>CSS</code> å±æ€§å€¼çš„å˜é‡ã€‚æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attribute">--color-red</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.red</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--color-red);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œé¦–å…ˆåœ¨ <code>:root</code>(æ–‡æ¡£æ ¹å…ƒç´ å³ <code>html</code> )å¤„å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå˜é‡åç§°å« <code>color-red</code>ã€‚ç„¶ååœ¨ <code>red</code> å…ƒç´ é‡Œä½¿ç”¨äº†è¿™ä¸ªå˜é‡ï¼Œé‚£ä¹ˆè¯¥å…ƒç´ é¢œè‰²å°†å˜æˆçº¢è‰²ã€‚</p><a id="more"></a><h2 id="å˜é‡ç”³æ˜ä¸ä½¿ç”¨"><a href="#å˜é‡ç”³æ˜ä¸ä½¿ç”¨" class="headerlink" title="å˜é‡ç”³æ˜ä¸ä½¿ç”¨"></a>å˜é‡ç”³æ˜ä¸ä½¿ç”¨</h2><p>å‚ç…§ä¸Šé¢çš„ä¾‹å­ï¼Œä½ å¯èƒ½å¾ˆå®¹æ˜“çœ‹å‡º <code>CSS</code> å˜é‡çš„å£°æ˜æ–¹å¼ï¼šä½¿ç”¨ <code>--*</code> å£°æ˜ä¸€ä¸ªå˜é‡ã€‚è¿™é‡Œçš„ <code>*</code> è¡¨ç¤ºå˜é‡åç§°ã€‚å˜é‡åç§°çš„ç»„æˆå¯ä»¥æ˜¯æ•°ç»„<code>[0-9]</code>ã€å­—æ¯<code>[a-zA-Z]</code>ã€ä¸‹åˆ’çº¿_æˆ–è€…è¿å­—ç¬¦-ç»„åˆè€Œæˆï¼Œæ›´å‰å®³çš„æ˜¯å˜é‡åç§°ç”šè‡³å¯ä»¥æ˜¯ä¸­æ–‡ï¼Œå¦å¤–å˜é‡åç§°æ˜¯åŒºåˆ†å¤§å°å†™å­—æ¯çš„ã€‚<code>CSS</code> å˜é‡çš„å–å€¼å¯ä»¥æ˜¯å•å€¼ <code>10px</code>ã€å¤åˆå±æ€§çš„å€¼ <code>1px solid #ddd</code>ï¼Œè®¡ç®—å€¼ <code>calc( 10px * 2 )</code>ï¼Œç”šè‡³å±æ€§å€¼é‡Œåˆå¯ä»¥å¼•ç”¨å˜é‡ <code>var(--size) 10px</code>ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å˜é‡ç”³æ˜ï¼Œæ³¨æ„è§‚å¯Ÿå˜é‡åç§°å’Œå±æ€§å€¼çš„å®šä¹‰ */</span></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attribute">--10</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">--marginTop</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">--color-red</span>: red; </span><br><span class="line">    --ç‰¹æ®Šçš„å†…é—´è·: 10px 0 20px;</span><br><span class="line">    <span class="selector-tag">--padv</span>: <span class="selector-tag">calc</span>( <span class="selector-tag">var</span>(<span class="selector-tag">--10</span>) * 2 ) 0; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å˜é‡çš„ä½¿ç”¨æ–¹å¼ï¼šä½¿ç”¨ <code>var(--*)</code> ä½¿ç”¨å˜é‡ï¼Œå…¶å®æ¯”è¾ƒå®Œæ•´çš„ä½¿ç”¨è§„åˆ™æ˜¯è¿™æ ·çš„ï¼š<code>var( &lt;â€“å˜é‡åç§°&gt; [, &lt;é»˜è®¤å€¼&gt; ]? )</code>ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="built_in">var</span>(--size, <span class="number">10px</span> <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè¡¨ç¤ºï¼Œå½“ <code>--size</code> è¿™ä¸ªå˜é‡æœªå®šä¹‰çš„æ—¶å€™ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ <code>10px 0</code>ï¼Œæ³¨æ„è¿™ä¸ªåœ°æ–¹ä¸èƒ½åŠ åˆ†å·ã€‚</p><p>è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯ï¼Œå‡å¦‚å®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯å˜é‡å€¼æ˜¯ä¸åˆæ³•çš„ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå–å±æ€§çš„ç¼ºçœå€¼ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">--color</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#369</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--color, #cd0000);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹ä¸Šé¢çš„ä¾‹å­ï¼Œæ­¤æ—¶çš„ <code>body</code> çš„èƒŒæ™¯é¢œè‰²åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<code>A. transparent</code>ã€<code>B. 20px</code>ã€<code>C. #369</code>ã€<code>D. #cd0000</code><br>ç­”æ¡ˆæ˜¯ <code>A</code>ï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™å˜é‡ <code>color</code> çš„å€¼ç”¨åœ¨è¿™é‡Œæ˜¯ä¸åˆæ³•çš„ï¼Œæ‰€ä»¥ä¼šå– <code>background-color</code> çš„ç¼ºçœå€¼å³é»˜è®¤æ›¿ä»£å€¼<code>transparent</code>ï¼Œä¹Ÿä¸ä¼šç”¨ <code>#cd0000</code></p><p>å†æ¥çœ‹ä¸ªä¾‹å­ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">--size</span>: <span class="number">20</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="built_in">var</span>(--size)<span class="built_in">px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹çœ‹ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œ<code>body</code> çš„å­—å·æ˜¯ <code>20px</code>ï¼Œå…¶å®ä¸ç„¶ã€‚<code>var(--size)px</code> ä¼šè§£æå®Œæˆåä¼šå˜æˆ <code>20 px</code>ï¼Œè¿™ä¸ªå€¼æ˜¯ä¸åˆæ³•çš„ï¼Œæ‰€ä»¥ä¼šå–ç¼ºçœå€¼ <code>16px</code>ã€‚æ³¨æ„åˆ°è¿™ä¸ªé—®é¢˜ï¼Œç¨³å¦¥çš„åšæ³•è¿˜æ˜¯åœ¨å˜é‡ç”³æ˜çš„æ—¶å€™å¸¦ä¸Šå•ä½ã€‚æˆ–è€…ä½¿ç”¨ <code>calc()</code> æ¥è®¡ç®—ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">--size</span>: <span class="number">20</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="built_in">calc</span>(var(--size) * <span class="number">1px</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="CSSå˜é‡ä½œç”¨åŸŸ"><a href="#CSSå˜é‡ä½œç”¨åŸŸ" class="headerlink" title="CSSå˜é‡ä½œç”¨åŸŸ"></a>CSSå˜é‡ä½œç”¨åŸŸ</h2><p>å±…ç„¶æ˜¯å˜é‡ï¼Œé‚£ä¹ˆè‡ªç„¶çš„æœ‰ä½œç”¨åŸŸè¿™ä¸€è¯´æ³•ï¼Œåœ¨ <code>CSS</code> å˜é‡ä¸­ï¼Œä¹Ÿæ˜¯å­˜åœ¨ä½œç”¨åŸŸçš„ã€‚å…¨å±€ä½œç”¨åŸŸï¼Œç›´æ¥å°†å˜é‡å®šä¹‰åœ¨æ ¹å…ƒç´ ä¸Šï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attribute">--color-red</span>: red;</span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">å±€éƒ¨ä½œç”¨åŸŸæ˜¯ä¼šç›´æ¥åœ¨æŸä¸ªå…ƒç´ ä¸Šå®šä¹‰å˜é‡ï¼Œä¸”è¿™ä¸ªå˜é‡åªåœ¨è¯¥å…ƒç´ åŠåä»£å…ƒç´ ä¸­æœ‰æ•ˆï¼š</span><br><span class="line"></span><br><span class="line">``` <span class="selector-tag">css</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--color-red);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.red</span> &#123;</span><br><span class="line">    <span class="attribute">--color-red</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>body</code> çš„é¢œè‰²ä¸ä¼šè¢«è®¾ç½®æˆçº¢è‰²ã€‚å¦å¤–å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå˜é‡çš„ç”³æ˜å’Œå˜é‡çš„ä½¿ç”¨ä¸å®šä¹‰åœ¨æ–‡ä»¶é‡Œçš„å…ˆåä½ç½®æ— å…³ã€‚</p><p>å½“å­˜åœ¨å¤šä¸ªå˜é‡çš„æ—¶å€™ï¼Œå˜é‡çš„è¦†ç›–è§„åˆ™ç”± <code>CSS</code> é€‰æ‹©å™¨çš„æƒé‡å†³å®šï¼Œä½†å¹¶æ—  <code>!important</code> è¿™ç§ç”¨æ³•ï¼Œå› ä¸ºæ²¡æœ‰å¿…è¦ï¼Œ<code>!important</code>è®¾è®¡åˆè¡·æ˜¯å¹²æ‰ <code>JS</code> çš„ <code>style</code> è®¾ç½®ï¼Œä½†å¯¹äºå˜é‡çš„å®šä¹‰åˆ™æ²¡æœ‰è¿™æ ·çš„éœ€æ±‚ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attribute">--color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">--color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æœ‰ä¸€ä¸ª <code>div</code> å…ƒç´ ï¼Œé‚£ä¹ˆå…¶é¢œè‰²å€¼ä¼šæ˜¯è“è‰²çš„ã€‚</p><h2 id="æ¥å®è·µä¸€ä¸‹"><a href="#æ¥å®è·µä¸€ä¸‹" class="headerlink" title="æ¥å®è·µä¸€ä¸‹"></a>æ¥å®è·µä¸€ä¸‹</h2><p>å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d2d2d2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">border-style</span>: solid;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#d2d2d2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸¤ç§è®¾ç½®çš„è¾¹æ¡†æ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«æ˜¯ä¸€ä¸ªç”¨çš„æ˜¯å¤åˆå±æ€§ï¼Œä¸€ä¸ªæ˜¯ç‹¬ç«‹å±æ€§ã€‚åœ¨ <code>CSS</code> é‡Œå­˜åœ¨è®¸è®¸å¤šå¤šçš„å±æ€§å€¼æ˜¯ç”±å¤šä¸ªå€¼ç»„æˆçš„å±æ€§ï¼Œæ¯”å¦‚ <code>border</code>ã€<code>animation</code> ç­‰ã€‚å¦‚æœè¦å•ç‹¬åœ°ä¿®æ”¹è¿™äº›å¤šä¸ªå±æ€§å€¼é‡Œçš„æŸä¸€ä¸ªï¼Œå¤åˆå±æ€§å°±å¯ä»¥ç›´æ¥ä¿®æ”¹å®ƒçš„ç‹¬ç«‹å±æ€§ï¼Œä½†æ˜¯å¯¹äºé‚£ç§ä¸æ˜¯å¤åˆå±æ€§å´æœ‰å¤šä¸ªå±æ€§å€¼çš„ <code>CSS</code> å±æ€§å°±å¤´å¤§äº†ï¼Œæ¯”å¦‚ <code>box-shadow</code>ï¼Œç‰¹åˆ«æ˜¯åœ¨ <code>OOCSS</code> çš„ä¸–ç•Œé‡Œï¼Œè¿™ç§æƒ…å†µå°±æ›´å°´å°¬äº†ã€‚ä½†æ˜¯ç°åœ¨æœ‰äº† <code>CSS</code> è‡ªå®šä¹‰å±æ€§ï¼Œé—®é¢˜å°±å¯ä»¥è¿åˆƒè€Œè§£äº†ã€‚æ¯”å¦‚ï¼Œ<code>box-shadow: 1px 2px 3px 4px #ddd</code>ï¼Œè¿™é‡Œå¯ä»¥æŠŠè¿™5ä¸ªå€¼åˆ†åˆ«ç”¨5ä¸ªå…¨å±€å˜é‡è¡¨ç¤ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attribute">--box-shadow-offset-x</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">--box-shadow-offset-y</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">--box-shadow-blur</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">--box-shadow-spread</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">--box-shadow-color</span>: <span class="number">#ddd</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“éœ€è¦å•ç‹¬åœ°ä¿®æ”¹æŸä¸ªå€¼çš„æ—¶å€™ï¼Œç›´æ¥ç”¨ <code>js</code> ä¿®æ”¹å…¨å±€å˜é‡çš„å€¼å³å¯ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.documentElement.style.setProperty( &#x27;--box-shadow-offset-x&#x27;, &#x27;3px&#x27; );</span><br></pre></td></tr></table></figure><p>æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¥½ç©ï¼Œæˆ³æˆ‘ç»™ä½ çœ‹ä¸€ä¸ªä¾‹å­ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201705/custom_property_02.png" alt="custom_property"></p><h2 id="CSSå˜é‡å­˜åœ¨çš„æ„ä¹‰"><a href="#CSSå˜é‡å­˜åœ¨çš„æ„ä¹‰" class="headerlink" title="CSSå˜é‡å­˜åœ¨çš„æ„ä¹‰"></a>CSSå˜é‡å­˜åœ¨çš„æ„ä¹‰</h2><p>åœ¨æ„å»ºå¤§å‹ç«™ç‚¹æ—¶ï¼Œä½œè€…é€šå¸¸ä¼šé¢å¯¹å¯ç»´æŠ¤æ€§çš„æŒ‘æˆ˜ã€‚åœ¨è¿™äº›ç½‘é¡µä¸­ï¼Œ æ‰€ä½¿ç”¨çš„ <code>CSS</code> çš„æ•°é‡æ˜¯éå¸¸åºå¤§çš„ï¼Œå¹¶ä¸”åœ¨è®¸å¤šåœºåˆå¤§é‡çš„ä¿¡æ¯ä¼šé‡å¤ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨ç½‘é¡µä¸­ç»´æŠ¤ä¸€ä¸ªé…è‰²æ–¹æ¡ˆï¼Œæ„å‘³ç€ä¸€äº›é¢œè‰²åœ¨ <code>CSS</code> æ–‡ä»¶ä¸­å¤šæ¬¡å‡ºç°ï¼Œå¹¶è¢«é‡å¤ä½¿ç”¨ã€‚å½“ä½ ä¿®æ”¹é…è‰²æ–¹æ¡ˆæ—¶ï¼Œä¸è®ºæ˜¯è°ƒæ•´æŸä¸ªé¢œè‰²æˆ–å®Œå…¨ä¿®æ”¹æ•´ä¸ªé…è‰²ï¼Œéƒ½ä¼šæˆä¸ºä¸€ä¸ªå¤æ‚çš„é—®é¢˜ï¼Œä¸å®¹å‡ºé”™ï¼Œè€Œå•çº¯æŸ¥æ‰¾æ›¿æ¢æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚</p><p>å¦‚æœä½¿ç”¨äº† <code>CSS</code> æ¡†æ¶ï¼Œè¿™ç§æƒ…å†µä¼šå˜å¾—å°¤å…¶ç³Ÿç³•ï¼Œæ­¤æ—¶å¦‚æœè¦ä¿®æ”¹é¢œè‰²ï¼Œåˆ™éœ€è¦å¯¹æ¡†æ¶æœ¬èº«è¿›è¡Œä¿®æ”¹ã€‚åœ¨è¿™äº›åœºåˆä½¿ç”¨ <code>LESS</code> æˆ– <code>Sass</code> ç±»ä¼¼çš„é¢„å¤„ç†å™¨æ˜¯éå¸¸æœ‰å¸®åŠ©çš„ï¼Œä½†æ˜¯è¿™ç§é€šè¿‡æ·»åŠ é¢å¤–æ­¥éª¤çš„æ–¹å¼ï¼Œå¯èƒ½ä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚CSSå˜é‡ä¸ºæˆ‘ä»¬å¸¦æ¥ä¸€äº›é¢„å¤„ç†å™¨çš„ä¾¿åˆ©ï¼Œå¹¶ä¸”ä¸éœ€è¦é¢å¤–çš„ç¼–è¯‘ã€‚</p><p>è¿™äº›å˜é‡çš„ç¬¬äºŒä¸ªä¼˜åŠ¿å°±æ˜¯åç§°æœ¬èº«å°±åŒ…å«äº†è¯­ä¹‰çš„ä¿¡æ¯ã€‚<code>CSS</code> æ–‡ä»¶å˜å¾—æ˜“è¯»å’Œç†è§£ã€‚<code>main-text-color</code> æ¯”æ–‡æ¡£ä¸­çš„<code>#00ff00</code> æ›´å®¹æ˜“ç†è§£ï¼Œç‰¹åˆ«æ˜¯åŒæ ·çš„é¢œè‰²å‡ºç°åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­çš„æ—¶å€™ã€‚</p><h2 id="å…¼å®¹æ€§"><a href="#å…¼å®¹æ€§" class="headerlink" title="å…¼å®¹æ€§"></a>å…¼å®¹æ€§</h2><p><code>CSS</code> è‡ªå®šä¹‰å±æ€§åœ¨ <code>IE</code> ä¸Šå®Œå…¨ä¸æ”¯æŒå•Šï¼Œåœ¨å…¶ä»–æµè§ˆå™¨ä¸Šæ”¯æŒæ€§è¿˜æ˜¯ä¸é”™çš„ã€‚æˆ³æˆ‘</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201705/custom_property_01.png" alt="caniuse"></p><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><ul><li><a href="http://www.zhangxinxu.com/wordpress/?p=5804">å°tips:äº†è§£CSS/CSS3åŸç”Ÿå˜é‡var</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_variables">ä½¿ç”¨CSSå˜é‡</a></li><li><a href="https://css-tricks.com/now-css-custom-properties-thing-value-parts-can-changed-individually/">Now that CSS Custom Properties are a Thing, All Value Parts Can Be Changed Individually</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç†è§£ Flexboxï¼šä½ éœ€è¦çŸ¥é“è¿™äº›</title>
      <link href="/2017/04/18/flexbox/"/>
      <url>/2017/04/18/flexbox/</url>
      
        <content type="html"><![CDATA[<p><code>flexbox</code> é¡¾åæ€ä¹‰ <code>flexible box</code> å¼¹æ€§ç›’å­ï¼Œæ˜¯ <code>css3</code> ä¸­å®šä¹‰çš„ä¸€ç§æ–°çš„å¸ƒå±€æ–¹å¼ã€‚é€šè¿‡åœ¨æŸå…ƒç´ ä¸Šä½¿ç”¨ <code>display: flex;</code> å³å¯æŠŠè¯¥å…ƒç´ å®šä¹‰ä¸º <code>flex</code> å®¹å™¨ ( <code>flex container</code> )ï¼Œè€Œå®¹å™¨çš„æ‰€æœ‰å­å…ƒç´ å°±æ˜¯ <code>flex</code> é¡¹ç›® ( <code>flex item</code> )ã€‚å†ä»‹ç» <code>flex</code> è¯­æ³•ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹ä¸€ä¸ªé‡è¦çš„ä¸œè¥¿ã€‚</p><h2 id="flexè½´çº¿"><a href="#flexè½´çº¿" class="headerlink" title="flexè½´çº¿"></a>flexè½´çº¿</h2><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201704/flex_axis.png" alt="flex-axis"></p><a id="more"></a><p>åœ¨ <code>flex</code> å®¹å™¨é‡Œï¼Œå­˜åœ¨ä¸¤æ¡è½´ï¼Œ<code>main axis</code> å’Œ <code>cross axis</code>ï¼Œåˆåˆ†åˆ«å«åšä¸»è½´å’Œäº¤å‰è½´ã€‚ä¸»è½´ä¹‹æ‰€ä»¥å«åšä¸»è½´è€Œä¸å«åš <code>x</code> è½´ï¼Œæ˜¯å› ä¸ºä¸»è½´ä¸ä¸€å®šæ˜¯åœ¨æ°´å¹³çº¿ä¸Šçš„ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å‚ç›´æ–¹å‘ä¸Šï¼Œæ¯”å¦‚å½“ <code>flex-direction: column;</code> çš„æ—¶å€™ï¼Œä¸»è½´å°±æ˜¯åœ¨å‚ç›´æ–¹å‘ä¸Šã€‚å¦å¤–ä¸»è½´å’Œäº¤å‰è½´éƒ½æ˜¯æœ‰æ–¹å‘çš„ï¼Œ<code>flex</code> é¡¹ç›®å°±æ˜¯æ²¿ç€ä¸»è½´æ–¹å‘è¿›è¡Œå¸ƒå±€ã€‚ä¸»è½´é»˜è®¤æ–¹å‘æ˜¯ä»å·¦åˆ°å³ï¼Œäº¤å‰è½´åˆ™æ˜¯ä»ä¸Šåˆ°ä¸‹ã€‚</p><p><code>css3</code> é‡Œå…³äº <code>flexbox</code> å®šä¹‰äº†2ç±»çš„æ ·å¼ï¼Œåˆ†åˆ«æ˜¯ä½œç”¨äº <code>flex</code> å®¹å™¨ä¸Šçš„å’Œä½œç”¨äº <code>flex</code> é¡¹ç›®ä¸Šçš„ã€‚</p><h2 id="flexå®¹å™¨"><a href="#flexå®¹å™¨" class="headerlink" title="flexå®¹å™¨"></a>flexå®¹å™¨</h2><p>èƒ½ä½œç”¨åˆ° <code>flex</code> å®¹å™¨ä¸Šçš„æ ·å¼æœ‰è¿™ä¹ˆå‡ ä¸ªï¼š<code>flex-direction</code>ï¼Œ<code>flex-wrap</code>ï¼Œ<code>flex-flow</code>ï¼Œ<code>justify-content</code>ï¼Œ<code>align-items</code> å’Œ <code>align-content</code>ã€‚çœ‹åˆ°è¿™ä¹ˆå‡ ä¸ªä¸œè¥¿ï¼Œåˆ«è¢«å®ƒä»¬å“åäº†ï¼Œå¤šè¯»å‡ éä½ å°±èƒ½çŒœä¸ªå…«ä¹ä¸ç¦»åå®ƒä»¬æ˜¯å¹²å˜›ç”¨çš„äº†ã€‚ä¸‹é¢æˆ‘ä»¬ä¸€ä¸€æ¥ä»‹ç»è¿™äº›æ ·å¼ã€‚</p><h3 id="flex-direction"><a href="#flex-direction" class="headerlink" title="flex-direction"></a>flex-direction</h3><p>ç›¸ä¿¡ä½ ä¹Ÿå¤§æ¦‚çŸ¥é“äº†è¿™ä¸ªæ ·å¼çš„ä½œç”¨äº†ï¼Œå¯¹äº†å°±æ˜¯å’Œæ–¹å‘æœ‰å…³çš„ã€‚<code>flex-direction</code> è¿™ä¸ªæ ·å¼å°±æ˜¯ç”¨æ¥æ§åˆ¶ <code>main axis</code> çš„æ–¹å‘çš„ï¼Œé»˜è®¤å€¼ <code>row</code>ï¼Œè¡¨ç¤ºæ°´å¹³ä»å·¦åˆ°å³ã€‚</p><ul><li>rowï¼Œé»˜è®¤çš„å±æ€§å€¼ï¼Œæ°´å¹³æ–¹å‘ï¼Œä»å·¦åˆ°å³</li><li>columnï¼Œå‚ç›´æ–¹å‘ï¼Œä»ä¸Šåˆ°ä¸‹</li><li>row-reverseï¼Œæ°´å¹³æ–¹å‘ï¼Œä»å³åˆ°å·¦</li><li>column-reverseï¼Œå‚ç›´æ–¹å‘ï¼Œä»ä¸‹åˆ°ä¸Š</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: row; <span class="comment">/* column || row-reverse || column-reverse */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸€å¼ å›¾ï¼Œä½ å°±æ›´å¥½ç†è§£äº†ï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201704/flex_direction.png" alt="flex-direction"></p><h3 id="flex-wrap"><a href="#flex-wrap" class="headerlink" title="flex-wrap"></a>flex-wrap</h3><p><code>flex-wrap</code> è§„å®šäº† <code>flex</code> é¡¹ç›®åœ¨ä¸»è½´ä¸Šæ˜¯æŒ‰ç…§ä¸€è¡Œè¿˜æ˜¯å¤šè¡Œæ˜¾ç¤ºã€‚</p><ul><li><code>nowrap</code>ï¼Œé»˜è®¤å±æ€§ï¼Œå•è¡Œæ˜¾ç¤ºï¼Œä¼šå°½åŠ›çš„å‹ç¼©æ¯ä¸ª <code>flex</code> é¡¹ç›®ç›´åˆ°åˆšå¥½å®¹ä¸‹é‡Œé¢çš„å†…å®¹ï¼Œå®åœ¨å‹ç¼©ä¸äº†çš„æ—¶å€™ <code>flex</code> é¡¹ç›®å°±å¯èƒ½ä¼šæº¢å‡ºå®¹å™¨ã€‚</li><li><code>wrap</code>ï¼Œå…è®¸å¤šè¡Œæ˜¾ç¤ºï¼Œå½“ä¸€è¡Œæ˜¾ç¤ºä¸ä¸‹çš„æ—¶å€™ï¼Œä¼šå˜æˆå¤šè¡Œæ˜¾ç¤ºã€‚</li><li><code>wrap-reverse</code>ï¼Œå¤šè¡Œæ˜¾ç¤ºï¼Œä¸”è¡Œçš„æ˜¾ç¤ºé¡ºåºæ˜¯ä»ä¸‹åˆ°ä¸Šï¼Œå³ç¬¬ä¸€è¡Œæ˜¾ç¤ºåœ¨å®¹å™¨çš„åº•éƒ¨ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: nowrap; <span class="comment">/* wrap || wrap-reverse */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201704/flex_wrap.png" alt="flex-wrap"></p><h3 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a>flex-flow</h3><p><code>flex-flow</code> æ˜¯ä¸€ä¸ªå¤åˆå±æ€§ï¼Œæ˜¯ç”± <code>flex-direction</code> å’Œ <code>flex-wrap</code> ç»„æˆçš„å±æ€§ã€‚å¦‚æœåªå®šä¹‰äº†ä¸€ä¸ªå±æ€§ï¼Œé‚£ä¹ˆå¦å¤–ä¸€ä¸ªå±æ€§å–é»˜è®¤å€¼ã€‚ä¸”å±æ€§ä¹¦å†™é¡ºåºæ²¡æœ‰ç‰¹åˆ«è¦æ±‚ã€‚</p><ul><li><code>row nowrap</code>ï¼Œè¿™æ˜¯é»˜è®¤å±æ€§å€¼</li><li><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-flow</span>: row wrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201704/flex_flow.png" alt="flex-flow"></p><h3 id="justify-content"><a href="#justify-content" class="headerlink" title="justify-content"></a>justify-content</h3><p><code>justify-content</code> è§„å®šäº† <code>flex</code> é¡¹ç›®åœ¨ä¸»è½´çš„å¯¹é½æ–¹å¼ã€‚æ¯”å¦‚å½“ <code>flex-direction</code> è¢«è®¾ç½®ä¸º <code>column</code> æ—¶ï¼Œ<code>justify-content</code> å®šä¹‰çš„æ˜¯å‚ç›´æ–¹å‘ä¸Šçš„å¯¹é½æ–¹å¼ã€‚</p><ul><li><code>flex-start</code>, é»˜è®¤å±æ€§å€¼ï¼Œ<code>flex</code>é¡¹ç›®å°†å‘ç€ä¸»è½´èµ·å§‹ä½ç½®å¯¹é½</li><li><code>flex-end</code>, <code>flex</code> é¡¹ç›®å°†å‘ç€ä¸»è½´ç»“æŸä½ç½®å¯¹é½</li><li><code>center</code>, <code>flex</code> é¡¹ç›®å°†åœ¨ä¸»è½´ä¸Šå±…ä¸­å¯¹é½</li><li><code>space-between</code>, <code>flex</code> é¡¹ç›®å°†åœ¨ä¸»è½´ä¸Šä»¥ç›¸åŒçš„é—´è·è´´ç€è½´çš„ä¸¤ç«¯å¯¹é½</li><li><code>space-around</code>, <code>flex</code> é¡¹ç›®å°†åœ¨ä¸»è½´ä¸Šä»¥ç›¸åŒçš„é—´è·é ç€ä¸¤ç«¯å¯¹é½ï¼Œä¸”ç¬¬ä¸€ä¸ªå¤´å°¾é¡¹ç›®å’Œè½´çš„ä¸¤ç«¯ä¹‹é—´å­˜åœ¨é—´è·ï¼Œé—´è·æ˜¯ä¸¤ä¸ªé¡¹ç›®é—´è·çš„ä¸€åŠ</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201704/justify_content.png" alt="justify-content"></p><h3 id="align-items"><a href="#align-items" class="headerlink" title="align-items"></a>align-items</h3><p>å±…ç„¶æœ‰ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ï¼Œé‚£ä¹ˆè‚¯å®šä¹Ÿæœ‰ç›¸å…³çš„å±æ€§æ˜¯ç”¨æ¥å®šä¹‰äº¤å‰è½´ä¸Šçš„å¯¹é½è§„åˆ™çš„ã€‚å’Œ <code>justify-content</code> ä¸€æ ·ï¼Œ<code>align-items</code> ä¹Ÿæœ‰5ä¸ªå±æ€§å®šä¹‰ï¼Œå…¶ä¸­ <code>flex-start</code>ï¼Œ<code>flex-end</code> å’Œ <code>center</code> æ˜¯ä¸€æ ·çš„ï¼Œå°±ä¸å¤šä»‹ç»äº†ã€‚æ¥è¯´è¯´ä¸¤ä¸ªä¸åŒçš„ï¼š</p><ul><li><code>stretch</code>ï¼Œé»˜è®¤å±æ€§å€¼ï¼Œ<code>flex</code> é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šçš„å°ºå¯¸å¦‚æœæ²¡æœ‰æŒ‡å®šæˆ–è€…æ˜¯è¢«è®¾ç½®ä¸º <code>auto</code>ï¼Œé‚£ä¹ˆå®ƒå°†åœ¨è¿™ä¸ªæ–¹å‘ä¸Šå°½é‡å»¶ä¼¸ï¼Œç›´åˆ°é ç€å®¹å™¨è¾¹ç•Œï¼Œä½†æ˜¯åŒæ—¶å»¶ä¼¸çš„ç¨‹åº¦ä¹Ÿä¼šå—åˆ° <code>max-height</code> æˆ–è€… <code>max-width</code> çš„å½±å“</li><li><code>baseline</code>ï¼Œ<code>flex</code>é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼å°†æ˜¯ç”±æ¯ä¸ªé¡¹ç›®å†…å®¹çš„åŸºçº¿å†³å®š</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: flex-start;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201704/align_items.png" alt="align-items"></p><h3 id="align-content"><a href="#align-content" class="headerlink" title="align-content"></a>align-content</h3><p>ç†è§£äº† <code>justify-content</code> å’Œ <code>align-items</code> çš„å¯¹é½æ–¹å¼ï¼Œå†æ¥çœ‹ <code>align-content</code> å°±å®¹æ˜“ç†è§£å¤šäº†ã€‚å®ƒåªä½œç”¨äºå®¹å™¨ï¼Œä¸”åªèƒ½æ˜¯å­˜åœ¨å¤šä¸ªè¡Œçš„å®¹å™¨ã€‚æ³¨æ„è¿™é‡Œçš„è¡Œæ˜¯ç›¸å¯¹äºäº¤å‰è½´æ¥è¯´çš„ã€‚å±æ€§å€¼æœ‰6ä¸ªï¼š<code>flex-start</code>ï¼Œ<code>flex-end</code>ï¼Œ<code>center</code>ï¼Œ<code>stretch</code>ï¼Œ<code>space-between</code> å’Œ <code>space-around</code>ï¼Œè¿™äº›å¯¹é½æ–¹å¼ä¸Šé¢éƒ½ä»‹ç»è¿‡äº†ï¼Œå¤§åŒå°å¼‚ã€‚å…¶ä¸­é»˜è®¤å€¼æ˜¯<code>stretch</code>ã€‚ç»“åˆä¸‹å›¾æ¥åŠ æ·±ç†è§£ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    <span class="attribute">align-content</span>: space-around</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201704/align_content.png" alt="align-content"></p><h2 id="flexé¡¹ç›®"><a href="#flexé¡¹ç›®" class="headerlink" title="flexé¡¹ç›®"></a>flexé¡¹ç›®</h2><p>ä¸Šé¢ä»‹ç»äº†å®šä¹‰åœ¨ <code>flex</code> å®¹å™¨ä¸Šçš„ <code>css</code> å±æ€§ï¼Œè§„èŒƒäº†æ•´ä¸ªå®¹å™¨é‡Œæ‰€æœ‰é¡¹ç›®çš„å…¨å±€å‘ˆç°ã€‚è¿™æ ·ä¸å¤Ÿçµæ´»å¤šå˜ï¼Œä¸è¶³ä»¥è¡¨ç°æŸäº›éœ€è¦ç‰¹åˆ«æ˜¾ç¤ºçš„é¡¹ç›®ï¼Œæ‰€ä»¥é’ˆå¯¹è¿™ä¸€ç°çŠ¶ï¼Œ<code>w3c</code> ç¤¾åŒºåˆæ¨å‡ºäº†ä¸€å¥—ä½œç”¨äº <code>flex</code> é¡¹ç›®ä¸Šçš„ <code>css</code> å±æ€§ã€‚ä»–ä»¬åˆ†åˆ«æ˜¯ï¼š<code>align-self</code>ï¼Œ<code>order</code>ï¼Œ<code>flex-grow</code>ï¼Œ<code>flex-shrink</code>ï¼Œ<code>flex-basis</code> å’Œ <code>flex</code> ç­‰ <code>css</code> å±æ€§ã€‚</p><ul><li><code>align-self</code></li></ul><p><code>align-self</code> è§„å®šäº†å•ä¸ª <code>flex</code> é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ï¼Œå±æ€§å€¼å¯ä»¥æ˜¯ä¸‹é¢ä¸€ä¸ªï¼š<code>flex-start</code>ï¼Œ<code>flex-end</code>ï¼Œ<code>center</code>ï¼Œ<code>stretch</code>ï¼Œ<code>baseline</code>å’Œ <code>auto</code>ï¼Œå…¶ä¸­ <code>auto</code> ä¸ºé»˜è®¤å±æ€§å€¼ï¼Œå¦‚æœè¢«è®¾ç½®ä¸ºäº† <code>auto</code>ï¼Œé‚£ä¹ˆè¯¥ <code>flex</code> é¡¹ç›®æœ€ç»ˆçš„å¯¹é½æ–¹å¼å°†æ˜¯ç”±å®¹å™¨çš„ <code>align-items</code>å†³å®šã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">align-self</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201704/align_self.png" alt="align-self"></p><h3 id="order"><a href="#order" class="headerlink" title="order"></a>order</h3><p><code>order</code> å®šä¹‰äº† <code>flex</code> é¡¹ç›®åœ¨å®¹å™¨é‡Œçš„æ’åˆ—é¡ºåºã€‚å–å€¼å¯ä»¥æ˜¯è´Ÿæ•´æ•°ã€0ã€æ­£æ•´æ•°ï¼Œé»˜è®¤å–å€¼æ˜¯0ã€‚æ•°å€¼è¶Šå¤§è¶Šé è¿‘è½´å‘çš„æœ«ç«¯ï¼Œæ•°å€¼ç›¸åŒåˆ™æŒ‰ç…§ <code>html</code> é‡Œçš„é¡ºåºæ’åˆ—ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">order</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201704/order.png" alt="order"></p><h3 id="flex-grow"><a href="#flex-grow" class="headerlink" title="flex-grow"></a>flex-grow</h3><p><code>flex-grow</code> è§„å®šäº† <code>flex</code> é¡¹ç›®çš„ä¼¸å±•æ€§ï¼Œå…¶å€¼åªèƒ½æ˜¯ 0 æˆ–è€…æ­£æ•´æ•°ï¼Œé»˜è®¤å€¼æ˜¯ 0ã€‚å¦‚æœä¸€ä¸ª <code>flex</code> é¡¹ç›®åŒæ—¶è®¾ç½®äº†<code>width</code> å’Œå€¼ä¸ºæ­£æ•´æ•°çš„ <code>flex-grow</code> å±æ€§ï¼Œåˆ™ <code>width</code> å±æ€§å°†å¤±æ•ˆã€‚å–å€¼å¦‚æœæ˜¯0è¡¨ç¤ºä¸è¿›è¡Œä¼¸å±•ï¼›å¦‚æœæ˜¯æ­£æ•´æ•°ï¼Œåˆ™ä¼šè¿›è¡Œä¼¸å±•ï¼Œä¸”ä¼¸å±•çš„å°ºå¯¸å°†å’Œæ•°å€¼çš„å¤§å°æœ‰å…³ï¼Œå€¼è¶Šå¤§ï¼Œä¼¸å±•å¾—è¶Šå¤§ã€‚ä¼¸å±•çš„å…·ä½“è®¡ç®—æ•°å€¼æ˜¯è¯¥é¡¹ç›®å æ‰€æœ‰å¯ä¼¸å±•é¡¹ç›®æ€»å’Œçš„æ¯”ä¸è¿™äº›æ‰€æœ‰å¯ä¼¸å±•é¡¹ç›®å çš„å°ºå¯¸çš„ä¹˜ç§¯ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201704/flex_grow.png" alt="order"></p><h3 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a>flex-shrink</h3><p>ä¸ä¼¸å±•ç›¸å¯¹åº”çš„å±æ€§æ˜¯ <code>flex-shrink</code>ï¼Œå®šä¹‰äº†é¡¹ç›®çš„æ”¶ç¼©æ€§ï¼Œå€¼ä¹Ÿåªèƒ½æ˜¯ 0 æˆ–è€…æ­£æ•´æ•°ï¼Œé»˜è®¤å€¼æ˜¯ 1ã€‚å¦‚æœæ˜¯ 0 è¡¨ç¤ºä¸è¿›è¡Œæ”¶ç¼©ï¼Œå¦‚æœæ˜¯æ­£æ•´æ•°åˆ™è¡¨ç¤ºè¿›è¡Œæ”¶ç¼©ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®åŒæ—¶æ˜¾ç¤ºè®¾ç½®äº†å°ºå¯¸å’Œæ”¶ç¼©å€¼ä¸º 1ï¼Œé‚£ä¹ˆè¯¥é¡¹ç›®å°†è¿›è¡Œæ”¶ç¼©ï¼Œå®šä¹‰çš„å°ºå¯¸å°†å¤±æ•ˆã€‚<br>é¡¹ç›®èƒ½å¤Ÿè¿›è¡Œæ”¶ç¼©çš„å‰ææ˜¯å¿…é¡»äº§ç”Ÿæº¢å‡ºï¼Œå³æ‰€æœ‰é¡¹ç›®æ‰€å å°ºå¯¸ä¹‹å’Œå¿…é¡»å¤§äºå®¹å™¨å°ºå¯¸ã€‚è¿™ä¸ªæ—¶å€™å®¹å™¨é‡Œæ‰€æœ‰å¯æ”¶ç¼©çš„é¡¹ç›®å°±éœ€è¦é€šè¿‡æ”¶ç¼©æ¥æ¶ˆåŒ–æ‰è¿™éƒ¨åˆ†æº¢å‡ºçš„å°ºå¯¸ã€‚è€Œæ¯ä¸ªé¡¹ç›®å…·ä½“çš„æ”¶ç¼©é‡åˆ™ç”±å…¶è®¾ç½®çš„æ”¶ç¼©æ¯”ä¾‹å†³å®šï¼Œæ•°å€¼è¶Šå¤§ï¼Œæ”¶ç¼©å¾—è¶Šå‰å®³ã€‚æ¯”å¦‚ä¸€ä¸ªå®¹å™¨çš„å°ºå¯¸æ˜¯ <code>400px</code>ï¼Œåªæœ‰2ä¸ªé¡¹ç›®ä¸”å°ºå¯¸éƒ½æ˜¯ <code>300px</code>ï¼Œæ”¶ç¼©æ¯”ä¾‹æ˜¯ 1 æ¯” 3ï¼Œé‚£ä¹ˆå®¹å™¨å°†æº¢å‡º <code>200px</code>ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªé¡¹ç›®éœ€è¦æ”¶ç¼© <code>50px</code>ï¼Œç¬¬äºŒä¸ªé¡¹ç›®éœ€è¦æ”¶ç¼© <code>150px</code>ï¼Œé‚£ä¹ˆæ”¶ç¼©å®Œæˆåå®ƒä»¬å æ®çš„å°ºå¯¸åˆ†åˆ«æ˜¯ <code>250px</code> å’Œ <code>150px</code>ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201704/flex_shrink.png" alt="flex-shrink"></p><h3 id="flex-basis"><a href="#flex-basis" class="headerlink" title="flex-basis"></a>flex-basis</h3><p><code>flex-basis</code> å®šä¹‰äº†é¡¹ç›®åœ¨ä¼¸ç¼©ä¹‹å‰çš„åˆå§‹å°ºå¯¸ï¼Œå¯ä»¥æ˜¯é•¿åº¦è®¾ç½®ï¼ˆ<code>px</code>ã€<code>rem</code> å’Œ <code>em</code> ç­‰ï¼‰ï¼›å¯ä»¥æ˜¯ç”¨ç™¾åˆ†æ¯”åŸºäºçˆ¶çº§æ¥è®¡ç®—å°ºå¯¸ï¼›ä¹Ÿå¯ä»¥æ˜¯é»˜è®¤çš„ <code>auto</code>ï¼Œè¡¨ç¤ºå…¶å°ºå¯¸ç”±å†…å®¹å†³å®šã€‚é™¤äº† <code>auto</code> å¤–ï¼Œå¦‚æœå°ºå¯¸æº¢å‡ºå®¹å™¨äº†ï¼Œé‚£ä¹ˆè®¾ç½®äº† <code>flex-basis</code> çš„é¡¹ç›®é—´ï¼Œåˆ™ä¼šæ ¹æ®æ¯é¡¹è®¾ç½®çš„åŸºå‡†å€¼ï¼ŒæŒ‰æ¯”ç‡ä¼¸ç¼©å‰©ä½™ç©ºé—´ã€‚</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201704/flex_basis.png" alt="flex-basic"></p><h3 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h3><p><code>flex</code> æ˜¯ä¸€ä¸ªå¤åˆå±æ€§ï¼Œæ˜¯ç”±<code>flex-grow</code>ã€<code>flex-shrink</code> å’Œ <code>flex-basis</code> ç»„æˆçš„ã€‚</p><ul><li><code>flex-grow</code> ï¼Œç”¨æ¥æŒ‡å®šæ‰©å±•æ¯”ç‡ï¼Œåœ¨ <code>flex</code> å±æ€§ä¸­è¯¥å€¼å¦‚æœè¢«çœç•¥åˆ™é»˜è®¤ä¸º1</li><li><code>flex-shrink</code>ï¼Œç”¨æ¥æŒ‡å®šæ”¶ç¼©æ¯”ç‡ï¼Œåœ¨æ”¶ç¼©çš„æ—¶å€™æ”¶ç¼©æ¯”ç‡ä¼šä»¥ä¼¸ç¼©åŸºå‡†å€¼åŠ æƒï¼Œåœ¨ <code>flex</code> å±æ€§ä¸­è¯¥å€¼å¦‚æœè¢«çœç•¥åˆ™é»˜è®¤ä¸º1</li><li><code>flex-basis</code>ï¼Œç”¨æ¥æŒ‡å®šä¼¸ç¼©åŸºå‡†å€¼ï¼Œå³åœ¨æ ¹æ®ä¼¸ç¼©æ¯”ç‡è®¡ç®—å‡ºå‰©ä½™ç©ºé—´çš„åˆ†å¸ƒä¹‹å‰ï¼Œè¡¨ç¤ºå°ºå¯¸çš„èµ·å§‹æ•°å€¼ã€‚åœ¨ <code>flex</code> å±æ€§ä¸­è¯¥å€¼å¦‚æœè¢«çœç•¥åˆ™é»˜è®¤ä¸º <code>0%</code>ã€‚åœ¨flexå±æ€§ä¸­è¯¥å€¼å¦‚æœè¢«æŒ‡å®šä¸º <code>auto</code>ï¼Œåˆ™ä¼¸ç¼©åŸºå‡†å€¼çš„è®¡ç®—å€¼æ˜¯è‡ªèº«çš„ <code>width</code> è®¾ç½®ï¼Œå¦‚æœè‡ªèº«çš„å®½åº¦æ²¡æœ‰å®šä¹‰ï¼Œåˆ™é•¿åº¦å–å†³äºå†…å®¹ã€‚</li></ul><p>ä¸€äº›ç¼©å†™è¯´æ˜ï¼š</p><ul><li><code>flex: 1</code>, åˆ™å…¶è®¡ç®—å€¼ä¸º<code>1 1 0%</code></li><li><code>flex: auto</code>, åˆ™å…¶è®¡ç®—å€¼ä¸º<code>1 1 auto</code></li><li><code>flex: none</code>, åˆ™å…¶è®¡ç®—å€¼ä¸º<code>0 0 auto</code></li><li><code>flex: 0 auto</code> æˆ–è€…<code>flex: initial</code>, åˆ™å…¶è®¡ç®—å€¼ä¸º<code>0 1 auto</code></li></ul><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201704/flex.png" alt="flex"></p><h2 id="å…¼å®¹æ€§"><a href="#å…¼å®¹æ€§" class="headerlink" title="å…¼å®¹æ€§"></a>å…¼å®¹æ€§</h2><p><code>flex</code> å¸ƒå±€åœ¨ç°ä»£æµè§ˆå™¨ä¸­å…¼å®¹æ€§è¿˜æ˜¯æ¯”è¾ƒä»¤äººæ»¡æ„çš„ã€‚<a href="http://caniuse.com/#feat=flexbox">å¯ä»¥å»caniuseé‡Œçœ‹çœ‹</a>ï¼Œæˆ–è€…ç›´æ¥çœ‹è¿™ä¸ªç”¨ <code>flex</code> å¸ƒå±€å†™çš„æ¡ˆä¾‹catty-music</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201704/caniuse.png" alt="caniuse"></p><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><ul><li><a href="http://www.w3cplus.com/css3/understanding-flexbox-everything-you-need-to-know.html">ç†è§£Flexboxï¼šä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSSå±…ä¸­å®Œæ•´ç¯‡</title>
      <link href="/2017/04/13/css-center-skill/"/>
      <url>/2017/04/13/css-center-skill/</url>
      
        <content type="html"><![CDATA[<h2 id="æ°´å¹³å±…ä¸­"><a href="#æ°´å¹³å±…ä¸­" class="headerlink" title="æ°´å¹³å±…ä¸­"></a>æ°´å¹³å±…ä¸­</h2><ul><li><p><code>inline</code> æˆ– <code>inline-*</code> å…ƒç´ </p><p>  æ­¤ç±»å…ƒç´ éœ€è¦æ°´å¹³å±…ä¸­ï¼Œåˆ™çˆ¶çº§å…ƒç´ å¿…é¡»æ˜¯å—çº§å…ƒç´ (<code>block level</code>)ï¼Œä¸”çˆ¶çº§å…ƒç´ ä¸Šéœ€è¦è¿™æ ·è®¾ç½®æ ·å¼ï¼š</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å—çº§å…ƒç´ </p><p>  å—çº§å…ƒç´ æ°´å¹³å±…ä¸­ï¼Œéœ€è¦è®¾ç½® <code>margin-left</code> å’Œ <code>margin-right</code> ä¸º <code>auto</code>ï¼Œä¸”éœ€è¦æ˜¾ç¤ºè®¾ç½®å®½åº¦ï¼Œä¸ç„¶å°±å æ»¡æ•´è¡Œï¼Œå°±æ— æ‰€è°“æ°´å¹³å±…ä¸­äº†ã€‚</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.block</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><a id="more"></a><ul><li><p>åŒä¸€è¡Œå¤šä¸ªå—çº§å…ƒç´ </p><p>  å¦‚æœæ˜¯åœ¨åŒä¸€è¡Œé‡Œéœ€è¦å±…ä¸­å¤šä¸ªå—çº§å…ƒç´ ï¼Œå¯ä»¥å°è¯•ä¸‹é¢çš„ä¸¤ç§æ–¹æ³•ï¼š</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æ–¹æ³•ä¸€ */</span></span><br><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parent</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æ–¹æ³•äºŒ */</span></span><br><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">    <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">-webkit-box-pack</span>: center;</span><br><span class="line">    <span class="attribute">-ms-flex-pack</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="å‚ç›´å±…ä¸­"><a href="#å‚ç›´å±…ä¸­" class="headerlink" title="å‚ç›´å±…ä¸­"></a>å‚ç›´å±…ä¸­</h2><p>å‚ç›´å±…ä¸­åœ¨ <code>CSS</code> ä¸­æ¯”è¾ƒä¸å¥½å¤„ç†ã€‚</p><ul><li><p>å•è¡Œæ–‡æœ¬</p><p>  é€šè¿‡è®¾ç½®ä¸Šä¸‹å†…é—´è·ä¸€è‡´è¾¾åˆ°å‚ç›´å±…ä¸­çš„æ•ˆæœï¼š</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.single-line</span> &#123;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  é€šè¿‡è®¾ç½® <code>height</code> å’Œ <code>line-height</code> ä¸€è‡´è¾¾åˆ°å‚ç›´å±…ä¸­ï¼š</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.single-line</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¤šè¡Œæ–‡æœ¬</p><p>  é€šè¿‡ä½¿ç”¨è¡¨æ ¼æ¥å‚ç›´å±…ä¸­ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•æ˜¾å¾—å¾ˆç´¯èµ˜ï¼š</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>é€šè¿‡è¡¨æ ¼ä½¿å¾—å¤šè¡Œæ–‡æœ¬è‡ªåŠ¨å‚ç›´å±…ä¸­é€šè¿‡è¡¨æ ¼ä½¿å¾—å¤šè¡Œæ–‡æœ¬è‡ªåŠ¨å‚ç›´å±…ä¸­é€šè¿‡è¡¨æ ¼ä½¿å¾—å¤šè¡Œæ–‡æœ¬è‡ªåŠ¨å‚ç›´å±…ä¸­<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><p>  é€šè¿‡è®¾ç½® <code>vertical-align</code> å±æ€§å’Œå°†å…ƒç´ è®¾ç½®ä¸º <code>table-cell</code>ï¼Œä¸”çˆ¶å…ƒç´ è¦è®¾ç½®ä¸º <code>table</code> å…ƒç´ ï¼Œè¿™ä¸ªå’Œä¸Šé¢é‚£ç§åŸç†å…¶å®æ˜¯ä¸€æ ·çš„ï¼š</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parent</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: table-cell;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  é€šè¿‡ä¼¸ç¼©ç›’æ¥å‚ç›´å±…ä¸­ï¼š</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex-vertically</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-align-items</span>: center;</span><br><span class="line">    <span class="attribute">-ms-flex-align</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å—çº§å…ƒç´ å‚ç›´å±…ä¸­</p><p>  çŸ¥é“å—å…ƒç´ çš„é«˜åº¦ï¼Œé‚£ä¹ˆä½¿ç”¨ç»å¯¹å®šä½å’Œè´Ÿçš„ <code>margin</code> å³å¯å®ç°å‚ç›´å±…ä¸­ï¼š</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parent</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">25px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  å—çº§å…ƒç´ é«˜åº¦æ˜¯å¯å˜çš„ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨ <code>transform</code> çš„Yè½´å¹³ç§»æ¥å®ç°äº†ï¼š</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parent</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>flexbox</code>:</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flexbox;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  å¦‚æœå¯¹äºå—çº§å…ƒç´ é«˜åº¦ä¸æ˜¯å›ºå®šçš„ï¼Œä¸”ä¸ç”±å†…å®¹å†³å®šï¼Œé‚£ä¹ˆè¿˜å¯ä»¥è¿™ä¹ˆè®¾ç½®ï¼š</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parent</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">30%</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">30%</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="æ°´å¹³å‚ç›´å±…ä¸­"><a href="#æ°´å¹³å‚ç›´å±…ä¸­" class="headerlink" title="æ°´å¹³å‚ç›´å±…ä¸­"></a>æ°´å¹³å‚ç›´å±…ä¸­</h2><p>æ°´å¹³å‚ç›´å±…ä¸­å°±æ˜¯æŠŠä¸Šé¢ä»‹ç»çš„æ–¹æ³•ç›¸ç»“åˆå°±å¯ä»¥äº†ã€‚</p><ul><li><p>çŸ¥é“å®½é«˜çš„ç›’å­</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: realtive;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parent</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">posotion</span>: absoltue;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">150px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¸çŸ¥é“å®½é«˜çš„ç›’å­</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: realtive;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parent</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">posotion</span>: absoltue;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ <code>flexbox</code></p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>chromeå¼€å‘è€…å·¥å…·å®ç”¨å°æŠ€å·§</title>
      <link href="/2017/03/30/chrome-devtools/"/>
      <url>/2017/03/30/chrome-devtools/</url>
      
        <content type="html"><![CDATA[<p><code>chrome</code> æµè§ˆå™¨æ˜¯æ¯ä¸ªå‰ç«¯å¼€å‘è€…æœ€å¸¸ç”¨çš„æµè§ˆå™¨ï¼Œå› ä¸ºç•Œé¢ç®€æ´å‹å¥½ï¼Œå¼€å‘è€…å·¥å…·åŠŸèƒ½å¼ºå¤§ä¸”ç®€å•æ˜“ç”¨ï¼Œå¤§å¤§æå‡äº†å¼€å‘æ•ˆç‡ã€‚æ‰€ä»¥å¾ˆæœ‰å¿…è¦äº†è§£ <code>chrome</code> å¼€å‘è€…å·¥å…·éƒ½æœ‰å“ªäº›å¾ˆå¸¸ç”¨æˆ–å®ç”¨çš„åŠŸèƒ½ã€‚<br>å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œchromeçš„ç‰ˆæœ¬å¦‚ä¸‹ï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_01.png" alt="chromeç‰ˆæœ¬"></p><a id="more"></a><h2 id="Elementsé¢æ¿ç¯‡"><a href="#Elementsé¢æ¿ç¯‡" class="headerlink" title="Elementsé¢æ¿ç¯‡"></a>Elementsé¢æ¿ç¯‡</h2><ul><li><p>åœ¨ <code>Elements</code> é¢æ¿ä¸­ï¼Œä½¿ç”¨ <code>Ctrl + F</code> æ‰“å¼€æœç´¢è¾“å…¥æ¡†ï¼Œå¯ä»¥è¾“å…¥å¸¸è§„å­—ç¬¦ä¸²æˆ–é€‰æ‹©å™¨æ¥é€‰æ‹© <code>HTML</code> å…ƒç´ ã€‚</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_02.png" alt="ctrl+f"></p></li><li><p>åœ¨å…ƒç´ å‰é¢çš„å°é»‘ä¸‰è§’ä¸Šç”¨ <code>Alt +</code> é¼ æ ‡å·¦é”®å³å¯å±•å¼€æ”¶èµ·å½“å‰å…ƒç´ ä¸‹çš„æ‰€æœ‰å­å…ƒç´ ã€‚</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_03.png" alt="alt+left"></p></li><li><p>cssæ•°å€¼ä½¿ç”¨å¿«æ·é”®è°ƒæ•´ï¼š</p><ul><li><p><code>Up / Down</code>ï¼šå¢åŠ å‡å°‘1</p></li><li><p><code>Ctrl + Up / Ctrl + Down</code>ï¼šå¢åŠ å‡å°‘100</p></li><li><p><code>Shift + Up / Shift + Down</code>ï¼šå¢åŠ å‡å°‘10</p></li><li><p><code>Alt + Up / Alt + Down</code>ï¼š å¢åŠ å‡å°‘0.1</p></li><li><p><code>Up / Down</code> ç­‰åŒäºé¼ æ ‡æ»šè½®</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_04.png" alt="css-number-value"></p></li></ul></li><li><p>æŸ¥çœ‹äº‹ä»¶ç›‘å¬å™¨ã€‚é€‰ä¸­ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åç‚¹å‡» <code>Event Listeners</code> é¢æ¿ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰å…ƒç´ ç»‘å®šçš„æ‰€æœ‰äº‹ä»¶ã€‚ç„¶åæ‰¾åˆ°ä»»ä¸€äº‹ä»¶ç±»å‹ä¸‹çš„ <code>handler</code>ï¼Œå³é”®å•å‡»é€‰æ‹© <code>Show function definition</code> å³å¯åœ¨ <code>Source</code> é¢æ¿ä¸­æ‰“å¼€ä¸”å®šä½åˆ°å½“å‰äº‹ä»¶çš„å¤„ç†å‡½æ•°çš„æ‰€åœ¨ä½ç½®ã€‚</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_05.png" alt="event-listeners"></p></li><li><p>ç‚¹å‡»é¢œè‰²æ–¹æ ¼ä¼šæ‰“å¼€ <code>chrome</code> çš„è°ƒè‰²æ¿ã€‚å¦‚ä¸‹å›¾ç¬¬1å—æ˜¯ç€è‰²å’Œé˜´å½±é€‰æ‹©å™¨ã€‚ç¬¬2å—åƒç¬”é‚£ä¸ªæŒ‰é’®( <code>toggle color picker</code> )æ˜¯å–è‰²å™¨ï¼Œè“è‰²çš„æ—¶å€™è¡¨ç¤ºæ¿€æ´»çŠ¶æ€ï¼Œå°±å¯ä»¥åœ¨é¡µé¢ä»»ä½•ä¸€å¤„è¿›è¡Œå–è‰²ï¼›å³è¾¹ç»¿è‰²åœ†å½¢çš„æ˜¯å½“å‰çš„é¢œè‰²å€¼ï¼Œç‚¹å‡»ä¼šå°†å½“å‰é¢œè‰²å€¼çš„ä»£ç å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼›å†å³è¾¹çš„ä¸¤å—æ¡åˆ†åˆ«è¡¨ç¤ºè‰²è°ƒé€‰æ‹©å™¨å’Œä¸é€æ˜åº¦é€‰æ‹©å™¨ã€‚ç¬¬3å—æ˜¯è¡¨ç¤ºå½“å‰é¢œè‰²çš„æ˜¾ç¤ºæ¨¡å¼ï¼Œåè¾¹çš„æŒ‰é’®å¯ä»¥åˆ‡æ¢æ˜¾ç¤ºæ¨¡å¼ã€‚ç¬¬4å—ï¼Œ<code>Color Palettes</code> é‡Œåˆ†3å°å—ï¼Œåˆ†åˆ«æ˜¯ï¼š<code>Material Design</code>ï¼Œä¸€ç»„ç¬¦åˆ <code>Material Design</code> è§„èŒƒçš„é¢œè‰²ï¼›<code>Page Colors</code>ï¼Œä¸€ç»„ä»é¡µé¢çš„ <code>CSS</code> è‡ªåŠ¨ç”Ÿæˆçš„é¢œè‰²ï¼›<code>Custom</code>ï¼Œè‡ªå®šä¹‰é¢œè‰²ã€‚ç¬¬5å—é¢œè‰²é¢æ¿ï¼Œé•¿æŒ‰é¢œè‰²å—å¯ä»¥å¼¹å‡º10ä¸ªå½“å‰é¢œè‰²ç”±æµ…è‡³æ·±çš„å°è‰²å—ï¼Œè¿™ä¸ªåŠŸèƒ½å¯¹äºç²¾ç¡®å®šåˆ¶ç½‘é¡µä¸»é¢˜é¢œè‰²éå¸¸æœ‰å¸®åŠ©ã€‚ç¬¬6å—æ˜¯è‡ªå®šä¹‰é¢œè‰²ï¼Œè¿™é‡Œå¯ä»¥æ·»åŠ åˆ é™¤è‡ªå®šä¹‰é¢œè‰²ï¼Œå¹¶ä¸”ä¼šæ°¸ä¹…ä¿å­˜åœ¨ <code>chrome</code> çš„ <code>DevTools</code> é‡Œï¼Œä¸ä¼šå› ä¸ºåˆ·æ–°æˆ–å…³é—­æµè§ˆå™¨è€Œæ¶ˆå¤±ã€‚ç¬¬7å—æ˜¯ç”Ÿæˆäº†ä¸€äº›å’Œé¡µé¢ç›¸å…³çš„é¢œè‰²å€¼ã€‚</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_06.png" alt="color-palette"></p></li><li><p>å¯è§†åŒ– <code>Shadow DOM</code>ã€‚åœ¨ <code>dom</code> å…ƒç´ åˆ—è¡¨ä¸­ï¼Œéƒ½æ˜¯æˆ‘ä»¬å†™çš„çœ‹å¾—è§çš„å…ƒç´ ã€‚å…¶å®åœ¨æ„å»º <code>dom</code> çš„æ—¶å€™ï¼Œä¹Ÿå­˜åœ¨ä¸€éƒ¨åˆ†ä¸œè¥¿æ˜¯æˆ‘ä»¬æ²¡å†™çš„ï¼Œä½†æ˜¯å®é™…å­˜åœ¨è€Œè¢«æµè§ˆå™¨éšè—èµ·æ¥çš„å…ƒç´ ã€‚å¦‚æœæƒ³çœ‹åˆ°è¿™äº›å…ƒç´ å°±å¯ä»¥é€šè¿‡å‹¾é€‰ <code>Settings</code> -&gt; <code>Preferences</code> -&gt; <code>Elements</code> ä¸‹çš„ <code>Show user agent shadow DOM</code> æ¥æ˜¾ç¤ºè¿™æ ·æ„å»ºçš„å…ƒç´ ã€‚è¿™æ ·ä¸€æ¥å°±å¯ä»¥å¾ˆå¥½çš„è¿™äº›å…ƒç´ çš„æ ·å¼äº†ã€‚</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_07.png" alt="shadow-dom"></p></li><li><p>ç»™å…ƒç´ æ·»åŠ çŠ¶æ€ã€‚å…ƒç´ æœ‰4ç§ç”¨æˆ·è¡Œä¸ºçŠ¶æ€ï¼š:<code>active</code>ã€<code>:hover</code>ã€<code>:focus</code>ã€<code>:visited</code>ã€‚å¯ä»¥é€šè¿‡2ä¸­æ–¹å¼ä¸»åŠ¨è§¦å‘ç”¨æˆ·è¡Œä¸ºã€‚é€‰ä¸­ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åå³é”®ç‚¹å‡»é€‰ä¸­ä¸€ä¸ªçŠ¶æ€å³å¯ï¼Œå¦‚æœæœ‰è®¾ç½®å¯¹äºçš„æ ·å¼ï¼Œå°±å¯ä»¥çœ‹åˆ°åŒºåˆ«ã€‚å¦å¤–ä¸€ç§æ–¹å¼æ˜¯åœ¨ <code>Styles</code>é¢æ¿ä¸­è¿›è¡Œè®¾ç½®ã€‚</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_08.png" alt="ele-state"></p></li><li><p>ä½¿ç”¨ <code>Tab</code> é”®å¯ä»¥åœ¨ <code>CSS</code> æ ·å¼è§„åˆ™ä¸­è¿›è¡Œéå†é€‰å®šï¼Œé€‰å®šçš„ç›®æ ‡åŒ…æ‹¬ï¼šé€‰æ‹©å™¨ã€å±æ€§å’Œå±æ€§å€¼ã€‚å¦‚æœæƒ³è·³å›ä¸Šä¸€ä¸ªç›®æ ‡ï¼Œä½¿ç”¨ <code>Shift + Tab</code>ã€‚ä½†æ˜¯å†ä½¿ç”¨å¿«æ·é”®åˆ‡æ¢é€‰å®šä¹‹å‰éœ€è¦å…ˆè®©å…‰æ ‡åœ¨ <code>Styles</code> é¢æ¿ï¼Œå¤„äºè¾“å…¥çŠ¶æ€å³å¯ã€‚</p></li></ul><h2 id="Consoleé¢æ¿ç¯‡"><a href="#Consoleé¢æ¿ç¯‡" class="headerlink" title="Consoleé¢æ¿ç¯‡"></a>Consoleé¢æ¿ç¯‡</h2><ul><li><p>ä½¿ç”¨ <code>$0-$4</code> é€‰æ‹©å…ƒç´ ã€‚<code>$0</code> è¿”å›æœ€åä¸€æ¬¡é€‰æ‹©çš„å…ƒç´ ï¼Œ<code>$1</code> è¿”å›ä»…åœ¨æœ€åä¸€æ¬¡ä¹‹å‰é€‰æ‹©çš„å…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚<code>$(selector)</code> è¿”å›å¸¦æœ‰æŒ‡å®š <code>CSS</code> é€‰æ‹©å™¨çš„ç¬¬ä¸€ä¸ªDOMå…ƒç´ çš„å¼•ç”¨ã€‚<code>$$(selector)</code> è¿”å› <code>CSS</code> é€‰æ‹©æ‰€æœ‰åŒ¹é…çš„å…ƒç´ æ•°ç»„ã€‚</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_09.png" alt="$_selector"></p>  <div class="tip">      å¦‚æœé¡µé¢ä½¿ç”¨äº†ç±» `Jquery` åº“ï¼Œåˆ™ `$(selector)` åŠŸèƒ½å°†è¢«è¦†ç›–ï¼Œ `$` å°†ä¸è¯¥åº“çš„å®ç°å¯¹åº”ã€‚  </div></li><li><p>ä¸€äº›å®ç”¨çš„æ–¹æ³•:</p><ul><li><p><code>console.log()</code>ã€<code>console.info()</code>ã€<code>console.warn()</code>ã€<code>console.error()</code>æ‰“å°ä¸åŒçš„çŠ¶æ€ä¿¡æ¯</p></li><li><p>ä½¿ç”¨CSSè®¾ç½®æ§åˆ¶å°è¾“å‡ºæ ·å¼ï¼Œåˆ©ç”¨CSSæ ¼å¼è¯´æ˜ç¬¦%cã€‚</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_17.png" alt="css-format"></p></li><li><p><code>copy(object)</code>ï¼Œå°†æŒ‡å®šå¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚</p></li><li><p><code>getEventListeners(object)</code>ï¼Œè¿”å›ä¸€ä¸ªåœ¨æŒ‡å®šå…ƒç´ ä¸Šç»‘å®šçš„æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨çš„æ•°ç»„ã€‚ä½†æ˜¯è¿™é‡Œçœ‹ä¸äº†äº‹ä»¶çš„å¤„ç†å‡½æ•°ï¼Œä¹Ÿæ²¡æœ‰åƒ <code>Event Listeners</code> é¢æ¿é‚£è¾¹ <code>show function definition</code> é‚£æ ·çš„åŠŸèƒ½ã€‚</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_13.png" alt="ctrl+p"></p></li><li><p><code>inspect(elem)</code>ï¼Œ è·³è½¬åˆ° <code>Elements</code> é¢æ¿çš„æŒ‡å®šå…ƒç´ èŠ‚ç‚¹</p></li></ul></li><li><p><code>console.time(str)</code> å’Œ <code>console.timeEnd(str)</code> è¿”å›è¿™ä¸­é—´é—´éš”çš„æ—¶é—´ã€‚ä¸‹å›¾çš„ <code>4.24e+3ms</code> æ˜¯æ•°å­—çš„ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºï¼Œè¡¨ç¤ºçš„å®é™…å€¼æ˜¯ï¼š<code>4.24*10*10*10ms</code>ï¼Œå³4.24ç§’ã€‚</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_12.png" alt="console.time"></p></li></ul><h2 id="Sourcesé¢æ¿ç¯‡"><a href="#Sourcesé¢æ¿ç¯‡" class="headerlink" title="Sourcesé¢æ¿ç¯‡"></a>Sourcesé¢æ¿ç¯‡</h2><ul><li><p><code>Ctrl + Shift + F</code>ï¼Œæ ¹æ®æ–‡ä»¶å†…å®¹æŸ¥æ‰¾æ‰€æœ‰ç«™å†…èµ„æºæ–‡ä»¶ï¼Œè¿”å›æ‰¾å‡ºåŒ¹é…çš„æ–‡ä»¶å†…å®¹ã€‚è¿™ä¸ªåŠŸèƒ½å¾ˆå¥½ç”¨ã€‚æ¯”å¦‚æˆ‘åœ¨åˆ«äººçš„ç«™ç‚¹çœ‹åˆ°ä¸€ä¸ªæ•ˆæœï¼Œä½†æ˜¯ä¸çŸ¥é“å†™åˆ°å“ªä¸ªæ–‡ä»¶é‡Œäº†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘å°±å¯ä»¥æ ¹æ®å…³é”®çš„ <code>className</code> æˆ–è€… <code>id</code> æŠŠè¿™ä¸ªæ–‡ä»¶æ‰¾å‡ºæ¥ã€‚</p></li><li><p><code>Ctrl + P</code>ï¼Œæ ¹æ®æ–‡ä»¶åæŸ¥æ‰¾æ‰€æœ‰ç«™å†…èµ„æºæ–‡ä»¶ã€‚</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_11.png" alt="ctrl+p"></p></li><li><p>æ¼‚äº®æ‰“å°ã€‚å¯¹äº <code>Sources</code> é‡Œçš„èµ„æºæ–‡ä»¶ï¼Œå¯ä»¥å°†æ‚ä¹±çš„æˆ–æ˜¯å‹ç¼©è¿‡çš„å†…å®¹æŒ‰ç…§ä¸€å®šçš„ç¼©è¿›å’Œæ¢è¡Œè§„åˆ™è¿›è¡Œæ‰“å°è¾“å‡ºã€‚</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_14.png" alt="pretty-print"></p></li><li><p>åœ¨ <code>Sources</code> é¢æ¿ä¸­æ‰¾åˆ°å›¾ç‰‡èµ„æºï¼Œç„¶ååœ¨å›¾ç‰‡ä¸Šå³é”®å³å¯è·å–å›¾ç‰‡çš„ <code>Data URI</code>ã€‚</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_15.png" alt="data-uri"></p></li><li><p>ä½¿ç”¨ <code>console.dir( ele )</code> å°† <code>DOM</code> å…ƒç´ æ ¼å¼åŒ–ä¸º <code>JavaScript</code> å¯¹è±¡</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_18.png" alt="console.dir"></p></li><li><p>åœ¨ <code>Sources</code> é¢æ¿ç¼–è¾‘æ–‡ä»¶å°æŠ€å·§</p><ul><li><p>ä½¿ç”¨ <code>Ctrl + p</code> æ‰“å¼€è¾“å…¥æ¡†è¾“å…¥ <code>:20:30</code> å›è½¦åï¼Œå…‰æ ‡ä½ç½®å°†è·³è½¬åˆ°å½“å‰æ–‡ä»¶çš„ç¬¬20è¡Œç¬¬30åˆ—</p></li><li><p>ä½¿ç”¨ä½¿ç”¨ <code>Alt + -</code> å’Œ <code>Alt + =</code> å¯ä»¥åœ¨ä¸Šä¸€ä¸ªé¼ æ ‡ä½ç½®å’Œä¸‹ä¸€ä¸ªé¼ æ ‡ä½ç½®ä¹‹é—´è·³è½¬</p></li><li><p>ä½¿ç”¨ <code>Ctrl +</code> é¼ æ ‡å·¦é”®å¯ä»¥æ·»åŠ å¤šä¸ªå…‰æ ‡è¾“å…¥ä½ç½®</p></li><li><p>ä½¿ç”¨ <code>Alt +</code> é¼ æ ‡æ‹–åŠ¨å¯ä»¥æ‹‰å‡ºä¸€å—çŸ©å½¢é€‰åŒº</p><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/chrome_16.png" alt="alt-move"></p></li></ul></li></ul><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><ul><li><a href="https://developers.google.com/web/tools/chrome-devtools/">chrome-devtools</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> webç»¼åˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> chrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSSç‰¹æ€§æ£€æµ‹@supportsä¸Modernizr</title>
      <link href="/2017/03/13/detect-css-property/"/>
      <url>/2017/03/13/detect-css-property/</url>
      
        <content type="html"><![CDATA[<p>ä»€ä¹ˆæ˜¯ <code>CSS</code> ç‰¹æ€§æ£€æµ‹ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œå‰ç«¯æŠ€æœ¯æ—¥æ–°æœˆå¼‚çš„ä»Šå¤©ï¼Œå„ç§æ–°æŠ€æœ¯æ–°å±æ€§å±‚å‡ºä¸ç©·ã€‚åœ¨ <code>CSS</code> å±‚é¢äº¦ä¸ä¾‹å¤–ã€‚</p><p>ä¸€äº›æ–°å±æ€§èƒ½æå¤§æå‡ç”¨æˆ·ä½“éªŒä»¥åŠå‡å°‘å·¥ç¨‹å¸ˆçš„å·¥ä½œé‡ï¼Œå¹¶ä¸”åœ¨å½“ä¸‹çš„å‰ç«¯æ°›å›´ä¸‹ï¼š</p><ul><li>å¾ˆå¤šå®éªŒæ€§åŠŸèƒ½æœªæˆä¸ºæ ‡å‡†å´è¢«å¤§é‡ä½¿ç”¨ï¼›</li><li>éœ€è¦å…¼å®¹å¤šç»ˆç«¯ï¼Œå¤šæµè§ˆå™¨ï¼Œè€Œå„æµè§ˆå™¨å¯¹æŸä¸€æ–°åŠŸèƒ½çš„å®ç°è¡¨ç°çš„å¤©å·®åœ°åˆ«ï¼›</li></ul><p>æ‰€ä»¥æœ‰äº†ä¼˜é›…é™çº§å’Œæ¸è¿›å¢å¼ºçš„è¯´æ³•ï¼Œåœ¨è¿™ç§èƒŒæ™¯ä¸‹ï¼Œåˆæƒ³ä½¿ç”¨æ–°çš„æŠ€æœ¯ç»™ç”¨æˆ·æä¾›æ›´å¥½çš„ä½“éªŒï¼Œåˆæƒ³åšå¥½å›é€€æœºåˆ¶ä¿è¯ä½ç‰ˆæœ¬ç»ˆç«¯ç”¨æˆ·çš„åŸºæœ¬ä½“éªŒï¼Œ<code>CSS</code> ç‰¹æ€§æ£€æµ‹å°±åº”è¿è€Œç”Ÿäº†ã€‚</p><p><code>CSS</code> ç‰¹æ€§æ£€æµ‹å°±æ˜¯é’ˆå¯¹ä¸åŒæµè§ˆå™¨ç»ˆç«¯ï¼Œåˆ¤æ–­å½“å‰æµè§ˆå™¨å¯¹æŸä¸ªç‰¹æ€§æ˜¯å¦æ”¯æŒã€‚è¿ç”¨ <code>CSS</code> ç‰¹æ€§æ£€æµ‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ”¯æŒå½“å‰ç‰¹æ€§çš„æµè§ˆå™¨ç¯å¢ƒä¸‹ä½¿ç”¨æ–°çš„æŠ€æœ¯ï¼Œè€Œä¸æ”¯æŒçš„åˆ™åšå‡ºæŸäº›å›é€€æœºåˆ¶ã€‚</p><p>æœ¬æ–‡å°†ä¸»è¦ä»‹ç»ä¸¤ç§ <code>CSS</code> ç‰¹æ€§æ£€æµ‹çš„æ–¹å¼ï¼š</p><ul><li><code>@supports</code></li><li><code>modernizr</code></li><li>ç”¨ <code>javascript</code> è¿›è¡Œç‰¹æ€§æ£€æµ‹</li></ul><a id="more"></a><h2 id="CSS-supports"><a href="#CSS-supports" class="headerlink" title="CSS @supports"></a>CSS @supports</h2><p>ä¼ ç»Ÿçš„ <code>CSS</code> ç‰¹æ€§æ£€æµ‹éƒ½æ˜¯é€šè¿‡ <code>javascript</code> å®ç°çš„ï¼Œä½†æ˜¯æœªæ¥ï¼ŒåŸç”Ÿ <code>CSS</code> å³å¯å®ç°ã€‚<br><code>CSS @supports</code> é€šè¿‡ <code>CSS</code> è¯­æ³•æ¥å®ç°ç‰¹æ€§æ£€æµ‹ï¼Œå¹¶åœ¨å†…éƒ¨ <code>CSS</code> åŒºå—ä¸­å†™å…¥å¦‚æœç‰¹æ€§æ£€æµ‹é€šè¿‡å¸Œæœ›å®ç°çš„ <code>CSS</code> è¯­å¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@supports &lt;supports_condition&gt; &#123;</span><br><span class="line">    <span class="comment">/* specific rules */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">div &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">&#125;</span><br><span class="line">@supports (position:sticky) &#123;</span><br><span class="line">    div &#123;</span><br><span class="line">        position:sticky;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å†™æ³•ï¼Œé¦–å…ˆå®šä¹‰äº† <code>div</code> çš„ <code>position: fixed</code> ï¼Œç´§æ¥ç€ä¸‹é¢ä¸€å¥ <code>@supports (position:sticky)</code> åˆ™æ˜¯ç‰¹æ€§æ£€æµ‹æ‹¬å·å†…çš„å†…å®¹ï¼Œå¦‚æœå½“å‰æµè§ˆå™¨æ”¯æŒ <code>@supports</code> è¯­æ³•ï¼Œå¹¶ä¸”æ”¯æŒ <code>position:sticky</code> è¯­æ³•ï¼Œé‚£ä¹ˆ <code>div</code> çš„ åˆ™ä¼šè¢«è®¾ç½®ä¸º <code>position:sticky</code> ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>@supports</code> è¯­æ³•çš„æ ¸å¿ƒå°±åœ¨äºè¿™ä¸€å¥ï¼š<code>@supports (...) &#123; &#125;</code> ï¼Œæ‹¬å·å†…æ˜¯ä¸€ä¸ª <code>CSS</code> è¡¨è¾¾å¼ï¼Œå¦‚æœæµè§ˆå™¨åˆ¤æ–­æ‹¬å·å†…çš„è¡¨è¾¾å¼åˆæ³•ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±ä¼šå»æ¸²æŸ“æ‹¬å·å†…çš„ <code>CSS</code> è¡¨è¾¾å¼ã€‚é™¤äº†è¿™ç§æœ€å¸¸è§„çš„ç”¨æ³•ï¼Œè¿˜å¯ä»¥é…åˆå…¶ä»–å‡ ä¸ªå…³é”®å­—ï¼š</p><h2 id="supports-not"><a href="#supports-not" class="headerlink" title="@supports not"></a>@supports not</h2><p><code>not</code> æ“ä½œç¬¦å¯ä»¥æ”¾åœ¨ä»»ä½•è¡¨è¾¾å¼çš„å‰é¢æ¥äº§ç”Ÿä¸€ä¸ªæ–°çš„è¡¨è¾¾å¼ï¼Œæ–°çš„è¡¨è¾¾å¼ä¸ºåŸè¡¨è¾¾å¼çš„å€¼çš„å¦å®šã€‚çœ‹ä¸ªä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@supports not (background: linear-gradient(<span class="number">90</span>deg, red, yellow)) &#123;</span><br><span class="line">    div &#123;</span><br><span class="line">        background: red;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºæ·»åŠ äº† <code>not</code> å…³é”®å­—ï¼Œæ‰€ä»¥ä¸ä¸Šé¢ç¬¬ä¸€ä¸ªä¾‹å­ç›¸åï¼Œè¿™é‡Œå¦‚æœæ£€æµ‹åˆ°æµè§ˆå™¨ä¸æ”¯æŒçº¿æ€§æ¸å˜ <code>background: linear-gradient(90deg, red, yellow)</code> çš„è¯­æ³•ï¼Œåˆ™å°† <code>div</code> çš„é¢œè‰²è®¾ç½®ä¸ºçº¢è‰² <code>background: red</code> ã€‚</p><h2 id="supports-and"><a href="#supports-and" class="headerlink" title="@supports and"></a>@supports and</h2><p>ç”¨ <code>and</code> æ“ä½œç¬¦è¿æ¥ä¸¤ä¸ªåŸå§‹çš„è¡¨è¾¾å¼ã€‚åªæœ‰ä¸¤ä¸ªåŸå§‹è¡¨è¾¾å¼çš„å€¼éƒ½ä¸ºçœŸï¼Œç”Ÿæˆçš„è¡¨è¾¾å¼æ‰ä¸ºçœŸï¼Œåä¹‹ä¸ºå‡ã€‚æ¥çœ‹ä¸ªä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">p &#123;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    text-overflow: ellipsis;</span><br><span class="line">&#125;</span><br><span class="line">@supports (display:-webkit-box) and (-webkit-line-clamp:<span class="number">2</span>) and (-webkit-box-orient:vertical) &#123;</span><br><span class="line">    p &#123;</span><br><span class="line">        display: -webkit-box;</span><br><span class="line">        -webkit-line-clamp: <span class="number">2</span>;</span><br><span class="line">        -webkit-box-orient: vertical;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢åŒæ—¶ï¼Œæ£€æµ‹ <code>@supports (display:-webkit-box) and (-webkit-line-clamp:2) and (-webkit-box-orient:vertical)</code> äº†ä¸‰ä¸ªè¯­æ³•ï¼Œå¦‚æœåŒæ—¶æ”¯æŒï¼Œåˆ™è®¾å®šä¸‰ä¸ª <code>CSS</code> è§„åˆ™ã€‚è¿™ä¸‰ä¸ªè¯­æ³•å¿…é¡»åŒæ—¶å¾—åˆ°æµè§ˆå™¨çš„æ”¯æŒï¼Œå¦‚æœè¡¨è¾¾å¼ä¸ºçœŸã€‚</p><h2 id="supports-or"><a href="#supports-or" class="headerlink" title="@supports or"></a>@supports or</h2><p><code>@supports or</code> è¡¨ç¤ºåªè¦è¡¨è¾¾å¼é‡Œå­˜åœ¨ä¸€ä¸ªæ˜¯çœŸçš„ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼å°±æ˜¯è¿”å›çœŸã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@supports (background:-webkit-linear-gradient(<span class="number">0</span>deg, yellow, red)) or (background:linear-gradient(<span class="number">90</span>deg, yellow, red))&#123;</span><br><span class="line">    div &#123;</span><br><span class="line">        background:-webkit-linear-gradient(<span class="number">0</span>deg, yellow, red);</span><br><span class="line">        background:linear-gradient(<span class="number">90</span>deg, yellow, red)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="supportsçš„å…¼å®¹æ€§"><a href="#supportsçš„å…¼å®¹æ€§" class="headerlink" title="@supportsçš„å…¼å®¹æ€§"></a>@supportsçš„å…¼å®¹æ€§</h2><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/supports_01.png" alt="younghzçš„Markdownåº“"></p><p>è¿™ä»æ˜¯ä¸€ä¸ªå®éªŒä¸­çš„åŠŸèƒ½ï¼Œè™½ç„¶å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½å·²ç»æ”¯æŒäº†ï¼Œä½†æ˜¯ç›®å‰çœ‹æ¥ï¼Œå³æ˜¯åœ¨ç§»åŠ¨ç«¯æƒ³è¦å…¨éƒ¨å…¼å®¹ä»éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚ä½†æ˜¯æˆ‘ä»¬å·²ç»å¯ä»¥å¼€å§‹ä½¿ç”¨èµ·æ¥äº†ï¼Œä½¿ç”¨ <code>@supports</code> å®ç°æ¸è¿›å¢å¼ºçš„æ•ˆæœã€‚</p><div class="tip">æ¸è¿›å¢å¼ºï¼ˆ`progressive enhancement`ï¼‰ï¼šé’ˆå¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨è¿›è¡Œæ„å»ºé¡µé¢ï¼Œä¿è¯æœ€åŸºæœ¬çš„åŠŸèƒ½ï¼Œç„¶åå†é’ˆå¯¹é«˜çº§æµè§ˆå™¨è¿›è¡Œæ•ˆæœã€äº¤äº’ç­‰æ”¹è¿›å’Œè¿½åŠ åŠŸèƒ½è¾¾åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼š</div><h2 id="CSS-supports-1"><a href="#CSS-supports-1" class="headerlink" title="CSS.supports()"></a>CSS.supports()</h2><p>è°ˆåˆ°äº† <code>@supports</code>ï¼Œå°±æœ‰å¿…è¦å†è¯´è¯´ <code>CSS.supports()</code> ã€‚<br>å®ƒæ˜¯ä½œä¸º <code>@supports</code> çš„å¦ä¸€ç§å½¢å¼å‡ºç°çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>javascript</code> çš„æ–¹å¼æ¥è·å¾— <code>CSS</code> å±æ€§çš„æ”¯æŒæƒ…å†µã€‚<br>å¯ä»¥æ‰“å¼€æ§åˆ¶å°ï¼Œè¾“å…¥ <code>CSS.supports</code> è¯•è¯•ï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/supports_02.png" alt="function@supports"></p><p>å¦‚æœæ²¡æœ‰è‡ªå·±å®ç° <code>CSS.supports</code> è¿™ä¸ªæ–¹æ³•ï¼Œè¾“å‡ºä¸Šè¿°ä¿¡æ¯ï¼Œè¡¨ç¤ºæµè§ˆå™¨æ˜¯æ”¯æŒ <code>@supports</code> è¯­æ³•çš„ï¼Œä½¿ç”¨å¦‚ä¸‹ï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/supports_03.png" alt="supports@demos"></p><p>é‚£å®ƒæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå¦‚æœä½ çš„é¡µé¢éœ€è¦åŠ¨æ€æ·»åŠ ä¸€äº›ä½ ä¸ç¡®å®šå“ªäº›æµè§ˆå™¨æ”¯æŒçš„æ–°çš„å±æ€§ï¼Œé‚£å®ƒä¹Ÿè®¸ä¼šæ´¾ä¸Šç”¨åœºã€‚ä»¥åŠï¼Œå®ƒå¯ä»¥é…åˆæˆ‘ä»¬ä¸‹æ–‡å³å°†è¦è®²çš„ <code>modernizr</code> ã€‚</p><h2 id="modernizr"><a href="#modernizr" class="headerlink" title="modernizr"></a>modernizr</h2><p>ä¸Šé¢ä»‹ç»äº† <code>CSS</code> æ–¹å¼çš„ç‰¹æ€§æ£€æµ‹ï¼Œåœ¨ä»¥å‰ï¼Œé€šå¸¸æ˜¯ä½¿ç”¨ <code>javascript</code> æ¥è¿›è¡Œç‰¹æ€§æ£€æµ‹çš„ï¼Œå…¶ä¸­ <code>modernizr</code> å°±æ˜¯å…¶ä¸­æœ€ä¸ºå‡ºè‰²çš„ä½¼ä½¼è€…ã€‚<br><code>modernizr</code>ï¼ˆæˆ³æˆ‘æŸ¥çœ‹ <code>Github</code> ï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„ <code>javascript</code> åº“ã€‚æœ‰ç€å°†è¿‘ <code>2W</code> çš„ <code>star</code> ï¼Œå…¶ä¼˜ç§€ç¨‹åº¦å¯è§ä¸€æ–‘ã€‚<br>ç®€å•çœ‹çœ‹ä½¿ç”¨æ–¹æ³•ï¼Œå‡è®¾é¡µé¢å·²ç»å¼•ç”¨äº† <code>modernizr</code> ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Listen to a test, give it a callback</span></span><br><span class="line">Modernizr.on(<span class="string">&#x27;testname&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> result </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (result) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;The test passed!&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;The test failed!&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// æˆ–è€…æ˜¯ç±»ä¼¼ CSS.supports()</span></span><br><span class="line">Modernizr.testAllProps(<span class="string">&#x27;background&#x27;</span>, <span class="string">&#x27;linear-gradient(90deg, #888, #ccc)&#x27;</span>);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="ç‰¹æ€§æ£€æµ‹åŸç†"><a href="#ç‰¹æ€§æ£€æµ‹åŸç†" class="headerlink" title="ç‰¹æ€§æ£€æµ‹åŸç†"></a>ç‰¹æ€§æ£€æµ‹åŸç†</h2><p>å¦‚æœå«Œå¼•å…¥æ•´ä¸€ä¸ª <code>Modernizr</code> åº“å¤ªå¤§ï¼Œé¡µé¢åˆä¸æ”¯æŒ <code>@supports</code> ï¼Œå…¶å®æˆ‘ä»¬è‡ªå·±ç”¨ç®€å•çš„ <code>javascript</code> å®ç°ä¹Ÿéå¸¸æ–¹ä¾¿ç®€å•ã€‚<br>æƒ³è¦çŸ¥é“æµè§ˆå™¨æ”¯æŒå¤šå°‘ <code>CSS</code> å±æ€§ï¼Œå¯ä»¥åœ¨è°ƒè¯•çª—å£è¯•è¯•ï¼š</p><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/supports_04.png" alt="html.style"></p><p>ä¸Šé¢å›¾ç‰‡æˆªå–çš„åªæ˜¯æ‰“å°å‡ºæ¥çš„ä¸€å°éƒ¨åˆ†ã€‚å¦‚æœæˆ‘ä»¬è¦æ£€æµ‹æŸä¸ªå±æ€§æ ·å¼æ˜¯å¦è¢«æ”¯æŒï¼Œåœ¨ä»»æ„çš„ <code>element.style</code> æ£€æµ‹å®ƒæ˜¯å¦å­˜åœ¨å³å¯ã€‚<br>å½“ç„¶ï¼Œå…ƒç´ å¯èƒ½æœ‰ <code>background</code> å±æ€§ï¼Œä½†æ˜¯ä¸æ”¯æŒå…·ä½“çš„ <code>linear-gradinet()</code> å±æ€§å€¼ã€‚è¿™ä¸ªæ—¶å€™è¯¥å¦‚ä½•æ£€æµ‹å‘¢ï¼Ÿåªéœ€è¦å°†å…·ä½“çš„å€¼èµ‹å€¼ç»™æŸä¸€å…ƒç´ ï¼Œå†æŸ¥è¯¢è¿™ä¸ªå±æ€§å€¼èƒ½å¦è¢«è¯»å–ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> root = <span class="built_in">document</span>.documentElement;</span><br><span class="line">root.style.backgroundImage = <span class="string">&#x27;linear-gradient(90deg, #888, #ccc)&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(root.style.backgroundImage) &#123;</span><br><span class="line">    <span class="comment">// æ”¯æŒ</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸æ”¯æŒ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å„ç§æ–¹å¼é—´çš„ä¼˜åŠ£"><a href="#å„ç§æ–¹å¼é—´çš„ä¼˜åŠ£" class="headerlink" title="å„ç§æ–¹å¼é—´çš„ä¼˜åŠ£"></a>å„ç§æ–¹å¼é—´çš„ä¼˜åŠ£</h2><ul><li><p>åŸç”Ÿçš„ <code>@supports</code> çš„æ€§èƒ½è‚¯å®šæ˜¯æœ€å¥½çš„ï¼Œè€Œä¸”æ— éœ€å¼•å…¥å¤–éƒ¨ <code>javascript</code> ï¼Œé¦–æ¨è¿™ä¸ªï¼Œä½†æ˜¯æ— å¥ˆå…¼å®¹é—®é¢˜ï¼Œç›®å‰æ¥çœ‹ä¸æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p></li><li><p><code>Modernizr</code> åŠŸèƒ½å¼ºå¤§ï¼Œå…¼å®¹æ€§å¥½ï¼Œä½†æ˜¯éœ€è¦å¼•å…¥å¤–éƒ¨ <code>javascript</code>ï¼Œå¤šä¸€ä¸ª <code>http</code> è¯·æ±‚ï¼Œå¦‚æœåªæ˜¯è¿›è¡Œå‡ ä¸ªç‰¹æ€§æ£€æµ‹ï¼Œæœ‰ç‚¹æ€é¸¡ç”¨ç‰›åˆ€çš„æ„Ÿè§‰ã€‚</p></li><li><p>é’ˆå¯¹éœ€è¦çš„ç‰¹æ€§æ£€æµ‹ï¼Œä½¿ç”¨ <code>javascript</code> å®ç°ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œå†æŠŠä¸Šé¢ç”¨åˆ°çš„æ–¹æ³•å°è£…ä¸€ä¸‹ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨äºç®€å•çš„ CSS ç‰¹æ€§æ£€æµ‹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>[String] property éœ€è¦æ£€æµ‹çš„ CSS å±æ€§å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>[String] value æ ·å¼çš„å…·ä½“å±æ€§å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return </span>[Boolean] æ˜¯å¦é€šè¿‡æ£€æŸ¥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cssTest</span>(<span class="params">property, value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ç”¨äºæµ‹è¯•çš„å…ƒç´ ï¼Œéšè—åœ¨é¡µé¢ä¸Š</span></span><br><span class="line">    <span class="keyword">var</span> ele = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;test-display-none&#x27;</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// åªæœ‰ä¸€ä¸ªå‚æ•°çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">arguments</span>.length === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(property <span class="keyword">in</span> ele.style) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">// ä¸¤ä¸ªå‚æ•°çš„æƒ…å†µ</span></span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">arguments</span>.length === <span class="number">2</span>)&#123;</span><br><span class="line">        ele.style[property] = value;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span>(ele.style[property]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  <img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/supports_05.png" alt="supports@demos"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>backgroundå±æ€§</title>
      <link href="/2017/03/10/background-property/"/>
      <url>/2017/03/10/background-property/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ä¸ªå…ƒç´ å¯ä»¥ä½¿ç”¨ <code>background</code> æ¥è®¾ç½®ä»–çš„èƒŒæ™¯ç‰¹æ€§ï¼Œ<code>background</code> æ˜¯ä¸€ä¸ªå¤åˆçš„å±æ€§ï¼ŒåŒ…æ‹¬äº† <code>8</code> ä¸ªå­å±æ€§ã€‚</p><h2 id="background-color"><a href="#background-color" class="headerlink" title="background-color"></a>background-color</h2><p><code>background-color</code> ç”¨äºå®šä¹‰å…ƒç´ çš„èƒŒæ™¯é¢œè‰²ï¼Œå€¼å¯ä»¥æ˜¯å…·ä½“çš„åå…­è¿›åˆ¶é¢œè‰²å€¼ <code>#dedd6f</code>ï¼Œå¯ä»¥æ˜¯ <code>rgb</code> é¢œè‰²å€¼<code>rgb(222, 221, 111)</code> ï¼Œæˆ–è€…ç›´æ¥ç”¨é¢œè‰²å¯¹åº”çš„è‹±æ–‡è¡¨ç¤º <code>gray</code> ï¼Œç”šè‡³æ˜¯ç”¨å…³é”®å­— <code>transparent</code> æ¥è¡¨ç¤ºé€æ˜çš„é¢œè‰²ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.yellow</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#dedd6f</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.gray</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: gray;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tran</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/background_01.png" alt="younghzçš„Markdownåº“"></p><h2 id="background-image"><a href="#background-image" class="headerlink" title="background-image"></a>background-image</h2><p><code>background-image</code> ç”¨æ¥å®šä¹‰å…ƒç´ çš„èƒŒæ™¯å›¾åƒï¼Œå¯ä»¥é€šè¿‡ <code>url(...)</code> æ¥å¼•å…¥å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸º <code>none</code> è¡¨ç¤ºèƒŒæ™¯ä¸ºç©ºï¼Œè¿˜å¯ä»¥è®¾ç½®å¤šå¼ èƒŒæ™¯ä¸”ä¸­é—´ç”¨é€—å·éš”å¼€ï¼Œå†™åˆ°å‰é¢çš„å›¾ç‰‡å°†ä¼šè¦†ç›–å†™åˆ°åé¢çš„ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.url</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/cow.png)</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.none</span> &#123;</span><br><span class="line">    <span class="attribute">background-image </span>:none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.muliple</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/penguin.jpg), <span class="built_in">url</span>(../images/cow.png);</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">81%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/background_02.png" alt="younghzçš„Markdownåº“"></p><h2 id="background-repeat"><a href="#background-repeat" class="headerlink" title="background-repeat"></a>background-repeat</h2><p><code>background-repeat</code> å®šä¹‰äº†èƒŒæ™¯å›¾åƒå°†ä»¥ä½•ç§æ–¹å¼è¿›è¡Œå¹³é“ºã€‚å¿…é¡»å…ˆæŒ‡å®š <code>background-image</code> å±æ€§ã€‚å¦‚æœè®¾ç½®2ä¸ªå±æ€§ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªç”¨äºæ¨ªå‘ï¼Œç¬¬äºŒä¸ªä½œç”¨äºçºµå‘ã€‚å¦‚æœæä¾›ä¸€ä¸ªå‚æ•°ï¼Œåˆ™ç”¨äºæ¨ªå‘å’Œçºµå‘ã€‚å…¶ä¸­ï¼Œ<code>repeat-x</code> å’Œ <code>repeat-y</code> åªèƒ½å•ç‹¬ä½¿ç”¨ã€‚</p><ul><li>repeat-xï¼šæ¨ªå‘å¹³é“º</li><li>repeat-yï¼šçºµå‘å¹³é“º</li><li>repeatï¼šæ¨ªå‘å’Œçºµå‘éƒ½å¹³é“º</li><li>no-repeatï¼šä¸å¹³é“º</li><li>roundï¼šèƒŒæ™¯å›¾åƒè‡ªåŠ¨ç¼©æ”¾ç›´è‡³é€‚åº”å¡«å……æ»¡æ•´ä¸ªå®¹å™¨</li><li>space: èƒŒæ™¯å›¾åƒæŒ‰ç…§ç›¸åŒçš„é—´è·å¹³é“ºç›´è‡³é€‚åº”å¡«å……æ»¡æ•´ä¸ªå®¹å™¨æˆ–æŸä¸ªæ–¹å‘</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.repeat-x</span> &#123;</span><br><span class="line">    <span class="attribute">background-repeat</span>: repeat-x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.repeat-y</span> &#123;</span><br><span class="line">    <span class="attribute">background-repeat</span>: repeat-y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.repeat</span> &#123;</span><br><span class="line">    <span class="attribute">background-repeat</span>: repeat;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.no-repeat</span> &#123;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.round</span> &#123;</span><br><span class="line">    <span class="attribute">background-repeat</span>: round;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.space</span> &#123;</span><br><span class="line">    <span class="attribute">background-repeat</span>: space;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.round-space</span> &#123;</span><br><span class="line">    <span class="attribute">background-repeat</span>: round space;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.space-round</span> &#123;</span><br><span class="line">    <span class="attribute">background-repeat</span>: space round;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/background_03.png" alt="younghzçš„Markdownåº“"></p><h2 id="background-size"><a href="#background-size" class="headerlink" title="background-size"></a>background-size</h2><p><code>background-size</code> å®šä¹‰äº†èƒŒæ™¯å›¾åƒçš„å°ºå¯¸ï¼Œå¯ä»¥ç”¨å…³é”®å­—æ¥å®šä¹‰ã€‚<code>contain</code> æŒ‰ç…§å›¾ç‰‡æ¯”ä¾‹å°†èƒŒæ™¯å›¾åƒç­‰æ¯”ç¼©æ”¾åˆ°å®Œå…¨é€‚åº”å®¹å™¨ï¼Œè€Œ <code>cover</code> æ˜¯å›¾åƒç¼©æ”¾åˆ°å®Œå…¨è¦†ç›–åŒºåŸŸä¸ºæ­¢ã€‚ä¹Ÿå¯ä»¥ç”¨é•¿åº¦å€¼æˆ–è€…ç™¾åˆ†æ¯”å€¼æ¥è®¾ç½®ã€‚å¦‚æœè®¾ç½®äº†2ä¸ªå‚æ•°ï¼Œåˆ™åˆ†åˆ«è¡¨ç¤ºæ¨ªå‘å’Œçºµå‘ã€‚å¦‚æœåªè®¾ç½®äº†ä¸€ä¸ªå€¼ï¼Œé‚£è¡¨ç¤ºæ¨ªå‘å®½åº¦ï¼Œçºµå‘ä¸º <code>auto</code>.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.contain</span> &#123;</span><br><span class="line">    <span class="attribute">background-size</span>: contain;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cover</span> &#123;</span><br><span class="line">    <span class="attribute">background-size</span>: cover;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.size-demo</span> <span class="selector-class">.w100</span> &#123;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(../images/cow.png);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rate5080</span> &#123;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">50%</span> <span class="number">80%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/background_04.png" alt="younghzçš„Markdownåº“"></p><h2 id="background-position"><a href="#background-position" class="headerlink" title="background-position"></a>background-position</h2><p><code>background-positioin</code> å®šä¹‰äº†èƒŒæ™¯å›¾åƒåœ¨å®¹å™¨é‡Œçš„æ˜¾ç¤ºä½ç½®ï¼Œå¯ä»¥ç”¨å…³é”®å­— <code>top</code>ã€<code>left</code>ã€<code>right</code>ã€<code>bottom</code>ã€<code>center</code> ç­‰æ¥è¡¨ç¤ºï¼Œå½“ç”¨1ä¸ªå‚æ•°çš„æ—¶å€™è®¾ç½®çš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªæ–¹å‘é»˜è®¤æ˜¯ <code>center</code>ã€‚å½“ç”¨2ä¸ªå…³é”®å­—æ¥è®¾ç½®çš„æ—¶å€™ï¼Œå’Œä¹¦å†™é¡ºåºæ— å…³ã€‚å¦å¤–è¿˜å¯ä»¥ç”¨å…·ä½“æ•°å€¼å’Œç™¾åˆ†æ¯”æ¥è®¾ç½®ï¼Œç”¨è¿™äº›æ–¹å¼æ¥è®¾ç½®çš„æ—¶å€™ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ¨ªå‘ï¼Œç¬¬äºŒä¸ªæ˜¯çºµå‘ã€‚å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œåˆ™è¡¨ç¤ºæ¨ªå‘ï¼Œçºµå‘é»˜è®¤æ˜¯å±…ä¸­ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.position-demo</span> <span class="selector-class">.top</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: top;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.position-demo</span> <span class="selector-class">.bottom-right</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: bottom right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.position-demo</span> <span class="selector-class">.w20h40</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">20px</span> <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.position-demo</span> <span class="selector-class">.p20</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">20%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/background_05.png" alt="younghzçš„Markdownåº“"></p><h2 id="background-attachment"><a href="#background-attachment" class="headerlink" title="background-attachment"></a>background-attachment</h2><p><code>background-attachment</code> æ§åˆ¶èƒŒæ™¯å›¾åƒåœ¨å¯è§†åŒºæˆ–å…ƒç´ å†…å¦‚ä½•æ»šåŠ¨ã€‚<code>fixed</code> æ˜¯ç›¸å¯¹å¯è§†åŒºåŸŸè¿›è¡Œå®šä½ï¼ŒèƒŒæ™¯å›¾åƒç›¸å¯¹äºå¯è§†åŒºåŸŸè¿›è¡Œå®šä½ï¼Œä¸éšå…ƒç´ æ»šåŠ¨è€Œæ»šåŠ¨ã€‚<code>scroll</code> èƒŒæ™¯å›¾åƒå°†åœ¨å…ƒç´ åŒºåŸŸå†…å›ºå®šï¼Œä¸ä¼šéšç€å…ƒç´ å†…å®¹çš„æ»šåŠ¨è€Œæ»šåŠ¨ã€‚<code>local</code> èƒŒæ™¯å›¾åƒç›¸å¯¹äºå…ƒç´ å†…å®¹å æ®çš„åŒºåŸŸè¿›è¡Œå®šä½ï¼Œå½“å…ƒç´ å†…å®¹æ»šåŠ¨çš„æ—¶å€™ï¼ŒèƒŒæ™¯å›¾åƒéšä¹‹æ»šåŠ¨ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.attachment-demo</span> <span class="selector-class">.fixed</span> &#123;</span><br><span class="line">    <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">    <span class="attribute">background-position</span>: bottom;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.attachment-demo</span> <span class="selector-class">.scroll</span> &#123;</span><br><span class="line">    <span class="attribute">background-attachment</span>: scroll;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.attachment-demo</span> <span class="selector-class">.local</span> &#123;</span><br><span class="line">    <span class="attribute">background-attachment</span>: local;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/background_06.png" alt="younghzçš„Markdownåº“"></p><h2 id="background-origin"><a href="#background-origin" class="headerlink" title="background-origin"></a>background-origin</h2><p><code>background-origin</code> è§„å®šäº†èƒŒæ™¯å›¾åƒç›¸å¯¹äºç›’æ¨¡å‹çš„å“ªä¸ªåŒºåŸŸæ¥å®šä½ï¼Œå¯¹èƒŒæ™¯é¢œè‰²æ— æ•ˆã€‚<code>content-box</code> ç›¸å¯¹äºå†…å®¹åŒºåŸŸå®šä¹‰ï¼Œ<code>padding-box</code> ç›¸å¯¹äºå†…è¾¹è·åŒºåŸŸå®šä½ï¼Œ<code>border-box</code> ç›¸å¯¹è¾¹æ¡†åŒºåŸŸå®šä½</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.origin-demo</span> <span class="selector-class">.content</span> &#123;</span><br><span class="line">    <span class="attribute">background-origin</span>: content-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.origin-demo</span> <span class="selector-class">.padding</span> &#123;</span><br><span class="line">    <span class="attribute">background-origin</span>: padding-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.origin-demo</span> <span class="selector-class">.border</span> &#123;</span><br><span class="line">    <span class="attribute">background-origin</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/background_07.png" alt="younghzçš„Markdownåº“"></p><h2 id="background-clip"><a href="#background-clip" class="headerlink" title="background-clip"></a>background-clip</h2><p><code>background-clip</code> æŒ‡å®šèƒŒæ™¯å‘å¤–è£å‰ªçš„åŒºåŸŸã€‚<code>padding-box</code> ä» <code>padding</code> åŒºåŸŸï¼ˆä¸å« <code>padding</code> ï¼‰å¼€å§‹å‘å¤–è£å‰ªèƒŒæ™¯ã€‚<code>border-box</code> ä» <code>border</code> åŒºåŸŸï¼ˆä¸å« <code>border</code> ï¼‰å¼€å§‹å‘å¤–è£å‰ªèƒŒæ™¯ã€‚<br><code>content-box</code> ä» <code>content</code> åŒºåŸŸå¼€å§‹å‘å¤–è£å‰ªèƒŒæ™¯ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clip-demo</span> <span class="selector-class">.content</span> &#123;</span><br><span class="line">    <span class="attribute">background-clip</span>: content-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clip-demo</span> <span class="selector-class">.padding</span> &#123;</span><br><span class="line">    <span class="attribute">background-clip</span>: padding-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clip-demo</span> <span class="selector-class">.border</span> &#123;</span><br><span class="line">    <span class="attribute">background-clip</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://bubuzou.oss-cn-shenzhen.aliyuncs.com/blog/201703/background_08.png" alt="younghzçš„Markdownåº“"></p>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é«˜é˜¶å‡½æ•°</title>
      <link href="/2016/12/06/higher-order-functions/"/>
      <url>/2016/12/06/higher-order-functions/</url>
      
        <content type="html"><![CDATA[<p>é«˜é˜¶å‡½æ•°æ˜¯æŒ‡æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ä¹‹ä¸€çš„å‡½æ•°ï¼š</p><p>å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’<br>å‡½æ•°å¯ä»¥ä½œä¸ºè¿”å›å€¼è¿›è¡Œè¾“å‡º<br><code>JavaScript</code> è¯­è¨€ä¸­çš„å‡½æ•°æ˜¾ç„¶æ»¡è¶³é«˜é˜¶å‡½æ•°çš„æ¡ä»¶ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œæ— è®ºæ˜¯å°†å‡½æ•°å½“åšå‚æ•°ä¼ é€’ï¼Œè¿˜æ˜¯è®©å‡½æ•°çš„æ‰§è¡Œç»“æœè¿”å›ç»™å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸¤ç§æƒ…å½¢éƒ½æœ‰å¾ˆå¤šåº”ç”¨åœºæ™¯ã€‚</p><h2 id="å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’"><a href="#å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’" class="headerlink" title="å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’"></a>å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’</h2><p>æŠŠå‡½æ•°å½“åšå‚æ•°è¿›è¡Œä¼ é€’ï¼Œè¿™ä»£è¡¨æˆ‘ä»¬å¯ä»¥æŠ½ç¦»å‡ºä¸€éƒ¨åˆ†å®¹æ˜“å˜åŒ–çš„ä¸šåŠ¡é€»è¾‘ï¼ŒæŠŠè¿™éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘æ”¾åœ¨å‡½æ•°å‚æ•°ä¸­ï¼Œè¿™æ ·ä¸€æ¥å°±å¯ä»¥åˆ†ç¦»ä¸šåŠ¡ä»£ç ä¸­å˜åŒ–å’Œä¸å˜çš„éƒ¨åˆ†ã€‚</p><a id="more"></a><ul><li><p>å›è°ƒå‡½æ•°</p><p>  åœ¨ <code>ajax</code> å¼‚æ­¥è¯·æ±‚çš„åº”ç”¨ä¸­ï¼Œå›è°ƒå‡½æ•°çš„ä½¿ç”¨éå¸¸é¢‘ç¹ã€‚å½“æˆ‘ä»¬æƒ³åœ¨ <code>ajax</code> è¯·æ±‚è¿”å›ä¹‹ååšäº›äº‹æƒ…ï¼Œä½†åˆå¹¶ä¸çŸ¥é“è¯·æ±‚è¿”å›çš„ç¡®åˆ‡æ—¶é—´æ—¶ï¼Œæœ€å¸¸è§çš„æ–¹æ¡ˆæ˜¯æŠŠ <code>callback</code> å‡½æ•°å½“åšå‚æ•°ä¼ å…¥å‘èµ·çš„ <code>ajax</code> è¯·æ±‚çš„æ–¹æ³•ä¸­ï¼Œå¾…è¯·æ±‚å®Œæˆä¹‹åæ‰§è¡Œ<code>callback</code> å‡½æ•°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getUserInfo = <span class="function"><span class="keyword">function</span>(<span class="params"> userId, callback </span>) </span>&#123;</span><br><span class="line">    $.ajax( <span class="string">&#x27;http://bubuzou.com/getUserInfo?&#x27;</span> + userId, <span class="function"><span class="keyword">function</span>(<span class="params"> data </span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( <span class="keyword">typeof</span> callback === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">            callback( data );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);    </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>  å†æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦åˆ›å»º <code>100</code> ä¸ª <code>div</code>å…ƒç´ ï¼ŒåŒæ—¶æŠŠä»–ä»¬éšè—èµ·æ¥ï¼Œé‚£ä¹ˆå¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™ç§å®ç°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> appendDiv = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++ ) &#123;</span><br><span class="line">        <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement( <span class="string">&#x27;div&#x27;</span> );</span><br><span class="line">        div.innerHTML = i;</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild( div );</span><br><span class="line">        div.style.display = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">appendDiv();</span><br></pre></td></tr></table></figure><p>  æŠŠ <code>div.style.display = &#39;none&#39;</code>çš„é€»è¾‘ç¡¬ç¼–ç åœ¨ <code>appendDiv</code> é‡Œæ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼Œ<code>appendDiv</code> æœªå…æœ‰ç‚¹ä¸ªæ€§åŒ–ï¼Œæˆä¸ºäº†ä¸€ä¸ªéš¾ä»¥å¤ç”¨çš„å‡½æ•°ï¼Œå¹¶ä¸æ˜¯æ¯ä¸ªäººåˆ›å»ºäº†èŠ‚ç‚¹ä¹‹åå°±å¸Œæœ›å®ƒä»¬ç«‹åˆ»è¢«éšè—ã€‚äºæ˜¯æˆ‘ä»¬æŠŠè¿™æ®µä»£ç æŠ½ç¦»å‡ºæ¥ï¼Œç”¨å›è°ƒå‡½æ•°çš„å½¢å¼ä¼ å…¥ <code>appendDiv</code> æ–¹æ³•ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> appendDiv = <span class="function"><span class="keyword">function</span>(<span class="params"> callback </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++ ) &#123;</span><br><span class="line">        <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement( <span class="string">&#x27;div&#x27;</span> );</span><br><span class="line">        div.innerHTML = i;</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild( div );</span><br><span class="line">        <span class="keyword">if</span> ( <span class="keyword">typeof</span> callback === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">            callback( div );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;; </span><br><span class="line">appendDiv(<span class="function"><span class="keyword">function</span>(<span class="params"> node </span>) </span>&#123;</span><br><span class="line">    node.style.display = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><code>Array.prototype.sort</code></p><p>  <code>Array.prototype.sort</code> æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°é‡Œé¢å°è£…äº†æ•°ç»„å…ƒç´ çš„æ’åºé¡ºåºã€‚æˆ‘ä»¬çš„ç›®çš„æ˜¯å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œè¿™æ˜¯ä¸å˜çš„éƒ¨åˆ†ï¼›ä½†ç”¨ä»€ä¹ˆè§„åˆ™å»æ’åºè¿™æ˜¯å¯å˜çš„éƒ¨åˆ†ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»å°åˆ°å¤§æ’åº</span></span><br><span class="line">[<span class="number">3</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">5</span>].sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h2 id="å‡½æ•°ä½œä¸ºè¿”å›å€¼è¾“å‡º"><a href="#å‡½æ•°ä½œä¸ºè¿”å›å€¼è¾“å‡º" class="headerlink" title="å‡½æ•°ä½œä¸ºè¿”å›å€¼è¾“å‡º"></a>å‡½æ•°ä½œä¸ºè¿”å›å€¼è¾“å‡º</h2><ul><li><p>åˆ¤æ–­æ•°æ®çš„ç±»å‹</p><p>  åˆ¤æ–­ä¸€ä¸ªæ•°æ®æ˜¯å¦æ˜¯æ•°ç»„ï¼Œåœ¨ä»¥å¾€çš„å®ç°å½“ä¸­ï¼Œå¯ä»¥åŸºäºé¸­å­ç±»å‹çš„æ¦‚å¿µæ¥åˆ¤æ–­ï¼Œæ¯”å¦‚è¿™ä¸ªæ•°æ®æœ‰æ²¡æœ‰ <code>length</code> å±æ€§ï¼Œæœ‰æ²¡æœ‰<code>sort</code> æ–¹æ³•ç­‰ã€‚ä½†æ›´å¥½çš„æ–¹æ³•æ˜¯ç”¨ <code>Object.prototype.toString</code> æ¥è®¡ç®—ã€‚æ ¹æ®<code>Object.prototype.toString.call( [1, 2, 3] )</code> æ€»æ˜¯è¿”å› <code>â€™[object Array]â€™</code> ï¼Œ<code>Object.prototype.toStrng.call( â€˜strâ€™ )</code> ä¹Ÿæ€»æ˜¯è¿”å› <code>â€™[object Array]â€™</code> å¾—å‡ºï¼Œ<br>  å®ƒæ€»æ˜¯ä¼šè¿”å›ä¸€ä¸ªç±»ä¼¼ç»“æ„çš„å­—ç¬¦ä¸²ã€‚äºæ˜¯ç”¨å¾ªç¯è¯­å¥æ¥æ‰¹é‡æ³¨å†Œç±»å‹åˆ¤æ–­çš„å‡½æ•°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">var</span> Type = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, type; type = [<span class="string">&#x27;String&#x27;</span>, <span class="string">&#x27;Array&#x27;</span>, <span class="string">&#x27;Number&#x27;</span>][i++]; ) &#123;</span><br><span class="line">        (<span class="function"><span class="keyword">function</span>(<span class="params"> type </span>) </span>&#123;</span><br><span class="line">            Type[ <span class="string">&#x27;is&#x27;</span> + type ] = <span class="function"><span class="keyword">function</span>(<span class="params"> obj </span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call( obj ) === <span class="string">&#x27;[object &#x27;</span> + type + <span class="string">&#x27;]&#x27;</span>; </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)( type );</span><br><span class="line">    &#125;</span><br><span class="line">    Type.isArray( [] );  <span class="comment">// true</span></span><br><span class="line">    Type.isString( <span class="string">&#x27;&#x27;</span> );  <span class="comment">// true</span></span><br><span class="line">    <span class="string">``</span><span class="string">``</span></span><br><span class="line">    </span><br><span class="line">- getSingle</span><br><span class="line"></span><br><span class="line">    ä¸‹é¢æ˜¯ä¸€ä¸ªå•ä¾‹æ¨¡å¼çš„ä¾‹å­ï¼š</span><br><span class="line"></span><br><span class="line">    <span class="string">``</span><span class="string">` js</span></span><br><span class="line"><span class="string">    var getSingle = function( fn ) &#123;</span></span><br><span class="line"><span class="string">        var ret;</span></span><br><span class="line"><span class="string">        return function() &#123;</span></span><br><span class="line"><span class="string">            return ret || ( ret = fn.apply( this, arguments ));</span></span><br><span class="line"><span class="string">        &#125;;</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    // æ¥çœ‹çœ‹è¿™ä¸ªå•ä¾‹çš„æ•ˆæœ</span></span><br><span class="line"><span class="string">    var getScript = getSingle(function() &#123;</span></span><br><span class="line"><span class="string">        return document.createElement( &#x27;script&#x27; );</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    var script1 = getScript();</span></span><br><span class="line"><span class="string">    var script2 = getScript();</span></span><br><span class="line"><span class="string">    console.log( script1 === script2 );  // true</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="é«˜é˜¶å‡½æ•°å®ç°AOP"><a href="#é«˜é˜¶å‡½æ•°å®ç°AOP" class="headerlink" title="é«˜é˜¶å‡½æ•°å®ç°AOP"></a>é«˜é˜¶å‡½æ•°å®ç°AOP</h2><p><code>AOP</code>ï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰çš„ä¸»è¦ä½œç”¨æ˜¯æŠŠä¸€äº›è·Ÿæ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ¨¡å—æ— å…³çš„åŠŸèƒ½æŠ½ç¦»å‡ºæ¥ï¼Œè¿™äº›è·Ÿä¸šåŠ¡é€»è¾‘æ— å…³çš„åŠŸèƒ½é€šå¸¸åŒ…æ‹¬æ—¥å¿—ç»Ÿè®¡ã€å®‰å…¨æ§åˆ¶ã€å¼‚å¸¸å¤„ç†ç­‰ã€‚æŠŠè¿™äº›åŠŸèƒ½æŠ½ç¦»å‡ºæ¥åï¼Œå†é€šè¿‡â€œåŠ¨æ€æ¤å…¥â€çš„æ–¹å¼æºå…¥ä¸šåŠ¡é€»è¾‘æ¨¡å—ä¸­ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯é¦–å…ˆä¿è¯äº†ä¸šåŠ¡é€»è¾‘æ¨¡å—çš„çº¯æ´å’Œé«˜å†…èšæ€§ï¼Œå…¶å®æ˜¯å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¤ç”¨è¿™äº›æ—¥å¿—ç»Ÿè®¡ç­‰åŠŸèƒ½æ¨¡å—ã€‚åœ¨ <code>JavaScript</code> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>Function.prototype</code> æ¥å®ç° <code>AOP</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.before = <span class="function"><span class="keyword">function</span>(<span class="params"> beforeFn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _self = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        beforeFn.apply( <span class="built_in">this</span>, <span class="built_in">arguments</span> );</span><br><span class="line">        <span class="keyword">return</span> _self.apply( <span class="built_in">this</span>, <span class="built_in">arguments</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Function</span>.prototype.after = <span class="function"><span class="keyword">function</span>(<span class="params"> afterFn </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _self = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> ret = _self.apply( <span class="built_in">this</span>, <span class="built_in">arguments</span> );</span><br><span class="line">        afterFn.apply( <span class="built_in">this</span>, <span class="built_in">arguments</span> );</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="number">2</span> );</span><br><span class="line">&#125;;</span><br><span class="line">func = func.before(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="number">1</span> );</span><br><span class="line">&#125;).after(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="number">3</span> );</span><br><span class="line">&#125;);</span><br><span class="line">func();  <span class="comment">// æ¢è¡Œæ‰“å°ï¼š1 2 3</span></span><br></pre></td></tr></table></figure><h2 id="é«˜é˜¶å‡½æ•°çš„å…¶ä»–åº”ç”¨"><a href="#é«˜é˜¶å‡½æ•°çš„å…¶ä»–åº”ç”¨" class="headerlink" title="é«˜é˜¶å‡½æ•°çš„å…¶ä»–åº”ç”¨"></a>é«˜é˜¶å‡½æ•°çš„å…¶ä»–åº”ç”¨</h2><ul><li><p><code>currying</code></p><p>  <code>currying</code> çš„æ¦‚å¿µæœ€æ—©ç”±ä¿„å›½æ•°å­¦å®¶ <code>Moses Schoofinkel</code> å‘æ˜ï¼Œè€Œåç”±è‘—åçš„æ•°ç†é€»è¾‘å­¦å®¶ <code>Haskell Curry</code> å°†å…¶ä¸°å¯Œå’Œå‘å±•ï¼Œ<code>currying</code> ç”±æ­¤å¾—åã€‚</p><p>  <code>currying</code> åˆç§°éƒ¨åˆ†æ±‚å€¼ã€‚è¿™é‡Œæˆ‘ä»¬è®¨è®ºçš„æ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–( <code>function currying</code> )ã€‚ä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°é¦–å…ˆä¼šæ¥å—ä¸€äº›å‚æ•°ï¼Œæ¥å—äº†è¿™äº›å‚æ•°ä¼šåï¼Œè¯¥å‡½æ•°å¹¶ä¸ä¼šç«‹å³æ±‚å€¼ï¼Œè€Œæ˜¯ç»§ç»­è¿”å›å¦ä¸€ä¸ªå‡½æ•°ï¼Œåˆšæ‰ä¼ å…¥çš„å‚æ•°åœ¨å‡½æ•°å½¢æˆçš„é—­åŒ…ä¸­è¢«ä¿å­˜èµ·æ¥ã€‚å¾…åˆ°å‡½æ•°è¢«çœŸæ­£æ±‚å€¼çš„æ—¶å€™ï¼Œä¹‹å‰ä¼ å…¥çš„æ‰€æœ‰å‚æ•°éƒ½ä¼šè¢«ä¸€æ¬¡æ€§ç”¨äºæ±‚å€¼ã€‚æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š<br>  å‡è®¾æˆ‘ä»¬è¦ç¼–å†™ä¸€ä¸ªè®¡ç®—æ¯æœˆå¼€é”€çš„å‡½æ•°ã€‚åœ¨æ¯å¤©ç»“æŸä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½è¦è®°å½•å‡ å¤©èŠ±æ‰äº†å¤šå°‘é’±ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> monthCost = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> cost = <span class="function"><span class="keyword">function</span>(<span class="params"> money </span>) </span>&#123;</span><br><span class="line">    monthCost += money;</span><br><span class="line">&#125;;</span><br><span class="line">cost( <span class="number">100</span> );  ç¬¬ä¸€å¤©</span><br><span class="line">cost( <span class="number">200</span> );  ç¬¬äºŒå¤©</span><br><span class="line">cost( <span class="number">300</span> );  ç¬¬ä¸‰å¤©</span><br><span class="line"><span class="built_in">console</span>.log( monthCost );  <span class="comment">// 600</span></span><br></pre></td></tr></table></figure><p>  é€šè¿‡è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯å¤©éƒ½èŠ±äº†å¤šå°‘é’±ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åªæƒ³çŸ¥é“æ¯ä¸ªæœˆçš„æ¶ˆè´¹å¦‚ä½•çš„è¯ï¼Œé‚£å°±æ²¡å¿…è¦è®¡ç®—æ¯å¤©çš„èŠ±è´¹äº†ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cost = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> args = [];</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( <span class="built_in">arguments</span>.length === <span class="number">0</span> ) &#123;</span><br><span class="line">            <span class="keyword">var</span> money = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, l = args.length; i &lt; l; i++ ) &#123;</span><br><span class="line">                money += args[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> money;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            [].push.apply( args, <span class="built_in">arguments</span> );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line">cost( <span class="number">100</span> );</span><br><span class="line">cost( <span class="number">200</span> );</span><br><span class="line">cost( <span class="number">300</span> );</span><br><span class="line"><span class="built_in">console</span>.log( cost() );  <span class="comment">// 600</span></span><br></pre></td></tr></table></figure><p>  æ¥ä¸‹æ¥ç¼–å†™ä¸€ä¸ªé€šç”¨çš„æŸ¯é‡ŒåŒ–å‡½æ•°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> currying = <span class="function"><span class="keyword">function</span>(<span class="params"> fn </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> args = [];</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( <span class="built_in">arguments</span>.length === <span class="number">0</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> fn.apply( <span class="built_in">this</span>, args );</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            [].push.apply( args, <span class="built_in">arguments</span> );</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">arguments</span>.callee;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> cost = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> money = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++ ) &#123;</span><br><span class="line">            money += <span class="built_in">arguments</span>[i];</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> money;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="keyword">var</span> cost = currying( cost );</span><br><span class="line">cost( <span class="number">100</span> );</span><br><span class="line">cost( <span class="number">200</span> );</span><br><span class="line">cost( <span class="number">300</span> );</span><br><span class="line"><span class="built_in">console</span>.log( cost() );  <span class="comment">// 600</span></span><br></pre></td></tr></table></figure></li><li><p><code>uncurrying</code></p><p>  <code>uncurrying</code> æ˜¯åæŸ¯é‡ŒåŒ–ï¼Œå¤§æ¦‚æ„æ€æ˜¯æ‰©å¤§å‡½æ•°çš„åº”ç”¨èŒƒå›´ï¼Œå°†æœ¬æ¥åªæœ‰ç‰¹å®šå¯¹è±¡æ‰èƒ½ä½¿ç”¨çš„æ–¹æ³•ï¼Œæ‰©å±•åˆ°æ›´å¤šçš„å¯¹è±¡ã€‚<br>  æ¯”å¦‚æˆ‘ä»¬å¸¸å¸¸è®©ç±»æ•°ç»„å¯¹è±¡å»å€Ÿç”¨ <code>Array.prototype</code> çš„æ–¹æ³•ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">Array</span>.prototype.push.call( <span class="built_in">arguments</span>, <span class="number">4</span> );</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">arguments</span> );  <span class="comment">// [1, 2, 3, 4]     </span></span><br><span class="line">&#125;)(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure><p>  <code>uncurrying</code>ç¬¬ä¸€ç§å®ç°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.uncurrying = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> obj = <span class="built_in">Array</span>.prototype.shift.call( <span class="built_in">arguments</span> );</span><br><span class="line">        <span class="keyword">return</span> self.apply( obj, <span class="built_in">arguments</span> );</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, fn, ary = [<span class="string">&#x27;push&#x27;</span>, <span class="string">&#x27;shift&#x27;</span>, <span class="string">&#x27;forEach&#x27;</span>]; fn = ary[i++]; ) &#123;</span><br><span class="line">    <span class="built_in">Array</span>[ fn ] = <span class="built_in">Array</span>.prototype[ fn ].uncurrying();   </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="string">&quot;length&quot;</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">&quot;0&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;1&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;2&quot;</span>: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Array</span>.push( obj, <span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log( obj.length );  <span class="comment">// 4</span></span><br><span class="line"><span class="keyword">var</span> first = <span class="built_in">Array</span>.shift( obj ); </span><br><span class="line"><span class="built_in">console</span>.log( first );  <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log( obj );  <span class="comment">// &#123;0:2, 1:3, 2:4, length: 3&#125;</span></span><br><span class="line"><span class="built_in">Array</span>.forEach( obj, <span class="function"><span class="keyword">function</span>(<span class="params"> i, n </span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( n );  <span class="comment">// åˆ†åˆ«è¾“å‡ºï¼š0, 1, 2</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>  <code>uncurrying</code>çš„ç¬¬äºŒç§å®ç°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.uncurrying = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Function</span>.prototype.call.apply( self, <span class="built_in">arguments</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>å‡½æ•°èŠ‚æµ</p><p>  åœ¨ <code>JavaScript</code> ä¸­ï¼Œå¤§éƒ¨åˆ†çš„å‡½æ•°éƒ½æ˜¯ç”±ç”¨æˆ·ä¸»åŠ¨è°ƒåŠ¨è§¦å‘çš„ã€‚ä½†æ˜¯ä¹Ÿå­˜åœ¨å°‘æ•°æƒ…å†µï¼Œè¿™äº›æƒ…å†µä¸‹å‡½æ•°çš„è§¦å‘å¹¶ä¸æ˜¯åˆç”¨æˆ·ç›´æ¥æ§åˆ¶çš„ã€‚è¿™ä¸ªæ—¶å€™å‡½æ•°å°±æœ‰å¯èƒ½è¢«é¢‘ç¹åœ°è°ƒç”¨ï¼Œè€Œé€ æˆå¤§çš„æ€§èƒ½é—®é¢˜ã€‚ä»¥ä¸‹å‡ ä¸ªåœºæ™¯å‡½æ•°å°†è¢«é¢‘ç¹è°ƒç”¨ï¼šç»™ <code>window</code> ç»‘å®šäº†<code>onresize</code> äº‹ä»¶çš„æ—¶å€™ï¼Œå¦‚æœå­˜åœ¨ <code>DOM</code> ç›¸å…³çš„æ“ä½œï¼Œé‚£è¿™ä¸ªæ—¶å€™æ˜¯éå¸¸è€—æ€§èƒ½çš„ï¼Œä¸¥é‡çš„æ—¶å€™æµè§ˆå™¨å¯èƒ½ä¼šå¡é¡¿ï¼›<code>mousemove</code> äº‹ä»¶ï¼Œå¦‚æœç»™æŸä¸ªå…ƒç´ ç»‘å®šäº†æ‹–æ‹½äº‹ä»¶ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°ä¹Ÿä¼šè¢«é¢‘ç¹çš„è§¦å‘ï¼›åœ¨æ¯”å¦‚ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦é¢‘ç¹çš„é€šçŸ¥è¿›åº¦ä¿¡æ¯ç­‰ã€‚</p><p>  å‡½æ•°èŠ‚æµå°±æ˜¯ä¸ºäº†é¿å…å‡½æ•°è¢«é¢‘ç¹åœ°è°ƒç”¨è€Œå­˜åœ¨çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œä»è€Œä¼˜åŒ–æ€§èƒ½ã€‚é€šå¸¸æ˜¯ç”¨ <code>setTimeout</code> æ¥å®ç°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> throttle = <span class="function"><span class="keyword">function</span>(<span class="params"> fn, interval </span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> _self = fn, </span><br><span class="line">    timer,</span><br><span class="line">    firstTime = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> args = <span class="built_in">arguments</span>,</span><br><span class="line">            _me = <span class="built_in">this</span>;</span><br><span class="line">        <span class="keyword">if</span> ( firstTime ) &#123;</span><br><span class="line">            _self.apply( _me, args );</span><br><span class="line">            <span class="keyword">return</span> firstTime = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ( timer ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">clearTimeout</span>( timer );</span><br><span class="line">            timer = <span class="literal">null</span>;</span><br><span class="line">            _self.apply( _me, args );</span><br><span class="line">        &#125;, interval || <span class="number">500</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">window</span>.onresize = throttle(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="number">1</span> );</span><br><span class="line">&#125;, <span class="number">500</span>);</span><br></pre></td></tr></table></figure></li><li><p>åˆ†æ—¶å‡½æ•°</p><p>  ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†ä¸€ç§è§£å†³å‡½æ•°è¢«é¢‘ç¹è°ƒç”¨çš„æ–¹æ³•ã€‚ä½†æ˜¯æœ‰æ—¶å€™ï¼Œç”¨æˆ·ç¡®å®æœ‰è¿™ç§éœ€æ±‚ï¼Œæ¯”å¦‚éœ€è¦åœ¨çŸ­æ—¶é—´å†…æŠŠ <code>1000</code> ä¸ª <code>qq</code> å¥½å‹æ¸²æŸ“åˆ°åˆ—è¡¨ä¸Šï¼Œè¿™ä¸ªæ—¶å€™å°±å¯èƒ½ä¼šå¾ˆå¡ã€‚ä½†æ˜¯å¦‚æœæŠŠ <code>1000ms</code> åˆ›å»º <code>1000</code> ä¸ªèŠ‚ç‚¹ï¼Œæ”¹æˆæ¯ <code>200ms</code> åˆ›å»º <code>8</code> ä¸ªèŠ‚ç‚¹ã€‚è¿™ä¸ªæ—¶å€™å°±é¿å…è¿™ç§é—®é¢˜ã€‚<br>  åˆ†æ—¶å‡½æ•°æ¥å— <code>3</code> ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªæ˜¯åˆ›å»ºèŠ‚ç‚¹çš„æ—¶å€™éœ€è¦ç”¨åˆ°çš„æ•°æ®ï¼Œç¬¬äºŒä¸ªæ˜¯å°è£…äº†åˆ›å»ºèŠ‚ç‚¹çš„å‡½æ•°ï¼Œç¬¬ä¸‰ä¸ªæ˜¯æ¯ä¸€æ‰¹åˆ›å»ºçš„èŠ‚ç‚¹æ•°é‡ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> timeChunk = <span class="function"><span class="keyword">function</span>(<span class="params"> ary, fn, count </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj,</span><br><span class="line">        t,</span><br><span class="line">        start;</span><br><span class="line">    start = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">Math</span>.min( count || <span class="number">1</span>, ary.length ); i++ ) &#123;</span><br><span class="line">            <span class="keyword">var</span> obj = ary.shift();</span><br><span class="line">            fn( obj );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        t = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> ( ary.length === <span class="number">0</span> ) &#123;  <span class="comment">// å¦‚æœå…¨éƒ¨èŠ‚ç‚¹éƒ½å·²ç»åˆ›å»ºå¥½</span></span><br><span class="line">                <span class="built_in">clearInterval</span>( t );</span><br><span class="line">            &#125;</span><br><span class="line">            start();</span><br><span class="line">        &#125;, <span class="number">200</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>  åˆ†æ—¶å‡½æ•°æœ‰äº†ï¼Œç°åœ¨æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚å‡è®¾æœ‰ <code>1000</code> ä¸ªå¥½å‹ï¼Œåˆ©ç”¨ <code>timeChunk</code> å‡½æ•°ï¼Œæ¯æ‰¹å¾€é¡µé¢ä¸Šæ¸²æŸ“ <code>8</code> ä¸ªï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ary = [];</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt;= <span class="number">1000</span>; i++ ) &#123;</span><br><span class="line">    ary.push( i );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> renderFriendList = timeChunk( ary, <span class="function"><span class="keyword">function</span>(<span class="params"> n </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement( <span class="string">&#x27;div&#x27;</span> );</span><br><span class="line">    div.innerHTML = n;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild( div );</span><br><span class="line">&#125;, <span class="number">8</span>);</span><br><span class="line">renderFriendList();</span><br></pre></td></tr></table></figure></li><li><p>æƒ°æ€§åŠ è½½å‡½æ•°</p><p>  åœ¨ <code>web</code> å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå› ä¸ºæµè§ˆå™¨ä¹‹é—´çš„å®ç°å·®å¼‚ï¼Œä¸€äº›å—…æ¢å·¥ä½œæ€»æ˜¯é¿å…ä¸äº†çš„ã€‚æ¯”å¦‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½åœ¨å„ä¸ªæµè§ˆå™¨éƒ½èƒ½é€šç”¨çš„äº‹ä»¶ç»‘å®šå‡½æ•° <code>addEvent</code>ï¼Œå¸¸è§çš„å†™æ³•å¦‚ä¸‹ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addEvent = <span class="function"><span class="keyword">function</span>(<span class="params"> elem, type, handler </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( <span class="built_in">window</span>.addEventListener ) &#123;</span><br><span class="line">        <span class="keyword">return</span> elem.addEventListener( type, handler, <span class="literal">false</span> );</span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">if</span> ( <span class="built_in">window</span>.attachEvent ) &#123;</span><br><span class="line">        <span class="keyword">return</span> elem.attachEvent( <span class="string">&#x27;on&#x27;</span> + type, handler );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>  è¿™ç§å†™æ³•çš„ç¼ºç‚¹æ˜¯æ¯æ¬¡è°ƒç”¨å‡½æ•°éƒ½å¿…é¡»æ‰§è¡Œé‡Œé¢çš„ifåˆ¤æ–­ï¼Œè™½ç„¶å¼€é”€ä¸å¤§ï¼Œä½†æ˜¯æœ‰åŠæ³•èƒ½é¿å…è¿™ç§æ“ä½œï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addEvent = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( <span class="built_in">window</span>.addEventListener ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"> elem, type, handler </span>) </span>&#123;</span><br><span class="line">            elem.addEventListener( type, handler, <span class="literal">false</span> );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">if</span> ( <span class="built_in">window</span>.attachEvent ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"> elem, type, handler </span>) </span>&#123;</span><br><span class="line">            elem.attachEvent( <span class="string">&#x27;on&#x27;</span> + type, handler );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>  æŠŠå—…æ¢çš„æ“ä½œæå‰åˆ°ä»£ç åŠ è½½ä¹‹å‰ï¼Œåœ¨ä»£ç åŠ è½½çš„æ—¶å€™å°±å³å¯è¿›è¡Œä¸€æ¬¡åˆ¤æ–­ï¼Œä»¥ä¾¿è®© <code>addEvent</code>è¿”å›ä¸€ä¸ªæ­£ç¡®çš„äº‹ä»¶ç»‘å®šå‡½æ•°ã€‚<br>  ä½†æ˜¯è¿™ç§å†™æ³•è¿˜æ˜¯å­˜åœ¨ç¼ºç‚¹çš„ï¼Œå¦‚æœæˆ‘ä»¬ä»å¤´åˆ°å°¾éƒ½ä¸éœ€è¦è¿›è¡Œäº‹ä»¶ç»‘å®šï¼Œé‚£ä¹ˆå‰é¢é‚£æ¬¡çš„å—…æ¢åŠ¨ä½œå°±æ˜¾å¾—å¤šä½™äº†ã€‚<br>  ç¬¬ä¸‰ç§æ–¹æ¡ˆæ˜¯æƒ°æ€§è½½å…¥å‡½æ•°æ–¹æ¡ˆï¼Œç¬¬ä¸€æ¬¡è¿›å…¥ <code>addEvent</code> å‡½æ•°çš„æ—¶å€™ä¼šé‡å†™äº‹ä»¶ç»‘å®šå‡½æ•°ï¼Œåœ¨ä¸‹æ¬¡è¿›å»çš„æ—¶å€™å°±ä¼šç›´æ¥æ‰§è¡Œäº‹ä»¶ç»‘å®šäº†ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addEvent = <span class="function"><span class="keyword">function</span>(<span class="params"> elem, type, handler </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( <span class="built_in">window</span>.addEventListener ) &#123;</span><br><span class="line">        addEvent =  <span class="function"><span class="keyword">function</span>(<span class="params"> elem, type, handler </span>) </span>&#123;</span><br><span class="line">            elem.addEventListener( type, handler, <span class="literal">false</span> );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">if</span> ( <span class="built_in">window</span>.attachEvent ) &#123;</span><br><span class="line">        addEvent = <span class="function"><span class="keyword">function</span>(<span class="params"> elem, type, handler </span>) </span>&#123;</span><br><span class="line">            elem.attachEvent( <span class="string">&#x27;on&#x27;</span> + type, handler );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    addEvent( elem, type, handler );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é—­åŒ…</title>
      <link href="/2016/11/30/closure/"/>
      <url>/2016/11/30/closure/</url>
      
        <content type="html"><![CDATA[<p>å¯¹äº <code>JavaScript</code> çš„ç¨‹åºå‘˜æ¥è¯´ï¼Œé—­åŒ…æ˜¯ä¸€ä¸ªéš¾æ‡‚åˆå¿…é¡»å¾æœçš„æ¦‚å¿µã€‚åœ¨ä»‹ç»é—­åŒ…å‰ï¼Œå…ˆæ¥çœ‹çœ‹å’Œé—­åŒ…æ¯æ¯ç›¸å…³çš„å˜é‡ä½œç”¨åŸŸå’Œå˜é‡çš„ç”Ÿå­˜å‘¨æœŸã€‚</p><h2 id="å˜é‡çš„ä½œç”¨åŸŸ"><a href="#å˜é‡çš„ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡çš„ä½œç”¨åŸŸ"></a>å˜é‡çš„ä½œç”¨åŸŸ</h2><p>å˜é‡çš„ä½œç”¨åŸŸæ— éå°±æ˜¯ä¸¤ç§ï¼šå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ã€‚å½“åœ¨å‡½æ•°ä¸­å£°æ˜ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œå¦‚æœç”¨å…³é”®å­— <code>var</code> æ¥å£°æ˜æ­¤å˜é‡ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯å±€éƒ¨å˜é‡ï¼Œå¦‚æœæ²¡æœ‰ <code>var</code> é‚£ä¹ˆå°±ä¼šæˆä¸ºå…¨å±€å˜é‡ã€‚ä¸€èˆ¬ä¸å»ºè®®ç”¨è¿™ç§æ–¹å¼å®šä¹‰å…¨å±€å˜é‡ã€‚è€Œæ˜¯ç”¨ <code>var</code> å°†å˜é‡å£°æ˜åœ¨å‡½æ•°çš„å¤–é¢ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;bubuzou.com&#x27;</span>;  <span class="comment">// å…¨å±€å˜é‡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&#x27;bubuzou&#x27;</span>;  <span class="comment">// å±€éƒ¨å˜é‡</span></span><br><span class="line">    age = <span class="number">12</span>;  <span class="comment">// å…¨å±€å˜é‡ï¼Œå»ºè®®å°‘ç”¨è¿™ç§å…¨å±€å˜é‡çš„å®šä¹‰æ–¹å¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><p>åœ¨ <code>JavaScript</code> ä¸­ï¼Œå‡½æ•°å¯ä»¥ç”¨æ¥åˆ›é€ å‡½æ•°ä½œç”¨åŸŸã€‚å‡½æ•°å†…éƒ¨å¯ä»¥çœ‹åˆ°å¤–é¢çš„å˜é‡ï¼Œè€Œå¤–é¢çœ‹ä¸åˆ°å‡½æ•°é‡Œçš„å˜é‡ã€‚è¿™æ˜¯å› ä¸ºå½“åœ¨å‡½æ•°ä¸­æœç´¢ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œå¦‚æœè¯¥å‡½æ•°å†…æ²¡æœ‰å£°æ˜è¿™ä¸ªå˜é‡ï¼Œé‚£ä¹ˆæ­¤æ¬¡æœç´¢çš„è¿‡ç¨‹ä¼šéšç€ä»£ç æ‰§è¡Œç¯å¢ƒåˆ›å»ºçš„ä½œç”¨åŸŸé“¾å¾€å¤–å±‚é€å±‚æœç´¢ï¼Œç›´åˆ°æœç´¢åˆ°å…¨å±€å˜é‡ä¸ºæ­¢ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> func1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">var</span> func2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> c = <span class="number">3</span>;</span><br><span class="line">        <span class="built_in">console</span>.log( b );  <span class="comment">// 2</span></span><br><span class="line">        <span class="built_in">console</span>.log( a );  <span class="comment">// 1</span></span><br><span class="line">    &#125; </span><br><span class="line">    func2();</span><br><span class="line">    <span class="built_in">console</span>.log( c );  <span class="comment">// æŠ¥é”™ï¼šc is not defined</span></span><br><span class="line">&#125;;</span><br><span class="line">func1();</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆèƒ½ä¸èƒ½ä»å‡½æ•°å¤–éƒ¨æ¥è®¿é—®å±€éƒ¨å˜é‡å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> number = <span class="number">6</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> number;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log( func()() );  <span class="comment">// 6</span></span><br></pre></td></tr></table></figure><h2 id="å˜é‡çš„ç”Ÿå­˜å‘¨æœŸ"><a href="#å˜é‡çš„ç”Ÿå­˜å‘¨æœŸ" class="headerlink" title="å˜é‡çš„ç”Ÿå­˜å‘¨æœŸ"></a>å˜é‡çš„ç”Ÿå­˜å‘¨æœŸ</h2><p>å…¨å±€å˜é‡çš„ç”Ÿå­˜å‘¨æœŸæ˜¯æ°¸ä¹…çš„ï¼Œé™¤éæˆ‘ä»¬ä¸»åŠ¨çš„é”€æ¯è¿™ä¸ªå…¨å±€å˜é‡ã€‚è€Œå¯¹äºå±€éƒ¨å˜é‡æ¥è¯´ï¼Œå½“é€€å‡ºå‡½æ•°æ—¶ï¼Œè¿™äº›å±€éƒ¨å˜é‡å°±å¤±å»äº†ç”Ÿå­˜çš„ç¯å¢ƒï¼Œæ‰€ä»¥ä¼šéšç€å‡½æ•°è°ƒç”¨çš„ç»“æŸè€Œè¢«é”€æ¯ã€‚<br>é‚£ä¹ˆæ˜¯å¦å¯ä»¥è®©å±€éƒ¨å˜é‡åœ¨å‡½æ•°è°ƒç”¨ç»“æŸçš„æ—¶å€™ä¸è¢«é”€æ¯å‘¢ï¼Ÿæ¥çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        a++;</span><br><span class="line">        <span class="built_in">console</span>.log( a );</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> f = func();</span><br><span class="line">f();  <span class="comment">// 2</span></span><br><span class="line">f();  <span class="comment">// 3</span></span><br><span class="line">f();  <span class="comment">// 4</span></span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢è¿™ä¸ªè¾“å‡ºç»“æœï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å±€éƒ¨å˜é‡ <code>a</code> å¹¶æ²¡æœ‰éšç€ <code>f()</code> çš„è°ƒç”¨è€Œè¢«é”€æ¯ã€‚è¿™æ˜¯å› ä¸ºå…¨å±€å˜é‡ <code>f</code> ä¿å­˜ç€å¯¹ <code>func</code> é‡Œé¢åŒ¿åå‡½æ•°çš„å¼•ç”¨ã€‚è€Œè¿™ä¸ªåŒ¿åå‡½æ•°æ˜¯å¯ä»¥è®¿é—®åˆ°å±€éƒ¨å˜é‡ <code>a</code> çš„ï¼Œæ‰€ä»¥è‡ªç„¶ <code>a</code> ä¹Ÿè¢«ä¿å­˜ä¸‹æ¥äº†ã€‚æ‰€ä»¥è¿™ç§æƒ…å†µä¸‹å±€éƒ¨å˜é‡çš„ç”Ÿå­˜å‘¨æœŸå°±å¾—ä»¥å»¶ç»­ã€‚ä¸Šé¢è¿™ä¸ªåŒ¿åå‡½æ•°å…¶å®å°±æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚å†æ¥çœ‹ä¸€ä¸ªé—­åŒ…çš„ç»å…¸åº”ç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾æœ‰5ä¸ªdiv</span></span><br><span class="line"><span class="keyword">var</span> nodes = <span class="built_in">document</span>.getElementsByTagName( <span class="string">&#x27;div&#x27;</span> );</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, l = nodes.length; i &lt; l; i++ ) &#123;</span><br><span class="line">    nodes[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( i );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“çœŸæ­£æ‰§è¡Œè¿™æ®µä»£ç çš„æ—¶å€™ï¼Œå‘ç°æ— è®ºç‚¹å‡»é‚£ä¸ª <code>div</code>ï¼Œæœ€åæ‰“å°çš„ç»“æœéƒ½æ˜¯ <code>4</code>ã€‚è¿™æ˜¯å› ä¸º <code>onclick</code> äº‹ä»¶æ˜¯å¼‚æ­¥è§¦å‘çš„ï¼Œå½“äº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼Œ<code>for</code> å¾ªç¯æ—©å·²ç»ç»“æŸï¼Œæ­¤æ—¶å˜é‡ <code>i</code> çš„å€¼å·²ç»æ˜¯ <code>4</code>ã€‚è§£å†³æ–¹æ¡ˆå¯ä»¥æ˜¯ç”¨é—­åŒ…æŠŠæ¯æ¬¡çš„ <code>i</code> éƒ½ä¿å­˜èµ·æ¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, l = nodes.length; i &lt; l; i++ ) &#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"> i </span>) </span>&#123;</span><br><span class="line">        nodes[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log( i );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)( i );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒç†ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€æ®µä»£ç ç”¨æ¥åˆ¤æ–­å¯¹è±¡ç±»å‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Type = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, type; type = [ <span class="string">&#x27;String&#x27;</span>, <span class="string">&#x27;Array&#x27;</span>, <span class="string">&#x27;Number&#x27;</span> ][ i++ ]; ) &#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"> type </span>) </span>&#123;</span><br><span class="line">        Type[ <span class="string">&#x27;is&#x27;</span> + type ] = <span class="function"><span class="keyword">function</span>(<span class="params"> obj </span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call( obj ) === <span class="string">&#x27;[object &#x27;</span> + type + <span class="string">&#x27;]&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)( type );</span><br><span class="line">&#125;</span><br><span class="line">Type.isArray( [] );  <span class="comment">// true</span></span><br><span class="line">Type.isString( <span class="string">&#x27;str&#x27;</span> );  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="ä»€ä¹ˆæ˜¯é—­åŒ…"><a href="#ä»€ä¹ˆæ˜¯é—­åŒ…" class="headerlink" title="ä»€ä¹ˆæ˜¯é—­åŒ…"></a>ä»€ä¹ˆæ˜¯é—­åŒ…</h2><p>å®˜æ–¹çš„è§£é‡Šæ˜¯ï¼šä¸€ä¸ªæ‹¥æœ‰è®¸å¤šå˜é‡å’Œç»‘å®šäº†è¿™äº›å˜é‡çš„ç¯å¢ƒçš„è¡¨è¾¾å¼ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰ï¼Œå› ä¸ºè¿™äº›å˜é‡ä¹Ÿæ˜¯è¯¥è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªæ¦‚å¿µä¸å¥½ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•å¾—ç†è§£æˆé—­åŒ…å°±æ˜¯èƒ½å¤Ÿè®¿é—®å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°ã€‚</p><h2 id="é—­åŒ…çš„ä½œç”¨"><a href="#é—­åŒ…çš„ä½œç”¨" class="headerlink" title="é—­åŒ…çš„ä½œç”¨"></a>é—­åŒ…çš„ä½œç”¨</h2><ul><li><p>å¯ä»¥åœ¨å‡½æ•°å¤–éƒ¨è®¿é—®åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å±€éƒ¨å˜é‡</p></li><li><p>å»¶ç»­å±€éƒ¨å˜é‡çš„ç”Ÿå­˜å‘¨æœŸ</p></li><li><p>å°è£…å˜é‡</p><p>  é—­åŒ…å¯ä»¥å¸®åŠ©æŠŠä¸€äº›ä¸éœ€è¦æš´éœ²åœ¨å…¨å±€çš„å˜é‡å°è£…æˆâ€œç§æœ‰å˜é‡â€ã€‚å‡è®¾æœ‰ä¸€ä¸ªè®¡ç®—ä¹˜ç§¯çš„å‡½æ•°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mult = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span>  a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++ ) &#123;</span><br><span class="line">        a = a * <span class="built_in">arguments</span>[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;;</span><br><span class="line">mult(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);  <span class="comment">// 24</span></span><br></pre></td></tr></table></figure><p>  <code>mult</code> å‡½æ•°æ¥å—ä¸€äº› <code>Number</code> ç±»å‹çš„å‚æ•°ï¼Œå¹¶ä¸”è¿”å›ä»–ä»¬çš„ä¹˜ç§¯ã€‚ç°å†æˆ‘ä»¬è§‰å¾—å¯¹äºé‚£äº›ç›¸åŒå‚æ•°æ¥è¯´ï¼Œæ¯æ¬¡å†è¿›è¡Œè®¡ç®—æ˜¯ä¸€ç§æµªè´¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å†³å®šåŠ å…¥ç¼“å­˜æœºåˆ¶æ¥æé«˜å‡½æ•°æ€§èƒ½ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cache = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> mult = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.join.call( <span class="built_in">arguments</span>, <span class="string">&#x27;&#x27;</span> );</span><br><span class="line">    <span class="keyword">if</span> ( cache[ args ] ) &#123;</span><br><span class="line">        <span class="keyword">return</span> cache[ args ];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span>  a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++ ) &#123;</span><br><span class="line">        a = a * <span class="built_in">arguments</span>[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cache[ args ] = a;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>  æˆ‘ä»¬çœ‹åˆ° <code>cache</code> è¿™ä¸ªå˜é‡ä»…ä»…åœ¨ <code>mult</code> å‡½æ•°ä¸­è¢«ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸ºäº†é¿å… <code>cache</code> æ±¡æŸ“å…¨å±€å˜é‡ï¼Œæˆ‘ä»¬å°†å®ƒæ”¾åˆ° <code>mult</code> å‡½æ•°é‡Œé¢</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mult = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cache = &#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.join.call( <span class="built_in">arguments</span>, <span class="string">&#x27;&#x27;</span> );</span><br><span class="line">        <span class="keyword">if</span> ( cache[ args ] ) &#123;</span><br><span class="line">            <span class="keyword">return</span> cache[ args ];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span>  a = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++ ) &#123;</span><br><span class="line">           a = a * <span class="built_in">arguments</span>[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cache[ args ] = a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>  æç‚¼å‡½æ•°æ˜¯ä»£ç é‡æ„ä¸­çš„ä¸€ç§å¸¸è§æŠ€å·§ã€‚å¦‚æœåœ¨ä¸€ä¸ªå¤§å‡½æ•°ä¸­æœ‰ä¸€äº›ä»£ç å—èƒ½å¤Ÿç‹¬ç«‹å‡ºæ¥ï¼Œæˆ‘ä»¬å¸¸å¸¸æŠŠè¿™äº›ä»£ç å—å°è£…åœ¨ç‹¬ç«‹çš„å°å‡½æ•°é‡Œé¢ã€‚ç‹¬ç«‹å‡ºæ¥çš„å°å‡½æ•°æœ‰åˆ©äºä»£ç çš„å¤ç”¨ï¼Œå¦‚æœè¿™äº›å°å‡½æ•°æœ‰ä¸€ä¸ªè‰¯å¥½çš„å‘½åï¼Œé‚£ä¹ˆå®ƒä»¬æœ¬èº«å°±èµ·åˆ°äº†ä¸€ä¸ªå¾ˆå¥½çš„æ³¨é‡Šä½œç”¨ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mult = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cache = &#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> calculate = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span>  a = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++ ) &#123;</span><br><span class="line">           a = a * <span class="built_in">arguments</span>[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.join.call( <span class="built_in">arguments</span>, <span class="string">&#x27;&#x27;</span> );</span><br><span class="line">        <span class="keyword">if</span> ( cache[ args ] ) &#123;</span><br><span class="line">            <span class="keyword">return</span> cache[ args ];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cache[ args ] = calculate.apply( <span class="literal">null</span>, <span class="built_in">arguments</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></li></ul><h2 id="é—­åŒ…ä¸å†…å­˜ç®¡ç†"><a href="#é—­åŒ…ä¸å†…å­˜ç®¡ç†" class="headerlink" title="é—­åŒ…ä¸å†…å­˜ç®¡ç†"></a>é—­åŒ…ä¸å†…å­˜ç®¡ç†</h2><p>å±€éƒ¨å˜é‡æœ¬æ¥åº”è¯¥åœ¨å‡½æ•°é€€å‡ºçš„æ—¶å€™å°±è¢«ç»“æŸå¼•ç”¨ï¼Œä½†å¦‚æœå±€éƒ¨å˜é‡è¢«å°è£…åœ¨é—­åŒ…å½¢æˆçš„ç¯å¢ƒä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªå±€éƒ¨å˜é‡å°±èƒ½ä¸€ç›´ç”Ÿå­˜ä¸‹å»ã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šæ¥çœ‹ï¼Œé—­åŒ…ç¡®å®ä¼šä½¿ä¸€äº›æ•°æ®æ— æ³•è¢«åŠæ—¶é”€æ¯ã€‚å¦‚æœå°†æ¥éœ€è¦å›æ”¶è¿™äº›å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æŠŠè¿™äº›å˜é‡è®¾ä¸º <code>null</code>ã€‚<br>è·Ÿé—­åŒ…å’Œå†…å­˜æ³„éœ²æœ‰å…³ç³»çš„åœ°æ–¹æ˜¯ï¼Œä½¿ç”¨é—­åŒ…çš„åŒæ—¶æ¯”è¾ƒå®¹æ˜“å½¢æˆå¾ªç¯å¼•ç”¨ï¼Œå¦‚æœé—­åŒ…çš„ä½œç”¨åŸŸä¸­ä¿å­˜ç€ä¸€äº› <code>DOM</code> èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ—¶å€™å°±æœ‰å¯èƒ½é€ æˆå†…å­˜æ³„éœ²ã€‚åœ¨ <code>IE9</code> ä¹‹å‰çš„æµè§ˆå™¨ä¸­ï¼Œç”±äº <code>BOM</code> å’Œ <code>DOM</code> ä¸­çš„å¯¹è±¡æ˜¯ä½¿ç”¨ <code>C++</code> å¯¹è±¡ä»¥ <code>COM</code> å¯¹è±¡çš„æ–¹å¼å®ç°çš„ï¼Œè€Œ <code>COM</code> å¯¹è±¡çš„åƒåœ¾æ”¶é›†æœºåˆ¶é‡‡ç”¨çš„æ˜¯å¼•ç”¨è®¡æ•°ç­–ç•¥ã€‚åœ¨åŸºäºå¼•ç”¨è®¡æ•°çš„åƒåœ¾æ”¶é›†æœºåˆ¶ä¸­ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡ä¹‹é—´å½¢æˆäº†å¾ªç¯å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡éƒ½æ— æ³•è¢«å›æ”¶ã€‚ä½†æˆ‘ä»¬åªè¦æŠŠå¾ªç¯å¼•ç”¨ä¸­çš„å¯¹è±¡è®¾ä¸º <code>null</code> å³å¯è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>thisã€callå’Œapply</title>
      <link href="/2016/11/28/this-call-apply/"/>
      <url>/2016/11/28/this-call-apply/</url>
      
        <content type="html"><![CDATA[<h2 id="this"><a href="#this" class="headerlink" title="this"></a>this</h2><p>è·Ÿåˆ«çš„è¯­è¨€ä¸åŒçš„æ˜¯ï¼Œ<code>JavaScript</code> çš„ <code>this</code> æ€»æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œå…·ä½“æŒ‡å‘å“ªä¸ªå¯¹è±¡æ˜¯åœ¨è¿è¡Œæ—¶åŸºäºå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒåŠ¨æ€ç»‘å®šçš„ï¼Œè€Œéå‡½æ•°è¢«å£°æ˜æ—¶çš„ç¯å¢ƒã€‚</p><h2 id="thisçš„æŒ‡å‘"><a href="#thisçš„æŒ‡å‘" class="headerlink" title="thisçš„æŒ‡å‘"></a>thisçš„æŒ‡å‘</h2><p>é™¤å»ä¸å¸¸ç”¨çš„ <code>eval</code> å’Œ <code>with</code> è¯­å¥çš„æƒ…å†µï¼Œå…·ä½“åˆ°å®é™…åº”ç”¨ä¸­ï¼Œ<code>this</code> çš„æŒ‡å‘å¤§è‡´å¯åˆ†ä¸ºä»¥ä¸‹4ç§ï¼š</p><ul><li><p>ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨</p><p>  å½“ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨çš„æ—¶å€™ï¼Œ<code>this</code> æŒ‡å‘è¯¥å¯¹è±¡ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou&#x27;</span>,</span><br><span class="line">    getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="built_in">this</span> === obj );  <span class="comment">// true</span></span><br><span class="line">        <span class="built_in">console</span>.log( <span class="built_in">this</span>.name );  <span class="comment">// &#x27;bubuzou&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.getName();</span><br></pre></td></tr></table></figure></li></ul><a id="more"></a><ul><li><p>ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨</p><p>  å½“å‡½æ•°ä¸ä½œä¸ºå¯¹è±¡çš„å±æ€§è¿›è¡Œè°ƒç”¨çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æ™®é€šå‡½æ•°æ–¹å¼ï¼Œæ­¤æ—¶çš„ <code>this</code> æ€»æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚åœ¨æµè§ˆå™¨çš„<code>JavaScript</code> é‡Œï¼Œè¿™ä¸ªå…¨å±€å¯¹è±¡æ˜¯ <code>window</code> å¯¹è±¡ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.name = <span class="string">&#x27;bubuzou.com&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="built_in">this</span>.name;  </span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log( getName() );  <span class="comment">// &#x27;bubuzou.com&#x27;</span></span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line"><span class="built_in">window</span>.name = <span class="string">&#x27;bubuzou.com&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou&#x27;</span>,</span><br><span class="line">    getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> getName = myObject.getName;</span><br><span class="line"><span class="built_in">console</span>.log( getName() );  <span class="comment">//  &#x27;bubuzou.com&#x27;</span></span><br></pre></td></tr></table></figure><p>  å†æ¥çœ‹ä¸€ä¸ªå®é™…çš„åº”ç”¨ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.id = <span class="string">&#x27;bubuzou&#x27;</span>;</span><br><span class="line"><span class="built_in">document</span>.getElementById( <span class="string">&#x27;div&#x27;</span> ).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="built_in">this</span>;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">this</span>.id );  <span class="comment">// &#x27;div&#x27;</span></span><br><span class="line">    <span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="built_in">this</span>.id );  <span class="comment">// &#x27;bubuzou&#x27;</span></span><br><span class="line">        <span class="built_in">console</span>.log( that.id );  <span class="comment">// &#x27;div&#x27;</span></span><br><span class="line">    &#125;;  </span><br><span class="line">    callback();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>  <div class="tip">  åœ¨ `ECMAScript 5` çš„ `strict` æ¨¡å¼ä¸‹ï¼Œè¿™ç§æƒ…å†µçš„ `this` å·²ç»è¢«è§„å®šä¸ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡äº†ï¼Œè€Œæ˜¯ `undefined`  </div>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">    &quot;use strict&quot;</span></span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">this</span> );  <span class="comment">// undefined</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></li><li><p>æ„é€ å™¨è°ƒç”¨</p><p>  <code>JavaScript</code> ä¸­æ²¡æœ‰ç±»ï¼Œä½†æ˜¯å¯ä»¥ä»æ„é€ å™¨ä¸­åˆ›å»ºå¯¹è±¡ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº† <code>new</code> è¿ç®—ç¬¦ï¼Œä½¿å¾—æ„é€ å™¨çœ‹èµ·æ¥æ›´åƒä¸€ä¸ªç±»ã€‚<br>é™¤äº†å®¿ä¸»æä¾›çš„ä¸€äº›å†…ç½®å‡½æ•°å¤–ï¼Œå¤§å¤šæ•°çš„ <code>JavaScript</code> å‡½æ•°éƒ½å¯ä»¥å½“åšå†…ç½®æ„é€ å™¨ä½¿ç”¨ã€‚æ„é€ å™¨çš„å¤–è¡¨è·Ÿæ™®é€šå‡½æ•°ä¸€æ¨¡ä¸€æ ·ï¼Œå®ƒä»¬çš„åŒºåˆ«åœ¨äºè°ƒç”¨çš„æ–¹å¼ã€‚å½“ç”¨ <code>new</code> è¿ç®—ç¬¦è°ƒç”¨å‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°æ€»ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæ„é€ å™¨é‡Œçš„ <code>this</code> å°±æ˜¯æŒ‡å‘è¿”å›çš„è¿™ä¸ªå¯¹è±¡ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MyClass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&#x27;bubuzou.com&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> MyClass();</span><br><span class="line"><span class="built_in">console</span>.log( obj.name );  <span class="comment">// &#x27;bubuzou.com&#x27;</span></span><br></pre></td></tr></table></figure><p>  ä½†æ˜¯ä½¿ç”¨æ„é€ å™¨è°ƒç”¨éœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæ„é€ å™¨æ˜¾ç¤ºçš„è¿”å›äº†ä¸€ä¸ª <code>object</code> ç±»å‹çš„å¯¹è±¡ï¼Œé‚£ä¹ˆæ­¤æ¬¡è¿ç®—ç»“æœæœ€ç»ˆä¼šè¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æ‰€æœŸå¾…çš„ <code>this</code>:</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MyClass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&#x27;bubuzou.com&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        name: <span class="string">&#x27;bubuzou&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;     </span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> MyClass();</span><br><span class="line"><span class="built_in">console</span>.log( obj.name );  <span class="comment">// &#x27;bubuzou&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p><code>Function.prototype.call</code> æˆ– <code>Function.prototype.apply</code> è°ƒç”¨</p><p>  è·Ÿæ™®é€šçš„å‡½æ•°è°ƒç”¨ç›¸æ¯”ï¼Œç”¨ <code>Function.prototype.call</code> æˆ– <code>Function.prototype.apply</code> è°ƒç”¨å¯ä»¥åŠ¨æ€åœ°æ”¹å˜ä¼ å…¥å‡½æ•°çš„ <code>this</code>ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou.com&#x27;</span>,</span><br><span class="line">    getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log( obj1.getName() );  <span class="comment">// &#x27;bubuzou.com&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log( obj1.getName.call( obj2 ) );  <span class="comment">// &#x27;bubuzou&#x27;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="ä¸¢å¤±çš„this"><a href="#ä¸¢å¤±çš„this" class="headerlink" title="ä¸¢å¤±çš„this"></a>ä¸¢å¤±çš„this</h2><p><code>document.getElementById</code> è¿™ä¸ªæ–¹æ³•åæœ‰ç‚¹é•¿ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šå°è¯•ç”¨ä¸€ä¸ªç®€å•ç‚¹çš„æ¥æ›¿ä»£ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getId = <span class="function"><span class="keyword">function</span>(<span class="params"> id </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">document</span>.getElementById( id );</span><br><span class="line">&#125;;</span><br><span class="line">getId( <span class="string">&#x27;div&#x27;</span> );</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¹Ÿè®¸æ€è€ƒè¿‡ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ä¸‹é¢çš„è¿™ä¸ªæ›´ç®€å•çš„æ–¹å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getId = <span class="built_in">document</span>.getElementById;</span><br><span class="line">getId( <span class="string">&#x27;div&#x27;</span> );</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢è¿™æ®µä»£ç çš„æ—¶å€™ï¼Œåœ¨ <code>Chrome</code> æµè§ˆå™¨ä¸­ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚è¿™æ˜¯å› ä¸ºè®¸å¤šæµè§ˆå™¨å¼•æ“çš„ <code>document.getElementById</code> æ–¹æ³•çš„å†…éƒ¨å®ç°ä¸­éœ€è¦ç”¨åˆ° <code>this</code>ã€‚è€Œè¿™ä¸ª <code>this</code> æœ¬æ¥æœŸæœ›æŒ‡å‘ <code>document</code>ï¼Œå½“<code>getElementById</code> æ–¹æ³•ä½œä¸º <code>document</code> çš„å±æ€§æ¥è°ƒç”¨çš„æ—¶å€™ï¼Œå†…éƒ¨çš„ <code>this</code> ç¡®å®æ˜¯æŒ‡å‘ <code>document</code> çš„ã€‚ä½†å½“ç”¨<code>getId</code> æ¥å¼•ç”¨ <code>document.getElementById</code> ä¹‹åï¼Œå†è°ƒç”¨ <code>getId</code>ï¼Œæ­¤æ—¶å°±æˆäº†æ™®é€šå‡½æ•°è°ƒç”¨ï¼Œå‡½æ•°å†…éƒ¨çš„ <code>this</code> æŒ‡å‘äº† <code>window</code>ï¼Œè€Œæ˜¯ä¸æ˜¯åŸæ¥çš„ <code>document</code>ï¼Œæ‰€ä»¥ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚<br>ä¸è¿‡æˆ‘ä»¬å¯ä»¥å°è¯•ç”¨ <code>apply</code> æŠŠ <code>document</code> å½“åš <code>this</code> ä¼ å…¥ <code>getId</code> å‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById = (<span class="function"><span class="keyword">function</span>(<span class="params"> func </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> func.apply( <span class="built_in">document</span>, <span class="built_in">arguments</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)( <span class="built_in">document</span>.getElementById );</span><br><span class="line"><span class="keyword">var</span> getId = <span class="built_in">document</span>.getElementById;</span><br><span class="line"><span class="built_in">console</span>.log( getId( <span class="string">&#x27;div&#x27;</span> ).id );  <span class="comment">// &#x27;div&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="callå’Œapplyçš„åŒºåˆ«"><a href="#callå’Œapplyçš„åŒºåˆ«" class="headerlink" title="callå’Œapplyçš„åŒºåˆ«"></a>callå’Œapplyçš„åŒºåˆ«</h2><p>ä¸¤è€…çš„ä½œç”¨ä¸€æ¨¡ä¸€æ ·ï¼ŒåŒºåˆ«åªæ˜¯ä¼ å…¥çš„å‚æ•°å½¢å¼ä¸ä¸€æ ·ã€‚<br><code>apply</code>æ¥å—2ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æŒ‡å®šäº†å‡½æ•°ä½“å†…çš„ <code>this</code> å¯¹è±¡çš„æŒ‡å‘ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªå¸¦ä¸‹æ ‡çš„é›†åˆï¼Œè¿™ä¸ªé›†åˆå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç±»æ•°ç»„ã€‚<br><code> call</code> çš„å‚æ•°å°±ä¸å›ºå®šäº†ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°å’Œ <code>apply</code> æ˜¯ä¸€æ ·çš„ï¼Œä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹å¾€åï¼Œæ¯ä¸ªå‚æ•°è¢«ä¾æ¬¡ä¼ å…¥å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"> a, b, c </span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( [a, b, c] );  </span><br><span class="line">&#125;;</span><br><span class="line">func.apply( <span class="literal">null</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] );  <span class="comment">// [1, 2, 3]</span></span><br><span class="line">func.call( <span class="literal">null</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> );  <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>å½“è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œ<code>JavaScript</code> çš„è§£é‡Šå™¨å¹¶ä¸ä¼šè®¡è¾ƒå½¢å‚å’Œå®å‚åœ¨æ•°é‡ã€ç±»å‹å’Œé¡ºåºä¸Šçš„åŒºåˆ«ï¼Œä»è¿™ä¸ªæ„ä¹‰ä¸Šæ¥è¯´ï¼Œ<code>apply</code> æ¯” <code>call</code> çš„ä½¿ç”¨ç‡æ›´é«˜ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æ˜ç¡®æŒ‡å®šå‚æ•°çš„ä¸ªæ•°ï¼Œä¹Ÿå¯ä»¥ç”¨ <code>call</code> æ¥ä¼ é€å‚æ•°ã€‚</p><div class="tip">å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ `null`ï¼Œé‚£ä¹ˆå‡½æ•°ä½“å†…çš„ `this` ä¼šæŒ‡å‘é»˜è®¤çš„å®¿ä¸»å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ä¸­æ˜¯ `window`ï¼Œä½†å¦‚æœæ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåˆ™è¿˜æ˜¯ä¸º `null`</div><h2 id="callå’Œapplyçš„ç”¨é€”"><a href="#callå’Œapplyçš„ç”¨é€”" class="headerlink" title="callå’Œapplyçš„ç”¨é€”"></a>callå’Œapplyçš„ç”¨é€”</h2><ul><li><p>æ”¹å˜ <code>this</code> æŒ‡å‘</p><p>  <code>call</code> å’Œ <code>apply</code> æœ€å¸¸è§çš„ç”¨é€”æ˜¯æ”¹å˜å‡½æ•°å†…éƒ¨çš„ <code>this</code> æŒ‡å‘ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.name = <span class="string">&#x27;bubuzou&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou.com&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">this</span>.name );</span><br><span class="line">&#125;;</span><br><span class="line">getName();  <span class="comment">// &#x27;bubuzou&#x27;</span></span><br><span class="line">getName.apply( obj );  <span class="comment">// &#x27;bubuzou.com&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p><code>Function.prototype.bind</code></p><p>  å¤§éƒ¨åˆ†é«˜çº§çš„æµè§ˆå™¨éƒ½å®ç°å†…ç½®çš„ <code>Function.prototype.bind</code> ï¼Œç”¨æ¥æŒ‡å®šå‡½æ•°å†…éƒ¨çš„ <code>this</code> æŒ‡å‘ï¼Œå³ä½¿æ²¡æœ‰åŸç”Ÿçš„<code>Function.prototype.bind</code> å®ç°ï¼Œæˆ‘ä»¬æ¥æ¨¡æ‹Ÿå®ç°ä¸€ä¸ªä¹Ÿä¸æ˜¯éš¾äº‹ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span>(<span class="params"> context </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> self.apply( context, <span class="built_in">arguments</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou.com&#x27;</span>  </span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">this</span>.name );</span><br><span class="line">&#125;.bind( obj );</span><br><span class="line">func();  <span class="comment">// &#x27;bubuzou.com&#x27;</span></span><br></pre></td></tr></table></figure><p>  è¿™æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°å¾—æ›´å¤æ‚ä¸€ç‚¹ï¼Œä½¿å¾—å¯ä»¥å¾€ <code>func</code> å‡½æ•°ä¸­é¢„å…ˆå¡«å…¥ä¸€äº›å‚æ•°ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="built_in">this</span>,</span><br><span class="line">        context = [].shift.call( <span class="built_in">arguments</span> ),</span><br><span class="line">        args = [].slice.call( <span class="built_in">arguments</span> );</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> self.apply( context, [].concat.call( args, [].slice.call( <span class="built_in">arguments</span> )));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name: <span class="string">&#x27;bubuzou.com&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"> a, b, c, d </span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">this</span>.name );  <span class="comment">// &#x27;bubuzou.com&#x27;</span></span><br><span class="line">    <span class="built_in">console</span>.log( [a, b, c, d] );  <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line">&#125;.bind(obj, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">func(<span class="number">3</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure></li><li><p>å€Ÿç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•</p><p>  æˆ‘ä»¬çŸ¥é“ï¼Œæœé¹ƒæ—¢ä¸ä¼šç­‘å·¢ï¼Œä¹Ÿä¸ä¼šå­µé›ï¼Œè€Œæ˜¯æŠŠè‡ªå·±çš„è›‹å¯„æ‰˜ç»™äº‘é›€ç­‰å…¶ä»–é¸Ÿç±»ï¼Œè®©ä»–ä»¬ä»£ä¸ºå­µåŒ–å’Œå…»è‚²ã€‚åŒæ ·ï¼Œåœ¨<code>JavaScript</code>ä¸­ä¹Ÿå­˜åœ¨ç±»ä¼¼çš„å€Ÿç”¨ç°è±¡ã€‚<br>å€Ÿç”¨çš„ç¬¬ä¸€ç§åœºæ™¯æ˜¯â€œå€Ÿç”¨æ„é€ å‡½æ•°â€ï¼Œé€šè¿‡è¿™ç§æŠ€æœ¯ï¼Œå¯ä»¥å®ç°ä¸€äº›ç±»ä¼¼ç»§æ‰¿çš„æ•ˆæœï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> A = <span class="function"><span class="keyword">function</span>(<span class="params"> name </span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> B = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    A.apply( <span class="built_in">this</span>, <span class="built_in">arguments</span> );</span><br><span class="line">&#125;;</span><br><span class="line">B.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> B( <span class="string">&#x27;bubuzou.com&#x27;</span> );</span><br><span class="line"><span class="built_in">console</span>.log( b.getName() );  <span class="comment">// &#x27;bubuzou.com&#x27;</span></span><br></pre></td></tr></table></figure><p>  å€Ÿç”¨æ–¹æ³•çš„ç¬¬äºŒç§è¿ç”¨åœºæ™¯è·Ÿæˆ‘ä»¬çš„å…³ç³»æ›´åŠ å¯†åˆ‡ã€‚å‡½æ•°çš„å‚æ•°åˆ—è¡¨ <code>arguments</code> æ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œæ‰€ä»¥ä¸èƒ½åƒæ•°ç»„ä¸€æ ·ï¼Œè¿›è¡Œæ’åºæ“ä½œæˆ–å¾€é›†åˆé‡Œæ·»åŠ ä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå€Ÿç”¨ <code>Array.prototype</code> å¯¹è±¡ä¸Šçš„æ–¹æ³•ã€‚æ¯”å¦‚åƒå¾€<code>arguments</code> é‡Œæ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">Array</span>.prototype.push.call( <span class="built_in">arguments</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">arguments</span> );  <span class="comment">// [1, 2, 3]</span></span><br><span class="line">&#125;)(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>  å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­:</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line"><span class="built_in">Array</span>.prototype.push.call( a, <span class="string">&#x27;first&#x27;</span> );</span><br><span class="line"><span class="built_in">console</span>.log( a.length );  <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log( a[<span class="number">0</span>] );  <span class="comment">// &#x27;first&#x27;</span></span><br></pre></td></tr></table></figure><p>  ä¸Šé¢è¿™æ®µä»£ç åœ¨ä½ç‰ˆæœ¬IEæµè§ˆå™¨ä¸­æ‰§è¡Œçš„æ—¶å€™ï¼Œå¿…é¡»æ˜¾å¼åœ°ç»™å¯¹è±¡aè®¾ç½®lengthå±æ€§:</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">    length: <span class="number">0</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>  ç„¶è€Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡éƒ½å¯ä»¥ä¼ å…¥Array.prototype.pushï¼Œå¿…é¡»æ»¡è¶³ä»¥ä¸‹2ä¸ªæ¡ä»¶:</p><ul><li><p>å¯¹è±¡æœ¬èº«å¯ä»¥å­˜å–å±æ€§</p><p>  å¦‚æœä¸æ˜¯ä¸€ä¸ª <code>object</code> ç±»å‹çš„å¯¹è±¡è€Œæ˜¯ <code>number</code> ç±»å‹ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¼šæ€ä¹ˆæ ·ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">Array</span>.prototype.push.call( a, <span class="string">&#x27;first&#x27;</span> );</span><br><span class="line"><span class="built_in">console</span>.log( a.length );  <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log( a[<span class="number">0</span>] );  <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></li><li><p>å¯¹è±¡çš„ <code>length</code> å±æ€§å¯ä»¥è¯»å†™<br>  å‡½æ•°çš„ <code>length</code> å°±æ˜¯åªæœ‰ä¸€ä¸ªåªè¯»çš„å±æ€§ï¼Œè¡¨ç¤ºå½¢å‚çš„ä¸ªæ•°ï¼Œæˆ‘ä»¬å°è¯•æŠŠä¸€ä¸ªå‡½æ•°å½“åš <code>this</code> ä¼ å…¥<code>Array.prototype.push</code>:</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="built_in">Array</span>.prototype.push.call( func, <span class="string">&#x27;first&#x27;</span> );</span><br><span class="line"><span class="built_in">console</span>.log( func.length );  <span class="comment">// æŠ¥é”™ï¼šCannot assign to read only property &#x27;length&#x27; of function</span></span><br></pre></td></tr></table></figure></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°ç»„</title>
      <link href="/2016/11/17/js-array/"/>
      <url>/2016/11/17/js-array/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•°ç»„å­—é¢é‡"><a href="#æ•°ç»„å­—é¢é‡" class="headerlink" title="æ•°ç»„å­—é¢é‡"></a>æ•°ç»„å­—é¢é‡</h2><p>æ•°ç»„å­—é¢é‡æä¾›äº†ä¸€ç§éå¸¸æ–¹ä¾¿çš„åˆ›å»ºæ•°ç»„çš„æ–¹æ³•ã€‚ä¸€ä¸ªæ•°ç»„è¡¨è¾¾å¼æ˜¯åœ¨ä¸€å¯¹æ–¹æ‹¬å·å†…åŒ…å›´é›¶ä¸ªæˆ–å¤šä¸ªç”¨é€—å·åˆ†éš”çš„å€¼çš„è¡¨è¾¾å¼ã€‚<br>æ•°ç»„çš„ç¬¬ä¸€ä¸ªå€¼çš„å±æ€§åæ˜¯ <code>0</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> empty = [];</span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="string">&#x27;zero&#x27;</span>, <span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;four&#x27;</span>, <span class="string">&#x27;five&#x27;</span>, <span class="string">&#x27;six&#x27;</span>, <span class="string">&#x27;seven&#x27;</span>];</span><br><span class="line">empty[<span class="number">1</span>];  <span class="comment">// undefined</span></span><br><span class="line">numbers[<span class="number">1</span>];  <span class="comment">// &#x27;one&#x27;</span></span><br><span class="line">empty.length;  <span class="comment">// 0</span></span><br><span class="line">numbers.length;  <span class="comment">// 8</span></span><br></pre></td></tr></table></figure><p>åœ¨å¤§å¤šæ•°è¯­è¨€ä¸­ï¼Œä¸€ä¸ªæ•°ç»„çš„æ‰€æœ‰å…ƒç´ éƒ½è¦æ±‚æ˜¯ç›¸åŒçš„ç±»å‹ã€‚<code>js</code> å…è®¸æ•°ç»„åŒ…å«ä»»æ„æ··åˆç±»å‹çš„å€¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> misc = [<span class="string">&#x27;string&#x27;</span>, <span class="number">98.6</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">null</span>];</span><br><span class="line">misc.length;  <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="é•¿åº¦"><a href="#é•¿åº¦" class="headerlink" title="é•¿åº¦"></a>é•¿åº¦</h2><p>æ¯ä¸ªæ•°ç»„éƒ½æœ‰ä¸€ä¸ª <code>length</code> å±æ€§ã€‚å’Œå¤§å¤šæ•°çš„è¯­è¨€ä¸åŒï¼Œ<code>js</code> ä¸­æ•°ç»„çš„ <code>length</code> æ˜¯æ²¡æœ‰ä¸Šé™çš„ã€‚å¦‚æœç”¨å¤§äºæˆ–ç­‰äº <code>length</code> çš„æ•°å­—ä½œä¸ºä¸‹æ ‡æ¥å­˜å‚¨ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆ <code>length</code> çš„å€¼ä¼šè¢«å¢å¤§ä»¥ä¾¿å®¹çº³æ–°çš„å€¼ï¼Œä¸ä¼šå‘ç”Ÿæ•°ç»„è¶Šç•Œçš„é”™è¯¯ã€‚å¯ä»¥ç›´æ¥è®¾ç½® <code>length</code> çš„å€¼ï¼Œå¦‚æœ <code>length</code> å¤§äºå½“å‰çš„ <code>length</code> å€¼ï¼Œåˆ™æ›´å¤§çš„é‚£äº›ä¸‹æ ‡çš„å€¼éƒ½æ˜¯ <code>undefined</code>ï¼›å¦‚æœæ›´å°ï¼Œ<br>é‚£ä¹ˆå°†ä¼šæŠŠæ‰€æœ‰ä¸‹æ ‡å¤§äºç­‰äºæ–° <code>length</code> çš„å±æ€§ç»™åˆ é™¤ã€‚é€šè¿‡æŠŠä¸‹æ ‡æŒ‡å®šä¸ºä¸€ä¸ªæ•°ç»„çš„å½“å‰ <code>length</code>ï¼Œå¯ä»¥é™„åŠ ä¸€ä¸ªæ–°å…ƒç´ åˆ°è¯¥æ•°ç»„çš„æœ«å°¾ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>];</span><br><span class="line">arr.length;  <span class="comment">// 3</span></span><br><span class="line">arr.length = <span class="number">6</span>;</span><br><span class="line">arr;  <span class="comment">// [&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;, undefined, undefined, undefined]</span></span><br><span class="line">arr.length = <span class="number">2</span>;</span><br><span class="line">arr;  <span class="comment">// [&#x27;one&#x27;, &#x27;two&#x27;]</span></span><br><span class="line">arr[arr.length] = <span class="string">&#x27;last&#x27;</span>;  <span class="comment">// [&#x27;one&#x27;, &#x27;two&#x27;, &#x27;last&#x27;];</span></span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><p>ç”±äº <code>js</code> çš„æ•°ç»„å…¶å®å°±æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥ <code>delete</code> è¿ç®—ç¬¦å¯ä»¥åˆ é™¤æ•°ç»„çš„å…ƒç´ ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>];</span><br><span class="line"><span class="keyword">delete</span> arr[<span class="number">1</span>]; </span><br><span class="line">arr;  <span class="comment">// [&#x27;one&#x27;, undefined, &#x27;three&#x27;]</span></span><br></pre></td></tr></table></figure><p>é—æ†¾çš„æ˜¯åˆ é™¤åçš„æ•°ç»„ç›´æ¥ç•™äº†ä¸€ä¸ªç©ºä½å€¼æ˜¯ <code>undefined</code>ï¼Œå¹¸è¿çš„æ˜¯å¯ä»¥é€šè¿‡æ•°ç»„çš„ <code>splice</code> æ–¹æ³•æ¥è¿›è¡Œè°ƒæ•´ã€‚<code>splice</code> æ–¹æ³•æ¥å— <code>2</code> ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ•°ç»„çš„åºå·ï¼Œç¬¬äºŒä¸ªæ˜¯åˆ é™¤çš„å…ƒç´ ä¸ªæ•°ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„åŒ…å«äº†æ‰€æœ‰çš„åˆ é™¤å…ƒç´ ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr.splice(<span class="number">1</span>, <span class="number">1</span>); <span class="comment">// [undefined]</span></span><br><span class="line">arr;  <span class="comment">// [&#x27;one&#x27;, &#x27;three&#x27;]</span></span><br></pre></td></tr></table></figure><h2 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h2><p>å› ä¸º <code>js</code> æ•°ç»„å…¶å®å°±æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥ <code>for in</code> è¯­å¥å¯ä»¥ç”¨æ¥éå†ä¸€ä¸ªæ•°ç»„çš„æ‰€æœ‰å±æ€§ã€‚ä½†æ˜¯ç”¨ <code>for in</code>è¯­å¥æ— æ³•ä¿è¯é¡ºåºã€‚æ‰€ä»¥éå†è¿˜æ˜¯ç”¨å¸¸è§„çš„ <code>for</code> å¾ªç¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, l = numbers.length; i &lt; l; i++ ) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log( numbers[i] );  <span class="comment">// 1, 2, 3, 4, 5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„"><a href="#åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„" class="headerlink" title="åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„"></a>åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];  <span class="comment">// &#x27;object&#x27;</span></span><br></pre></td></tr></table></figure><p><code>js</code> æœ¬èº«å¯¹äºæ•°ç»„å’Œå¯¹è±¡çš„åŒºåˆ«æ˜¯æ··ä¹±çš„ã€‚<code>typeof</code> è¿ç®—ç¬¦æŠ¥å‘Šæ•°ç»„çš„ç±»å‹æ˜¯ <code>object</code>ï¼Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚<br><code>js</code> æ²¡æœ‰ä¸€ä¸ªå¥½çš„æœºåˆ¶æ¥åŒºåˆ«æ˜¯æ•°ç»„è¿˜æ˜¯å¯¹è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ª <code>is_array</code> å‡½æ•°æ¥å¼¥è¡¥è¿™ä¸ªç¼ºé™·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isArray = <span class="function"><span class="keyword">function</span>(<span class="params"> obj </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> obj &amp;&amp; </span><br><span class="line">        <span class="keyword">typeof</span> obj === <span class="string">&#x27;object&#x27;</span> &amp;&amp;</span><br><span class="line">        obj.constructor === <span class="built_in">Array</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸ªåˆ¤æ–­åŸºæœ¬åœ¨å¸¸è§„é¡µé¢å°±èƒ½å¾ˆå¥½çš„åŒºåˆ†å‡ºæ•°ç»„è¿˜æ˜¯å¯¹è±¡äº†ã€‚ä½†æ˜¯ä¹Ÿæœ‰ç‰¹ä¾‹ï¼Œæ¯”å¦‚åœ¨ä¸åŒçš„çª—å£(<code>window</code>)æˆ–å¸§(<code>frame</code>)å°±ä¼šå¤±è´¥ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªæ›¿æ¢ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isArray = <span class="function"><span class="keyword">function</span>(<span class="params"> obj </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.apply( obj ) === <span class="string">&#x27;[object Array]&#x27;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æ•°ç»„ï¼Œè¿˜å¯ä»¥ç”¨åŸå‹é“¾çš„æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isArray = <span class="function"><span class="keyword">function</span>(<span class="params"> obj </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> obj.__prototype__ === <span class="built_in">Array</span>.prototype;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><ul><li><p><code>array.concat(item1[, item2, item2, ...])</code></p><p>  <code>concat</code> äº§ç”Ÿä¸€ä¸ªæ–°æ•°ç»„ï¼Œå‚æ•° <code>item</code> å¯ä»¥æ˜¯ä¸€ä¸ªä»»æ„ç±»å‹çš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœæ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆæ•°ç»„çš„æ‰€æœ‰å…ƒç´ éƒ½ä¼šè¢«æ·»åŠ åˆ°æ–°æ•°ç»„é‡Œã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> b = [<span class="string">&#x27;x&#x27;</span>,<span class="string">&#x27;y&#x27;</span>];</span><br><span class="line">a.concat(b, <span class="literal">true</span>);  <span class="comment">// [&quot;a&quot;, &quot;b&quot;, &quot;x&quot;, &quot;y&quot;, true]</span></span><br></pre></td></tr></table></figure></li><li><p><code>array.join(separator)</code></p><p>  <code>join</code> æ–¹æ³•æŠŠ <code>array</code> ä¸­çš„æ¯ä¸ªå…ƒç´ æ„é€ æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¥ç€ç”¨ä¸€ä¸ª <code>separator</code> åˆ†éš”ç¬¦æŠŠå®ƒä»¬è¿æ¥åœ¨ä¸€èµ·ã€‚é»˜è®¤çš„<code>separator</code> æ˜¯é€—å·,ã€‚æƒ³è¦æ— é—´éš”çš„è¿æ¥ï¼Œå¯ä»¥ä½¿ç”¨ç©ºå­—ç¬¦ä¸²ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">a.join();  <span class="comment">// &#x27;a,b,c&#x27;</span></span><br><span class="line">a.join(<span class="string">&#x27;&#x27;</span>);  <span class="comment">// &#x27;abc&#x27;</span></span><br></pre></td></tr></table></figure>  <div class="tip">  å¦‚æœæƒ³æŠŠå¤§é‡çš„å­—ç¬¦ä¸²ç‰‡æ®µç»„è£…æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨ `+` å…ƒç´ è¿ç®—ç¬¦è¿æ¥è¿™äº›ç‰‡æ®µä¼šæ¯”æŠŠè¿™äº›ç‰‡æ®µæ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­å¹¶ä¸”ç”¨ `join` è¿æ¥èµ·æ¥æ›´å¿«ã€‚</div></li><li><p><code>array.pop()</code></p><p>  <code>pop</code> æ–¹æ³•ç§»é™¤æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ å¹¶è¿”å›è¯¥å…ƒç´ ã€‚å¦‚æœ <code>array</code> æ˜¯ç©ºå€¼ï¼Œåˆ™ä¼šè¿”å› <code>undefined</code></p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">a.pop();  <span class="comment">// &#x27;c&#x27;</span></span><br><span class="line"><span class="comment">// popå¯ä»¥è¿™æ ·å®ç°ï¼š</span></span><br><span class="line"><span class="built_in">Array</span>.method(<span class="string">&#x27;pop&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.splice( <span class="built_in">this</span>.length - <span class="number">1</span>, <span class="number">1</span> )[<span class="number">0</span>];</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><code>array.push(item1[, item2, ...])</code></p><p>  <code>push</code> æ–¹æ³•æŠŠä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°é™„åŠ åˆ°ä¸€ä¸ªæ•°ç»„çš„å°¾éƒ¨ã€‚å‚æ•°å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°ç»„ã€‚å¦‚æœæ˜¯æ•°ç»„ï¼Œå®ƒä¼šæŠŠå‚æ•°æ•°ç»„ä½œä¸ºè¿™ä¸ªå…ƒç´ æ·»åŠ åˆ°æ•°ç»„ä¸­ã€‚è¿”å›ä¿®æ”¹åçš„æ•°ç»„é•¿åº¦ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> b = [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> c = a.push(b, <span class="literal">true</span>);</span><br><span class="line"><span class="comment">// a: [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, [&#x27;x&#x27;, &#x27;y&#x27;, &#x27;z&#x27;], true]</span></span><br><span class="line"><span class="comment">// c: 5</span></span><br><span class="line"><span class="comment">// pushå¯ä»¥è¿™æ ·å®ç°ï¼š</span></span><br><span class="line"><span class="built_in">Array</span>.method(<span class="string">&#x27;push&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.splice.apply( </span><br><span class="line">    <span class="built_in">this</span>,</span><br><span class="line">    [<span class="built_in">this</span>.length, <span class="number">0</span>].</span><br><span class="line">        concat(<span class="built_in">Array</span>.prototype.slice.apply(<span class="built_in">arguments</span>)));</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.length;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><code>array.reverse()</code></p><p>  <code>reverse</code> æ–¹æ³•åè½¬ <code>array</code> é‡Œçš„å…ƒç´ çš„é¡ºåºï¼Œå¹¶è¿”å› <code>array</code> æœ¬èº«ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> b = a.reverse();  <span class="comment">// aå’Œbéƒ½æ˜¯[&#x27;c&#x27;, &#x27;b&#x27;, &#x27;a&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>array.shift()</code></p><p>  <code>shift</code> æ–¹æ³•ç§»é™¤æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”è¿”å›è¿™ä¸ªå…ƒç´ ã€‚å¦‚æœæ•°ç»„ä¸ºç©ºï¼Œåˆ™è¿”å› <code>undefined</code>ã€‚ <code>shift</code> é€šå¸¸æ¯” <code>pop</code> æ…¢å¾—å¤šã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> b = a.shift();  <span class="comment">// a: [&#x27;b&#x27;, &#x27;c&#x27;], b: &#x27;a&#x27;</span></span><br><span class="line"><span class="comment">// shiftå®ç°</span></span><br><span class="line"><span class="built_in">Array</span>.method(<span class="string">&#x27;shift&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.splice(<span class="number">0</span>, <span class="number">1</span>)[<span class="number">0</span>];</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><code>array.slice(start, end)</code></p><p>  <code>slice</code> æ–¹æ³•å¯¹æ•°ç»„è¿›è¡Œä¸€æ®µæµ…å¤åˆ¶ã€‚å¤åˆ¶ä»ä¸‹æ ‡ <code>start</code> åˆ° <code>end</code> ç»“æŸã€‚<code>end</code> ä¸‹æ ‡é»˜è®¤æ˜¯<code> array.length</code> ã€‚å¦‚æœä¸¤ä¸ªå‚æ•°ä»»æ„ä¸€ä¸ªæ˜¯è´Ÿæ•°ï¼Œé‚£ä¹ˆ <code>end</code> æ•°å€¼ä¼šæ˜¯å’Œ <code>array.length</code> ç›¸åŠ ä¹‹åçš„å€¼ã€‚å¦‚æœ <code>start</code> å¤§äº<code>array.length</code>ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> b = a.slice(<span class="number">0</span>, <span class="number">1</span>);  <span class="comment">// [&#x27;a&#x27;]</span></span><br><span class="line"><span class="keyword">var</span> c = a.slice(<span class="number">1</span>);  <span class="comment">// [&#x27;b&#x27;, &#x27;c&#x27;]</span></span><br><span class="line"><span class="keyword">var</span> d = a.slice(<span class="number">-1</span>);  <span class="comment">// [&#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>array.sort(comparefn)</code></p><p>  <code>sort</code> æ–¹æ³•å¯¹ <code>array</code> é‡Œçš„æ‰€æœ‰å…ƒç´ è¿›è¡Œæ’åºï¼Œé»˜è®¤çš„æ¯”è¾ƒå‡½æ•°æ˜¯æŠŠè¢«æ’åºçš„å…ƒç´ éƒ½è§†ä¸ºå­—ç¬¦ä¸²ã€‚æ‰€ä»¥å®ƒä¸èƒ½æ­£ç¡®åœ°ç»™ä¸€ç»„æ•°å­—è¿›è¡Œæ’åºï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = [<span class="number">4</span>, <span class="number">8</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">23</span>, <span class="number">42</span>];</span><br><span class="line">n.sort();  <span class="comment">// [15, 16, 23, 4, 42, 8]</span></span><br></pre></td></tr></table></figure><p>  å¹¸è¿çš„æ˜¯ä½ å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°æ¥ä½¿å¾—ä¸€ç»„æ•°å­—èƒ½æ­£å¸¸æ’åºï¼Œæ¯”è¾ƒå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œå¦‚æœä»–ä»¬ç›¸ç­‰ï¼Œåˆ™è¿”å›0ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥æ’åºåœ¨å‰é¢ï¼Œåˆ™è¿”å›è´Ÿæ•°ï¼Œå¦‚æœç¬¬äºŒä¸ªå‚æ•°åº”è¯¥æ’åœ¨å‰é¢ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ­£æ•°ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">n.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;);  <span class="comment">// [4, 8, 15, 16, 23, 42]</span></span><br></pre></td></tr></table></figure><p>  å¦‚æœæƒ³ç»™åŒ…å«ä»»ä½•ç®€å•å€¼çš„æ•°ç»„è¿›è¡Œæ’åºï¼Œå¯ä»¥è¿™æ ·ï¼š</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m = [<span class="string">&#x27;aa&#x27;</span>, <span class="string">&#x27;bb&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">10</span>];</span><br><span class="line">m.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a === b) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> a === <span class="keyword">typeof</span> b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a &lt; b ? <span class="number">-1</span> : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> a &lt; <span class="keyword">typeof</span> b ? <span class="number">-1</span> : <span class="number">1</span>;</span><br><span class="line">&#125;);  <span class="comment">// [3, 5, 10, &#x27;a&#x27;, &#x27;aa&#x27;, &#x27;bb&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>array.splice(start, deleteCount, item...)</code></p><p>  <code>splice</code> æ–¹æ³•ä» <code>array</code> ä¸­ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå¹¶ç”¨æ–°çš„ <code>item</code> æ›¿æ¢å®ƒä»¬ã€‚<code>start</code> æ˜¯ç§»é™¤å…ƒç´ çš„èµ·å§‹ä½ç½®ï¼Œ<code>deleteCount</code> æ˜¯ç§»é™¤ä¸ªæ•°ã€‚å¦‚æœæœ‰é¢å¤–çš„å‚æ•°ï¼Œåˆ™ <code>item</code> ä¼šæ’å…¥åˆ°è¢«ç§»é™¤çš„å…ƒç´ çš„ä½ç½®ä¸Šã€‚è¿”å›ä¸€ä¸ªåŒ…å«è¢«ç§»é™¤å…ƒç´ çš„æ•°ç»„ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> r = a.splice(<span class="number">1</span>, <span class="number">1</span>, <span class="string">&#x27;ache&#x27;</span>, <span class="string">&#x27;bug&#x27;</span>);  <span class="comment">// a: [&#x27;a&#x27;, &#x27;ache&#x27;, &#x27;bug&#x27;, &#x27;c&#x27;], r: [&#x27;b&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>array.unshift(item...)</code></p><p>  <code>unshift</code> æ–¹æ³•æ˜¯æŠŠ <code>item</code> æ’å…¥åˆ°æ•°ç»„çš„å¼€å§‹éƒ¨åˆ†ã€‚è¿”å›æ–°æ•°ç»„çš„ <code>length</code>ã€‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> r = a.unshift(<span class="string">&#x27;#&#x27;</span>, <span class="string">&#x27;$&#x27;</span>);  <span class="comment">// a: [&#x27;#&#x27;, &#x27;$&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;], r: 5</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™è¡¨è¾¾å¼ç†è®ºç¯‡</title>
      <link href="/2016/11/04/regexp-concept/"/>
      <url>/2016/11/04/regexp-concept/</url>
      
        <content type="html"><![CDATA[<h2 id="å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­"><a href="#å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­" class="headerlink" title="å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­"></a>å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­</h2><p>è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼Œç”¨æ¥åŒ¹é…URLçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;http://bubuzou.com:80/goodparts?q#fragment&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> parse_url = <span class="regexp">/^(?:([A-Za-z]+):)?(\/&#123;0,3&#125;)([0-9.\-A-Z-a-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log( parse_url.exec( url ) );</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ä¸Šé¢è¿™æ®µä»£ç äº§ç”Ÿçš„ç»“æœå¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment">[&quot;http://bubuzou.com:80/goodparts?q#fragment&quot;, &quot;http&quot;, &quot;//&quot;, &quot;bubuzou.com&quot;, &quot;80&quot;, &quot;goodparts&quot;, &quot;q&quot;, &quot;fragment&quot;]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><a id="more"></a><p>ç°åœ¨è®©æˆ‘ä»¬æ¥åˆ†è§£parse_urlçš„å„ä¸ªéƒ¨åˆ†ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š</p><ul><li><code>^</code> å­—ç¬¦è¡¨ç¤ºå­—ç¬¦ä¸²çš„å¼€å§‹</li><li><code>(?:([A-Za-z]+):)?</code>è¿™ä¸ªå› å­åŒ¹é…ä¸€ä¸ªåè®®åï¼Œä½†æ˜¯åªæœ‰å½“å®ƒåé¢è·Ÿéš:çš„æ—¶å€™æ‰åŒ¹é…ã€‚<code>(?:...)</code> è¡¨ç¤ºä¸€ä¸ªéæ•è·å‹çš„åˆ†ç»„ã€‚åç¼€ <code>?</code> è¡¨ç¤ºè¿™ä¸ªåˆ†ç»„æ˜¯å¯é€‰çš„ï¼Œè¡¨ç¤ºåŒ¹é… <code>0</code> æ¬¡æˆ–è€… <code>1</code> æ¬¡ã€‚<br><code>(...)</code> è¡¨ç¤ºä¸€ä¸ªæ•è·å‹åˆ†ç»„ã€‚ä¸€ä¸ªæ•è·å‹åˆ†ç»„ä¼šå¤åˆ¶å®ƒæ‰€åŒ¹é…çš„æ–‡æœ¬ï¼Œå¹¶ä¸”å°†å…¶æ”¾åˆ° <code>result</code> æ•°ç»„é‡Œã€‚æ¯ä¸ªæ•è·å‹åˆ†ç»„ä¼šè¢«æŒ‡å®šä¸€ä¸ªç¼–å·ã€‚ç¬¬ä¸€ä¸ªæ•è·å‹åˆ†ç»„çš„ç¼–å·æ˜¯ <code>1</code>ï¼Œæ‰€ä»¥è¯¥åˆ†ç»„æ‰€åŒ¹é…çš„ç»“æœä¼šå‡ºç°åœ¨ <code>result[1]</code> ä¸­ã€‚<code>[...]</code> è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ç±»ã€‚<code>A-Za-z</code> è¿™ä¸ªå­—ç¬¦ç±»åŒ…å« <code>26</code> ä¸ªå¤§å†™å­—æ¯å’Œ <code>26</code> ä¸ªå°å†™å­—æ¯ã€‚<code>+</code> è¡¨ç¤ºè¿™ä¸ªå­—ç¬¦ç±»ä¼šè¢«åŒ¹é… <code>1</code> æ¬¡æˆ–å¤šæ¬¡ã€‚<code>:</code> ä¼šæŒ‰ç…§å­—é¢è¿›è¡ŒåŒ¹é…ã€‚</li><li><code>(\/&#123;0,3&#125;)</code> è¿™ä¸ªå› å­æ˜¯æ•è·åˆ†ç»„ <code>2</code> ã€‚<code>\/</code> è¡¨ç¤ºåŒ¹é… <code>/</code> ï¼ˆæ–œæ ï¼‰ï¼Œå®ƒç”¨ <code>\</code> æ¥è¿›è¡Œè½¬ä¹‰ã€‚<code>&#123;0,3&#125;</code> è¡¨ç¤ºä¼šè¢«åŒ¹é…<code>0-3</code> æ¬¡</li><li><code>([0-9.\-A-Z-a-z]+)</code> è¿™ä¸ªå› å­æ˜¯æ•è·åˆ†ç»„ <code>3</code> ã€‚å®ƒä¼šåŒ¹é…ä¸€ä¸ªä¸»æœºåï¼Œç”±ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—ã€å­—æ¯ï¼Œä»¥åŠ <code>.</code> æˆ–-ç»„æˆã€‚</li><li><code>(?::(\d+))?</code> è¿™ä¸ªå› å­åŒ¹é…çš„æ˜¯ç«¯å£å·ã€‚<code>(\d+)</code> æ˜¯æ•è·åˆ†ç»„ <code>4</code>ï¼Œè¡¨ç¤ºåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—ã€‚</li><li><code>(?:\/([^?#]*))?</code> æ˜¯ä¸€ä¸ªå¯é€‰çš„åˆ†ç»„ï¼Œä»¥ä¸€ä¸ª <code>/</code> å¼€å§‹ã€‚<code>[^?#]</code> æ˜¯æ•è·åˆ†ç»„ <code>5</code> ï¼Œä»¥ä¸€ä¸ª <code>^</code> å¼€å§‹è¡¨ç¤ºè¿™ä¸ªç±»åŒ…å«é™¤ <code>?</code> å’Œ <code>#</code> ä¹‹å¤–çš„æ‰€æœ‰å­—ç¬¦ã€‚ <code>*</code> è¡¨ç¤ºåŒ¹é… <code>0</code> æ¬¡æˆ–å¤šæ¬¡ã€‚</li><li><code>(?:\?([^#]*))?</code> æ˜¯ä¸€ä¸ªä»¥ <code>?</code> å¼€å§‹çš„åˆ†ç»„ã€‚åŒ…å«æ•è·åˆ†ç»„ <code>6</code>ï¼Œè¿™ä¸ªåˆ†ç»„åŒ…å« <code>0</code> ä¸ªæˆ–å¤šä¸ªé <code>#</code> çš„å­—ç¬¦</li><li><code>(?:#(.*))?</code> è¿™ä¸ªå¯é€‰åˆ†ç»„æ˜¯ä»¥ <code>#</code> å¼€å§‹çš„ï¼Œ<code>.</code> ä¼šåŒ¹é…é™¤äº†è¡Œç»“æŸç¬¦ä»¥å¤–çš„æ‰€æœ‰å­—ç¬¦ã€‚</li><li><code>$</code> è¡¨ç¤ºå­—ç¬¦ä¸²çš„ç»“æŸ</li></ul><blockquote><p>æ‰€è°“æ­£åˆ™è¡¨è¾¾å¼ï¼Œå°±æ˜¯ä¸€ç§æè¿°å­—ç¬¦ä¸²ç»“æ„æ¨¡å¼çš„å½¢å¼åŒ–è¡¨è¾¾æ–¹æ³•ã€‚</p></blockquote><p>è¿™æ˜¯ã€Šç²¾é€šæ­£åˆ™è¡¨è¾¾å¼ã€‹å¯¹å®ƒçš„å®šä¹‰ã€‚<br>æ­£åˆ™è¡¨è¾¾å¼åˆå«åšè§„åˆ™è¡¨è¾¾å¼(Regular Expressionï¼Œç®€å†™regexp).<br>æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¯¹å­—ç¬¦ä¸²æ“ä½œçš„ä¸€ç§é€»è¾‘å…¬å¼ï¼Œå°±æ˜¯ç”¨äº‹å…ˆå®šä¹‰å¥½çš„ä¸€äº›ç‰¹å®šå­—ç¬¦ã€åŠè¿™äº›ç‰¹å®šå­—ç¬¦çš„ç»„åˆï¼Œç»„æˆä¸€ä¸ªâ€œè§„åˆ™å­—ç¬¦ä¸²â€ï¼Œè¿™ä¸ªâ€œè§„åˆ™å­—ç¬¦ä¸²â€ç”¨æ¥è¡¨è¾¾å¯¹å­—ç¬¦ä¸²çš„ä¸€ç§è¿‡æ»¤é€»è¾‘ã€‚</p><h2 id="æ­£åˆ™è¡¨è¾¾å¼èƒ½å¹²å˜›"><a href="#æ­£åˆ™è¡¨è¾¾å¼èƒ½å¹²å˜›" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼èƒ½å¹²å˜›"></a>æ­£åˆ™è¡¨è¾¾å¼èƒ½å¹²å˜›</h2><ul><li>æµ‹è¯•å­—ç¬¦ä¸²æ˜¯å¦æ»¡è¶³æŸç§æ¨¡å¼ã€‚æ¯”å¦‚å­—ç¬¦ä¸²å†…æ˜¯å¦å‡ºç°ç”µè¯å·ç æ¨¡å¼ï¼Œåˆç§°ä¸ºæ•°æ®éªŒè¯ã€‚</li><li>æ›¿æ¢æ–‡æœ¬ã€‚å¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¯†åˆ«å­—ç¬¦ä¸²ä¸­çš„ç‰¹å®šæ–‡æœ¬ï¼Œå®Œå…¨åˆ é™¤æˆ–è€…ç”¨å…¶ä»–æ–‡æœ¬æ›¿æ¢å®ƒã€‚</li><li>æå–å­—ç¬¦ä¸²ã€‚åŸºæœ¬åŒ¹é…æ¨¡å¼ä»å­—ç¬¦ä¸²ä¸­æå–éœ€è¦çš„å­å­—ç¬¦ä¸²ã€‚</li></ul><div class="tip">æ­£åˆ™è¡¨è¾¾å¼å·²ç»åœ¨å¾ˆå¤šè½¯ä»¶ä¸­å¾—åˆ°å¹¿æ³›çš„åº”ç”¨ï¼ŒåŒ…æ‹¬ `*nix(Linux, Unixç­‰)`ï¼Œ`HP` ç­‰æ“ä½œç³»ç»Ÿï¼Œ`PHP`ã€`C#`ã€`Java`ç­‰å¼€å‘ç¯å¢ƒï¼Œä»¥åŠå¾ˆå¤šçš„åº”ç”¨è½¯ä»¶ä¸­ï¼Œéƒ½å¯ä»¥çœ‹åˆ°æ­£åˆ™è¡¨è¾¾å¼çš„å½±å­ã€‚</div><h2 id="æ­£åˆ™è¡¨è¾¾å¼ç»“æ„"><a href="#æ­£åˆ™è¡¨è¾¾å¼ç»“æ„" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼ç»“æ„"></a>æ­£åˆ™è¡¨è¾¾å¼ç»“æ„</h2><p>ä¼˜å…ˆè€ƒè™‘çš„æ–¹æ³•æ˜¯ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> patt = <span class="regexp">/pattern/m</span>odifiers;</span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨RegExpæ„é€ å™¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> patt = <span class="keyword">new</span> <span class="built_in">RegExp</span>(pattern, modifiers);</span><br></pre></td></tr></table></figure><ul><li>patternï¼ˆæ¨¡å¼ï¼‰ æè¿°äº†è¡¨è¾¾å¼çš„æ¨¡å¼</li><li>modifiersï¼ˆä¿®é¥°ç¬¦ï¼‰ ç”¨äºæŒ‡å®šå…¨å±€åŒ¹é…ã€åŒºåˆ†å¤§å°å†™çš„åŒ¹é…å’Œå¤šè¡ŒåŒ¹é…</li></ul><p>ä¿®é¥°ç¬¦modifiersï¼š</p><table><thead><tr><th>ä¿®é¥°ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>i</code></td><td>æ‰§è¡Œå¯¹å¤§å°å†™ä¸æ•æ„Ÿçš„åŒ¹é…</td></tr><tr><td><code>g</code></td><td>æ‰§è¡Œå…¨å±€åŒ¹é…</td></tr><tr><td><code>m</code></td><td>æ‰§è¡Œå¤šè¡ŒåŒ¹é…</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> patt = <span class="regexp">/hello/ig</span>;</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;Hello world!&#x27;</span>;</span><br><span class="line">patt.exec( str );  <span class="comment">// å°†ä¼šåŒ¹é…&#x27;Hello&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="æ­£åˆ™è¡¨è¾¾å› å­"><a href="#æ­£åˆ™è¡¨è¾¾å› å­" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å› å­"></a>æ­£åˆ™è¡¨è¾¾å› å­</h2><p>ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å› å­å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ã€ä¸€ä¸ªåœ†æ‹¬å·åŒ…å›´çš„ç»„ã€ä¸€ä¸ªå­—ç¬¦ç±»æˆ–è€…æ˜¯ä¸€ä¸ªè½¬ä¹‰åºåˆ—ã€‚ä¸‹é¢è¿™äº›å­—ç¬¦éƒ½ä¼šæŒ‰ç…§å­—é¢è¿›è¡Œå¤„ç†<code>\ / [ ] ( ) &#123; &#125; ? + * | . ^</code> $å¦‚æœä½ å¸Œæœ›è¿™äº›å­—ç¬¦æŒ‰ç…§å­—é¢æ„æ€å»åŒ¹é…ï¼Œé‚£éœ€è¦åœ¨å…¶å‰é¢åŠ ä¸Š\è¿›è¡Œè½¬ä¹‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> patt = <span class="regexp">/\.\d+/</span>;</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;-12.568&#x27;</span>;</span><br><span class="line">patt.exec( str );  <span class="comment">// åŒ¹é…&#x27;.568&#x27;</span></span><br></pre></td></tr></table></figure><p>æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦:</p><table><thead><tr><th>ç‰¹æ®Šå­—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>^</code></td><td>åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²å¼€å§‹å¤„çš„ä½ç½®ï¼›ä½†åœ¨ä¸­æ‹¬å·è¡¨è¾¾å¼ä¸­æ˜¯è¡¨ç¤ºå¯¹å­—ç¬¦é›†æ±‚åã€‚è‹¥è¦åŒ¹é… <code>^</code> å­—ç¬¦æœ¬èº«ï¼Œè¯·ä½¿ç”¨ <code>\^</code>ã€‚</td></tr><tr><td><code>$</code></td><td>åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²ç»“å°¾çš„ä½ç½®ã€‚å¦‚æœè®¾ç½®äº† <code>RegExp</code> å¯¹è±¡çš„ <code>Multiline</code> å±æ€§ï¼Œé‚£ä¹ˆ <code>$</code> è¿˜åŒ¹é… <code>\n</code> æˆ– <code>\r</code> å‰é¢çš„ä½ç½®ã€‚è‹¥è¦åŒ¹é… <code>$</code> å­—ç¬¦æœ¬èº«ï¼Œè¯·ä½¿ç”¨ <code>\$</code>ã€‚</td></tr><tr><td><code>()</code></td><td>æ ‡è®°å­è¡¨è¾¾å¼çš„å¼€å§‹å’Œç»“æŸã€‚å¯ä»¥æ•è·å­è¡¨è¾¾å¼ä»¥ä¾›ä»¥åä½¿ç”¨ã€‚è‹¥è¦åŒ¹é…è¿™ä¸¤ä¸ªå­—ç¬¦ï¼Œè¯·ä½¿ç”¨ <code>\(</code> å’Œ <code>\)</code>ã€‚</td></tr><tr><td><code>*</code></td><td>é›¶æ¬¡æˆ–å¤šæ¬¡åŒ¹é…å‰é¢çš„å­—ç¬¦æˆ–å­è¡¨è¾¾å¼ã€‚è‹¥è¦åŒ¹é… <code>*</code> å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ <code>\*</code>ã€‚</td></tr><tr><td><code>+</code></td><td>ä¸€æ¬¡æˆ–å¤šæ¬¡åŒ¹é…å‰é¢çš„å­—ç¬¦æˆ–å­è¡¨è¾¾å¼ã€‚è‹¥è¦åŒ¹é… <code>+</code> å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ <code>\+</code>ã€‚</td></tr><tr><td><code>?</code></td><td>é›¶æ¬¡æˆ–ä¸€æ¬¡åŒ¹é…å‰é¢çš„å­—ç¬¦æˆ–å­è¡¨è¾¾å¼ï¼Œæˆ–æŒ‡ç¤ºâ€œéè´ªå¿ƒâ€é™å®šç¬¦ã€‚è‹¥è¦åŒ¹é… <code>?</code> å­—ç¬¦ï¼Œè¯·ä½¿ç”¨<code>\?</code>ã€‚</td></tr><tr><td><code>.</code></td><td>åŒ¹é…é™¤æ¢è¡Œç¬¦ <code>\n</code> ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚è‹¥è¦åŒ¹é… <code>.</code> è¯·ä½¿ç”¨ <code>\</code>ã€‚</td></tr><tr><td><code>[]</code></td><td>æ ‡è®°ä¸­æ‹¬å·è¡¨è¾¾å¼çš„å¼€å§‹ã€‚è‹¥è¦åŒ¹é…è¿™äº›å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ <code>\[</code> å’Œ<code>\]</code>ã€‚</td></tr><tr><td><code>\</code></td><td>å°†ä¸‹ä¸€å­—ç¬¦æ ‡è®°ä¸ºç‰¹æ®Šå­—ç¬¦ã€æ–‡æœ¬ã€åå‘å¼•ç”¨æˆ–å…«è¿›åˆ¶è½¬ä¹‰ç¬¦ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ <code>n</code> åŒ¹é…å­—ç¬¦ <code>n</code>ã€‚<code>\n</code> åŒ¹é…æ¢è¡Œç¬¦ã€‚åºåˆ— <code>\\</code> åŒ¹é… <code>\</code>ï¼Œåºåˆ— <code>\(</code> åŒ¹é… <code>(</code>ã€‚</td></tr><tr><td><code>/</code></td><td>è¡¨ç¤ºæ–‡æœ¬æ­£åˆ™è¡¨è¾¾å¼çš„å¼€å§‹æˆ–ç»“æŸã€‚è‹¥è¦åŒ¹é… <code>/</code> å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ <code>\/</code>ã€‚</td></tr><tr><td><code>&#123;&#125;</code></td><td>æ ‡è®°é™å®šç¬¦è¡¨è¾¾å¼çš„å¼€å§‹ã€‚è‹¥è¦åŒ¹é…è¿™äº›å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ <code>\&#123;</code> å’Œ <code>\&#125;</code>ã€‚</td></tr><tr><td>ç«–çº¿</td><td>æŒ‡å‡ºåœ¨ä¸¤ä¸ªé¡¹ä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚è¦åŒ¹é…ç«–çº¿ï¼Œè¯·ä½¿ç”¨ <code>\</code> ç«–çº¿ã€‚</td></tr></tbody></table><h2 id="æ­£åˆ™è¡¨è¾¾å¼åºåˆ—"><a href="#æ­£åˆ™è¡¨è¾¾å¼åºåˆ—" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼åºåˆ—"></a>æ­£åˆ™è¡¨è¾¾å¼åºåˆ—</h2><p>ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åºåˆ—åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼å› å­ã€‚æ¯ä¸ªå› å­èƒ½é€‰æ‹©æ˜¯å¦è·Ÿéšä¸€ä¸ªé‡è¯ï¼Œè¿™ä¸ªé‡è¯å†³å®šäº†è¿™ä¸ªå› å­è¢«å…è®¸å‡ºç°çš„æ¬¡æ•°ã€‚å¦‚æœæ²¡æœ‰é‡è¯ï¼Œåˆ™åªåŒ¹é…ä¸€æ¬¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> patt = <span class="regexp">/\d&#123;3&#125;\.\d/</span>;</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;abc1893.65d&#x27;</span>;</span><br><span class="line">patt.exec( str );  <span class="comment">// åŒ¹é…&#x27;893.6&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="æ­£åˆ™è¡¨è¾¾å¼åˆ†æ”¯"><a href="#æ­£åˆ™è¡¨è¾¾å¼åˆ†æ”¯" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼åˆ†æ”¯"></a>æ­£åˆ™è¡¨è¾¾å¼åˆ†æ”¯</h2><p>ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åˆ†æ”¯åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼åºåˆ—ã€‚è¿™äº›åºåˆ—è¢«|å­—ç¬¦åˆ†éš”ã€‚å¦‚æœè¿™äº›åºåˆ—ä¸­çš„ä»»ä½•ä¸€é¡¹ç¬¦åˆåŒ¹é…æ¡ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªé€‰æ‹©å°±è¢«åŒ¹é…ã€‚å®ƒä¼šæŒ‰ç…§ä¹¦å†™é¡ºåºä»å·¦åˆ°å³ä¾æ¬¡åŒ¹é…è¿™äº›åºåˆ—ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;information&#x27;</span>;</span><br><span class="line">str.match( <span class="regexp">/or|for/</span> );  <span class="comment">// åŒ¹é…&#x27;for&#x27;</span></span><br><span class="line">str.match( <span class="regexp">/or|orm/</span> ); <span class="comment">// åŒ¹é…&#x27;or&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="æ­£åˆ™è¡¨è¾¾å¼åˆ†ç»„"><a href="#æ­£åˆ™è¡¨è¾¾å¼åˆ†ç»„" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼åˆ†ç»„"></a>æ­£åˆ™è¡¨è¾¾å¼åˆ†ç»„</h2><p>æ­£åˆ™è¡¨è¾¾å¼çš„åˆ†ç»„å…±æœ‰6ç§ã€‚</p><ul><li><code>(...)</code>æ•è·å‹ï¼Œæ•è·å‹åˆ†ç»„æ˜¯ä¸€ä¸ªè¢«åŒ…å›´åœ¨åœ†æ‹¬å·ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼åˆ†æ”¯ã€‚ä»»ä½•åŒ¹é…è¿™ä¸ªåˆ†ç»„çš„å­—ç¬¦éƒ½ä¼šè¢«æ•è·ã€‚æ¯ä¸ªæ•è·åˆ†ç»„éƒ½å°†æœ‰ä¸€ä¸ªç¼–å·ã€‚ç¬¬ä¸€ä¸ªæ•è·åˆ†ç»„çš„ç¼–å·æ˜¯ <code>1</code>ï¼Œä»¥æ­¤ç±»æ¨ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/(:\d+)/.exec( <span class="string">&#x27;bubuzou.com:80/&#x27;</span> ); </span><br><span class="line"><span class="comment">// ç»“æœæ˜¯[&#x27;:80&#x27;, &#x27;:80&#x27;]ï¼Œç¬¬ä¸€ä¸ª&#x27;:80&#x27;è¡¨ç¤ºæ•´ä¸ªæ­£åˆ™çš„åŒ¹é…ï¼Œç¬¬äºŒä¸ª&#x27;:80&#x27;è¡¨ç¤ºæ•è·åˆ†ç»„1çš„åŒ¹é…</span></span><br></pre></td></tr></table></figure><ul><li><code>(?:...)</code> éæ•è·å‹ï¼Œä»…åšç®€å•çš„åŒ¹é…ï¼Œå¹¶ä¸ä¼šæ•è·æ‰€åŒ¹é…çš„æ–‡æœ¬ã€‚ä¹Ÿä¸ä¼šè¿›è¡Œç¼–å·ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?::\d+)/.exec( <span class="string">&#x27;bubuzou.com:80/&#x27;</span> ); ç»“æœæ˜¯[<span class="string">&#x27;:80&#x27;</span>]ï¼Œä¸åŒ…å«åˆ†ç»„æ•è·ã€‚</span><br></pre></td></tr></table></figure><ul><li><code>(?=pattern)</code> æ­£å‘è‚¯å®šé¢„æŸ¥ã€‚åŒ¹é…å…¶è·Ÿéšäº† <code>pattern</code> çš„å­—ç¬¦ä¸²ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªå¥½çš„ç‰¹æ€§ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/<span class="built_in">window</span>(?=<span class="number">95</span>|<span class="number">98</span>|<span class="number">2000</span>)/.exec( <span class="string">&#x27;window98&#x27;</span> ); <span class="comment">// åŒ¹é…&#x27;window&#x27;</span></span><br></pre></td></tr></table></figure><ul><li><code>(?!pattern)</code> æ­£å‘å¦å®šé¢„æŸ¥ã€‚åŒ¹é…å…¶æ²¡æœ‰è·Ÿéšäº† <code>pattern</code> çš„å­—ç¬¦ä¸²ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªå¥½çš„ç‰¹æ€§ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/<span class="built_in">window</span>(?!<span class="number">95</span>|<span class="number">98</span>|<span class="number">2000</span>)/.exec( <span class="string">&#x27;windowNT&#x27;</span> ); <span class="comment">// åŒ¹é…&#x27;window&#x27;</span></span><br></pre></td></tr></table></figure><ul><li><code>(?&lt;=pattern)</code> åå‘è‚¯å®šé¢„æŸ¥ã€‚åŒ¹é…å‰é¢å¸¦ <code>pattern</code> çš„å­—ç¬¦ä¸²ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªå¥½çš„ç‰¹æ€§ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?&lt;=<span class="number">95</span>|<span class="number">98</span>|<span class="number">2000</span>)windows/.exec( <span class="string">&#x27;95windows&#x27;</span> ); <span class="comment">// åŒ¹é…&#x27;windows&#x27;</span></span><br></pre></td></tr></table></figure><ul><li><code>(?&lt;!pattern)</code> åå‘å¦å®šé¢„æŸ¥ã€‚åŒ¹é…å‰é¢æ²¡æœ‰å¸¦ <code>pattern</code> çš„å­—ç¬¦ä¸²ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªå¥½çš„ç‰¹æ€§ã€‚</li></ul><h2 id="RegExpå¯¹è±¡æ–¹æ³•"><a href="#RegExpå¯¹è±¡æ–¹æ³•" class="headerlink" title="RegExpå¯¹è±¡æ–¹æ³•"></a>RegExpå¯¹è±¡æ–¹æ³•</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>regexp.exec(string)</code></td><td>æ£€ç´¢å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å€¼ã€‚å¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™è¿”å›ä¸€ä¸ªæ•°ç»„ã€‚æ•°ç»„ä¸­ä¸‹æ ‡ä¸º <code>0</code> çš„å€¼è¡¨ç¤ºåŒ¹é…çš„å­å­—ç¬¦ä¸²ï¼Œä¸‹æ ‡ä¸º1çš„å€¼æ˜¯åˆ†ç»„1æ•è·çš„æ–‡æœ¬ã€‚å¦‚æœåŒ¹é…å¤±è´¥ï¼Œåˆ™ä¼šè¿”å› <code>null</code>.</td></tr><tr><td><code>regexp.test(string)</code></td><td>æ£€ç´¢å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å€¼ã€‚è¿”å› <code>true</code> æˆ– <code>false</code>ã€‚ <code>test</code> æ–¹æ³•ä¸­ä¸éœ€è¦å¯¹ <code>regexp</code> è¿›è¡Œå…¨å±€åŒ¹é…çš„é…ç½®ï¼Œå› ä¸ºç»“æœéƒ½ä¸€æ ·ã€‚</td></tr><tr><td><code>string.match(regexp)</code></td><td>è·å–åŒ¹é…ç»“æœã€‚å¦‚æœæ²¡æœ‰ <code>g</code> æ ‡è¯†ï¼Œåˆ™ç»“æœå’Œ <code>regexp.exec(string)</code> ä¸€æ ·ã€‚å¦‚æœæœ‰ <code>g</code> æ ‡è¯†ï¼Œåˆ™è¿”å›åŒ…å«æ‰€æœ‰åŒ¹é…ç»“æœï¼ˆé™¤äº†åˆ†ç»„æ•è·ä¹‹å¤–ï¼‰çš„æ•°ç»„ã€‚</td></tr><tr><td><code>string.replace(searchValue, replaceValue)</code></td><td><code>replace</code> æ–¹æ³•å¯¹å­—ç¬¦ä¸²æ‰§è¡ŒæŸ¥æ‰¾å’Œæ›¿æ¢å·¥ä½œï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚å‚æ•° <code>searchValue</code> å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…æ­£åˆ™è¡¨è¾¾å¼ã€‚å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™åœ¨å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„åœ°æ–¹è¢«æ›¿æ¢ã€‚å¦‚æœæ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸”å¸¦æœ‰ <code>g</code>ï¼Œåˆ™ä¼šæ›¿æ¢æ‰€æœ‰åŒ¹é…ï¼Œå¦‚æœæ²¡æœ‰gåˆ™åªä¼šæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…ã€‚<code>replaceValue</code> å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªå‡½æ•°ã€‚å¦‚æœæ˜¯ä¸€ä¸ªå‡½æ•°åˆ™æœ‰ç‰¹åˆ«å«ä¹‰ã€‚å¦‚æœæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™æ¯é‡åˆ°ä¸€ä¸ªåŒ¹é…å‡½æ•°å°±ä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œè€Œå‡½æ•°è¿”å›çš„å­—ç¬¦ä¸²å°†ä½œä¸ºæ›¿æ¢çš„æ–‡æœ¬ã€‚</td></tr><tr><td><code>string.search(regexp)</code></td><td>å’Œ <code>indexOf</code> æ–¹æ³•ç±»ä¼¼ï¼Œåªæ˜¯å®ƒæ¥å—çš„å‚æ•°æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼è€Œéå­—ç¬¦ä¸²ã€‚å¦‚æœæ‰¾åˆ°åŒ¹é…ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„é¦–å­—ç¬¦çš„ä½ç½®ï¼Œæ²¡æ‰¾åˆ°å°±è¿”å› <code>-1</code></td></tr><tr><td><code>string.split(separator, limit)</code></td><td>æŠŠ <code>string</code> åˆ†å‰²æˆç‰‡æ®µæ¥åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚<code>limit</code> å¯ä»¥é™åˆ¶åˆ†å‰²çš„æ•°é‡ã€‚<code>separator</code>å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚</td></tr></tbody></table><p><code>regexp.exec(string)ï¼š</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// RegExpObject.exec(string);</span></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;user1abcuser2abc&quot;</span>,</span><br><span class="line">    patt=<span class="regexp">/user\d/g</span>,</span><br><span class="line">    result;</span><br><span class="line"><span class="keyword">while</span> ( ( result = patt.exec( str ) ) ) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log( result );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç¬¬ä¸€æ¬¡ï¼š[&quot;user1&quot;, index: 0, input: &quot;user1abcuser2abc&quot;]</span></span><br><span class="line"><span class="comment">// ç¬¬äºŒæ¬¡ï¼š[&quot;user2&quot;, index: 8, input: &quot;user1abcuser2abc&quot;]</span></span><br></pre></td></tr></table></figure><div class="tip">å¦‚æœregexpå¸¦æœ‰gæ ‡è¯†ï¼Œé‚£ä¹ˆæŸ¥æ‰¾ä¸æ˜¯ä»è¿™ä¸ªå­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®å¼€å§‹ï¼Œè€Œæ˜¯ä»regexp.lastIndexä½ç½®å¼€å§‹ã€‚å¦‚æœåŒ¹é…æˆåŠŸï¼Œé‚£ä¹ˆregexp.lastIndexå°†è¢«è®¾ç½®ä¸ºè¯¥åŒ¹é…åç¬¬ä¸€ä¸ªå­—ç¬¦çš„ä½ç½®ã€‚ä¸æˆåŠŸçš„åŒ¹é…ä¼šå°†regexpé‡æ–°è®¾ç½®ä¸º0ã€‚</div><p><code>regexp.test(string)ï¼š</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Hello/i.test( <span class="string">&#x27;hello world&#x27;</span> ); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p><code>string.match(regexp)ï¼š</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;user1abcuser2abc&#x27;</span>.match( <span class="regexp">/user\d/g</span> );  <span class="comment">// [&#x27;user1&#x27;, &#x27;user2&#x27;]</span></span><br><span class="line"><span class="string">&#x27;user1abcuser2abc&#x27;</span>.match( <span class="regexp">/user\d/</span> );  <span class="comment">// [&#x27;user1&#x27;]</span></span><br></pre></td></tr></table></figure><p><code>string.replace(searchValue, replaceValue)ï¼š</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> patt = <span class="regexp">/\((\d&#123;3&#125;)\)/g</span>,</span><br><span class="line">    str = <span class="string">&#x27;(555)666-1212&#x27;</span>.replace(patt, <span class="string">&#x27;$1-&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(str);  <span class="comment">// ç»“æœï¼š&#x27;555-666-1212&#x27;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>ç¾å…ƒç¬¦å·åºåˆ—</th><th>æ›¿æ¢å¯¹è±¡</th></tr></thead><tbody><tr><td><code>$$</code></td><td><code>$</code></td></tr><tr><td><code>$&amp;</code></td><td>æ•´ä¸ªåŒ¹é…çš„æ–‡æœ¬</td></tr><tr><td><code>$number</code></td><td>åˆ†ç»„åŒ¹é…çš„æ–‡æœ¬</td></tr><tr><td><code>$</code></td><td>åŒ¹é…ä¹‹å‰çš„æ–‡æœ¬</td></tr><tr><td><code>$</code></td><td>åŒ¹é…ä¹‹åçš„æ–‡æœ¬</td></tr></tbody></table><p><code>string.search(regexp)ï¼š</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;hello world&#x27;</span>.search( <span class="regexp">/world/</span> );  <span class="comment">// 6</span></span><br></pre></td></tr></table></figure><p><code>string.split(separator, limit)ï¼š</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;123456&#x27;</span>.split(<span class="string">&#x27;&#x27;</span>, <span class="number">3</span>); <span class="comment">// [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;]</span></span><br><span class="line"><span class="string">&#x27;last, first, middle&#x27;</span>.split(<span class="regexp">/\s*,\s*/</span>);  <span class="comment">// [&#x27;last&#x27;, &#x27;first&#x27;, &#x27;middle&#x27;]</span></span><br></pre></td></tr></table></figure><h2 id="æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦è¡¨"><a href="#æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦è¡¨" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦è¡¨"></a>æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦è¡¨</h2><table><thead><tr><th>é‡è¯</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>*</code></td><td>é›¶æ¬¡æˆ–å¤šæ¬¡åŒ¹é…å‰é¢çš„å­—ç¬¦æˆ–å­è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼Œ<code>zo</code> åŒ¹é… <code>z</code> å’Œ <code>zoo</code>ã€‚ ç­‰æ•ˆäº <code>&#123;0,&#125;</code>ã€‚</td></tr><tr><td><code>+</code></td><td>ä¸€æ¬¡æˆ–å¤šæ¬¡åŒ¹é…å‰é¢çš„å­—ç¬¦æˆ–å­è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼Œ<code>zo+</code> åŒ¹é… <code>zo</code> å’Œ <code>zoo</code>ï¼Œä½†ä¸åŒ¹é… <code>z</code>ã€‚<code>+</code> ç­‰æ•ˆäº <code>&#123;1,&#125;</code>ã€‚</td></tr><tr><td><code>?</code></td><td>é›¶æ¬¡æˆ–ä¸€æ¬¡åŒ¹é…å‰é¢çš„å­—ç¬¦æˆ–å­è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼Œ<code>do(es)?</code> åŒ¹é… <code>do</code> æˆ– <code>does</code> ä¸­çš„ <code>do</code>ã€‚<code>?</code> ç­‰æ•ˆäº <code>&#123;0,1&#125;</code>ã€‚</td></tr><tr><td><code>&#123;n&#125;</code></td><td><code>n</code> æ˜¯éè´Ÿæ•´æ•°ã€‚æ­£å¥½åŒ¹é… <code>n</code> æ¬¡ã€‚ä¾‹å¦‚ï¼Œ<code>o&#123;2&#125;</code> ä¸åŒ¹é… <code>Bob</code> ä¸­çš„ <code>o</code>ï¼Œä½†åŒ¹é… <code>food</code> ä¸­çš„ä¸¤ä¸ª <code>o</code>ã€‚</td></tr><tr><td><code>&#123;n,&#125;</code></td><td><code>n</code> æ˜¯éè´Ÿæ•´æ•°ã€‚è‡³å°‘åŒ¹é… <code>n</code> æ¬¡ã€‚ä¾‹å¦‚ï¼Œ<code>o&#123;2,&#125;</code> ä¸åŒ¹é… <code>Bob</code> ä¸­çš„ <code>o</code>ï¼Œè€ŒåŒ¹é… <code>foooood</code> ä¸­çš„æ‰€æœ‰ <code>o</code>ã€‚<code>o&#123;1,&#125;</code> ç­‰æ•ˆäº <code>o+</code>ã€‚<code>o&#123;0,&#125;</code> ç­‰æ•ˆäº <code>o*</code>ã€‚</td></tr><tr><td><code>&#123;n,m&#125;</code></td><td><code>m</code> å’Œ <code>n</code> æ˜¯éè´Ÿæ•´æ•°ï¼Œå…¶ä¸­ <code>n &lt;= m</code>ã€‚åŒ¹é…è‡³å°‘ <code>n</code> æ¬¡ï¼Œè‡³å¤š <code>m</code> æ¬¡ã€‚ä¾‹å¦‚ï¼Œ<code>o&#123;1,3&#125;</code> åŒ¹é… <code>fooooood</code> ä¸­çš„å¤´ä¸‰ä¸ª <code>o</code>ã€‚<code>o&#123;0,1&#125;</code> ç­‰æ•ˆäº <code>o?</code>ã€‚æ³¨æ„ï¼šæ‚¨ä¸èƒ½å°†ç©ºæ ¼æ’å…¥é€—å·å’Œæ•°å­—ä¹‹é—´ã€‚</td></tr></tbody></table><p>æ–¹æ‹¬å·ï¼šæ–¹æ‹¬å·ç”¨äºæŸ¥æ‰¾æŸä¸ªèŒƒå›´å†…çš„å­—ç¬¦</p><table><thead><tr><th>è¡¨è¾¾å¼</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>[abc]</code></td><td>æŸ¥æ‰¾æ–¹æ‹¬å·ä¹‹é—´çš„ä»»ä½•å­—ç¬¦</td></tr><tr><td><code>[^abc]</code></td><td>æŸ¥æ‰¾ä»»ä½•ä¸åœ¨æ–¹æ‹¬å·ä¹‹é—´çš„å­—ç¬¦</td></tr><tr><td><code>[0-9]</code></td><td>æŸ¥æ‰¾ä»»ä½•ä» <code>0</code> è‡³ <code>9</code> çš„æ•°å­—</td></tr><tr><td><code>[a-z]</code></td><td>æŸ¥æ‰¾ä»»ä½•ä»å°å†™ <code>a</code> è‡³å°å†™ <code>a</code> çš„å­—ç¬¦</td></tr><tr><td><code>()</code></td><td>åŒ¹é…ä¸€ä¸ªå­è¡¨è¾¾å¼çš„å¼€å§‹å’Œç»“æŸä½ç½®</td></tr></tbody></table><p>å…ƒå­—ç¬¦ï¼šæ‹¥æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦</p><table><thead><tr><th>å…ƒå­—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>.</code></td><td>æŸ¥æ‰¾å•ä¸ªå­—ç¬¦ï¼Œé™¤äº†æ¢è¡Œå’Œè¡Œç»“æŸç¬¦</td></tr><tr><td><code>\w    </code></td><td>æŸ¥æ‰¾å•è¯å­—ç¬¦</td></tr><tr><td><code>\W</code></td><td>æŸ¥æ‰¾éå•æ¬¡å­—ç¬¦</td></tr><tr><td><code>\b</code></td><td>åŒ¹é…ä¸€ä¸ªå­—çš„è¾¹ç•Œï¼Œå³å­—ä¸ç©ºæ ¼é—´çš„ä½ç½®</td></tr><tr><td><code>\B    </code></td><td>éå­—ç¬¦è¾¹ç•ŒåŒ¹é…</td></tr><tr><td><code>\d</code></td><td>æŸ¥æ‰¾æ•°å­—</td></tr><tr><td><code>\D    </code></td><td>æŸ¥æ‰¾éæ•°å­—å­—ç¬¦</td></tr><tr><td><code>\s</code></td><td>æŸ¥æ‰¾ç©ºç™½å­—ç¬¦</td></tr><tr><td><code>\S</code></td><td>æŸ¥æ‰¾éç©ºç™½å­—ç¬¦</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> webç»¼åˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ­£åˆ™è¡¨è¾¾å¼ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
